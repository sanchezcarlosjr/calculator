import{S as qa,i as Ea,s as Oa,k as Me,l as Le,m as Be,h as pe,I as Nr,b as Wt,J as La,B as qe,K as Fr,L as Bo,M as Fn,n as de,G as ue,N as Io,O as Pr,P as Pn,a as Et,q as Ca,w as wi,c as Ot,r as Aa,x as _i,y as Si,f as rt,g as Vo,t as mt,d as jo,Q as Rn,z as Mi,R as In,T as Vn,p as jn}from"../../chunks/index-6a92d7be.js";function Ce(t){return Array.isArray(t)}function ie(){return"window"in globalThis&&"document"in globalThis}function gt(){if(!ie())throw new Error(`<math-field> is an interactive component that needs to run in a browser environment
If you are using nextjs, see https://nextjs.org/docs/advanced-features/dynamic-import#with-no-ssr`)}function no(){return!!ie()&&("matchMedia"in globalThis?globalThis.matchMedia("(any-pointer: coarse)").matches:"ontouchstart"in globalThis||navigator.maxTouchPoints>0)}function Ko(){return ie()&&typeof navigator.vibrate=="function"}function Da(){var t,e;if(!ie())return"other";const a=(e=(t=navigator.userAgentData)===null||t===void 0?void 0:t.platform)!==null&&e!==void 0?e:navigator.platform;return/^mac/i.test(a)?navigator.maxTouchPoints===5?"ios":"macos":/^win/i.test(a)?"windows":/android/i.test(navigator.userAgent)?"android":/iphone|ipod|ipad/i.test(navigator.userAgent)?"ios":/\bcros\b/i.test(navigator.userAgent)?"chromeos":"other"}function Rr(){if(!ie())return!0;if(/firefox/i.test(navigator.userAgent)){const t=navigator.userAgent.match(/firefox\/(\d+)/i);return!!t&&parseInt(t[1])>=78}if(/trident/i.test(navigator.userAgent))return!1;if(/edge/i.test(navigator.userAgent)){const t=navigator.userAgent.match(/edg\/(\d+)/i);return!!t&&parseInt(t[1])>=79}return!0}const ae={strings:{en:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"Symbols","keyboard.tooltip.greek":"Greek Letters","keyboard.tooltip.command":"LaTeX Command Mode","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.roman":"Roman Letters","tooltip.copy to clipboard":"Copy to Clipboard","tooltip.redo":"Redo","tooltip.toggle virtual keyboard":"Toggle Virtual Keyboard","tooltip.undo":"Undo","menu.insert matrix":"Insert Matrix","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"Matrix Delimiters","menu.array.add row above":"Add Row After","menu.array.add row below":"Add Row Before","menu.array.add column after":"Add Column After","menu.array.add column before":"Add Column Before","menu.array.delete row":"Delete Row","menu.array.delete rows":"Delete Selected Rows","menu.array.delete column":"Delete Column","menu.array.delete columns":"Delete Selected Columns","submenu.array.insert separator":"Insert Separator","menu.insert table":"Insert Table","submenu.table style":"Table Style"},ar:{"keyboard.tooltip.functions":"مهام","keyboard.tooltip.symbols":"حرف او رمز","keyboard.tooltip.greek":"حروف يونانية","keyboard.tooltip.command":"حالة تلقي الأوامر اللاتك","keyboard.tooltip.numeric":"الرقمية","keyboard.tooltip.roman":"رموز الاحرف الرومانية","tooltip.copy to clipboard":"نسخ إلى الحافظة","tooltip.redo":"الإعادة","tooltip.toggle virtual keyboard":"تبديل لوحة المفاتيح الإفتراضية","tooltip.undo":"إلغاء","menu.insert matrix":"أدخل المصفوفة","menu.insert vector":"أدخل متجه","submenu.array.matrix delimiters":"محددات المصفوفة","menu.array.add row above":"أضف صفًا بعد ذلك","menu.array.add row below":"أضف الصف قبل","menu.array.add column after":"أضف العمود بعد ذلك","menu.array.add column before":"أضف العمود قبل","menu.array.delete row":"احذف صف","menu.array.delete rows":"حذف الصفوف المحددة","menu.array.delete column":"حذف العمود","menu.array.delete columns":"حذف الأعمدة المحددة","submenu.array.insert separator":"أدخل فاصل","menu.insert table":"إدراج جدول","submenu.table style":"نمط الجدول"},bg:{"keyboard.tooltip.functions":"Функции","keyboard.tooltip.symbols":"Символи","keyboard.tooltip.greek":"Гръцки букви","keyboard.tooltip.command":"Команден режим на латекс","keyboard.tooltip.numeric":"Числови","keyboard.tooltip.roman":"Римски букви","tooltip.copy to clipboard":"Копиране в клипборда","tooltip.redo":"Повторно","tooltip.toggle virtual keyboard":"Превключване на виртуална клавиатура","tooltip.undo":"Отмяна","menu.insert matrix":"Вмъкване на матрица","menu.insert vector":"Вмъкване на вектор","submenu.array.matrix delimiters":"Матрични разделители","menu.array.add row above":"Добавяне на ред след","menu.array.add row below":"Добавяне на ред преди","menu.array.add column after":"Добавяне на колона след","menu.array.add column before":"Добавяне на колона преди","menu.array.delete row":"Изтриване на реда","menu.array.delete rows":"Изтриване на избраните редове","menu.array.delete column":"Изтриване на колона","menu.array.delete columns":"Изтриване на избраните колони","submenu.array.insert separator":"Поставете разделител","menu.insert table":"Вмъкване на таблица","submenu.table style":"Табличен стил"},bs:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Grčka slova","keyboard.tooltip.command":"LaTeX naredbeni način","keyboard.tooltip.numeric":"Numerički","keyboard.tooltip.roman":"Rimska slova","tooltip.copy to clipboard":"Kopirati u clipboard","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Uključi / isključi virtualnu tipkovnicu","tooltip.undo":"Poništi","menu.insert matrix":"Umetni matricu","menu.insert vector":"Umetni vektor","submenu.array.matrix delimiters":"Matrični razdjelnici","menu.array.add row above":"Dodaj redak nakon","menu.array.add row below":"Dodaj red prije","menu.array.add column after":"Dodaj stupac nakon","menu.array.add column before":"Dodaj stupac prije","menu.array.delete row":"Izbriši red","menu.array.delete rows":"Izbriši odabrane redove","menu.array.delete column":"Izbriši stupac","menu.array.delete columns":"Izbriši odabrane stupce","submenu.array.insert separator":"Umetni separator","menu.insert table":"Ubaci tabelu","submenu.table style":"Stil tabele"},cs:{"keyboard.tooltip.functions":"Funkce","keyboard.tooltip.symbols":"Symboly","keyboard.tooltip.greek":"Řecké dopisy","keyboard.tooltip.command":"Příkazový režim LaTeX","keyboard.tooltip.numeric":"Číselné","keyboard.tooltip.roman":"Římské dopisy","tooltip.copy to clipboard":"Zkopírovat do schránky","tooltip.redo":"Předělat","tooltip.toggle virtual keyboard":"Přepnout virtuální klávesnici","tooltip.undo":"Vrátit","menu.insert matrix":"Vložte matici","menu.insert vector":"Vložit vektor","submenu.array.matrix delimiters":"Oddělovače matic","menu.array.add row above":"Přidat řádek za","menu.array.add row below":"Přidat řádek před","menu.array.add column after":"Přidat sloupec za","menu.array.add column before":"Přidat sloupec dříve","menu.array.delete row":"Odstranit řádek","menu.array.delete rows":"Odstranit vybrané řádky","menu.array.delete column":"Odstranit sloupec","menu.array.delete columns":"Odstranit vybrané sloupce","submenu.array.insert separator":"Vložte oddělovač","menu.insert table":"Vložit tabulku","submenu.table style":"Styl tabulky"},da:{"keyboard.tooltip.functions":"Funktioner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Græske bogstaver","keyboard.tooltip.command":"LaTeX kommandotilstand","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.roman":"Romerske breve","tooltip.copy to clipboard":"Kopier til udklipsholder","tooltip.redo":"Gentag igen","tooltip.toggle virtual keyboard":"Skift virtuelt tastatur","tooltip.undo":"Fortryd","menu.insert matrix":"Indsæt matrix","menu.insert vector":"Indsæt vektor","submenu.array.matrix delimiters":"Matrixafgrænsere","menu.array.add row above":"Tilføj række efter","menu.array.add row below":"Tilføj række før","menu.array.add column after":"Tilføj kolonne efter","menu.array.add column before":"Tilføj kolonne før","menu.array.delete row":"Slet række","menu.array.delete rows":"Slet valgte rækker","menu.array.delete column":"Slet kolonne","menu.array.delete columns":"Slet valgte kolonner","submenu.array.insert separator":"Indsæt separator","menu.insert table":"Indsæt tabel","submenu.table style":"Tabelstil"},de:{"keyboard.tooltip.functions":"Funktionen","keyboard.tooltip.symbols":"Symbole","keyboard.tooltip.greek":"Griechische Buchstaben","keyboard.tooltip.command":"LaTeX-Befehlsmodus","keyboard.tooltip.numeric":"Numerisch","keyboard.tooltip.roman":"Römische Buchstaben","tooltip.copy to clipboard":"In die Zwischenablage kopieren","tooltip.redo":"Wiederholen","tooltip.toggle virtual keyboard":"Virtuelle Tastatur umschalten","tooltip.undo":"Widerrufen","menu.insert matrix":"Matrix einfügen","menu.insert vector":"Vektor einfügen","submenu.array.matrix delimiters":"Matrixtrennzeichen","menu.array.add row above":"Zeile hinzufügen nach","menu.array.add row below":"Zeile hinzufügen vor","menu.array.add column after":"Spalte hinzufügen nach","menu.array.add column before":"Spalte hinzufügen vor","menu.array.delete row":"Zeile löschen","menu.array.delete rows":"Ausgewählte Zeilen löschen","menu.array.delete column":"Spalte löschen","menu.array.delete columns":"Ausgewählte Spalten löschen","submenu.array.insert separator":"Trennzeichen einfügen","menu.insert table":"Tabelle einfügen","submenu.table style":"Tabellenstil"},el:{"keyboard.tooltip.functions":"συναρτήσεις","keyboard.tooltip.symbols":"σύμβολα","keyboard.tooltip.greek":"ελληνικά γράμματα","keyboard.tooltip.command":"Λειτουργία εντολών LaTeX","keyboard.tooltip.numeric":"Αριθμητικός","keyboard.tooltip.roman":"Ρωμαϊκά γράμματα","tooltip.copy to clipboard":"Αντιγραφή στο πρόχειρο","tooltip.redo":"Ξανακάνω","tooltip.toggle virtual keyboard":"Εναλλαγή εικονικού πληκτρολογίου","tooltip.undo":"Ξεκάνω","menu.insert matrix":"Εισαγωγή Matrix","menu.insert vector":"Εισαγωγή διανύσματος","submenu.array.matrix delimiters":"Οριοθέτες Matrix","menu.array.add row above":"Προσθήκη σειράς μετά","menu.array.add row below":"Προσθήκη σειράς πριν","menu.array.add column after":"Προσθήκη στήλης μετά","menu.array.add column before":"Προσθήκη στήλης πριν","menu.array.delete row":"Διαγραφή σειράς","menu.array.delete rows":"Διαγραφή επιλεγμένων σειρών","menu.array.delete column":"Διαγραφή στήλης","menu.array.delete columns":"Διαγραφή επιλεγμένων στηλών","submenu.array.insert separator":"Εισαγωγή διαχωριστικού","menu.insert table":"Εισαγωγή πίνακα","submenu.table style":"Στυλ πίνακα"},es:{"keyboard.tooltip.functions":"Funciones","keyboard.tooltip.symbols":"Símbolos","keyboard.tooltip.greek":"Letras griegas","keyboard.tooltip.command":"Modo Comando LaTeX","keyboard.tooltip.numeric":"Numérico","keyboard.tooltip.roman":"Letras romanas","tooltip.copy to clipboard":"Copiar al portapapeles","tooltip.redo":"Rehacer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Deshacer","menu.insert matrix":"Añadir Matriz","menu.insert vector":"Añadir vector","submenu.array.matrix delimiters":"Delimitadores de Matriz","menu.array.add row above":"Añadir Línea Antes","menu.array.add row below":"Añadir Línea Despues","menu.array.add column after":"Añadir Columna Despues","menu.array.add column before":"Añadir Columna Antes","menu.array.delete row":"Borrar Línea","menu.array.delete rows":"Borrar Líneas Seleccionadas","menu.array.delete column":"Borrar Columna","menu.array.delete columns":"Borrar Columnas Seleccionadas","submenu.array.insert separator":"Insertar un Separador","menu.insert table":"Insertar Tabla","submenu.table style":"Estilo de Tabla"},et:{"keyboard.tooltip.functions":"Funktsioonid","keyboard.tooltip.symbols":"Sümbolid","keyboard.tooltip.greek":"Kreeka kirjad","keyboard.tooltip.command":"LaTeXi käsurežiim","keyboard.tooltip.numeric":"Numbriline","keyboard.tooltip.roman":"Rooma kirjad","tooltip.copy to clipboard":"Kopeerida lõikelauale","tooltip.redo":"Tee uuesti","tooltip.toggle virtual keyboard":"Lülitage sisse virtuaalne klaviatuur","tooltip.undo":"Võta tagasi","menu.insert matrix":"Sisesta maatriks","menu.insert vector":"Sisesta vektor","submenu.array.matrix delimiters":"Maatriksi eraldajad","menu.array.add row above":"Lisa rida pärast","menu.array.add row below":"Lisa rida enne","menu.array.add column after":"Lisa veerg pärast","menu.array.add column before":"Lisa veerg enne","menu.array.delete row":"Kustuta rida","menu.array.delete rows":"Kustuta valitud read","menu.array.delete column":"Kustuta veerg","menu.array.delete columns":"Kustuta valitud veerud","submenu.array.insert separator":"Sisestage eraldaja","menu.insert table":"Sisesta tabeli","submenu.table style":"Tabeli stiilis"},fa:{"keyboard.tooltip.functions":"توابع","keyboard.tooltip.symbols":"نمادها","keyboard.tooltip.greek":"حروف یونانی","keyboard.tooltip.command":"حالت دستور لاتک","keyboard.tooltip.numeric":"عددی","keyboard.tooltip.roman":"حروف رومی","tooltip.copy to clipboard":"کپی به کلیپبورد","tooltip.redo":"بازگشت به بعد","tooltip.toggle virtual keyboard":"نمایش/نهفتن کیبورد مجازی","tooltip.undo":"بازگشت به قبل","menu.insert matrix":"ماتریس را وارد کنید","menu.insert vector":"درج بردار","submenu.array.matrix delimiters":"مرزهای ماتریس","menu.array.add row above":"بعد از آن ردیف اضافه کنید","menu.array.add row below":"ردیف را قبل اضافه کنید","menu.array.add column after":"اضافه کردن ستون بعد","menu.array.add column before":"ستون قبل را اضافه کنید","menu.array.delete row":"ردیف را حذف کنید","menu.array.delete rows":"ردیف های انتخاب شده را حذف کنید","menu.array.delete column":"حذف ستون","menu.array.delete columns":"ستون های انتخاب شده را حذف کنید","submenu.array.insert separator":"درج جدا کننده","menu.insert table":"قرار دادن جدول","submenu.table style":"سبک میز"},fi:{"keyboard.tooltip.functions":"Toiminnot","keyboard.tooltip.symbols":"Symbolit","keyboard.tooltip.greek":"Kreikkalaiset kirjeet","keyboard.tooltip.command":"LaTeX-komentotila","keyboard.tooltip.numeric":"Numeerinen","keyboard.tooltip.roman":"Roomalaiset kirjeet","tooltip.copy to clipboard":"Kopioi leikepöydälle","tooltip.redo":"Tee uudelleen","tooltip.toggle virtual keyboard":"Vaihda virtuaalinäppäimistö","tooltip.undo":"Kumoa","menu.insert matrix":"Lisää matriisi","menu.insert vector":"Lisää vektori","submenu.array.matrix delimiters":"Matriisin erottimet","menu.array.add row above":"Lisää rivi jälkeen","menu.array.add row below":"Lisää rivi ennen","menu.array.add column after":"Lisää sarake jälkeen","menu.array.add column before":"Lisää sarake ennen","menu.array.delete row":"Poista rivi","menu.array.delete rows":"Poista valitut rivit","menu.array.delete column":"Poista sarake","menu.array.delete columns":"Poista valitut sarakkeet","submenu.array.insert separator":"Aseta erotin","menu.insert table":"Lisää taulukko","submenu.table style":"Taulukon tyyli"},fr:{"keyboard.tooltip.functions":"Fonctions","keyboard.tooltip.symbols":"Symboles","keyboard.tooltip.greek":"Lettres grecques","keyboard.tooltip.command":"Mode de commandes LaTeX","keyboard.tooltip.numeric":"Numérique","keyboard.tooltip.roman":"Lettres romaines","tooltip.copy to clipboard":"Copier dans le presse-papiers","tooltip.redo":"Rétablir","tooltip.toggle virtual keyboard":"Afficher/Masquer le clavier virtuel","tooltip.undo":"Annuler","menu.insert matrix":"Insérer une Matrice","menu.insert vector":"Insérer un Vecteur","submenu.array.matrix delimiters":"Délimiteurs de la Matrice","menu.array.add row above":"Ajouter une Ligne Avant","menu.array.add row below":"Ajouter une Ligne Après","menu.array.add column before":"Ajouter une Colonne Avant","menu.array.add column after":"Ajouter une Colonne Après","menu.array.delete row":"Enlever une Ligne","menu.array.delete rows":"Enlever les Lignes Sélectionées","menu.array.delete column":"Enlever une Colone","menu.array.delete columns":"Enlever les Colonnes Sélectionées","submenu.array.insert separator":"Insérer un Séparateur","menu.insert table":"Insérer une Table","submenu.table style":"Style de la  Table"},ga:{"keyboard.tooltip.functions":"Feidhmeanna","keyboard.tooltip.symbols":"Siombailí","keyboard.tooltip.greek":"Litreacha na Gréige","keyboard.tooltip.command":"Mód Ordú LaTeX","keyboard.tooltip.numeric":"Uimhriúil","keyboard.tooltip.roman":"Litreacha Rómhánacha","tooltip.copy to clipboard":"Cóipeáil chuig an Ghearrthaisce","tooltip.redo":"Athdhéan","tooltip.toggle virtual keyboard":"Méarchláir Fíorúil a Fháil","tooltip.undo":"Cealaigh","menu.insert matrix":"Cuir isteach Maitrís","menu.insert vector":"Cuir isteach Veicteoir","submenu.array.matrix delimiters":"Delimiters Maitrís","menu.array.add row above":"Cuir Rae Tar éis","menu.array.add row below":"Cuir Rae Roimh","menu.array.add column after":"Cuir Colún Tar éis","menu.array.add column before":"Cuir Colún Roimh","menu.array.delete row":"Scrios Rae","menu.array.delete rows":"Scrios Sraitheanna Roghnaithe","menu.array.delete column":"Scrios Colún","menu.array.delete columns":"Scrios Colúin Roghnaithe","submenu.array.insert separator":"Cuir Deighilteoir isteach","menu.insert table":"Ionsáigh Tábla","submenu.table style":"Stíl Tábla"},he:{"keyboard.tooltip.functions":"פונקציות","keyboard.tooltip.symbols":"סמלים","keyboard.tooltip.greek":"אותיות יווניות","keyboard.tooltip.command":"מצב פקודה לטקס","keyboard.tooltip.numeric":"מספרי","keyboard.tooltip.roman":"מכתבים רומיים","tooltip.copy to clipboard":"העתק ללוח","tooltip.redo":"לַעֲשׂוֹת שׁוּב","tooltip.toggle virtual keyboard":"החלף את המקלדת הווירטואלית","tooltip.undo":"לבטל","menu.insert matrix":"הכנס מטריקס","menu.insert vector":"הכנס וקטור","submenu.array.matrix delimiters":"מפרידי מטריקס","menu.array.add row above":"הוסף שורה אחרי","menu.array.add row below":"הוסף שורה לפני","menu.array.add column after":"הוסף עמודה אחרי","menu.array.add column before":"הוסף עמודה לפני","menu.array.delete row":"מחק שורה","menu.array.delete rows":"מחק שורות שנבחרו","menu.array.delete column":"מחק עמודה","menu.array.delete columns":"מחק עמודות שנבחרו","submenu.array.insert separator":"הכנס מפריד","menu.insert table":"הכנס טבלה","submenu.table style":"טבלה סִגְנוֹן"},hr:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Grčka slova","keyboard.tooltip.command":"LaTeX naredbeni način","keyboard.tooltip.numeric":"Numerički","keyboard.tooltip.roman":"Rimska slova","tooltip.copy to clipboard":"Kopirati u međuspremnik","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Uključi / isključi virtualnu tipkovnicu","tooltip.undo":"Poništi","menu.insert matrix":"Umetni matricu","menu.insert vector":"Umetni vektor","submenu.array.matrix delimiters":"Matrični razdjelnici","menu.array.add row above":"Dodaj redak nakon","menu.array.add row below":"Dodaj redak prije","menu.array.add column after":"Dodaj stupac nakon","menu.array.add column before":"Dodaj stupac prije","menu.array.delete row":"Izbriši redak","menu.array.delete rows":"Izbriši odabrane retke","menu.array.delete column":"Izbriši stupac","menu.array.delete columns":"Izbriši odabrane stupce","submenu.array.insert separator":"Umetni separator","menu.insert table":"Umetni tablicu","submenu.table style":"Stil tabele"},id:{"keyboard.tooltip.functions":"Fungsi","keyboard.tooltip.symbols":"Simbol","keyboard.tooltip.greek":"Huruf Yunani","keyboard.tooltip.command":"Mode Perintah LaTeX","keyboard.tooltip.numeric":"Numerik","keyboard.tooltip.roman":"Surat Romawi","tooltip.copy to clipboard":"Menyalin ke clipboard","tooltip.redo":"Mengulangi","tooltip.toggle virtual keyboard":"Alihkan Keyboard Virtual","tooltip.undo":"Membuka","menu.insert matrix":"Sisipkan Matriks","menu.insert vector":"Sisipkan Vektor","submenu.array.matrix delimiters":"Pembatas Matriks","menu.array.add row above":"Tambahkan Baris Setelah","menu.array.add row below":"Tambahkan Baris Sebelumnya","menu.array.add column after":"Tambahkan Kolom Setelah","menu.array.add column before":"Tambahkan Kolom Sebelumnya","menu.array.delete row":"Hapus Baris","menu.array.delete rows":"Hapus Baris yang Dipilih","menu.array.delete column":"Hapus Kolom","menu.array.delete columns":"Hapus Kolom yang Dipilih","submenu.array.insert separator":"Sisipkan Pemisah","menu.insert table":"Sisipkan Tabel","submenu.table style":"Gaya Tabel"},hi:{"keyboard.tooltip.functions":"कार्यों","keyboard.tooltip.symbols":"प्रतीक","keyboard.tooltip.greek":"ग्रीक अक्षर","keyboard.tooltip.command":"लाटेक्स कमांड मोड","keyboard.tooltip.numeric":"संख्यात्मक","keyboard.tooltip.roman":"रोमन पत्र","tooltip.copy to clipboard":"क्लिपबोर्ड पर कॉपी करें","tooltip.redo":"फिर से करें","tooltip.toggle virtual keyboard":"वर्चुअल कीबोर्ड टॉगल करें","tooltip.undo":"पूर्ववत","menu.insert matrix":"मैट्रिक्स डालें","menu.insert vector":"वेक्टर डालें","submenu.array.matrix delimiters":"मैट्रिक्स सीमांकक","menu.array.add row above":"बाद में पंक्ति जोड़ें","menu.array.add row below":"पहले पंक्ति जोड़ें","menu.array.add column after":"बाद में कॉलम जोड़ें","menu.array.add column before":"पहले कॉलम जोड़ें","menu.array.delete row":"पंक्ति को हटाएं","menu.array.delete rows":"चयनित पंक्तियों को हटाएं","menu.array.delete column":"कॉलम हटाएं","menu.array.delete columns":"चयनित कॉलम हटाएं","submenu.array.insert separator":"विभाजक डालें","menu.insert table":"टेबल इंसर्ट करें","submenu.table style":"टेबल स्टाइल"},hu:{"keyboard.tooltip.functions":"Funkciók","keyboard.tooltip.symbols":"Szimbólumok","keyboard.tooltip.greek":"Görög levelek","keyboard.tooltip.command":"LaTeX Parancs mód","keyboard.tooltip.numeric":"Numerikus","keyboard.tooltip.roman":"Római levelek","tooltip.copy to clipboard":"Másolja a vágólapra","tooltip.redo":"Újra","tooltip.toggle virtual keyboard":"Váltás a virtuális billentyűzetre","tooltip.undo":"Visszavonás","menu.insert matrix":"Helyezze be a Mátrixot","menu.insert vector":"Vektor beszúrása","submenu.array.matrix delimiters":"Mátrixhatárolók","menu.array.add row above":"Sor hozzáadása után","menu.array.add row below":"Add Add Sor előtt","menu.array.add column after":"Oszlop hozzáadása után","menu.array.add column before":"Add oszlop előtt","menu.array.delete row":"Sor törlése","menu.array.delete rows":"Kijelölt sorok törlése","menu.array.delete column":"Oszlop törlése","menu.array.delete columns":"A kijelölt oszlopok törlése","submenu.array.insert separator":"Helyezze be az elválasztót","menu.insert table":"Helyezze be a táblázatot","submenu.table style":"Táblázatos stílus"},it:{"keyboard.tooltip.functions":"Funzioni","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Lettere greche","keyboard.tooltip.command":"Modalità di comando LaTeX","keyboard.tooltip.numeric":"Numerico","keyboard.tooltip.roman":"Lettere romane","tooltip.copy to clipboard":"Copia negli appunti","tooltip.redo":"Rifare","tooltip.toggle virtual keyboard":"Attiva / disattiva la tastiera virtuale","tooltip.undo":"Disfare","menu.insert matrix":"Inserisci una Matrice","menu.insert vector":"Inserisci Vettore","submenu.array.matrix delimiters":"Delimitatori di Matrice","menu.array.add row above":"Aggiungi una Riga Prima","menu.array.add row below":"Aggiungi una Riga Dopo","menu.array.add column before":"Aggiungi una Colonna Prima","menu.array.add column after":"Aggiungi una Colonna Dopo","menu.array.delete row":"Rimuovi una Riga","menu.array.delete rows":"Rimuovi le Righe Selezionate","menu.array.delete column":"Rimuovi una Colonna","menu.array.delete columns":"Rimuovi le Colonne Selezionate","submenu.array.insert separator":"Inserisci un Separatore","menu.insert table":"Inserisci Tabella","submenu.table style":"Stile tabella"},is:{"keyboard.tooltip.functions":"Aðgerðir","keyboard.tooltip.symbols":"Tákn","keyboard.tooltip.greek":"Grísk bréf","keyboard.tooltip.command":"LaTeX stjórnunarstilling","keyboard.tooltip.numeric":"Tölulegt","keyboard.tooltip.roman":"Rómversk bréf","tooltip.copy to clipboard":"Afritaðu á klemmuspjald","tooltip.redo":"Endurtaka","tooltip.toggle virtual keyboard":"Skiptu um sýndarlyklaborð","tooltip.undo":"Afturkalla","menu.insert matrix":"Settu fylki inn","menu.insert vector":"Settu inn Vector","submenu.array.matrix delimiters":"Matrix afmörkun","menu.array.add row above":"Bæta við röð á eftir","menu.array.add row below":"Bæta við röð áður","menu.array.add column after":"Bæta við dálki á eftir","menu.array.add column before":"Bæta við dálki áður","menu.array.delete row":"Eyða röð","menu.array.delete rows":"Eyða völdum línum","menu.array.delete column":"Eyða dálki","menu.array.delete columns":"Eyða völdum dálkum","submenu.array.insert separator":"Settu skiljuna í","menu.insert table":"Settu inn töflu","submenu.table style":"Töflu stíl"},ja:{"keyboard.tooltip.functions":"関数","keyboard.tooltip.symbols":"シンボル","keyboard.tooltip.greek":"ギリシャ文字","keyboard.tooltip.command":"ラテックスコマンドモード","keyboard.tooltip.numeric":"数値","keyboard.tooltip.roman":"ローマ字","tooltip.copy to clipboard":"クリップボードにコピー","tooltip.redo":"やり直し","tooltip.toggle virtual keyboard":"仮想キーボードの切り替え","tooltip.undo":"元に戻す","menu.insert matrix":"マトリックスを挿入","menu.insert vector":"ベクトルを挿入","submenu.array.matrix delimiters":"行列区切り文字","menu.array.add row above":"後に行を追加","menu.array.add row below":"前に行を追加","menu.array.add column after":"後に列を追加","menu.array.add column before":"前に列を追加","menu.array.delete row":"行を削除","menu.array.delete rows":"選択した行を削除する","menu.array.delete column":"列を削除","menu.array.delete columns":"選択した列を削除する","submenu.array.insert separator":"セパレーターを挿入","menu.insert table":"テーブルを挿入","submenu.table style":"テーブルスタイル"},ko:{"keyboard.tooltip.functions":"기능","keyboard.tooltip.symbols":"기호","keyboard.tooltip.greek":"그리스 문자","keyboard.tooltip.command":"유액 명령 모드","keyboard.tooltip.numeric":"숫자","keyboard.tooltip.roman":"로마 문자","tooltip.copy to clipboard":"클립 보드에 복사","tooltip.redo":"다시 하다","tooltip.toggle virtual keyboard":"가상 키보드 전환","tooltip.undo":"실행 취소","menu.insert matrix":"매트릭스 삽입","menu.insert vector":"벡터 삽입","submenu.array.matrix delimiters":"행렬 구분 기호","menu.array.add row above":"뒤에 행 추가","menu.array.add row below":"앞에 행 추가","menu.array.add column after":"뒤에 열 추가","menu.array.add column before":"앞에 열 추가","menu.array.delete row":"행 삭제","menu.array.delete rows":"선택한 행 삭제","menu.array.delete column":"열 삭제","menu.array.delete columns":"선택한 열 삭제","submenu.array.insert separator":"구분자 삽입","menu.insert table":"표 삽입","submenu.table style":"테이블 스타일"},lv:{"keyboard.tooltip.functions":"Funkcijas","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Grieķu burti","keyboard.tooltip.command":"LaTeX komandu režīms","keyboard.tooltip.numeric":"Ciparu skaitlis","keyboard.tooltip.roman":"Romiešu vēstules","tooltip.copy to clipboard":"Kopēt starpliktuvē","tooltip.redo":"Pārtaisīt","tooltip.toggle virtual keyboard":"Pārslēgt virtuālo tastatūru","tooltip.undo":"Atsaukt","menu.insert matrix":"Ievietojiet matricu","menu.insert vector":"Ievietot vektoru","submenu.array.matrix delimiters":"Matricas norobežotāji","menu.array.add row above":"Pievienot rindu pēc","menu.array.add row below":"Pievienot rindu pirms","menu.array.add column after":"Pievienot kolonnu pēc","menu.array.add column before":"Pievienot kolonnu pirms","menu.array.delete row":"Dzēst rindu","menu.array.delete rows":"Dzēst atlasītās rindas","menu.array.delete column":"Dzēst kolonnu","menu.array.delete columns":"Dzēst atlasītās kolonnas","submenu.array.insert separator":"Ievietojiet atdalītāju","menu.insert table":"Ievietojiet tabulu","submenu.table style":"Galda stils"},lt:{"keyboard.tooltip.functions":"Funkcijos","keyboard.tooltip.symbols":"Simboliai","keyboard.tooltip.greek":"Graikiškos raidės","keyboard.tooltip.command":"LaTeX komandų režimas","keyboard.tooltip.numeric":"Skaitmeninis","keyboard.tooltip.roman":"Romos laiškai","tooltip.copy to clipboard":"Nukopijuoti į iškarpinę","tooltip.redo":"Perdaryti","tooltip.toggle virtual keyboard":"Perjungti virtualiąją klaviatūrą","tooltip.undo":"Atšaukti","menu.insert matrix":"Ievietojiet matricu","menu.insert vector":"Ievietot vektoru","submenu.array.matrix delimiters":"Matricas norobežotāji","menu.array.add row above":"Pievienot rindu pēc","menu.array.add row below":"Pievienot rindu pirms","menu.array.add column after":"Pievienot kolonnu pēc","menu.array.add column before":"Pievienot kolonnu pirms","menu.array.delete row":"Dzēst rindu","menu.array.delete rows":"Dzēst atlasītās rindas","menu.array.delete column":"Dzēst kolonnu","menu.array.delete columns":"Dzēst atlasītās kolonnas","submenu.array.insert separator":"Ievietojiet atdalītāju","menu.insert table":"Ievietojiet tabulu","submenu.table style":"Tabulas stili"},lu:{"keyboard.tooltip.functions":"Funktiounen","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Griichesch Bréiwer","keyboard.tooltip.command":"LaTeX Kommando Modus","keyboard.tooltip.numeric":"Numeresch","keyboard.tooltip.roman":"Réimesch Bréiwer","tooltip.copy to clipboard":"Kopéiert op Clipboard","tooltip.redo":"Nees nei maachen","tooltip.toggle virtual keyboard":"Wiesselt Virtuell Tastatur","tooltip.undo":"Undoen","menu.insert matrix":"Matrix asetzen","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"Matrix Ofgrenzer","menu.array.add row above":"Dobäizemaachen Rei No","menu.array.add row below":"Füügt Rei vir","menu.array.add column after":"Dobäizemaachen Kolonn No","menu.array.add column before":"Kolonn derbäi Virun","menu.array.delete row":"Rad läschen","menu.array.delete rows":"Läscht Ausgewielte Reien","menu.array.delete column":"Läscht Kolonn","menu.array.delete columns":"Läscht Ausgewielte Kolonnen","submenu.array.insert separator":"Insert Separator","menu.insert table":"Dësch anzeginn","submenu.table style":"Dësch Style"},nl:{"keyboard.tooltip.functions":"Functies","keyboard.tooltip.symbols":"Symbolen","keyboard.tooltip.greek":"Griekse letters","keyboard.tooltip.command":"LaTeX commando mode","keyboard.tooltip.numeric":"Numeriek","keyboard.tooltip.roman":"Romeinse letters","tooltip.copy to clipboard":"Kopiëren naar klembord","tooltip.redo":"Opnieuw","tooltip.toggle virtual keyboard":"Schakel naar virtueel toetsenbord","tooltip.undo":"Ongedaan maken","menu.insert matrix":"Matrix invoegen","menu.insert vector":"Vector invoegen","submenu.array.matrix delimiters":"Matrixscheidingstekens","menu.array.add row above":"Rij toevoegen na","menu.array.add row below":"Rij toevoegen eerder","menu.array.add column after":"Kolom toevoegen na","menu.array.add column before":"Kolom toevoegen voor","menu.array.delete row":"Verwijder rij","menu.array.delete rows":"Geselecteerde rijen verwijderen","menu.array.delete column":"Kolom verwijderen","menu.array.delete columns":"Geselecteerde kolommen verwijderen","submenu.array.insert separator":"Scheidingsteken invoegen","menu.insert table":"Tabel invoegen","submenu.table style":"Tabelstijl"},no:{"keyboard.tooltip.functions":"Funksjoner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Greske bokstaver","keyboard.tooltip.command":"LaTeX kommandomodus","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.roman":"Romerske bokstaver","tooltip.copy to clipboard":"Kopiere til utklippstavle","tooltip.redo":"Gjøre om","tooltip.toggle virtual keyboard":"Bytt virtuelt tastatur","tooltip.undo":"Angre","menu.insert matrix":"Sett inn matrise","menu.insert vector":"Sett inn vektor","submenu.array.matrix delimiters":"Matrix avgrensere","menu.array.add row above":"Legg til rad etter","menu.array.add row below":"Legg til rad før","menu.array.add column after":"Legg til kolonne etter","menu.array.add column before":"Legg til kolonne før","menu.array.delete row":"Slett rad","menu.array.delete rows":"Slett valgte rader","menu.array.delete column":"Slett kolonne","menu.array.delete columns":"Slett valgte kolonner","submenu.array.insert separator":"Sett inn skilletegn","menu.insert table":"Sett inn tabell","submenu.table style":"Tabellstil"},mk:{"keyboard.tooltip.functions":"Функции","keyboard.tooltip.symbols":"Симболи","keyboard.tooltip.greek":"Грчки букви","keyboard.tooltip.command":"Режим на команда во латекс","keyboard.tooltip.numeric":"Нумерички","keyboard.tooltip.roman":"Римски писма","tooltip.copy to clipboard":"Копирајте во клипборд","tooltip.redo":"Повторно","tooltip.toggle virtual keyboard":"Вклучете ја виртуелната тастатура","tooltip.undo":"Врати","menu.insert matrix":"Вметнете матрица","menu.insert vector":"Вметни вектор","submenu.array.matrix delimiters":"Разграничувачи на матрица","menu.array.add row above":"Додадете ред после","menu.array.add row below":"Додади ред пред тоа","menu.array.add column after":"Додадете колона после","menu.array.add column before":"Додадете колона пред тоа","menu.array.delete row":"Избриши го редот","menu.array.delete rows":"Избришете ги избраните редови","menu.array.delete column":"Избриши ја колоната","menu.array.delete columns":"Избриши ја колоната","submenu.array.insert separator":"Вметнете сепаратор","menu.insert table":"Вметни табела","submenu.table style":"Табела стил"},pl:{"keyboard.tooltip.functions":"Funkcje","keyboard.tooltip.symbols":"Symbolika","keyboard.tooltip.greek":"Litery greckie","keyboard.tooltip.command":"Tryb poleceń LaTeX","keyboard.tooltip.numeric":"Numeryczne","keyboard.tooltip.roman":"Litery rzymskie","tooltip.copy to clipboard":"Kopiuj do Schowka","tooltip.redo":"Przywróć","tooltip.toggle virtual keyboard":"Przełącz wirtualną klawiaturę","tooltip.undo":"Cofnij","menu.insert matrix":"Wstaw macierz","menu.insert vector":"Wstaw wektor","submenu.array.matrix delimiters":"Ograniczniki macierzy","menu.array.add row above":"Dodaj wiersz po","menu.array.add row below":"Dodaj wiersz przed","menu.array.add column after":"Dodaj kolumnę po","menu.array.add column before":"Dodaj kolumnę przed","menu.array.delete row":"Usuń wiersz","menu.array.delete rows":"Usuń wybrane wiersze","menu.array.delete column":"Usuń kolumnę","menu.array.delete columns":"Usuń wybrane kolumny","submenu.array.insert separator":"Wstaw separator","menu.insert table":"Wypełnij tabelę","submenu.table style":"Styl tabelę"},pt:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"Símbolos","keyboard.tooltip.greek":"Letras gregas","keyboard.tooltip.command":"Modo de Comando LaTeX","keyboard.tooltip.numeric":"Numérico","keyboard.tooltip.roman":"Letras romanas","tooltip.copy to clipboard":"Copiar para área de transferência","tooltip.redo":"Refazer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Desfazer","menu.insert matrix":"Inserir Matriz","menu.insert vector":"Inserir vetor","submenu.array.matrix delimiters":"Delimitadores de matriz","menu.array.add row above":"Adicionar linha depois","menu.array.add row below":"Adicionar linha antes","menu.array.add column after":"Adicionar coluna depois","menu.array.add column before":"Adicionar coluna antes","menu.array.delete row":"Excluir linha","menu.array.delete rows":"Excluir linhas selecionadas","menu.array.delete column":"Apagar Coluna","menu.array.delete columns":"Excluir Colunas Selecionadas","submenu.array.insert separator":"Inserir Separador","menu.insert table":"Insira a tabela","submenu.table style":"Estilo tabela"},ro:{"keyboard.tooltip.functions":"Funcții","keyboard.tooltip.symbols":"Simboluri","keyboard.tooltip.greek":"Scrisori grecești","keyboard.tooltip.command":"Modul de comandă latex","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.roman":"Scrisori romane","tooltip.copy to clipboard":"Copiați în clipboard","tooltip.redo":"A reface","tooltip.toggle virtual keyboard":"Comutați tastatura virtuală","tooltip.undo":"Anula","menu.insert matrix":"Introduceți Matrix","menu.insert vector":"Inserați Vector","submenu.array.matrix delimiters":"Delimitatori de matrice","menu.array.add row above":"Adăugați rândul după","menu.array.add row below":"Adăugați rândul înainte","menu.array.add column after":"Adăugați o coloană după","menu.array.add column before":"Adăugați o coloană înainte","menu.array.delete row":"Ștergeți rândul","menu.array.delete rows":"Ștergeți rândurile selectate","menu.array.delete column":"Ștergeți coloana","menu.array.delete columns":"Ștergeți coloanele selectate","submenu.array.insert separator":"Introduceți separatorul","menu.insert table":"Introduceți tabelul","submenu.table style":"Table style"},ru:{"keyboard.tooltip.functions":"Функции","keyboard.tooltip.symbols":"Символы","keyboard.tooltip.greek":"Греческие буквы","keyboard.tooltip.command":"Режим командной строки Латекс","keyboard.tooltip.numeric":"числовой","keyboard.tooltip.roman":"Латинские буквы","tooltip.copy to clipboard":"Скопировать в буфер обмена","tooltip.redo":"переделывать","tooltip.toggle virtual keyboard":"Переключить виртуальную клавиатуру","tooltip.undo":"расстегивать","menu.insert matrix":"Вставить матрицу","menu.insert vector":"Вставить вектор","submenu.array.matrix delimiters":"Матричные разделители","menu.array.add row above":"Добавить строку после","menu.array.add row below":"Добавить строку перед","menu.array.add column after":"Добавить столбец после","menu.array.add column before":"Добавить столбец перед","menu.array.delete row":"Удалить строку","menu.array.delete rows":"Удалить выбранные строки","menu.array.delete column":"Удалить столбец","menu.array.delete columns":"Удалить выбранные столбцы","submenu.array.insert separator":"Вставить разделитель","menu.insert table":"Вставить таблицу","submenu.table style":"Табличный стиль"},sk:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"Symboly","keyboard.tooltip.greek":"Grécke listy","keyboard.tooltip.command":"Príkazový režim LaTeX","keyboard.tooltip.numeric":"Numerické","keyboard.tooltip.roman":"Rímske listy","tooltip.copy to clipboard":"Skopírovať do schránky","tooltip.redo":"Znova","tooltip.toggle virtual keyboard":"Prepnúť virtuálnu klávesnicu","tooltip.undo":"Vrátenie späť","menu.insert matrix":"Vložte maticu","menu.insert vector":"Vložte vektor","submenu.array.matrix delimiters":"Oddeľovače matíc","menu.array.add row above":"Pridajte riadok za","menu.array.add row below":"Pridajte riadok pred","menu.array.add column after":"Pridať stĺpec za","menu.array.add column before":"Pridajte stĺpec predtým","menu.array.delete row":"Odstrániť riadok","menu.array.delete rows":"Odstrániť vybraté riadky","menu.array.delete column":"Odstrániť stĺpec","menu.array.delete columns":"Odstrániť vybraté stĺpce","submenu.array.insert separator":"Vložte oddeľovač","menu.insert table":"Vložte tabuľku","submenu.table style":"Štýl tabuľky"},sl:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Grška pisma","keyboard.tooltip.command":"Ukazni način LaTeX","keyboard.tooltip.numeric":"Številsko","keyboard.tooltip.roman":"Rimska pisma","tooltip.copy to clipboard":"Kopirati v odložišče","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Preklop navidezne tipkovnice","tooltip.undo":"Razveljavi","menu.insert matrix":"Vstavi matrico","menu.insert vector":"Vstavi vektor","submenu.array.matrix delimiters":"Matrični ločevalniki","menu.array.add row above":"Dodaj vrstico po","menu.array.add row below":"Dodaj vrstico prej","menu.array.add column after":"Dodaj stolpec po","menu.array.add column before":"Dodaj stolpec prej","menu.array.delete row":"Izbriši vrstico","menu.array.delete rows":"Izbriši izbrane vrstice","menu.array.delete column":"Izbriši stolpec","menu.array.delete columns":"Izbriši izbrane stolpce","submenu.array.insert separator":"Vstavi ločilo","menu.insert table":"Vstavi tabelo","submenu.table style":"Tabela slog"},sq:{"keyboard.tooltip.functions":"Funksione","keyboard.tooltip.symbols":"Simbolet","keyboard.tooltip.greek":"Letrat Greke","keyboard.tooltip.command":"Modaliteti i komandës latex","keyboard.tooltip.numeric":"Numerike","keyboard.tooltip.roman":"Letrat romake","tooltip.copy to clipboard":"Kopjoni në Clipboard","tooltip.redo":"Riparo","tooltip.toggle virtual keyboard":"Aktivizo tastierën virtuale","tooltip.undo":"Zhbëj","menu.insert matrix":"Vendosni Matricën","menu.insert vector":"Vendos vektorin","submenu.array.matrix delimiters":"Përcaktuesit e matricës","menu.array.add row above":"Shto Rreshtin Pas","menu.array.add row below":"Shto Rreshtin Para","menu.array.add column after":"Shto kolonën pas","menu.array.add column before":"Shto kolonën para","menu.array.delete row":"Fshi Rreshtin","menu.array.delete rows":"Fshi rreshtat e zgjedhur","menu.array.delete column":"Fshi kolonën","menu.array.delete columns":"Fshi kolonat e zgjedhura","submenu.array.insert separator":"Vendos Ndarësin","menu.insert table":"Vendos tabelën","submenu.table style":"Stili tabelën"},sr:{"keyboard.tooltip.functions":"Функције","keyboard.tooltip.symbols":"Симболи","keyboard.tooltip.greek":"Греек Леттерс","keyboard.tooltip.command":"ЛаТеКс командни режим","keyboard.tooltip.numeric":"Нумерички","keyboard.tooltip.roman":"Римска писма","tooltip.copy to clipboard":"Копирајте у међуспремник","tooltip.redo":"Понови","tooltip.toggle virtual keyboard":"Укључи / искључи виртуелну тастатуру","tooltip.undo":"Опозови","menu.insert matrix":"Уметни матрицу","menu.insert vector":"Уметни вектор","submenu.array.matrix delimiters":"Матрик Делимитерс","menu.array.add row above":"Додај ред после","menu.array.add row below":"Додај ред пре","menu.array.add column after":"Додај колону после","menu.array.add column before":"Додај колону пре","menu.array.delete row":"Избриши ред","menu.array.delete rows":"Избриши изабране редове","menu.array.delete column":"Избриши колону","menu.array.delete columns":"Избриши изабране колоне","submenu.array.insert separator":"Уметни сепаратор","menu.insert table":"Убаци табелу","submenu.table style":"Табеларни стил"},sv:{"keyboard.tooltip.functions":"Funktioner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Grekiska bokstäver","keyboard.tooltip.command":"LaTeX kommandoläge","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.roman":"Romerska bokstäver","tooltip.copy to clipboard":"Kopiera till Urklipp","tooltip.redo":"Göra om","tooltip.toggle virtual keyboard":"Växla virtuellt tangentbord","tooltip.undo":"Ångra","menu.insert matrix":"Sätt in matris","menu.insert vector":"Infoga vektor","submenu.array.matrix delimiters":"Matrisavgränsare","menu.array.add row above":"Lägg till rad efter","menu.array.add row below":"Lägg till rad före","menu.array.add column after":"Lägg till kolumn efter","menu.array.add column before":"Lägg till kolumn före","menu.array.delete row":"Radera rad","menu.array.delete rows":"Ta bort valda rader","menu.array.delete column":"Ta bort kolumn","menu.array.delete columns":"Ta bort valda kolumner","submenu.array.insert separator":"Sätt i separator","menu.insert table":"Infoga tabell","submenu.table style":"Tabellstil"},th:{"keyboard.tooltip.functions":"ฟังก์ชั่น","keyboard.tooltip.symbols":"สัญลักษณ์","keyboard.tooltip.greek":"อักษรกรีก","keyboard.tooltip.command":"โหมดคำสั่ง น้ำยาง","keyboard.tooltip.numeric":"ตัวเลข","keyboard.tooltip.roman":"อักษรโรมัน","tooltip.copy to clipboard":"คัดลอกไปที่คลิปบอร์ด","tooltip.redo":"ทำซ้ำ","tooltip.toggle virtual keyboard":"สลับแป้นพิมพ์เสมือน","tooltip.undo":"เลิกทำ","menu.insert matrix":"แทรกเมทริกซ์","menu.insert vector":"แทรกเวกเตอร์","submenu.array.matrix delimiters":"ตัวคั่นเมทริกซ์","menu.array.add row above":"เพิ่มแถวหลัง","menu.array.add row below":"เพิ่มแถวก่อน","menu.array.add column after":"เพิ่มคอลัมน์หลัง","menu.array.add column before":"เพิ่มคอลัมน์ก่อน","menu.array.delete row":"ลบแถว","menu.array.delete rows":"ลบแถวที่เลือก","menu.array.delete column":"ลบคอลัมน์","menu.array.delete columns":"ลบคอลัมน์ที่เลือก","submenu.array.insert separator":"ตัวคั่นแทรก","menu.insert table":"แทรกตาราง","submenu.table style":"สไตล์ตาราง"},tr:{"keyboard.tooltip.functions":"Fonksiyonlar","keyboard.tooltip.symbols":"Semboller","keyboard.tooltip.greek":"Yunan harfleri","keyboard.tooltip.command":"LaTeX Komut Modu","keyboard.tooltip.numeric":"Sayısal","keyboard.tooltip.roman":"Roma Harfleri","tooltip.copy to clipboard":"Panoya kopyala","tooltip.redo":"Yeniden yap","tooltip.toggle virtual keyboard":"Sanal Klavyeyi Aç/Kapat","tooltip.undo":"Geri alma","menu.insert matrix":"Matris Ekle","menu.insert vector":"Vektör Ekle","submenu.array.matrix delimiters":"Matris Sınırlayıcılar","menu.array.add row above":"Satırdan Sonra Ekle","menu.array.add row below":"Önce Satır Ekle","menu.array.add column after":"Sonra Sütun Ekle","menu.array.add column before":"Önce Sütun Ekle","menu.array.delete row":"Sırayı sil","menu.array.delete rows":"Seçili Satırları Sil","menu.array.delete column":"Sütunu Sil","menu.array.delete columns":"Seçili Sütunları Sil","submenu.array.insert separator":"Ayırıcı Ekle","menu.insert table":"Tablo Ekle","submenu.table style":"Tablo Stili"},uk:{"keyboard.tooltip.functions":"Функції","keyboard.tooltip.symbols":"Символи","keyboard.tooltip.greek":"Грецькі літери","keyboard.tooltip.command":"Командний режим латексу","keyboard.tooltip.numeric":"Числовий","keyboard.tooltip.roman":"Римські літери","tooltip.copy to clipboard":"Копіювати в буфер обміну","tooltip.redo":"Повторити","tooltip.toggle virtual keyboard":"Переключити віртуальну клавіатуру","tooltip.undo":"Скасувати","menu.insert matrix":"Вставити матрицю","menu.insert vector":"Вставити вектор","submenu.array.matrix delimiters":"Матричні роздільники","menu.array.add row above":"Додати рядок після","menu.array.add row below":"Додати рядок до","menu.array.add column after":"Додати стовпець після","menu.array.add column before":"Додати стовпець перед","menu.array.delete row":"Видалити рядок","menu.array.delete rows":"Видалити вибрані рядки","menu.array.delete column":"Видалити стовпець","menu.array.delete columns":"Видалити вибрані стовпці","submenu.array.insert separator":"Вставте роздільник","menu.insert table":"Вставити таблицю","submenu.table style":"Стиль таблиці"},vi:{"keyboard.tooltip.functions":"Chức năng","keyboard.tooltip.symbols":"Ký hiệu","keyboard.tooltip.greek":"Chữ Hy Lạp","keyboard.tooltip.command":"Chế độ lệnh LaTeX","keyboard.tooltip.numeric":"Số","keyboard.tooltip.roman":"Chữ cái La mã","tooltip.copy to clipboard":"Sao chép vào clipboard","tooltip.redo":"Làm lại","tooltip.toggle virtual keyboard":"Chuyển đổi bàn phím ảo","tooltip.undo":"Hoàn tác","menu.insert matrix":"Chèn ma trận","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"Dấu phân cách ma trận","menu.array.add row above":"Thêm hàng sau","menu.array.add row below":"Thêm hàng trước","menu.array.add column after":"Thêm cột sau","menu.array.add column before":"Thêm cột trước","menu.array.delete row":"Xóa hàng","menu.array.delete rows":"Xóa hàng đã chọn","menu.array.delete column":"Xóa cột","menu.array.delete columns":"Xóa các cột đã chọn","submenu.array.insert separator":"Chèn dấu phân cách","menu.insert table":"Chèn bảng","submenu.table style":"Kiểu bảng"},zh_cn:{"keyboard.tooltip.functions":"职能","keyboard.tooltip.symbols":"符号","keyboard.tooltip.greek":"希腊字母","keyboard.tooltip.command":"乳胶 命令模式","keyboard.tooltip.numeric":"数字","keyboard.tooltip.roman":"罗马字母","tooltip.copy to clipboard":"复制到剪贴板","tooltip.redo":"重做","tooltip.toggle virtual keyboard":"切换虚拟键盘","tooltip.undo":"撤消","menu.insert matrix":"插入矩阵","menu.insert vector":"插入向量","submenu.array.matrix delimiters":"矩阵分隔符","menu.array.add row above":"在后面添加行","menu.array.add row below":"在前面添加行","menu.array.add column after":"在后面添加列r","menu.array.add column before":"在前面添加列","menu.array.delete row":"删除行","menu.array.delete rows":"删除选定行","menu.array.delete column":"删除列","menu.array.delete columns":"删除选定的列","submenu.array.insert separator":"插入分隔符","menu.insert table":"插入表格","submenu.table style":"表格样式"},zh_tw:{"keyboard.tooltip.functions":"職能","keyboard.tooltip.symbols":"符號","keyboard.tooltip.greek":"希臘字母","keyboard.tooltip.command":"乳膠命令模式","keyboard.tooltip.numeric":"數字","keyboard.tooltip.roman":"羅馬字母","tooltip.copy to clipboard":"複製到剪貼板","tooltip.redo":"重做","tooltip.toggle virtual keyboard":"切換虛擬鍵盤","tooltip.undo":"撤消","menu.insert matrix":"插入矩陣","menu.insert vector":"插入向量","submenu.array.matrix delimiters":"矩陣分隔符","menu.array.add row above":"在後面添加行","menu.array.add row below":"在前面添加行","menu.array.add column after":"在後面添加列","menu.array.add column before":"在前面添加列","menu.array.delete row":"刪除行","menu.array.delete rows":"刪除選定行","menu.array.delete column":"刪除列","menu.array.delete columns":"刪除選定的列","submenu.array.insert separator":"插入分隔符","menu.insert table":"插入表格","submenu.table style":"表格樣式"}},_locale:"",get locale(){return ae._locale||(ae._locale=ie()?navigator.language.slice(0,5):"en"),ae._locale},set locale(t){ae._locale=t},merge(t,e){if(t&&e){const a=ae._locale;ae.locale=t,ae.strings[t]={...ae.strings[t],...e},ae.locale=a}else if(t&&!e)for(const a of Object.keys(t))ae.merge(a,t[a])}};function ga(t){if(t===void 0)return;const e=ae.locale.slice(0,2);let a="";return ae.strings[ae.locale]&&(a=ae.strings[ae.locale][t]),!a&&ae.strings[e]&&(a=ae.strings[e][t]),a||(a=ae.strings.en[t]),a||void 0}const Hn={m0:"#3F3D99",m1:"#993D71",m2:"#998B3D",m3:"#3D9956",m4:"#3D5A99",m5:"#993D90",m6:"#996D3D",m7:"#43993D",m8:"#3D7999",m9:"#843D99"},Wn={blue:"#0072BD",orange:"#D95319",yellow:"#EDB120",purple:"#7E2F8E",green:"#77AC30",cyan:"#4DBEEE",red:"#A2142F"},oi={red:"#fbbbb6",orange:"#ffe0c2",yellow:"#fff1c2",lime:"#d0e8b9",green:"#bceac4",teal:"#b9f1f1",blue:"#b6d9fb",indigo:"#d1c2f0",purple:"#e3baf8",magenta:"#f9c8e0",black:"#353535","dark-grey":"#8C8C8C",grey:"#D0D0D0","light-grey":"#F0F0F0",white:"#ffffff"},ri={red:"#d7170b",orange:"#fe8a2b",yellow:"#ffc02b",lime:"#63b215",green:"#21ba3a",teal:"#17cfcf",blue:"#0d80f2",indigo:"#63c",purple:"#a219e6",magenta:"#eb4799",black:"#000","dark-grey":"#666",grey:"#A6A6A6","light-grey":"#d4d5d2",white:"#ffffff"},Ir={Red:"red",Orange:"orange",Yellow:"yellow",LimeGreen:"lime",Green:"green",TealBlue:"teal",Blue:"blue",Violet:"indigo",Purple:"purple",Magenta:"magenta",Black:"black",Gray:"grey",White:"white"},Jn={Apricot:"#FBB982",Aquamarine:"#00B5BE",Bittersweet:"#C04F17",Black:"#221E1F",Blue:"#2D2F92",BlueGreen:"#00B3B8",BlueViolet:"#473992",BrickRed:"#B6321C",Brown:"#792500",BurntOrange:"#F7921D",CadetBlue:"#74729A",CarnationPink:"#F282B4",Cerulean:"#00A2E3",CornflowerBlue:"#41B0E4",Cyan:"#00AEEF",Dandelion:"#FDBC42",DarkOrchid:"#A4538A",Emerald:"#00A99D",ForestGreen:"#009B55",Fuchsia:"#8C368C",Goldenrod:"#FFDF42",Gray:"#949698",Green:"#00A64F",GreenYellow:"#DFE674",JungleGreen:"#00A99A",Lavender:"#F49EC4",Limegreen:"#8DC73E",Magenta:"#EC008C",Mahogany:"#A9341F",Maroon:"#AF3235",Melon:"#F89E7B",MidnightBlue:"#006795",Mulberry:"#A93C93",NavyBlue:"#006EB8",OliveGreen:"#3C8031",Orange:"#F58137",OrangeRed:"#ED135A",Orchid:"#AF72B0",Peach:"#F7965A",Periwinkle:"#7977B8",PineGreen:"#008B72",Plum:"#92268F",ProcessBlue:"#00B0F0",Purple:"#99479B",RawSienna:"#974006",Red:"#ED1B23",RedOrange:"#F26035",RedViolet:"#A1246B",Rhodamine:"#EF559F",RoyalBlue:"#0071BC",RoyalPurple:"#613F99",RubineRed:"#ED017D",Salmon:"#F69289",SeaGreen:"#3FBC9D",Sepia:"#671800",SkyBlue:"#46C5DD",SpringGreen:"#C6DC67",Tan:"#DA9D76",TealBlue:"#00AEB3",Thistle:"#D883B7",Turquoise:"#00B4CE",Violet:"#58429B",VioletRed:"#EF58A0",White:"#FFFFFF",WildStrawberry:"#EE2967",Yellow:"#FFF200",YellowGreen:"#98CC70",YellowOrange:"#FAA21A"};function Li(t){var e,a,i,o,r,n;const s=t.split("!");let l,u,c,d=255,p=255,h=255,m=-1;const b=s.length>0&&s[0].startsWith("-");b&&(s[0]=s[0].slice(1));for(let y=0;y<s.length;y++){l=d,u=p,c=h;const x=(e=s[y].trim().match(/^([A-Za-z\d]+)/))===null||e===void 0?void 0:e[1],k=x==null?void 0:x.toLowerCase(),g=x&&(n=(r=(o=(i=(a=ri[k])!==null&&a!==void 0?a:ri[Ir[x]])!==null&&i!==void 0?i:Wn[x])!==null&&o!==void 0?o:Jn[x])!==null&&r!==void 0?r:Hn[x])!==null&&n!==void 0?n:s[y].trim();let f=g.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);if(f!=null&&f[1]&&f[2]&&f[3])d=Math.max(0,Math.min(255,Number.parseInt(f[1],16))),p=Math.max(0,Math.min(255,Number.parseInt(f[2],16))),h=Math.max(0,Math.min(255,Number.parseInt(f[3],16)));else if(f=g.match(/^#([\da-f]{3})$/i),f==null?void 0:f[1]){const _=Number.parseInt(f[1][0],16),w=Number.parseInt(f[1][1],16),T=Number.parseInt(f[1][2],16);d=Math.max(0,Math.min(255,16*_+_)),p=Math.max(0,Math.min(255,16*w+w)),h=Math.max(0,Math.min(255,16*T+T))}else{if(f=g.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i),!(f!=null&&f[1]&&f[2]&&f[3]))return;d=Math.max(0,Math.min(255,Number.parseInt(f[1]))),p=Math.max(0,Math.min(255,Number.parseInt(f[2]))),h=Math.max(0,Math.min(255,Number.parseInt(f[3])))}m>=0&&(d=(1-m)*d+m*l,p=(1-m)*p+m*u,h=(1-m)*h+m*c,m=-1),y+1<s.length&&(m=Math.max(0,Math.min(100,Number.parseInt(s[++y])))/100)}return m>=0&&(d=m*d+(1-m)*l,p=m*p+(1-m)*u,h=m*h+(1-m)*c),b&&(d=255-d,p=255-p,h=255-h),"#"+("00"+Math.round(d).toString(16)).slice(-2)+("00"+Math.round(p).toString(16)).slice(-2)+("00"+Math.round(h).toString(16)).slice(-2)}function $o(t){var e,a;return t=t.trim(),(a=(e=oi[t.toLowerCase()])!==null&&e!==void 0?e:oi[Ir[t]])!==null&&a!==void 0?a:Li(t)}function Fi(t,e,a){return a<0&&(a+=6),a>=6&&(a-=6),a<1?(e-t)*a+t:a<3?e:a<4?(e-t)*(4-a)+t:t}function Pi(t){return t<0?0:t>255?255:Math.round(t)}function Ho(t){let e=function(r){if(!r||r[0]!=="#")return;let n;return(r=r.slice(1)).length<=4?(n={r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16)},r.length===4&&(n.a=parseInt(r[3]+r[3],16)/255)):(n={r:parseInt(r[0]+r[1],16),g:parseInt(r[2]+r[3],16),b:parseInt(r[4]+r[5],16)},r.length===8&&(n.a=parseInt(r[6]+r[7],16)/255)),n&&n.a===void 0&&(n.a=1),n}(t);if(!e)return t;let{h:a,s:i,l:o}=function(r){let{r:n,g:s,b:l}=r;n/=255,s/=255,l/=255;const u=Math.min(n,s,l),c=Math.max(n,s,l),d=c-u;let p,h;c===u?p=0:n===c?p=(s-l)/d:s===c?p=2+(l-n)/d:l===c&&(p=4+(n-s)/d),p=Math.min(60*p,360),p<0&&(p+=360);const m=(u+c)/2;return h=c===u?0:m<=.5?d/(c+u):d/(2-c-u),{h:p,s:h,l:m}}(e);return i+=.1,o-=.1,function(r){const{r:n,g:s,b:l}=r;let u=((1<<24)+(Pi(n)<<16)+(Pi(s)<<8)+Pi(l)).toString(16).slice(1);return u[0]===u[1]&&u[2]===u[3]&&u[4]===u[5]&&u[6]===u[7]&&(u=u[0]+u[2]+u[4]),"#"+u}(function(r){let[n,s,l]=[r.h,r.s,r.l];n=(n+360)%360/60,l=Math.max(0,Math.min(l,1)),s=Math.max(0,Math.min(s,1));const u=l<=.5?l*(s+1):l+s-l*s,c=2*l-u;return{r:Math.round(255*Fi(c,u,n+2)),g:Math.round(255*Fi(c,u,n)),b:Math.round(255*Fi(c,u,n-2))}}({h:a,s:i,l:o}))}const ft={},ni={60:"\\lt",62:"\\gt",111:"o",38:"\\&",123:"\\lbrace",125:"\\rbrace",91:"\\lbrack",93:"\\rbrack",58:"\\colon",160:"~",172:"\\neg",183:"\\cdot",188:"\\frac{1}{4}",189:"\\frac{1}{2}",190:"\\frac{3}{4}",8304:"^{0}",8305:"^{i}",185:"^{1}",178:"^{2}",179:"^{3}",8224:"\\dagger",8225:"\\ddagger",8230:"\\ldots",8308:"^{4}",8309:"^{5}",8310:"^{6}",8311:"^{7}",8312:"^{8}",8313:"^{9}",8314:"^{+}",8315:"^{-}",8316:"^{=}",8319:"^{n}",8320:"_{0}",8321:"_{1}",8322:"_{2}",8323:"_{3}",8324:"_{4}",8325:"_{5}",8326:"_{6}",8327:"_{7}",8328:"_{8}",8329:"_{9}",8330:"_{+}",8331:"_{-}",8332:"_{=}",8336:"_{a}",8337:"_{e}",8338:"_{o}",8339:"_{x}",8242:"\\prime",39:"\\prime",8592:"\\gets",8594:"\\to",9651:"\\triangle",9661:"\\triangledown",8715:"\\owns",8727:"\\ast",8739:"\\vert",8741:"\\Vert",8743:"\\land",8744:"\\lor",8901:"\\cdot",8904:"\\bowtie",8800:"\\ne",8804:"\\le",8805:"\\ge",8869:"\\bot",10231:"\\biconditional",10232:"\\impliedby",10233:"\\implies",10234:"\\iff",8450:"\\mathbb{C}",8469:"\\mathbb{N}",8473:"\\mathbb{P}",8474:"\\mathbb{Q}",8477:"\\mathbb{R}",8484:"\\mathbb{Z}",8461:"\\mathbb{H}",8476:"\\Re",8465:"\\Im",42:"\\ast",11036:"\\square",9633:"\\square",8720:"\\coprod",8716:"\\not\\ni",9671:"\\diamond",8846:"\\uplus",8851:"\\sqcap",8852:"\\sqcup",8768:"\\wr",8750:"\\oint",8226:"\\textbullet",8722:"-",978:"\\Upsilon"},bt={},Vr={},Un={iff:"\\;⟺\\;",nicefrac:"^{#1}\\!\\!/\\!_{#2}",rd:"\\mathrm{d}",rD:"\\mathrm{D}",doubleStruckCapitalN:"\\mathbb{N}",doubleStruckCapitalR:"\\mathbb{R}",doubleStruckCapitalQ:"\\mathbb{Q}",doubleStruckCapitalZ:"\\mathbb{Z}",doubleStruckCapitalP:"\\mathbb{P}",scriptCapitalE:"\\mathscr{E}",scriptCapitalH:"\\mathscr{H}",scriptCapitalL:"\\mathscr{L}",gothicCapitalC:"\\mathfrak{C}",gothicCapitalH:"\\mathfrak{H}",gothicCapitalI:"\\mathfrak{I}",gothicCapitalR:"\\mathfrak{R}",imaginaryI:"\\mathrm{i}",imaginaryJ:"\\mathrm{j}",exponentialE:"\\mathrm{e}",differentialD:"\\mathrm{d}",capitalDifferentialD:"\\mathrm{D}","braket.sty":{package:{bra:"\\mathinner{\\langle{#1}|}",ket:"\\mathinner{|{#1}\\rangle}",braket:"\\mathinner{\\langle{#1}\\rangle}",set:"\\mathinner{\\lbrace #1 \\rbrace}",Bra:"\\left\\langle #1\\right|",Ket:"\\left|#1\\right\\rangle",Braket:"\\left\\langle{#1}\\right\\rangle",Set:"\\left\\lbrace #1 \\right\\rbrace"}},"amsmath.sty":{package:{varGamma:"\\mathit{\\Gamma}",varDelta:"\\mathit{\\Delta}",varTheta:"\\mathit{\\Theta}",varLambda:"\\mathit{\\Lambda}",varXi:"\\mathit{\\Xi}",varPi:"\\mathit{\\Pi}",varSigma:"\\mathit{\\Sigma}",varUpsilon:"\\mathit{\\Upsilon}",varPhi:"\\mathit{\\Phi}",varPsi:"\\mathit{\\Psi}",varOmega:"\\mathit{\\Omega}",pmod:{def:"\\quad(\\operatorname{mod}\\ #1)",args:1,expand:!1},mod:{def:"\\quad\\operatorname{mod}\\,\\,#1",args:1,expand:!1},bmod:{def:"\\;\\mathbin{\\operatorname{mod }}",expand:!1}},expand:!1},"texvc.sty":{package:{darr:"\\downarrow",dArr:"\\Downarrow",Darr:"\\Downarrow",lang:"\\langle",rang:"\\rangle",uarr:"\\uparrow",uArr:"\\Uparrow",Uarr:"\\Uparrow",N:"\\mathbb{N}",R:"\\mathbb{R}",Z:"\\mathbb{Z}",alef:"\\aleph",alefsym:"\\aleph",Alpha:"\\mathrm{A}",Beta:"\\mathrm{B}",bull:"\\bullet",Chi:"\\mathrm{X}",clubs:"\\clubsuit",cnums:"\\mathbb{C}",Complex:"\\mathbb{C}",Dagger:"\\ddagger",diamonds:"\\diamondsuit",empty:"\\emptyset",Epsilon:"\\mathrm{E}",Eta:"\\mathrm{H}",exist:"\\exists",harr:"\\leftrightarrow",hArr:"\\Leftrightarrow",Harr:"\\Leftrightarrow",hearts:"\\heartsuit",image:"\\Im",infin:"\\infty",Iota:"\\mathrm{I}",isin:"\\in",Kappa:"\\mathrm{K}",larr:"\\leftarrow",lArr:"\\Leftarrow",Larr:"\\Leftarrow",lrarr:"\\leftrightarrow",lrArr:"\\Leftrightarrow",Lrarr:"\\Leftrightarrow",Mu:"\\mathrm{M}",natnums:"\\mathbb{N}",Nu:"\\mathrm{N}",Omicron:"\\mathrm{O}",plusmn:"\\pm",rarr:"\\rightarrow",rArr:"\\Rightarrow",Rarr:"\\Rightarrow",real:"\\Re",reals:"\\mathbb{R}",Reals:"\\mathbb{R}",Rho:"\\mathrm{P}",sdot:"\\cdot",sect:"\\S",spades:"\\spadesuit",sub:"\\subset",sube:"\\subseteq",supe:"\\supseteq",Tau:"\\mathrm{T}",thetasym:"\\vartheta",weierp:"\\wp",Zeta:"\\mathrm{Z}"},expand:!1}},Lt={" ":32,"\\#":35,"\\&":38,"\\$":36,"\\%":37,"\\_":95,"\\euro":8364,"\\maltese":10016,"\\{":123,"\\}":125,"\\nobreakspace":160,"\\ldots":8230,"\\textellipsis":8230,"\\backslash":92,"`":8216,"'":8217,"``":8220,"''":8221,"\\degree":176,"\\textasciicircum":94,"\\textasciitilde":126,"\\textasteriskcentered":42,"\\textbackslash":92,"\\textbraceleft":123,"\\textbraceright":125,"\\textbullet":8226,"\\textdollar":36,"\\textsterling":163,"\\textdagger":8224,"\\textdaggerdbl":8225,"–":8211,"—":8212,"‘":8216,"’":8217,"“":8220,"”":8221,'"':8221,"\\ss":223,"\\ae":230,"\\oe":339,"\\AE":198,"\\OE":338,"\\O":216,"\\i":305,"\\j":567,"\\aa":229,"\\AA":197},Xn=/[\w!@*()-=+{}[\]\\';:?/.,~<>`|$%#&^" ]/,Gn=Rr()?new RegExp("\\p{Letter}","u"):/[a-zA-Z\u0430\u0410\u0431\u0411\u0432\u0412\u0433\u0413\u0434\u0414\u0435\u0415\u0451\u0401\u0436\u0416\u0437\u0417\u0438\u0418\u0439\u0419\u043a\u041a\u043b\u041b\u043c\u041c\u043d\u041d\u043e\u041e\u043f\u041f\u0440\u0420\u0441\u0421\u0442\u0422\u0443\u0423\u0444\u0424\u0445\u0425\u0446\u0426\u0447\u0427\u0448\u0428\u0449\u0429\u044a\u042a\u044b\u042b\u044c\u042c\u044d\u042d\u044e\u042e\u044f\u0104\u0105\u0106\u0107\u0118\u0119\u0141\u0142\u0143\u0144\xd3\xf3\u015a\u015b\u0179\u017a\u017b\u017c\xe0\xe2\xe4\xf4\xe9\xe8\xeb\xea\xef\xee\xe7\xf9\xfb\xfc\xff\xe6\u0153\xc0\xc2\xc4\xd4\xc9\xc8\xcb\xca\xcf\xce\u0178\xc7\xd9\xdb\xdc\xc6\u0152\xf6\xdf\xd6\u1e9e\xec\xed\xf2\xfa\xcc\xcd\xd2\xda\xe1\xf1\xc1\xd1]/,si=Rr()?new RegExp("[0-9\\p{Letter}]","u"):/[\da-zA-Z\u0430\u0410\u0431\u0411\u0432\u0412\u0433\u0413\u0434\u0414\u0435\u0415\u0451\u0401\u0436\u0416\u0437\u0417\u0438\u0418\u0439\u0419\u043a\u041a\u043b\u041b\u043c\u041c\u043d\u041d\u043e\u041e\u043f\u041f\u0440\u0420\u0441\u0421\u0442\u0422\u0443\u0423\u0444\u0424\u0445\u0425\u0446\u0426\u0447\u0427\u0448\u0428\u0449\u0429\u044a\u042a\u044b\u042b\u044c\u042c\u044d\u042d\u044e\u042e\u044f\u0104\u0105\u0106\u0107\u0118\u0119\u0141\u0142\u0143\u0144\xd3\xf3\u015a\u015b\u0179\u017a\u017b\u017c\xe0\xe2\xe4\xf4\xe9\xe8\xeb\xea\xef\xee\xe7\xf9\xfb\xfc\xff\xe6\u0153\xc0\xc2\xc4\xd4\xc9\xc8\xcb\xca\xcf\xce\u0178\xc7\xd9\xdb\xdc\xc6\u0152\xf6\xdf\xd6\u1e9e\xec\xed\xf2\xfa\xcc\xcd\xd2\xda\xe1\xf1\xc1\xd1]/;function so(t,e,a="mord",i){e!==void 0&&(ft[t]={definitionType:"symbol",type:a,variant:i,codepoint:e},ni[e]||(ni[e]=t),Lt[t]||(Lt[t]=e))}function Ae(t,e,a){if(typeof t!="string")for(const[i,o,r,n]of t)so(i,o,r??e,n??a);else for(let i=0;i<t.length;i++){const o=t.charAt(i);so(o,o.codePointAt(0))}}function Wo(t,e){for(let a=t;a<=e;a++)so(String.fromCodePoint(a),a)}function li(t,e){if(e===void 0)return"";if(t==="math"&&ni[e])return ni[e];if(t==="text"){let a=Object.keys(Lt).find(i=>Lt[i]===e);if(!a){const i=e.toString(16);a="^".repeat(i.length)+i}return a}return String.fromCodePoint(e)}const lo={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},jr=[{start:119808,len:26,offset:65,style:"bold"},{start:119834,len:26,offset:97,style:"bold"},{start:119860,len:26,offset:65,style:"italic"},{start:119886,len:26,offset:97,style:"italic"},{start:119912,len:26,offset:65,style:"bolditalic"},{start:119938,len:26,offset:97,style:"bolditalic"},{start:119964,len:26,offset:65,variant:"script"},{start:119990,len:26,offset:97,variant:"script"},{start:120016,len:26,offset:65,variant:"script",style:"bold"},{start:120042,len:26,offset:97,variant:"script",style:"bold"},{start:120068,len:26,offset:65,variant:"fraktur"},{start:120094,len:26,offset:97,variant:"fraktur"},{start:120172,len:26,offset:65,variant:"fraktur",style:"bold"},{start:120198,len:26,offset:97,variant:"fraktur",style:"bold"},{start:120120,len:26,offset:65,variant:"double-struck"},{start:120146,len:26,offset:97,variant:"double-struck"},{start:120224,len:26,offset:65,variant:"sans-serif"},{start:120250,len:26,offset:97,variant:"sans-serif"},{start:120276,len:26,offset:65,variant:"sans-serif",style:"bold"},{start:120302,len:26,offset:97,variant:"sans-serif",style:"bold"},{start:120328,len:26,offset:65,variant:"sans-serif",style:"italic"},{start:120354,len:26,offset:97,variant:"sans-serif",style:"italic"},{start:120380,len:26,offset:65,variant:"sans-serif",style:"bolditalic"},{start:120406,len:26,offset:97,variant:"sans-serif",style:"bolditalic"},{start:120432,len:26,offset:65,variant:"monospace"},{start:120458,len:26,offset:97,variant:"monospace"},{start:120488,len:25,offset:913,style:"bold"},{start:120514,len:25,offset:945,style:"bold"},{start:120546,len:25,offset:913,style:"italic"},{start:120572,len:25,offset:945,style:"italic"},{start:120604,len:25,offset:913,style:"bolditalic"},{start:120630,len:25,offset:945,style:"bolditalic"},{start:120662,len:25,offset:913,variant:"sans-serif",style:"bold"},{start:120688,len:25,offset:945,variant:"sans-serif",style:"bold"},{start:120720,len:25,offset:913,variant:"sans-serif",style:"bolditalic"},{start:120746,len:25,offset:945,variant:"sans-serif",style:"bolditalic"},{start:120782,len:10,offset:48,variant:"main",style:"bold"},{start:120792,len:10,offset:48,variant:"double-struck"},{start:120803,len:10,offset:48,variant:"sans-serif"},{start:120812,len:10,offset:48,variant:"sans-serif",style:"bold"},{start:120822,len:10,offset:48,variant:"monospace"}];function Jo(t){let e="auto";const a=t.match(/:([^=]+)/);return a&&(e=a[1].trim()),e}function ui(t){if(!t)return[];const e=[];let a=t.split("]");if(a[0].startsWith("[")){e.push({isOptional:!0,type:Jo(a[0].slice(1))});for(let i=1;i<=a.length;i++)e.push(...ui(a[i]))}else if(a=t.split("}"),a[0].startsWith("{")){e.push({isOptional:!1,type:Jo(a[0].slice(1))});for(let i=1;i<=a.length;i++)e.push(...ui(a[i]))}return e}function Uo(t){if(!t)return"";let e="",a=!0;for(const i of t)typeof i.value=="string"?e+=i.value:a=!1;return a?e:""}function Ya(t,e,a,i=!1){typeof t=="string"&&(t=[t]);const o={tabular:i,params:ui(e),createAtom:a};for(const r of t)Vr[r]=o}function lt(t,e,a){Ya(t,e,a,!0)}function M(t,e,a){var i,o;a||(a={});const r={definitionType:"function",params:ui(e),ifMode:a.ifMode,isFunction:(i=a.isFunction)!==null&&i!==void 0&&i,applyMode:a.applyMode,infix:(o=a.infix)!==null&&o!==void 0&&o,createAtom:a.createAtom,applyStyle:a.applyStyle};if(typeof t=="string")bt["\\"+t]=r;else for(const n of t)bt["\\"+n]=r}let Ia;function Hr(t){return Ia||(Ia=uo(Un)),t?uo({...Ia,...t}):Ia}function Xo(t,e){var a,i,o,r;if(typeof t=="string"){let n=0;const s=t;return/(^|[^\\])#1/.test(s)&&(n=1),/(^|[^\\])#2/.test(s)&&(n=2),/(^|[^\\])#3/.test(s)&&(n=3),/(^|[^\\])#4/.test(s)&&(n=4),/(^|[^\\])#5/.test(s)&&(n=5),/(^|[^\\])#6/.test(s)&&(n=6),/(^|[^\\])#7/.test(s)&&(n=7),/(^|[^\\])#8/.test(s)&&(n=8),/(^|[^\\])#9/.test(s)&&(n=9),{expand:(a=e==null?void 0:e.expand)===null||a===void 0||a,captureSelection:(i=e==null?void 0:e.captureSelection)===null||i===void 0||i,args:n,def:s}}return{expand:(o=e==null?void 0:e.expand)===null||o===void 0||o,captureSelection:(r=e==null?void 0:e.captureSelection)===null||r===void 0||r,args:0,...t}}function uo(t){if(!t)return{};const e={};for(const a of Object.keys(t)){const i=t[a];if(i==null)delete e[a];else if(typeof i=="object"&&"package"in i)for(const o of Object.keys(i.package))e[o]=Xo(i.package[o],{expand:i.expand,captureSelection:i.captureSelection});else e[a]=Xo(i)}return e}const v=[0,.69444,0,0],B=[0,.61111,0,0],E=[.25,.75,0,0],O=[0,.44444,0,0],N=[0,.68611,0,0],F=[.19444,.69444,0,0],P=[0,.68333,0,0],R=[0,.68889,0,0],U=[0,.69141,0,0],W=[0,0,0,0],le=[0,.64444,0,0],we=[0,.69224,0,0],_e=[.19444,.44444,0,0],Te=[.65002,1.15,0,0],Oe=[0,.55556,0,0],Fe=[.35001,.85,0,0],Pe=[1.25003,1.75,0,0],Re=[.95003,1.45,0,0],je=[0,.75,0,0],He=[0,.47534,0,0],Ye=[.25001,.75,0,0],Qe=[.55001,1.05,0,0],Ri=[.16667,.68889,0,0],et=[.08167,.58167,0,0];var Zn={"AMS-Regular":{32:W,65:R,66:R,67:R,68:R,69:R,70:R,71:R,72:R,73:R,74:Ri,75:R,76:R,77:R,78:R,79:Ri,80:R,81:Ri,82:R,83:R,84:R,85:R,86:R,87:R,88:R,89:R,90:R,107:R,160:W,165:[0,.675,.025,0],174:[.15559,.69224,0,0],240:R,295:R,710:[0,.825,0,0],732:[0,.9,0,0],770:[0,.825,0,0],771:[0,.9,0,0],989:et,1008:[0,.43056,.04028,0],8245:[0,.54986,0,0],8463:R,8487:R,8498:R,8502:R,8503:R,8504:R,8513:R,8592:[-.03598,.46402,0,0],8594:[-.03598,.46402,0,0],8602:[-.13313,.36687,0,0],8603:[-.13313,.36687,0,0],8606:[.01354,.52239,0,0],8608:[.01354,.52239,0,0],8610:[.01354,.52239,0,0],8611:[.01354,.52239,0,0],8619:[0,.54986,0,0],8620:[0,.54986,0,0],8621:[-.13313,.37788,0,0],8622:[-.13313,.36687,0,0],8624:we,8625:we,8630:[0,.43056,0,0],8631:[0,.43056,0,0],8634:[.08198,.58198,0,0],8635:[.08198,.58198,0,0],8638:[.19444,.69224,0,0],8639:[.19444,.69224,0,0],8642:[.19444,.69224,0,0],8643:[.19444,.69224,0,0],8644:[.1808,.675,0,0],8646:[.1808,.675,0,0],8647:[.1808,.675,0,0],8648:[.19444,.69224,0,0],8649:[.1808,.675,0,0],8650:[.19444,.69224,0,0],8651:[.01354,.52239,0,0],8652:[.01354,.52239,0,0],8653:[-.13313,.36687,0,0],8654:[-.13313,.36687,0,0],8655:[-.13313,.36687,0,0],8666:[.13667,.63667,0,0],8667:[.13667,.63667,0,0],8669:[-.13313,.37788,0,0],8672:[-.064,.437,0,0],8674:[-.064,.437,0,0],8705:[0,.825,0,0],8708:R,8709:et,8717:[0,.43056,0,0],8722:[-.03598,.46402,0,0],8724:[.08198,.69224,0,0],8726:et,8733:we,8736:we,8737:we,8738:[.03517,.52239,0,0],8739:et,8740:[.25142,.74111,0,0],8741:et,8742:[.25142,.74111,0,0],8756:we,8757:we,8764:[-.13313,.36687,0,0],8765:[-.13313,.37788,0,0],8769:[-.13313,.36687,0,0],8770:[-.03625,.46375,0,0],8774:[.30274,.79383,0,0],8776:[-.01688,.48312,0,0],8778:et,8782:[.06062,.54986,0,0],8783:[.06062,.54986,0,0],8785:[.08198,.58198,0,0],8786:[.08198,.58198,0,0],8787:[.08198,.58198,0,0],8790:we,8791:[.22958,.72958,0,0],8796:[.08198,.91667,0,0],8806:[.25583,.75583,0,0],8807:[.25583,.75583,0,0],8808:[.25142,.75726,0,0],8809:[.25142,.75726,0,0],8812:[.25583,.75583,0,0],8814:[.20576,.70576,0,0],8815:[.20576,.70576,0,0],8816:[.30274,.79383,0,0],8817:[.30274,.79383,0,0],8818:[.22958,.72958,0,0],8819:[.22958,.72958,0,0],8822:[.1808,.675,0,0],8823:[.1808,.675,0,0],8828:[.13667,.63667,0,0],8829:[.13667,.63667,0,0],8830:[.22958,.72958,0,0],8831:[.22958,.72958,0,0],8832:[.20576,.70576,0,0],8833:[.20576,.70576,0,0],8840:[.30274,.79383,0,0],8841:[.30274,.79383,0,0],8842:[.13597,.63597,0,0],8843:[.13597,.63597,0,0],8847:[.03517,.54986,0,0],8848:[.03517,.54986,0,0],8858:[.08198,.58198,0,0],8859:[.08198,.58198,0,0],8861:[.08198,.58198,0,0],8862:[0,.675,0,0],8863:[0,.675,0,0],8864:[0,.675,0,0],8865:[0,.675,0,0],8872:we,8873:we,8874:we,8876:R,8877:R,8878:R,8879:R,8882:[.03517,.54986,0,0],8883:[.03517,.54986,0,0],8884:[.13667,.63667,0,0],8885:[.13667,.63667,0,0],8888:[0,.54986,0,0],8890:[.19444,.43056,0,0],8891:[.19444,.69224,0,0],8892:[.19444,.69224,0,0],8901:[0,.54986,0,0],8903:et,8905:et,8906:et,8907:we,8908:we,8909:[-.03598,.46402,0,0],8910:[0,.54986,0,0],8911:[0,.54986,0,0],8912:[.03517,.54986,0,0],8913:[.03517,.54986,0,0],8914:[0,.54986,0,0],8915:[0,.54986,0,0],8916:we,8918:[.0391,.5391,0,0],8919:[.0391,.5391,0,0],8920:[.03517,.54986,0,0],8921:[.03517,.54986,0,0],8922:[.38569,.88569,0,0],8923:[.38569,.88569,0,0],8926:[.13667,.63667,0,0],8927:[.13667,.63667,0,0],8928:[.30274,.79383,0,0],8929:[.30274,.79383,0,0],8934:[.23222,.74111,0,0],8935:[.23222,.74111,0,0],8936:[.23222,.74111,0,0],8937:[.23222,.74111,0,0],8938:[.20576,.70576,0,0],8939:[.20576,.70576,0,0],8940:[.30274,.79383,0,0],8941:[.30274,.79383,0,0],8994:[.19444,.69224,0,0],8995:[.19444,.69224,0,0],9416:[.15559,.69224,0,0],9484:we,9488:we,9492:[0,.37788,0,0],9496:[0,.37788,0,0],9585:[.19444,.68889,0,0],9586:[.19444,.74111,0,0],9632:[0,.675,0,0],9633:[0,.675,0,0],9650:[0,.54986,0,0],9651:[0,.54986,0,0],9654:[.03517,.54986,0,0],9660:[0,.54986,0,0],9661:[0,.54986,0,0],9664:[.03517,.54986,0,0],9674:[.11111,.69224,0,0],9733:[.19444,.69224,0,0],10003:we,10016:we,10731:[.11111,.69224,0,0],10846:[.19444,.75583,0,0],10877:[.13667,.63667,0,0],10878:[.13667,.63667,0,0],10885:[.25583,.75583,0,0],10886:[.25583,.75583,0,0],10887:[.13597,.63597,0,0],10888:[.13597,.63597,0,0],10889:[.26167,.75726,0,0],10890:[.26167,.75726,0,0],10891:[.48256,.98256,0,0],10892:[.48256,.98256,0,0],10901:[.13667,.63667,0,0],10902:[.13667,.63667,0,0],10933:[.25142,.75726,0,0],10934:[.25142,.75726,0,0],10935:[.26167,.75726,0,0],10936:[.26167,.75726,0,0],10937:[.26167,.75726,0,0],10938:[.26167,.75726,0,0],10949:[.25583,.75583,0,0],10950:[.25583,.75583,0,0],10955:[.28481,.79383,0,0],10956:[.28481,.79383,0,0],57350:et,57351:et,57352:et,57353:[0,.43056,.04028,0],57356:[.25142,.75726,0,0],57357:[.25142,.75726,0,0],57358:[.41951,.91951,0,0],57359:[.30274,.79383,0,0],57360:[.30274,.79383,0,0],57361:[.41951,.91951,0,0],57366:[.25142,.75726,0,0],57367:[.25142,.75726,0,0],57368:[.25142,.75726,0,0],57369:[.25142,.75726,0,0],57370:[.13597,.63597,0,0],57371:[.13597,.63597,0,0]},"Caligraphic-Regular":{32:W,65:[0,.68333,0,.19445],66:[0,.68333,.03041,.13889],67:[0,.68333,.05834,.13889],68:[0,.68333,.02778,.08334],69:[0,.68333,.08944,.11111],70:[0,.68333,.09931,.11111],71:[.09722,.68333,.0593,.11111],72:[0,.68333,.00965,.11111],73:[0,.68333,.07382,0],74:[.09722,.68333,.18472,.16667],75:[0,.68333,.01445,.05556],76:[0,.68333,0,.13889],77:[0,.68333,0,.13889],78:[0,.68333,.14736,.08334],79:[0,.68333,.02778,.11111],80:[0,.68333,.08222,.08334],81:[.09722,.68333,0,.11111],82:[0,.68333,0,.08334],83:[0,.68333,.075,.13889],84:[0,.68333,.25417,0],85:[0,.68333,.09931,.08334],86:[0,.68333,.08222,0],87:[0,.68333,.08222,.08334],88:[0,.68333,.14643,.13889],89:[.09722,.68333,.08222,.08334],90:[0,.68333,.07944,.13889],160:W},"Fraktur-Regular":{32:W,33:U,34:U,38:U,39:U,40:[.24982,.74947,0,0],41:[.24982,.74947,0,0],42:[0,.62119,0,0],43:[.08319,.58283,0,0],44:[0,.10803,0,0],45:[.08319,.58283,0,0],46:[0,.10803,0,0],47:[.24982,.74947,0,0],48:He,49:He,50:He,51:[.18906,.47534,0,0],52:[.18906,.47534,0,0],53:[.18906,.47534,0,0],54:U,55:[.18906,.47534,0,0],56:U,57:[.18906,.47534,0,0],58:He,59:[.12604,.47534,0,0],61:[-.13099,.36866,0,0],63:U,65:U,66:U,67:U,68:U,69:U,70:[.12604,.69141,0,0],71:U,72:[.06302,.69141,0,0],73:U,74:[.12604,.69141,0,0],75:U,76:U,77:U,78:U,79:U,80:[.18906,.69141,0,0],81:[.03781,.69141,0,0],82:U,83:U,84:U,85:U,86:U,87:U,88:U,89:[.18906,.69141,0,0],90:[.12604,.69141,0,0],91:[.24982,.74947,0,0],93:[.24982,.74947,0,0],94:U,97:He,98:U,99:He,100:[0,.62119,0,0],101:He,102:[.18906,.69141,0,0],103:[.18906,.47534,0,0],104:[.18906,.69141,0,0],105:U,106:U,107:U,108:U,109:He,110:He,111:He,112:[.18906,.52396,0,0],113:[.18906,.47534,0,0],114:He,115:He,116:[0,.62119,0,0],117:He,118:[0,.52396,0,0],119:[0,.52396,0,0],120:[.18906,.47534,0,0],121:[.18906,.47534,0,0],122:[.18906,.47534,0,0],160:W,8216:U,8217:U,58112:[0,.62119,0,0],58113:[0,.62119,0,0],58114:[.18906,.69141,0,0],58115:[.18906,.69141,0,0],58116:[.18906,.47534,0,0],58117:U,58118:[0,.62119,0,0],58119:He},"Main-Bold":{32:W,33:v,34:v,35:F,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:v,39:v,40:E,41:E,42:je,43:[.13333,.63333,0,0],44:[.19444,.15556,0,0],45:O,46:[0,.15556,0,0],47:E,48:le,49:le,50:le,51:le,52:le,53:le,54:le,55:le,56:le,57:le,58:O,59:_e,60:[.08556,.58556,0,0],61:[-.10889,.39111,0,0],62:[.08556,.58556,0,0],63:v,64:v,65:N,66:N,67:N,68:N,69:N,70:N,71:N,72:N,73:N,74:N,75:N,76:N,77:N,78:N,79:N,80:N,81:[.19444,.68611,0,0],82:N,83:N,84:N,85:N,86:[0,.68611,.01597,0],87:[0,.68611,.01597,0],88:N,89:[0,.68611,.02875,0],90:N,91:E,92:E,93:E,94:v,95:[.31,.13444,.03194,0],97:O,98:v,99:O,100:v,101:O,102:[0,.69444,.10903,0],103:[.19444,.44444,.01597,0],104:v,105:v,106:F,107:v,108:v,109:O,110:O,111:O,112:_e,113:_e,114:O,115:O,116:[0,.63492,0,0],117:O,118:[0,.44444,.01597,0],119:[0,.44444,.01597,0],120:O,121:[.19444,.44444,.01597,0],122:O,123:E,124:E,125:E,126:[.35,.34444,0,0],160:W,163:v,168:v,172:O,176:v,177:[.13333,.63333,0,0],184:[.17014,0,0,0],198:N,215:[.13333,.63333,0,0],216:[.04861,.73472,0,0],223:v,230:O,247:[.13333,.63333,0,0],248:[.09722,.54167,0,0],305:O,338:N,339:O,567:_e,710:v,711:[0,.63194,0,0],713:[0,.59611,0,0],714:v,715:v,728:v,729:v,730:v,732:v,733:v,915:N,916:N,920:N,923:N,926:N,928:N,931:N,933:N,934:N,936:N,937:N,8211:[0,.44444,.03194,0],8212:[0,.44444,.03194,0],8216:v,8217:v,8220:v,8221:v,8224:F,8225:F,8242:Oe,8407:[0,.72444,.15486,0],8463:v,8465:v,8467:v,8472:_e,8476:v,8501:v,8592:[-.10889,.39111,0,0],8593:F,8594:[-.10889,.39111,0,0],8595:F,8596:[-.10889,.39111,0,0],8597:E,8598:F,8599:F,8600:F,8601:F,8636:[-.10889,.39111,0,0],8637:[-.10889,.39111,0,0],8640:[-.10889,.39111,0,0],8641:[-.10889,.39111,0,0],8656:[-.10889,.39111,0,0],8657:F,8658:[-.10889,.39111,0,0],8659:F,8660:[-.10889,.39111,0,0],8661:E,8704:v,8706:[0,.69444,.06389,0],8707:v,8709:[.05556,.75,0,0],8711:N,8712:[.08556,.58556,0,0],8715:[.08556,.58556,0,0],8722:[.13333,.63333,0,0],8723:[.13333,.63333,0,0],8725:E,8726:E,8727:[-.02778,.47222,0,0],8728:[-.02639,.47361,0,0],8729:[-.02639,.47361,0,0],8730:[.18,.82,0,0],8733:O,8734:O,8736:we,8739:E,8741:E,8743:Oe,8744:Oe,8745:Oe,8746:Oe,8747:[.19444,.69444,.12778,0],8764:[-.10889,.39111,0,0],8768:F,8771:[.00222,.50222,0,0],8776:[.02444,.52444,0,0],8781:[.00222,.50222,0,0],8801:[.00222,.50222,0,0],8804:[.19667,.69667,0,0],8805:[.19667,.69667,0,0],8810:[.08556,.58556,0,0],8811:[.08556,.58556,0,0],8826:[.08556,.58556,0,0],8827:[.08556,.58556,0,0],8834:[.08556,.58556,0,0],8835:[.08556,.58556,0,0],8838:[.19667,.69667,0,0],8839:[.19667,.69667,0,0],8846:Oe,8849:[.19667,.69667,0,0],8850:[.19667,.69667,0,0],8851:Oe,8852:Oe,8853:[.13333,.63333,0,0],8854:[.13333,.63333,0,0],8855:[.13333,.63333,0,0],8856:[.13333,.63333,0,0],8857:[.13333,.63333,0,0],8866:v,8867:v,8868:v,8869:v,8900:[-.02639,.47361,0,0],8901:[-.02639,.47361,0,0],8902:[-.02778,.47222,0,0],8968:E,8969:E,8970:E,8971:E,8994:[-.13889,.36111,0,0],8995:[-.13889,.36111,0,0],9651:F,9657:[-.02778,.47222,0,0],9661:F,9667:[-.02778,.47222,0,0],9711:F,9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:je,9838:F,9839:F,10216:E,10217:E,10815:N,10927:[.19667,.69667,0,0],10928:[.19667,.69667,0,0],57376:F},"Main-BoldItalic":{32:W,33:[0,.69444,.11417,0],34:[0,.69444,.07939,0],35:[.19444,.69444,.06833,0],37:[.05556,.75,.12861,0],38:[0,.69444,.08528,0],39:[0,.69444,.12945,0],40:[.25,.75,.15806,0],41:[.25,.75,.03306,0],42:[0,.75,.14333,0],43:[.10333,.60333,.03306,0],44:[.19444,.14722,0,0],45:[0,.44444,.02611,0],46:[0,.14722,0,0],47:[.25,.75,.15806,0],48:[0,.64444,.13167,0],49:[0,.64444,.13167,0],50:[0,.64444,.13167,0],51:[0,.64444,.13167,0],52:[.19444,.64444,.13167,0],53:[0,.64444,.13167,0],54:[0,.64444,.13167,0],55:[.19444,.64444,.13167,0],56:[0,.64444,.13167,0],57:[0,.64444,.13167,0],58:[0,.44444,.06695,0],59:[.19444,.44444,.06695,0],61:[-.10889,.39111,.06833,0],63:[0,.69444,.11472,0],64:[0,.69444,.09208,0],65:N,66:[0,.68611,.0992,0],67:[0,.68611,.14208,0],68:[0,.68611,.09062,0],69:[0,.68611,.11431,0],70:[0,.68611,.12903,0],71:[0,.68611,.07347,0],72:[0,.68611,.17208,0],73:[0,.68611,.15681,0],74:[0,.68611,.145,0],75:[0,.68611,.14208,0],76:N,77:[0,.68611,.17208,0],78:[0,.68611,.17208,0],79:[0,.68611,.09062,0],80:[0,.68611,.0992,0],81:[.19444,.68611,.09062,0],82:[0,.68611,.02559,0],83:[0,.68611,.11264,0],84:[0,.68611,.12903,0],85:[0,.68611,.17208,0],86:[0,.68611,.18625,0],87:[0,.68611,.18625,0],88:[0,.68611,.15681,0],89:[0,.68611,.19803,0],90:[0,.68611,.14208,0],91:[.25,.75,.1875,0],93:[.25,.75,.09972,0],94:[0,.69444,.06709,0],95:[.31,.13444,.09811,0],97:[0,.44444,.09426,0],98:[0,.69444,.07861,0],99:[0,.44444,.05222,0],100:[0,.69444,.10861,0],101:[0,.44444,.085,0],102:[.19444,.69444,.21778,0],103:[.19444,.44444,.105,0],104:[0,.69444,.09426,0],105:[0,.69326,.11387,0],106:[.19444,.69326,.1672,0],107:[0,.69444,.11111,0],108:[0,.69444,.10861,0],109:[0,.44444,.09426,0],110:[0,.44444,.09426,0],111:[0,.44444,.07861,0],112:[.19444,.44444,.07861,0],113:[.19444,.44444,.105,0],114:[0,.44444,.11111,0],115:[0,.44444,.08167,0],116:[0,.63492,.09639,0],117:[0,.44444,.09426,0],118:[0,.44444,.11111,0],119:[0,.44444,.11111,0],120:[0,.44444,.12583,0],121:[.19444,.44444,.105,0],122:[0,.44444,.13889,0],126:[.35,.34444,.11472,0],160:W,168:[0,.69444,.11473,0],176:v,184:[.17014,0,0,0],198:[0,.68611,.11431,0],216:[.04861,.73472,.09062,0],223:[.19444,.69444,.09736,0],230:[0,.44444,.085,0],248:[.09722,.54167,.09458,0],305:[0,.44444,.09426,0],338:[0,.68611,.11431,0],339:[0,.44444,.085,0],567:[.19444,.44444,.04611,0],710:[0,.69444,.06709,0],711:[0,.63194,.08271,0],713:[0,.59444,.10444,0],714:[0,.69444,.08528,0],715:v,728:[0,.69444,.10333,0],729:[0,.69444,.12945,0],730:v,732:[0,.69444,.11472,0],733:[0,.69444,.11472,0],915:[0,.68611,.12903,0],916:N,920:[0,.68611,.09062,0],923:N,926:[0,.68611,.15092,0],928:[0,.68611,.17208,0],931:[0,.68611,.11431,0],933:[0,.68611,.10778,0],934:[0,.68611,.05632,0],936:[0,.68611,.10778,0],937:[0,.68611,.0992,0],8211:[0,.44444,.09811,0],8212:[0,.44444,.09811,0],8216:[0,.69444,.12945,0],8217:[0,.69444,.12945,0],8220:[0,.69444,.16772,0],8221:[0,.69444,.07939,0]},"Main-Italic":{32:W,33:[0,.69444,.12417,0],34:[0,.69444,.06961,0],35:[.19444,.69444,.06616,0],37:[.05556,.75,.13639,0],38:[0,.69444,.09694,0],39:[0,.69444,.12417,0],40:[.25,.75,.16194,0],41:[.25,.75,.03694,0],42:[0,.75,.14917,0],43:[.05667,.56167,.03694,0],44:[.19444,.10556,0,0],45:[0,.43056,.02826,0],46:[0,.10556,0,0],47:[.25,.75,.16194,0],48:[0,.64444,.13556,0],49:[0,.64444,.13556,0],50:[0,.64444,.13556,0],51:[0,.64444,.13556,0],52:[.19444,.64444,.13556,0],53:[0,.64444,.13556,0],54:[0,.64444,.13556,0],55:[.19444,.64444,.13556,0],56:[0,.64444,.13556,0],57:[0,.64444,.13556,0],58:[0,.43056,.0582,0],59:[.19444,.43056,.0582,0],61:[-.13313,.36687,.06616,0],63:[0,.69444,.1225,0],64:[0,.69444,.09597,0],65:P,66:[0,.68333,.10257,0],67:[0,.68333,.14528,0],68:[0,.68333,.09403,0],69:[0,.68333,.12028,0],70:[0,.68333,.13305,0],71:[0,.68333,.08722,0],72:[0,.68333,.16389,0],73:[0,.68333,.15806,0],74:[0,.68333,.14028,0],75:[0,.68333,.14528,0],76:P,77:[0,.68333,.16389,0],78:[0,.68333,.16389,0],79:[0,.68333,.09403,0],80:[0,.68333,.10257,0],81:[.19444,.68333,.09403,0],82:[0,.68333,.03868,0],83:[0,.68333,.11972,0],84:[0,.68333,.13305,0],85:[0,.68333,.16389,0],86:[0,.68333,.18361,0],87:[0,.68333,.18361,0],88:[0,.68333,.15806,0],89:[0,.68333,.19383,0],90:[0,.68333,.14528,0],91:[.25,.75,.1875,0],93:[.25,.75,.10528,0],94:[0,.69444,.06646,0],95:[.31,.12056,.09208,0],97:[0,.43056,.07671,0],98:[0,.69444,.06312,0],99:[0,.43056,.05653,0],100:[0,.69444,.10333,0],101:[0,.43056,.07514,0],102:[.19444,.69444,.21194,0],103:[.19444,.43056,.08847,0],104:[0,.69444,.07671,0],105:[0,.65536,.1019,0],106:[.19444,.65536,.14467,0],107:[0,.69444,.10764,0],108:[0,.69444,.10333,0],109:[0,.43056,.07671,0],110:[0,.43056,.07671,0],111:[0,.43056,.06312,0],112:[.19444,.43056,.06312,0],113:[.19444,.43056,.08847,0],114:[0,.43056,.10764,0],115:[0,.43056,.08208,0],116:[0,.61508,.09486,0],117:[0,.43056,.07671,0],118:[0,.43056,.10764,0],119:[0,.43056,.10764,0],120:[0,.43056,.12042,0],121:[.19444,.43056,.08847,0],122:[0,.43056,.12292,0],126:[.35,.31786,.11585,0],160:W,168:[0,.66786,.10474,0],176:v,184:[.17014,0,0,0],198:[0,.68333,.12028,0],216:[.04861,.73194,.09403,0],223:[.19444,.69444,.10514,0],230:[0,.43056,.07514,0],248:[.09722,.52778,.09194,0],338:[0,.68333,.12028,0],339:[0,.43056,.07514,0],710:[0,.69444,.06646,0],711:[0,.62847,.08295,0],713:[0,.56167,.10333,0],714:[0,.69444,.09694,0],715:v,728:[0,.69444,.10806,0],729:[0,.66786,.11752,0],730:v,732:[0,.66786,.11585,0],733:[0,.69444,.1225,0],915:[0,.68333,.13305,0],916:P,920:[0,.68333,.09403,0],923:P,926:[0,.68333,.15294,0],928:[0,.68333,.16389,0],931:[0,.68333,.12028,0],933:[0,.68333,.11111,0],934:[0,.68333,.05986,0],936:[0,.68333,.11111,0],937:[0,.68333,.10257,0],8211:[0,.43056,.09208,0],8212:[0,.43056,.09208,0],8216:[0,.69444,.12417,0],8217:[0,.69444,.12417,0],8220:[0,.69444,.1685,0],8221:[0,.69444,.06961,0],8463:R},"Main-Regular":{32:W,33:v,34:v,35:F,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:v,39:v,40:E,41:E,42:je,43:[.08333,.58333,0,0],44:[.19444,.10556,0,0],45:[0,.43056,0,0],46:[0,.10556,0,0],47:E,48:le,49:le,50:le,51:le,52:le,53:le,54:le,55:le,56:le,57:le,58:[0,.43056,0,0],59:[.19444,.43056,0,0],60:[.0391,.5391,0,0],61:[-.13313,.36687,0,0],62:[.0391,.5391,0,0],63:v,64:v,65:P,66:P,67:P,68:P,69:P,70:P,71:P,72:P,73:P,74:P,75:P,76:P,77:P,78:P,79:P,80:P,81:[.19444,.68333,0,0],82:P,83:P,84:P,85:P,86:[0,.68333,.01389,0],87:[0,.68333,.01389,0],88:P,89:[0,.68333,.025,0],90:P,91:E,92:E,93:E,94:v,95:[.31,.12056,.02778,0],97:[0,.43056,0,0],98:v,99:[0,.43056,0,0],100:v,101:[0,.43056,0,0],102:[0,.69444,.07778,0],103:[.19444,.43056,.01389,0],104:v,105:[0,.66786,0,0],106:[.19444,.66786,0,0],107:v,108:v,109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.19444,.43056,0,0],113:[.19444,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.61508,0,0],117:[0,.43056,0,0],118:[0,.43056,.01389,0],119:[0,.43056,.01389,0],120:[0,.43056,0,0],121:[.19444,.43056,.01389,0],122:[0,.43056,0,0],123:E,124:E,125:E,126:[.35,.31786,0,0],160:W,163:v,167:F,168:[0,.66786,0,0],172:[0,.43056,0,0],176:v,177:[.08333,.58333,0,0],182:F,184:[.17014,0,0,0],198:P,215:[.08333,.58333,0,0],216:[.04861,.73194,0,0],223:v,230:[0,.43056,0,0],247:[.08333,.58333,0,0],248:[.09722,.52778,0,0],305:[0,.43056,0,0],338:P,339:[0,.43056,0,0],567:[.19444,.43056,0,0],710:v,711:[0,.62847,0,0],713:[0,.56778,0,0],714:v,715:v,728:v,729:[0,.66786,0,0],730:v,732:[0,.66786,0,0],733:v,915:P,916:P,920:P,923:P,926:P,928:P,931:P,933:P,934:P,936:P,937:P,8211:[0,.43056,.02778,0],8212:[0,.43056,.02778,0],8216:v,8217:v,8220:v,8221:v,8224:F,8225:F,8230:[0,.12,0,0],8242:Oe,8407:[0,.71444,.15382,0],8463:R,8465:v,8467:[0,.69444,0,.11111],8472:[.19444,.43056,0,.11111],8476:v,8501:v,8592:[-.13313,.36687,0,0],8593:F,8594:[-.13313,.36687,0,0],8595:F,8596:[-.13313,.36687,0,0],8597:E,8598:F,8599:F,8600:F,8601:F,8614:[.011,.511,0,0],8617:[.011,.511,0,0],8618:[.011,.511,0,0],8636:[-.13313,.36687,0,0],8637:[-.13313,.36687,0,0],8640:[-.13313,.36687,0,0],8641:[-.13313,.36687,0,0],8652:[.011,.671,0,0],8656:[-.13313,.36687,0,0],8657:F,8658:[-.13313,.36687,0,0],8659:F,8660:[-.13313,.36687,0,0],8661:E,8704:v,8706:[0,.69444,.05556,.08334],8707:v,8709:[.05556,.75,0,0],8711:P,8712:[.0391,.5391,0,0],8715:[.0391,.5391,0,0],8722:[.08333,.58333,0,0],8723:[.08333,.58333,0,0],8725:E,8726:E,8727:[-.03472,.46528,0,0],8728:[-.05555,.44445,0,0],8729:[-.05555,.44445,0,0],8730:[.2,.8,0,0],8733:[0,.43056,0,0],8734:[0,.43056,0,0],8736:we,8739:E,8741:E,8743:Oe,8744:Oe,8745:Oe,8746:Oe,8747:[.19444,.69444,.11111,0],8764:[-.13313,.36687,0,0],8768:F,8771:[-.03625,.46375,0,0],8773:[-.022,.589,0,0],8776:[-.01688,.48312,0,0],8781:[-.03625,.46375,0,0],8784:[-.133,.67,0,0],8801:[-.03625,.46375,0,0],8804:[.13597,.63597,0,0],8805:[.13597,.63597,0,0],8810:[.0391,.5391,0,0],8811:[.0391,.5391,0,0],8826:[.0391,.5391,0,0],8827:[.0391,.5391,0,0],8834:[.0391,.5391,0,0],8835:[.0391,.5391,0,0],8838:[.13597,.63597,0,0],8839:[.13597,.63597,0,0],8846:Oe,8849:[.13597,.63597,0,0],8850:[.13597,.63597,0,0],8851:Oe,8852:Oe,8853:[.08333,.58333,0,0],8854:[.08333,.58333,0,0],8855:[.08333,.58333,0,0],8856:[.08333,.58333,0,0],8857:[.08333,.58333,0,0],8866:v,8867:v,8868:v,8869:v,8872:[.249,.75,0,0],8900:[-.05555,.44445,0,0],8901:[-.05555,.44445,0,0],8902:[-.03472,.46528,0,0],8904:[.005,.505,0,0],8942:[.03,.9,0,0],8943:[-.19,.31,0,0],8945:[-.1,.82,0,0],8968:E,8969:E,8970:E,8971:E,8994:[-.14236,.35764,0,0],8995:[-.14236,.35764,0,0],9136:[.244,.744,0,0],9137:[.244,.744,0,0],9651:F,9657:[-.03472,.46528,0,0],9661:F,9667:[-.03472,.46528,0,0],9711:F,9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:je,9838:F,9839:F,10216:E,10217:E,10222:[.244,.744,0,0],10223:[.244,.744,0,0],10229:[.011,.511,0,0],10230:[.011,.511,0,0],10231:[.011,.511,0,0],10232:[.024,.525,0,0],10233:[.024,.525,0,0],10234:[.024,.525,0,0],10236:[.011,.511,0,0],10815:P,10927:[.13597,.63597,0,0],10928:[.13597,.63597,0,0],57376:F},"Math-BoldItalic":{32:W,48:O,49:O,50:O,51:_e,52:_e,53:_e,54:le,55:_e,56:le,57:_e,65:N,66:[0,.68611,.04835,0],67:[0,.68611,.06979,0],68:[0,.68611,.03194,0],69:[0,.68611,.05451,0],70:[0,.68611,.15972,0],71:N,72:[0,.68611,.08229,0],73:[0,.68611,.07778,0],74:[0,.68611,.10069,0],75:[0,.68611,.06979,0],76:N,77:[0,.68611,.11424,0],78:[0,.68611,.11424,0],79:[0,.68611,.03194,0],80:[0,.68611,.15972,0],81:[.19444,.68611,0,0],82:[0,.68611,.00421,0],83:[0,.68611,.05382,0],84:[0,.68611,.15972,0],85:[0,.68611,.11424,0],86:[0,.68611,.25555,0],87:[0,.68611,.15972,0],88:[0,.68611,.07778,0],89:[0,.68611,.25555,0],90:[0,.68611,.06979,0],97:O,98:v,99:O,100:v,101:O,102:[.19444,.69444,.11042,0],103:[.19444,.44444,.03704,0],104:v,105:[0,.69326,0,0],106:[.19444,.69326,.0622,0],107:[0,.69444,.01852,0],108:[0,.69444,.0088,0],109:O,110:O,111:O,112:_e,113:[.19444,.44444,.03704,0],114:[0,.44444,.03194,0],115:O,116:[0,.63492,0,0],117:O,118:[0,.44444,.03704,0],119:[0,.44444,.02778,0],120:O,121:[.19444,.44444,.03704,0],122:[0,.44444,.04213,0],160:W,915:[0,.68611,.15972,0],916:N,920:[0,.68611,.03194,0],923:N,926:[0,.68611,.07458,0],928:[0,.68611,.08229,0],931:[0,.68611,.05451,0],933:[0,.68611,.15972,0],934:N,936:[0,.68611,.11653,0],937:[0,.68611,.04835,0],945:O,946:[.19444,.69444,.03403,0],947:[.19444,.44444,.06389,0],948:[0,.69444,.03819,0],949:O,950:[.19444,.69444,.06215,0],951:[.19444,.44444,.03704,0],952:[0,.69444,.03194,0],953:O,954:O,955:v,956:_e,957:[0,.44444,.06898,0],958:[.19444,.69444,.03021,0],959:O,960:[0,.44444,.03704,0],961:_e,962:[.09722,.44444,.07917,0],963:[0,.44444,.03704,0],964:[0,.44444,.13472,0],965:[0,.44444,.03704,0],966:_e,967:_e,968:[.19444,.69444,.03704,0],969:[0,.44444,.03704,0],977:v,981:F,982:[0,.44444,.03194,0],1009:_e,1013:O,57649:O,57911:_e},"Math-Italic":{32:W,48:[0,.43056,0,0],49:[0,.43056,0,0],50:[0,.43056,0,0],51:[.19444,.43056,0,0],52:[.19444,.43056,0,0],53:[.19444,.43056,0,0],54:le,55:[.19444,.43056,0,0],56:le,57:[.19444,.43056,0,0],65:[0,.68333,0,.13889],66:[0,.68333,.05017,.08334],67:[0,.68333,.07153,.08334],68:[0,.68333,.02778,.05556],69:[0,.68333,.05764,.08334],70:[0,.68333,.13889,.08334],71:[0,.68333,0,.08334],72:[0,.68333,.08125,.05556],73:[0,.68333,.07847,.11111],74:[0,.68333,.09618,.16667],75:[0,.68333,.07153,.05556],76:[0,.68333,0,.02778],77:[0,.68333,.10903,.08334],78:[0,.68333,.10903,.08334],79:[0,.68333,.02778,.08334],80:[0,.68333,.13889,.08334],81:[.19444,.68333,0,.08334],82:[0,.68333,.00773,.08334],83:[0,.68333,.05764,.08334],84:[0,.68333,.13889,.08334],85:[0,.68333,.10903,.02778],86:[0,.68333,.22222,0],87:[0,.68333,.13889,0],88:[0,.68333,.07847,.08334],89:[0,.68333,.22222,0],90:[0,.68333,.07153,.08334],97:[0,.43056,0,0],98:v,99:[0,.43056,0,.05556],100:[0,.69444,0,.16667],101:[0,.43056,0,.05556],102:[.19444,.69444,.10764,.16667],103:[.19444,.43056,.03588,.02778],104:v,105:[0,.65952,0,0],106:[.19444,.65952,.05724,0],107:[0,.69444,.03148,0],108:[0,.69444,.01968,.08334],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,.05556],112:[.19444,.43056,0,.08334],113:[.19444,.43056,.03588,.08334],114:[0,.43056,.02778,.05556],115:[0,.43056,0,.05556],116:[0,.61508,0,.08334],117:[0,.43056,0,.02778],118:[0,.43056,.03588,.02778],119:[0,.43056,.02691,.08334],120:[0,.43056,0,.02778],121:[.19444,.43056,.03588,.05556],122:[0,.43056,.04398,.05556],160:W,915:[0,.68333,.13889,.08334],916:[0,.68333,0,.16667],920:[0,.68333,.02778,.08334],923:[0,.68333,0,.16667],926:[0,.68333,.07569,.08334],928:[0,.68333,.08125,.05556],931:[0,.68333,.05764,.08334],933:[0,.68333,.13889,.05556],934:[0,.68333,0,.08334],936:[0,.68333,.11,.05556],937:[0,.68333,.05017,.08334],945:[0,.43056,.0037,.02778],946:[.19444,.69444,.05278,.08334],947:[.19444,.43056,.05556,0],948:[0,.69444,.03785,.05556],949:[0,.43056,0,.08334],950:[.19444,.69444,.07378,.08334],951:[.19444,.43056,.03588,.05556],952:[0,.69444,.02778,.08334],953:[0,.43056,0,.05556],954:[0,.43056,0,0],955:v,956:[.19444,.43056,0,.02778],957:[0,.43056,.06366,.02778],958:[.19444,.69444,.04601,.11111],959:[0,.43056,0,.05556],960:[0,.43056,.03588,0],961:[.19444,.43056,0,.08334],962:[.09722,.43056,.07986,.08334],963:[0,.43056,.03588,0],964:[0,.43056,.1132,.02778],965:[0,.43056,.03588,.02778],966:[.19444,.43056,0,.08334],967:[.19444,.43056,0,.05556],968:[.19444,.69444,.03588,.11111],969:[0,.43056,.03588,0],977:[0,.69444,0,.08334],981:[.19444,.69444,0,.08334],982:[0,.43056,.02778,0],1009:[.19444,.43056,0,.08334],1013:[0,.43056,0,.05556],57649:[0,.43056,0,.02778],57911:[.19444,.43056,0,.08334]},"SansSerif-Bold":{32:W,33:v,34:v,35:F,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:v,39:v,40:E,41:E,42:je,43:[.11667,.61667,0,0],44:[.10556,.13056,0,0],45:[0,.45833,0,0],46:[0,.13056,0,0],47:E,48:v,49:v,50:v,51:v,52:v,53:v,54:v,55:v,56:v,57:v,58:[0,.45833,0,0],59:[.10556,.45833,0,0],61:[-.09375,.40625,0,0],63:v,64:v,65:v,66:v,67:v,68:v,69:v,70:v,71:v,72:v,73:v,74:v,75:v,76:v,77:v,78:v,79:v,80:v,81:[.10556,.69444,0,0],82:v,83:v,84:v,85:v,86:[0,.69444,.01528,0],87:[0,.69444,.01528,0],88:v,89:[0,.69444,.0275,0],90:v,91:E,93:E,94:v,95:[.35,.10833,.03056,0],97:[0,.45833,0,0],98:v,99:[0,.45833,0,0],100:v,101:[0,.45833,0,0],102:[0,.69444,.07639,0],103:[.19444,.45833,.01528,0],104:v,105:v,106:F,107:v,108:v,109:[0,.45833,0,0],110:[0,.45833,0,0],111:[0,.45833,0,0],112:[.19444,.45833,0,0],113:[.19444,.45833,0,0],114:[0,.45833,.01528,0],115:[0,.45833,0,0],116:[0,.58929,0,0],117:[0,.45833,0,0],118:[0,.45833,.01528,0],119:[0,.45833,.01528,0],120:[0,.45833,0,0],121:[.19444,.45833,.01528,0],122:[0,.45833,0,0],126:[.35,.34444,0,0],160:W,168:v,176:v,180:v,184:[.17014,0,0,0],305:[0,.45833,0,0],567:[.19444,.45833,0,0],710:v,711:[0,.63542,0,0],713:[0,.63778,0,0],728:v,729:v,730:v,732:v,733:v,915:v,916:v,920:v,923:v,926:v,928:v,931:v,933:v,934:v,936:v,937:v,8211:[0,.45833,.03056,0],8212:[0,.45833,.03056,0],8216:v,8217:v,8220:v,8221:v},"SansSerif-Italic":{32:W,33:[0,.69444,.05733,0],34:[0,.69444,.00316,0],35:[.19444,.69444,.05087,0],36:[.05556,.75,.11156,0],37:[.05556,.75,.03126,0],38:[0,.69444,.03058,0],39:[0,.69444,.07816,0],40:[.25,.75,.13164,0],41:[.25,.75,.02536,0],42:[0,.75,.11775,0],43:[.08333,.58333,.02536,0],44:[.125,.08333,0,0],45:[0,.44444,.01946,0],46:[0,.08333,0,0],47:[.25,.75,.13164,0],48:[0,.65556,.11156,0],49:[0,.65556,.11156,0],50:[0,.65556,.11156,0],51:[0,.65556,.11156,0],52:[0,.65556,.11156,0],53:[0,.65556,.11156,0],54:[0,.65556,.11156,0],55:[0,.65556,.11156,0],56:[0,.65556,.11156,0],57:[0,.65556,.11156,0],58:[0,.44444,.02502,0],59:[.125,.44444,.02502,0],61:[-.13,.37,.05087,0],63:[0,.69444,.11809,0],64:[0,.69444,.07555,0],65:v,66:[0,.69444,.08293,0],67:[0,.69444,.11983,0],68:[0,.69444,.07555,0],69:[0,.69444,.11983,0],70:[0,.69444,.13372,0],71:[0,.69444,.11983,0],72:[0,.69444,.08094,0],73:[0,.69444,.13372,0],74:[0,.69444,.08094,0],75:[0,.69444,.11983,0],76:v,77:[0,.69444,.08094,0],78:[0,.69444,.08094,0],79:[0,.69444,.07555,0],80:[0,.69444,.08293,0],81:[.125,.69444,.07555,0],82:[0,.69444,.08293,0],83:[0,.69444,.09205,0],84:[0,.69444,.13372,0],85:[0,.69444,.08094,0],86:[0,.69444,.1615,0],87:[0,.69444,.1615,0],88:[0,.69444,.13372,0],89:[0,.69444,.17261,0],90:[0,.69444,.11983,0],91:[.25,.75,.15942,0],93:[.25,.75,.08719,0],94:[0,.69444,.0799,0],95:[.35,.09444,.08616,0],97:[0,.44444,.00981,0],98:[0,.69444,.03057,0],99:[0,.44444,.08336,0],100:[0,.69444,.09483,0],101:[0,.44444,.06778,0],102:[0,.69444,.21705,0],103:[.19444,.44444,.10836,0],104:[0,.69444,.01778,0],105:[0,.67937,.09718,0],106:[.19444,.67937,.09162,0],107:[0,.69444,.08336,0],108:[0,.69444,.09483,0],109:[0,.44444,.01778,0],110:[0,.44444,.01778,0],111:[0,.44444,.06613,0],112:[.19444,.44444,.0389,0],113:[.19444,.44444,.04169,0],114:[0,.44444,.10836,0],115:[0,.44444,.0778,0],116:[0,.57143,.07225,0],117:[0,.44444,.04169,0],118:[0,.44444,.10836,0],119:[0,.44444,.10836,0],120:[0,.44444,.09169,0],121:[.19444,.44444,.10836,0],122:[0,.44444,.08752,0],126:[.35,.32659,.08826,0],160:W,168:[0,.67937,.06385,0],176:v,184:[.17014,0,0,0],305:[0,.44444,.04169,0],567:[.19444,.44444,.04169,0],710:[0,.69444,.0799,0],711:[0,.63194,.08432,0],713:[0,.60889,.08776,0],714:[0,.69444,.09205,0],715:v,728:[0,.69444,.09483,0],729:[0,.67937,.07774,0],730:v,732:[0,.67659,.08826,0],733:[0,.69444,.09205,0],915:[0,.69444,.13372,0],916:v,920:[0,.69444,.07555,0],923:v,926:[0,.69444,.12816,0],928:[0,.69444,.08094,0],931:[0,.69444,.11983,0],933:[0,.69444,.09031,0],934:[0,.69444,.04603,0],936:[0,.69444,.09031,0],937:[0,.69444,.08293,0],8211:[0,.44444,.08616,0],8212:[0,.44444,.08616,0],8216:[0,.69444,.07816,0],8217:[0,.69444,.07816,0],8220:[0,.69444,.14205,0],8221:[0,.69444,.00316,0]},"SansSerif-Regular":{32:W,33:v,34:v,35:F,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:v,39:v,40:E,41:E,42:je,43:[.08333,.58333,0,0],44:[.125,.08333,0,0],45:O,46:[0,.08333,0,0],47:E,48:[0,.65556,0,0],49:[0,.65556,0,0],50:[0,.65556,0,0],51:[0,.65556,0,0],52:[0,.65556,0,0],53:[0,.65556,0,0],54:[0,.65556,0,0],55:[0,.65556,0,0],56:[0,.65556,0,0],57:[0,.65556,0,0],58:O,59:[.125,.44444,0,0],61:[-.13,.37,0,0],63:v,64:v,65:v,66:v,67:v,68:v,69:v,70:v,71:v,72:v,73:v,74:v,75:v,76:v,77:v,78:v,79:v,80:v,81:[.125,.69444,0,0],82:v,83:v,84:v,85:v,86:[0,.69444,.01389,0],87:[0,.69444,.01389,0],88:v,89:[0,.69444,.025,0],90:v,91:E,93:E,94:v,95:[.35,.09444,.02778,0],97:O,98:v,99:O,100:v,101:O,102:[0,.69444,.06944,0],103:[.19444,.44444,.01389,0],104:v,105:[0,.67937,0,0],106:[.19444,.67937,0,0],107:v,108:v,109:O,110:O,111:O,112:_e,113:_e,114:[0,.44444,.01389,0],115:O,116:[0,.57143,0,0],117:O,118:[0,.44444,.01389,0],119:[0,.44444,.01389,0],120:O,121:[.19444,.44444,.01389,0],122:O,126:[.35,.32659,0,0],160:W,168:[0,.67937,0,0],176:v,184:[.17014,0,0,0],305:O,567:_e,710:v,711:[0,.63194,0,0],713:[0,.60889,0,0],714:v,715:v,728:v,729:[0,.67937,0,0],730:v,732:[0,.67659,0,0],733:v,915:v,916:v,920:v,923:v,926:v,928:v,931:v,933:v,934:v,936:v,937:v,8211:[0,.44444,.02778,0],8212:[0,.44444,.02778,0],8216:v,8217:v,8220:v,8221:v},"Script-Regular":{32:W,65:[0,.7,.22925,0],66:[0,.7,.04087,0],67:[0,.7,.1689,0],68:[0,.7,.09371,0],69:[0,.7,.18583,0],70:[0,.7,.13634,0],71:[0,.7,.17322,0],72:[0,.7,.29694,0],73:[0,.7,.19189,0],74:[.27778,.7,.19189,0],75:[0,.7,.31259,0],76:[0,.7,.19189,0],77:[0,.7,.15981,0],78:[0,.7,.3525,0],79:[0,.7,.08078,0],80:[0,.7,.08078,0],81:[0,.7,.03305,0],82:[0,.7,.06259,0],83:[0,.7,.19189,0],84:[0,.7,.29087,0],85:[0,.7,.25815,0],86:[0,.7,.27523,0],87:[0,.7,.27523,0],88:[0,.7,.26006,0],89:[0,.7,.2939,0],90:[0,.7,.24037,0],160:W},"Size1-Regular":{32:W,40:Fe,41:Fe,47:Fe,91:Fe,92:Fe,93:Fe,123:Fe,125:Fe,160:W,710:[0,.72222,0,0],732:[0,.72222,0,0],770:[0,.72222,0,0],771:[0,.72222,0,0],8214:[-99e-5,.601,0,0],8593:[1e-5,.6,0,0],8595:[1e-5,.6,0,0],8657:[1e-5,.6,0,0],8659:[1e-5,.6,0,0],8719:Ye,8720:Ye,8721:Ye,8730:Fe,8739:[-.00599,.606,0,0],8741:[-.00599,.606,0,0],8747:[.30612,.805,.19445,0],8748:[.306,.805,.19445,0],8749:[.306,.805,.19445,0],8750:[.30612,.805,.19445,0],8896:Ye,8897:Ye,8898:Ye,8899:Ye,8968:Fe,8969:Fe,8970:Fe,8971:Fe,9168:[-99e-5,.601,0,0],10216:Fe,10217:Fe,10752:Ye,10753:Ye,10754:Ye,10756:Ye,10758:Ye},"Size2-Regular":{32:W,40:Te,41:Te,47:Te,91:Te,92:Te,93:Te,123:Te,125:Te,160:W,710:je,732:je,770:je,771:je,8719:Qe,8720:Qe,8721:Qe,8730:Te,8747:[.86225,1.36,.44445,0],8748:[.862,1.36,.44445,0],8749:[.862,1.36,.44445,0],8750:[.86225,1.36,.44445,0],8896:Qe,8897:Qe,8898:Qe,8899:Qe,8968:Te,8969:Te,8970:Te,8971:Te,10216:Te,10217:Te,10752:Qe,10753:Qe,10754:Qe,10756:Qe,10758:Qe},"Size3-Regular":{32:W,40:Re,41:Re,47:Re,91:Re,92:Re,93:Re,123:Re,125:Re,160:W,710:je,732:je,770:je,771:je,8730:Re,8968:Re,8969:Re,8970:Re,8971:Re,10216:Re,10217:Re},"Size4-Regular":{32:W,40:Pe,41:Pe,47:Pe,91:Pe,92:Pe,93:Pe,123:Pe,125:Pe,160:W,710:[0,.825,0,0],732:[0,.825,0,0],770:[0,.825,0,0],771:[0,.825,0,0],8730:Pe,8968:Pe,8969:Pe,8970:Pe,8971:Pe,9115:[.64502,1.155,0,0],9116:[1e-5,.6,0,0],9117:[.64502,1.155,0,0],9118:[.64502,1.155,0,0],9119:[1e-5,.6,0,0],9120:[.64502,1.155,0,0],9121:[.64502,1.155,0,0],9122:[-99e-5,.601,0,0],9123:[.64502,1.155,0,0],9124:[.64502,1.155,0,0],9125:[-99e-5,.601,0,0],9126:[.64502,1.155,0,0],9127:[1e-5,.9,0,0],9128:Te,9129:[.90001,0,0,0],9130:[0,.3,0,0],9131:[1e-5,.9,0,0],9132:Te,9133:[.90001,0,0,0],9143:[.88502,.915,0,0],10216:Pe,10217:Pe,57344:[-.00499,.605,0,0],57345:[-.00499,.605,0,0],57680:[0,.12,0,0],57681:[0,.12,0,0],57682:[0,.12,0,0],57683:[0,.12,0,0]},"Typewriter-Regular":{32:W,33:B,34:B,35:B,36:[.08333,.69444,0,0],37:[.08333,.69444,0,0],38:B,39:B,40:[.08333,.69444,0,0],41:[.08333,.69444,0,0],42:[0,.52083,0,0],43:[-.08056,.53055,0,0],44:[.13889,.125,0,0],45:[-.08056,.53055,0,0],46:[0,.125,0,0],47:[.08333,.69444,0,0],48:B,49:B,50:B,51:B,52:B,53:B,54:B,55:B,56:B,57:B,58:[0,.43056,0,0],59:[.13889,.43056,0,0],60:[-.05556,.55556,0,0],61:[-.19549,.41562,0,0],62:[-.05556,.55556,0,0],63:B,64:B,65:B,66:B,67:B,68:B,69:B,70:B,71:B,72:B,73:B,74:B,75:B,76:B,77:B,78:B,79:B,80:B,81:[.13889,.61111,0,0],82:B,83:B,84:B,85:B,86:B,87:B,88:B,89:B,90:B,91:[.08333,.69444,0,0],92:[.08333,.69444,0,0],93:[.08333,.69444,0,0],94:B,95:[.09514,0,0,0],96:B,97:[0,.43056,0,0],98:B,99:[0,.43056,0,0],100:B,101:[0,.43056,0,0],102:B,103:[.22222,.43056,0,0],104:B,105:B,106:[.22222,.61111,0,0],107:B,108:B,109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.22222,.43056,0,0],113:[.22222,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.55358,0,0],117:[0,.43056,0,0],118:[0,.43056,0,0],119:[0,.43056,0,0],120:[0,.43056,0,0],121:[.22222,.43056,0,0],122:[0,.43056,0,0],123:[.08333,.69444,0,0],124:[.08333,.69444,0,0],125:[.08333,.69444,0,0],126:B,127:B,160:W,176:B,184:[.19445,0,0,0],305:[0,.43056,0,0],567:[.22222,.43056,0,0],711:[0,.56597,0,0],713:[0,.56555,0,0],714:B,715:B,728:B,730:B,770:B,771:B,776:B,915:B,916:B,920:B,923:B,926:B,928:B,931:B,933:B,934:B,936:B,937:B,8216:B,8217:B,8242:B,9251:[.11111,.21944,0,0]}};const Yn=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/,Go={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04]},co=[0,.5,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Zo={" ":" ","​":" ",Å:"A",Ç:"C",Ð:"D",Þ:"o",å:"a",ç:"c",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function Ft(t,e){t===void 0&&(t=77);const a=Zn[e][t];if(a)return{defaultMetrics:!1,depth:a[0],height:a[1],italic:a[2],skew:a[3]};if(t===11034)return{defaultMetrics:!0,depth:.2,height:.8,italic:0,skew:0};const i=String.fromCodePoint(t);if(i in Zo)t=Zo[i].codePointAt(0);else if(Yn.test(i))return t=77,{defaultMetrics:!0,depth:.2,height:.9,italic:0,skew:0};return{defaultMetrics:!0,depth:.2,height:.7,italic:0,skew:0}}class vt{constructor(e,a,i){this.id=e,this.sizeDelta=a,this.cramped=i;const o={"-4":2,"-3":1,0:0}[a];this.metrics=Object.keys(Go).reduce((r,n)=>({...r,[n]:Go[n][o]}),{})}getFontSize(e){return Math.max(1,e+this.sizeDelta)}get sup(){return Ke[[0,1,0,1,2,3,2,3][this.id]]}get sub(){return Ke[[0,0,0,0,2,2,2,2][this.id]]}get fracNum(){return Ke[[0,1,0,1,2,3,4,5][this.id]]}get fracDen(){return Ke[[0,0,0,0,2,2,4,4][this.id]]}get cramp(){return Ke[[0,0,2,2,4,4,6,6][this.id]]}get isTight(){return this.sizeDelta<0}}const Ke={7:new vt(7,0,!1),6:new vt(6,0,!0),5:new vt(5,0,!1),4:new vt(4,0,!0),3:new vt(3,-3,!1),2:new vt(2,-3,!0),1:new vt(1,-4,!1),0:new vt(0,-4,!0)};function dt(t,e){return t===null?0:function(a,i){var o;if(!a)return 0;const r={pt:1,mm:7227/2540,cm:7227/254,ex:35271/8192,px:3/4,em:10,bp:1.00375,dd:1238/1157,pc:12,in:72.27,mu:10/18}[(o=a.unit)!==null&&o!==void 0?o:"pt"];if(Number.isFinite(i)){const n=10**i;return Math.round(a.dimension/10*r*n)/n}return a.dimension*r}(t,e)/10}function Ii(t){var e;return`${t.dimension}${(e=t.unit)!==null&&e!==void 0?e:"pt"}`}Ke.displaystyle=Ke[7],Ke.textstyle=Ke[5],Ke.scriptstyle=Ke[3],Ke.scriptscriptstyle=Ke[1];class V{constructor(e,a,i){var o,r,n,s,l,u;e instanceof V&&(this.parent=e),e instanceof V||(this.registers=(o=e.registers)!==null&&o!==void 0?o:{}),this.isPhantom=(s=(r=a==null?void 0:a.isPhantom)!==null&&r!==void 0?r:(n=this.parent)===null||n===void 0?void 0:n.isPhantom)!==null&&s!==void 0&&s;const c={...e};let d;if(a&&(a.letterShapeStyle&&a.letterShapeStyle!=="auto"&&(c.letterShapeStyle=a.letterShapeStyle),a.color&&a.color!=="none"&&(c.color=a.color),a.backgroundColor&&a.backgroundColor!=="none"&&(c.backgroundColor=a.backgroundColor),a.fontSize&&a.fontSize!=="auto"&&a.fontSize!==((l=this.parent)===null||l===void 0?void 0:l._size)&&(this._size=a.fontSize)),this.letterShapeStyle=(u=c.letterShapeStyle)!==null&&u!==void 0?u:"tex",this.color=c.color,this.backgroundColor=c.backgroundColor,typeof i=="string"){if(e instanceof V)switch(i){case"cramp":d=e.mathstyle.cramp;break;case"superscript":d=e.mathstyle.sup;break;case"subscript":d=e.mathstyle.sub;break;case"numerator":d=e.mathstyle.fracNum;break;case"denominator":d=e.mathstyle.fracDen}switch(i){case"textstyle":d=Ke.textstyle;break;case"displaystyle":d=Ke.displaystyle;break;case"scriptstyle":d=Ke.scriptstyle;break;case"scriptscriptstyle":d=Ke.scriptscriptstyle}}this._mathstyle=d,this.atomIdsSettings=e.atomIdsSettings,this.renderPlaceholder=c.renderPlaceholder}get mathstyle(){let e=this._mathstyle,a=this.parent;for(;!e;)e=a._mathstyle,a=a.parent;return e}getRegister(e){var a;return!((a=this.registers)===null||a===void 0)&&a[e]?this.registers[e]:this.parent?this.parent.getRegister(e):void 0}getRegisterAsGlue(e){var a;if(!((a=this.registers)===null||a===void 0)&&a[e]){const i=this.registers[e];return typeof i=="object"&&"glue"in i?i:typeof i=="object"&&"dimension"in i?{glue:{dimension:i.dimension}}:typeof i=="number"?{glue:{dimension:i}}:void 0}if(this.parent)return this.parent.getRegisterAsGlue(e)}getRegisterAsEm(e){return dt(this.getRegisterAsDimension(e))}getRegisterAsDimension(e){var a;if(!((a=this.registers)===null||a===void 0)&&a[e]){const i=this.registers[e];return typeof i=="object"&&"glue"in i?i.glue:typeof i=="object"&&"dimension"in i?i:typeof i=="number"?{dimension:i}:void 0}if(this.parent)return this.parent.getRegisterAsDimension(e)}setRegister(e,a){a!==void 0?this.registers[e]=a:delete this.registers[e]}setGlobalRegister(e,a){let i=this;for(;i.parent;)i.setRegister(e,void 0),i=i.parent;i.setRegister(e,a)}get size(){let e=this._size,a=this.parent;for(;!e;)e=a._size,a=a.parent;return e}makeID(){if(!this.atomIdsSettings)return;if(this.atomIdsSettings.overrideID)return this.atomIdsSettings.overrideID;if(typeof this.atomIdsSettings.seed!="number")return Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);const e=this.atomIdsSettings.seed.toString(36);return this.atomIdsSettings.seed+=1,e}scale(e){return e*this.effectiveFontSize}get scalingFactor(){return this.parent?this.effectiveFontSize/this.parent.effectiveFontSize:1}get isDisplayStyle(){return this.mathstyle.id===7||this.mathstyle.id===6}get isCramped(){return this.mathstyle.cramped}get isTight(){return this.mathstyle.isTight}get effectiveFontSize(){return co[Math.max(1,this.size+this.mathstyle.sizeDelta)]}get computedColor(){let e=this.color,a=this.parent;return!e&&a&&(e=a.color,a=a.parent),e??""}get computedBackgroundColor(){let e=this.backgroundColor,a=this.parent;return!e&&a&&(e=a.backgroundColor,a=a.parent),e??""}get metrics(){return this.mathstyle.metrics}}const po={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},ho={widehat1:[1062,239,.24],widehat2:[2364,300,.3],widehat3:[2364,360,.36],widehat4:[2364,420,.42],widecheck1:[1062,239,.24],widecheck2:[2364,300,.3],widecheck3:[2364,360,.36],widecheck4:[2364,420,.42],widetilde1:[600,260,.26],widetilde2:[1033,286,.286],widetilde3:[2339,306,.306],widetilde4:[2340,312,.34],overarc:[1061,159,.3],underarc:[1061,159,.3]},Yo={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,overarc:"M529 0c179 0 524 115 524 115 5 1 9 5 9 10 0 1-1 2-1 3l-4 22c-1 5-5 9-11 9h-2s-338-93-512-92c-174 0-513 92-513 92h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13 0 0 342-115 520-115z",underarc:`m 529 160
  c -179 0 -524 -115 -524 -115
  c -5 -1 -9 -5 -9 -10
  c 0 -1 1 -2 1 -3
  l 4 -22
  c 1 -5 5 -9 11 -9
  h 2
  s 338 93 512 92
  c 174 0 513 -92 513 -92
  h 2
  c 5 0 9 4 11 9
  l 5 22
  c 1 6 -2 12 -8 13
  c 0 0 -342 115 -520 115
  z
  `,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,widetilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,widetilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,widetilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,widetilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`};class Ze{constructor(e){Ze._registry[e]=this}static createAtom(e,a,i,o){return Ze._registry[e].createAtom(a,i,o)}static serialize(e,a){return Ze._registry[e[0].mode].serialize(e,a)}static applyStyle(e,a,i){return Ze._registry[e].applyStyle(a,i)}}function tt(t,e){const a=[];let i,o=[];for(const r of t)if(r.type!=="first"&&r.style){let n;e==="variant"?(n=r.style.variant,r.style.variantStyle&&r.style.variantStyle!=="up"&&(n+="-"+r.style.variantStyle)):e==="cssClass"?r.type==="group"&&(n=r.customClass):n=r.style[e],n===i?o.push(r):(o.length>0&&a.push(o),o=[r],i=n)}return o.length>0&&a.push(o),a}Ze._registry={};const Qn=["","chem","mord","mbin","mop","mrel","mopen","mclose","mpunct","minner","spacing","first","latex","composition","error","placeholder","supsub","none","mathfield"],es={mord:{mop:3,mbin:4,mrel:5,minner:3},mop:{mord:3,mop:3,rel:5,minner:3},mbin:{mord:4,mop:4,mopen:4,minner:4},mrel:{mord:5,mop:5,mopen:5,minner:5},mclose:{mop:3,mbin:4,mrel:5,minner:3},mpunct:{mord:3,mop:3,mrel:3,mopen:3,mpunct:3,minner:3},minner:{mord:3,mop:3,mbin:4,mrel:5,mopen:3,mpunct:3,minner:3}},ts={mord:{mop:3},mop:{mord:3,mop:3},mclose:{mop:3},minner:{mop:3}};function da(t,e){if(typeof t=="string")return t;if(typeof t=="number"){const a=Math.ceil(100*t)/100;return a===0?"0":a.toString()+(e??"")}return""}class z{constructor(e,a){var i,o,r,n,s,l;if(typeof e=="number"?this.value=String.fromCodePoint(e):typeof e=="string"?this.value=e:Ce(e)?this.children=e.filter(c=>c!==null):e&&e instanceof z&&(this.children=[e]),this.type=(i=a==null?void 0:a.type)!==null&&i!==void 0?i:"",this.isSelected=!1,this.isTight=(o=a==null?void 0:a.isTight)!==null&&o!==void 0&&o,this.newList=(r=a==null?void 0:a.newList)!==null&&r!==void 0&&r,a==null?void 0:a.properties)for(const c of Object.keys(a.properties))this.setStyle(c,a.properties[c]);a!=null&&a.attributes&&(this.attributes=a.attributes),this.classes=(n=a==null?void 0:a.classes)!==null&&n!==void 0?n:"";let u=(a==null?void 0:a.fontFamily)||"Main-Regular";if(a!=null&&a.style&&this.value&&(u=Ze.applyStyle((s=a.mode)!==null&&s!==void 0?s:"math",this,a.style)||"Main-Regular"),this.height=0,this.depth=0,this.skew=0,this.italic=0,this.maxFontSize=0,this.type==="latex")this.height=.8,this.depth=.2;else if(typeof e=="number"){const c=Ft(e,u);this.height=c.height,this.depth=c.depth,this.skew=c.skew,this.italic=c.italic}else if(this.value){this.height=-1/0,this.depth=-1/0,this.skew=-1/0,this.italic=-1/0;for(let c=0;c<this.value.length;c++){const d=Ft(this.value.codePointAt(c),u||"Main-Regular");this.height=Math.max(this.height,d.height),this.depth=Math.max(this.depth,d.depth),this.skew=d.skew,this.italic=d.italic}}else if(this.children&&this.children.length>0)if(this.children.length===1){const c=this.children[0];this.height=c.height,this.depth=c.depth,this.maxFontSize=c.maxFontSize,this.skew=c.skew,this.italic=c.italic}else{let c=-1/0,d=-1/0,p=0;for(const h of this.children)h.height>c&&(c=h.height),h.depth>d&&(d=h.depth),p=Math.max(p,(l=h.maxFontSize)!==null&&l!==void 0?l:0);this.height=c,this.depth=d,this.maxFontSize=p}(a==null?void 0:a.height)!==void 0&&(this.height=a.height),(a==null?void 0:a.depth)!==void 0&&(this.depth=a.depth),(a==null?void 0:a.maxFontSize)!==void 0&&(this.maxFontSize=a.maxFontSize)}set atomID(e){e!==void 0&&e.length!==0&&(this.attributes||(this.attributes={}),this.attributes["data-atom-id"]=e)}selected(e){if(this.isSelected!==e&&(this.isSelected=e,this.children))for(const a of this.children)a.selected(e)}setStyle(e,a,i){if(a===void 0)return;const o=da(a,i);o.length>0&&(this.cssProperties||(this.cssProperties={}),this.cssProperties[e]=o)}setTop(e){Number.isFinite(e)&&Math.abs(e)>.01&&(this.cssProperties||(this.cssProperties={}),this.cssProperties.top=da(e,"em"),this.height-=e,this.depth+=e)}get left(){var e;return!((e=this.cssProperties)===null||e===void 0)&&e["margin-left"]?Number.parseFloat(this.cssProperties["margin-left"]):0}set left(e){Number.isFinite(e)&&(e===0?this.cssProperties&&delete this.cssProperties["margin-left"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-left"]=da(e,"em")))}set right(e){Number.isFinite(e)&&(e===0?this.cssProperties&&delete this.cssProperties["margin-right"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-right"]=da(e,"em")))}set width(e){Number.isFinite(e)&&(e===0?this.cssProperties&&delete this.cssProperties.width:(this.cssProperties||(this.cssProperties={}),this.cssProperties.width=da(e,"em")))}wrap(e,a){const i=e.parent;if(!i)return this;e.isPhantom&&this.setStyle("opacity",0);let o=e.computedColor;o===i.computedColor&&(o=""),this.setStyle("color",o);const r=e.effectiveFontSize===i.effectiveFontSize?void 0:e.effectiveFontSize;let n,s=e.computedBackgroundColor;if(this.isSelected&&(s=Ho(s)),s===i.computedBackgroundColor&&(s=""),!(r||s||a&&(a.classes||a.type)))return this;s?(n=jt(this,a),n.selected(this.isSelected),n.setStyle("background-color",s),n.setStyle("display","inline-block")):n=new z(this,a);const l=e.scalingFactor;return l!==1&&(n.setStyle("font-size",100*l,"%"),n.height*=l,n.depth*=l,n.italic*=l,n.skew*=l),n}wrapSelect(e){if(!this.isSelected)return this;if(!e.parent)return this;const a=Ho(e.computedBackgroundColor),i=jt(this);return i.selected(!0),i.setStyle("background-color",a),i.setStyle("display","inline-block"),i}toMarkup(){var e,a,i;let o=(e=this.value)!==null&&e!==void 0?e:"";if(this.children)for(const l of this.children)o+=l.toMarkup();const r=this.classes.split(" ");r.push((a={latex:"ML__latex",placeholder:"ML__placeholder",error:"ML__error"}[this.type])!==null&&a!==void 0?a:""),this.caret==="latex"&&r.push("ML__latex-caret");const n=r.length===1?r[0]:r.filter((l,u,c)=>l.length>0&&c.indexOf(l)===u).join(" ");let s="";if(o.length>0&&o!=="​"||n.length>0||this.cssId||this.htmlData||this.htmlStyle||this.attributes||this.cssProperties||this.svgBody||this.svgOverlay){let l="";if(this.cssId&&(l+=` id=${this.cssId.replace(/ /g,"-")} `),this.htmlData){const c=this.htmlData.split(",");for(const d of c){const p=d.match(/([^=]+)=(.+$)/);if(p){const h=p[1].trim().replace(/ /g,"-");h&&(l+=` data-${h}=${p[2]} `)}else{const h=d.trim().replace(/ /g,"-");h&&(l+=` data-${h} `)}}}if(this.htmlStyle){const c=this.htmlStyle.split(";");let d="";for(const p of c){const h=p.match(/([^=]+):(.+$)/);if(h){const m=h[1].trim().replace(/ /g,"-");m&&(d+=`${m}:${h[2]};`)}}d&&(l+=` style="${d}"`)}if(this.attributes&&(l+=" "+Object.keys(this.attributes).map(c=>`${c}="${this.attributes[c]}"`).join(" ")),n.length>0&&(l+=` class="${n}"`),this.cssProperties){const c=Object.keys(this.cssProperties).map(d=>`${d}:${this.cssProperties[d]}`).join(";");c.length>0&&(l+=` style="${c}"`)}let u="";this.svgBody?u=function(c){if(ho[c]){const[g,f,_]=ho[c];return`<span style="display:inline-block;height:${_/2}em;min-width:0"><span class="stretchy" style="height:${_}em"><svg width="100%" height="${_}em" viewBox="0 0 ${g} ${f}" preserveAspectRatio="none" ><path fill="currentcolor" d="${Yo[c]}"></path></svg></span></span>`}const[d,p,h,m]=po[c];let b,y;const x=h/1e3;d.length===3?(b=["slice-1-of-3","slice-2-of-3","slice-3-of-3"],y=["xMinYMin","xMidYMin","xMaxYMin"]):d.length===2?(b=["slice-1-of-2","slice-2-of-2"],y=["xMinYMin","xMaxYMin"]):(b=["slice-1-of-1"],y=[m]);const k=d.map((g,f)=>`<span class="${b[f]}" style=height:${x}em><svg width=400em height=${x}em viewBox="0 0 400000 ${h}" preserveAspectRatio="${y[f]} slice"><path fill="currentcolor" d="${Yo[g]}"></path></svg></span>`).join("");return`<span style="display:inline-block;height:${x}em;min-width:${p}em;">${k}</span>`}(this.svgBody):this.svgOverlay&&(u='<span style="',u+="display: inline-block;",u+=`height:${this.height+this.depth}em;`,u+=`vertical-align:${this.depth}em;`,u+='">',u+=o,u+="</span>",u+='<svg style="position:absolute;overflow:overlay;',u+=`height:${this.height+this.depth}em;`,!((i=this.cssProperties)===null||i===void 0)&&i.padding?(u+=`top:${this.cssProperties.padding}em;`,u+=`left:${this.cssProperties.padding}em;`,u+=`width:calc(100% - 2 * ${this.cssProperties.padding}em );`):u+="top:0;left:0;width:100%;",u+="z-index:2;",u+='"',this.svgStyle&&(u+=` style="${this.svgStyle}"`),u+=`>${this.svgOverlay}</svg>`),s=`<span${l}>${o}${u}</span>`}return this.caret==="text"?s+='<span class="ML__text-caret"></span>':this.caret==="math"&&(s+='<span class="ML__caret"></span>'),s}tryCoalesceWith(e){if(this.type!==e.type||!/ML__text/.test(this.classes)&&!["mord","mbin","mrel"].includes(this.type)||this.svgBody||!this.value||e.svgBody||!e.value)return!1;const a=this.children&&this.children.length>0,i=e.children&&e.children.length>0;if(a||i)return!1;const o=this.cssProperties?Object.keys(this.cssProperties).length:0;if(o!==(e.cssProperties?Object.keys(e.cssProperties).length:0))return!1;if(o>0){for(const s of Object.keys(this.cssProperties))if(this.cssProperties[s]!==e.cssProperties[s])return!1}const r=this.classes.trim().replace(/\s+/g," ").split(" "),n=e.classes.trim().replace(/\s+/g," ").split(" ");if(r.length!==n.length)return!1;r.sort(),n.sort();for(const[s,l]of r.entries())if(l==="vertical-separator"||l!==n[s])return!1;return this.value+=e.value,this.height=Math.max(this.height,e.height),this.depth=Math.max(this.depth,e.depth),this.maxFontSize=Math.max(this.maxFontSize,e.maxFontSize),this.italic=e.italic,!0}}function mo(t){if(!t||t.length===0)return[];t[0].children=mo(t[0].children);const e=[t[0]];for(let a=1;a<t.length;a++)e[e.length-1].tryCoalesceWith(t[a])||(t[a].children=mo(t[a].children),e.push(t[a]));return e}function qo(t){return t.children&&(t.children=mo(t.children)),t}function Wr(t,e,a){e.newList&&(t=null);const i=e.type;if(i==="first")return null;if(i==="spacing")return t;if(a(t,e),e.children){let o=null;i!==void 0&&i.length!==0||(o=t);for(const r of e.children)o=Wr(o,r,a);i!==void 0&&i.length!==0||(t=o)}return i!=="supsub"&&i!==void 0&&i.length>0&&(t=e),t}function Qo(t,e){t&&Wr(null,t,e)}function Na(t,e=1){return function(a){Qo(a,(i,o)=>{o.type!=="mbin"||i&&!/first|none|mbin|mop|mrel|mopen|mpunct/.test(i.type)||(o.type="mord"),i&&i.type==="mbin"&&/mrel|mclose|mpunct|placeholder/.test(o.type)&&(i.type="mord")})}(t),function(a,i){Qo(a,(o,r)=>{var n,s,l,u;const c=(n=o==null?void 0:o.type)!==null&&n!==void 0?n:"none",d=r.isTight?(s=ts[c])!==null&&s!==void 0?s:null:(l=es[c])!==null&&l!==void 0?l:null,p=d&&(u=d[r.type])!==null&&u!==void 0?u:0;p&&(r.left+=i*(p/18))})}(t,e),t}function jt(t,e){if(!t)return new z(null,e);const a=new z(null,{classes:"ML__strut"});a.setStyle("height",Math.max(0,t.height),"em");const i=[a];if(t.depth!==0){const o=new z(null,{classes:"ML__strut--bottom"});o.setStyle("height",t.height+t.depth,"em"),o.setStyle("vertical-align",-t.depth,"em"),i.push(o)}return i.push(t),new z(i,e)}function Qa(t){const e=function(i){return po[i]?po[i][2]/1e3:ho[i][2]}(t)/2,a=new z(null,{height:e+.166,depth:e-.166,maxFontSize:0});return a.svgBody=t,a}class xe extends z{constructor(e,a){var i;const[o,r,n]=function(s){var l;const[u,c]=function(f){if("individualShift"in f){const _=f.individualShift;let w=_[0];const T=[w],C=-w.shift-w.box.depth;let K=C;for(let $=1;$<_.length;$++){const j=_[$],q=-j.shift-K-j.box.depth,Y=q-(w.box.height+w.box.depth);K+=q,T.push(Y),T.push(j),w=j}return[T,C]}if("top"in f){let _=f.top;for(const w of f.children)_-=typeof w=="number"?w:w.box.height+w.box.depth;return[f.children,_]}if("bottom"in f)return[f.children,-f.bottom];if("firstBaseline"in f){const _=f.firstBaseline[0];if(typeof _=="number")throw new Error("First child must be an element.");return[f.firstBaseline,-_.box.depth]}if("shift"in f){const _=f.children[0];if(typeof _=="number")throw new Error("First child must be an element.");return[f.children,-_.box.depth-f.shift]}return[null,0]}(s);if(!u)return[[],0,0];let d=0;for(const f of u)if(typeof f!="number"){const _=f.box;d=Math.max(d,_.maxFontSize,_.height)}d+=2;const p=new z(null,{classes:"pstrut"});p.setStyle("height",d,"em");const h=[];let m=c,b=c,y=c;for(const f of u){if(typeof f=="number")y+=f;else{const _=f.box,w=(l=f.classes)!==null&&l!==void 0?l:[],T=new z([p,_],{classes:w.join(" "),style:f.style});T.setStyle("top",-d-y-_.depth,"em"),f.marginLeft&&T.setStyle("margin-left",f.marginLeft,"em"),f.marginRight&&T.setStyle("margin-right",f.marginRight,"em"),h.push(T),y+=_.height+_.depth}m=Math.min(m,y),b=Math.max(b,y)}const x=new z(h,{classes:"vlist"});if(x.setStyle("height",b,"em"),m>=0)return[[new z(x,{classes:"vlist-r"})],b,-m];const k=new z(new z(null),{classes:"vlist"});k.setStyle("height",-m,"em");const g=new z(8203,{classes:"vlist-s",maxFontSize:0,height:0,depth:0});return[[new z([x,g],{classes:"vlist-r"}),new z(k,{classes:"vlist-r"})],b,-m]}(e);super(o.length===1?o[0]:o,{classes:((i=a==null?void 0:a.classes)!==null&&i!==void 0?i:"")+" vlist-t"+(o.length===2?" vlist-t2":""),height:r,depth:n,type:a==null?void 0:a.type})}}const as=[[8205,1],[65038,2],[127995,5],[129456,4],[917536,96]];let Va;const er=[127462,127487];function tr(t){var e;if(Va===void 0){Va={};for(const a of as)for(let i=a[0];i<=a[0]+a[1]-1;i++)Va[i]=!0}return(e=Va[t])!==null&&e!==void 0&&e}function is(t){return t>=er[0]&&t<=er[1]}function Jr(t){if(/^[\u0020-\u00FF]*$/.test(t))return t;const e=[],a=function(o){const r=[];for(let n=0;n<o.length;n++){let s=o.charCodeAt(n);if(s===13&&o.charCodeAt(n+1)===10&&(s=10,n++),s!==13&&s!==12||(s=10),s===0&&(s=65533),s>=55296&&s<=56319){const l=o.charCodeAt(n+1);l>=56320&&l<=57343&&(s=65536+1024*(s-55296)+(l-56320),n++)}r.push(s)}return r}(t);let i=0;for(;i<a.length;){const o=a[i++],r=a[i];if(r===8205){const n=i-1;for(i+=2;a[i]===8205;)i+=2;e.push(String.fromCodePoint(...a.slice(n,i-n+1)))}else if(tr(r)){const n=i-1;for(;tr(a[i]);)i+=a[i]===8205?2:1;e.push(String.fromCodePoint(...a.slice(n,2*i-n-1)))}else is(o)?(i+=1,e.push(String.fromCodePoint(...a.slice(i-2,2)))):e.push(String.fromCodePoint(o))}return e}class os{constructor(e){this.s=Jr(e),this.pos=0,this.obeyspaces=!1}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(e){const a=typeof this.s=="string"?e.exec(this.s.slice(this.pos)):e.exec(this.s.slice(this.pos).join(""));return a!=null&&a[0]?(this.pos+=a[0].length,a[0]):""}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]+/)||this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]/))return"<space>";const e=this.get();if(e==="\\"){if(!this.end()){let a=this.match(/^[a-zA-Z\*]+/);if(a)this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]*/);else if(a=this.get(),a===" ")return"<space>";return"\\"+a}}else{if(e==="{")return"<{>";if(e==="}")return"<}>";if(e==="^"){if(this.peek()==="^"){this.get();const a=this.match(/^(\^(\^(\^(\^[\da-f])?[\da-f])?[\da-f])?[\da-f])?[\da-f]{2}/);if(a)return String.fromCodePoint(Number.parseInt(a.slice(a.lastIndexOf("^")+1),16))}return e}if(e==="#"){if(!this.end()){let a=!1;if(/[\d?@]/.test(this.peek())&&(a=!0,this.pos+1<this.s.length)){const i=this.s[this.pos+1];a=/[^\dA-Za-z]/.test(i)}return a?"#"+this.get():"#"}}else if(e==="$")return this.peek()==="$"?(this.get(),"<$$>"):"<$>"}return e}}function rs(t,e){var a,i,o,r;const n=[];let s=t.next();if(s&&s!=="\\relax"){if(s==="\\noexpand")s=t.next(),s&&n.push(s);else if(s==="\\obeyspaces")t.obeyspaces=!0;else if(s==="\\space"||s==="~")n.push("<space>");else if(s==="\\bgroup")n.push("<{>");else if(s==="\\egroup")n.push("<}>");else if(s==="\\string"){if(s=t.next(),s)if(s.startsWith("\\"))for(const l of s)n.push(l==="\\"?"\\backslash":l);else s==="<{>"?n.push("\\{"):s==="<space>"?n.push("~"):s==="<}>"&&n.push("\\}")}else if(s==="\\csname"){for(;t.peek()==="<space>";)t.next();let l="",u=!1,c=[];do{if(c.length===0)if(/^#[\d?@]$/.test(t.peek())){const d=t.get().slice(1);c=ra((i=(a=e==null?void 0:e(d))!==null&&a!==void 0?a:e==null?void 0:e("?"))!==null&&i!==void 0?i:"\\placeholder{}",e),s=c[0]}else s=t.next(),c=s?[s]:[];u=c.length===0,u||s!=="\\endcsname"||(u=!0,c.shift()),u||(u=s==="<$>"||s==="<$$>"||s==="<{>"||s==="<}>"||typeof s=="string"&&s.length>1&&s.startsWith("\\")),u||(l+=c.shift())}while(!u);l&&n.push("\\"+l),n.push(...c)}else if(s!=="\\endcsname")if(s.length>1&&s.startsWith("#")){const l=s.slice(1);n.push(...ra((r=(o=e==null?void 0:e(l))!==null&&o!==void 0?o:e==null?void 0:e("?"))!==null&&r!==void 0?r:"\\placeholder{}",e))}else n.push(s)}return n}function ra(t,e=null){const a=[];let i="";for(const n of t.toString().split(/\r?\n/)){i&&a.push(i),i=" ";const s=n.match(/((?:\\%)|[^%])*/);s!==null&&a.push(s[0])}const o=new os(a.join("")),r=[];do r.push(...rs(o,e));while(!o.end());return r}function he(t){let e="";const a=[];for(const i of t)i&&(/[a-zA-Z\*]/.test(i[0])&&a.push(e),a.push(i),/\\[a-zA-Z]+\*?[\"\'][^\ ]+$/.test(i)&&a.push(" "),e=/\\[a-zA-Z]+\*?$/.test(i)?" ":"");return a.join("")}function pa(t){return he(t.map(e=>{var a;return(a={"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"}[e])!==null&&a!==void 0?a:e}))}class ns extends z{constructor(e,a,i){super(null,i),this.mathfield=a,this.htmlData=`placeholder-id=${e} `;const o=function(r){return jt(Na(r.model.root.render(new V({registers:r.registers},{fontSize:5,letterShapeStyle:r.options.letterShapeStyle},r.options.defaultMode==="inline-math"?"textstyle":"displaystyle")),r.options.horizontalSpacingScale),{classes:"ML__mathlive",attributes:{translate:"no","aria-hidden":"true"}})}(a._mathfield);this.height=o.height,this.depth=o.depth}toMarkup(){const e=[],a=this.classes.split(" "),i=a.length===1?a[0]:a.filter((r,n,s)=>r.length>0&&s.indexOf(r)===n).join(" ");if(this.cssId&&e.push(`id=${this.cssId.replace(/ /g,"-")}`),this.htmlData){const r=this.htmlData.split(",");for(const n of r){const s=n.match(/([^=]+)=(.+$)/);if(s){const l=s[1].trim().replace(/ /g,"-");l&&e.push(`data-${l}=${s[2]}`)}else{const l=n.trim().replace(/ /g,"-");l&&e.push(`data-${l}`)}}}if(this.htmlStyle){const r=this.htmlStyle.split(";");let n="";for(const s of r){const l=s.match(/([^=]+):(.+$)/);if(l){const u=l[1].trim().replace(/ /g,"-");u&&(n+=`${u}:${l[2]};`)}}n&&e.push(`style="${n}"`)}this.attributes&&e.push(...Object.keys(this.attributes).map(r=>`${r}="${this.attributes[r]}"`)),i.length>0&&e.push(`class="${i}"`);const o=this.mathfield;return e.push(`style="display:inline-block; width:${o.clientWidth}px; height:${o.clientHeight}px;" `),`<span ${e.join(" ")}></span>`}}const It=["above","body","below","superscript","subscript"];function va(t){return typeof t=="string"&&It.includes(t)}function ci(t){return t!==void 0&&Array.isArray(t)&&t.length===2}class S{constructor(e,a,i){var o,r,n,s,l,u;this.id=void 0,this.verbatimLatex=void 0,this._isDirty=!1,this._changeCounter=0,this.subsupPlacement=void 0,this.explicitSubsupPlacement=!1,this.skipBoundary=!1,this.captureSelection=!1,this.type=e,this.context=a,typeof(i==null?void 0:i.value)=="string"&&(this.value=i.value),this.command=(r=(o=i==null?void 0:i.command)!==null&&o!==void 0?o:this.value)!==null&&r!==void 0?r:"",this.mode=(n=i==null?void 0:i.mode)!==null&&n!==void 0?n:"math",this.isFunction=(s=i==null?void 0:i.isFunction)!==null&&s!==void 0&&s,this.subsupPlacement=i==null?void 0:i.limits,this.style=(l=i==null?void 0:i.style)!==null&&l!==void 0?l:{},this.displayContainsHighlight=(u=i==null?void 0:i.displayContainsHighlight)!==null&&u!==void 0&&u,i!=null&&i.serialize&&(S.customSerializer[i.command]=i.serialize)}static createBox(e,a,i){var o,r,n;if(!a)return null;const s=function(c){let d;const p=[];let h=[];for(const m of c)if(d||m.style){const b=m.computedStyle;d&&b.color===d.color&&b.backgroundColor===d.backgroundColor&&b.fontSize===d.fontSize?h.push(m):(h.length>0&&p.push(h),h=[m],d=b)}else h.push(m);return h.length>0&&p.push(h),p}(a);if(s.length===1){const c=s[0];return c[0].style?Vi(e,c,{...i,style:{color:c[0].style.color,backgroundColor:c[0].style.backgroundColor,fontSize:c[0].style.fontSize}}):Vi(e,c,i)}const l=[];let u=i==null?void 0:i.newList;for(const c of s){const d=Vi(new V(e,{color:(o=c[0].style)===null||o===void 0?void 0:o.color,backgroundColor:(r=c[0].style)===null||r===void 0?void 0:r.backgroundColor,fontSize:(n=c[0].style)===null||n===void 0?void 0:n.fontSize}),c,{newList:u});d&&(u=!1,l.push(d))}return l.length===0?null:l.length!==1||i!=null&&i.classes||i!=null&&i.type?new z(l,{classes:i==null?void 0:i.classes,type:i==null?void 0:i.type,newList:i==null?void 0:i.newList}).wrap(e):l[0].wrap(e)}static serialize(e,a){return Ce(e)?Xt(e,a):typeof e=="number"||typeof e=="boolean"?e.toString():typeof e=="string"?e.replace(/\s/g,"~"):e===void 0?"":a.expandMacro||typeof e.verbatimLatex!="string"?e.command&&S.customSerializer[e.command]?S.customSerializer[e.command](e,a):e.serialize(a):e.verbatimLatex}static commonAncestor(e,a){if(e===a||e.parent===a.parent)return e.parent;const i=new WeakSet;let{parent:o}=e;for(;o;)i.add(o),o=o.parent;for(o=a.parent;o;){if(i.has(o))return o;o=o.parent}}static fromJson(e,a){const i=new S(e.type,a,e);for(const o of It)e[o]&&i.setChildren(e[o],o);return i}toJson(){const e={type:this.type};if(this.mode!=="math"&&(e.mode=this.mode),this.command&&this.command!==this.value&&(e.command=this.command),this.value!==void 0&&(e.value=this.value),this.style&&Object.keys(this.style).length>0&&(e.style={...this.style}),this.verbatimLatex!==void 0&&(e.verbatimLatex=this.verbatimLatex),this.subsupPlacement&&(e.subsupPlacement=this.subsupPlacement),this.explicitSubsupPlacement&&(e.explicitSubsupPlacement=!0),this.isFunction&&(e.isFunction=!0),this.displayContainsHighlight&&(e.displayContainsHighlight=!0),this.isExtensibleSymbol&&(e.isExtensibleSymbol=!0),this.skipBoundary&&(e.skipBoundary=!0),this.captureSelection&&(e.captureSelection=!0),this._branches)for(const a of Object.keys(this._branches))this._branches[a]&&(e[a]=this._branches[a].filter(i=>i.type!=="first").map(i=>i.toJson()));return e}get changeCounter(){return this._changeCounter}get isDirty(){return this._isDirty}set isDirty(e){if(this._isDirty=e,e){this._changeCounter++,this.verbatimLatex=void 0,this._children=void 0;let{parent:a}=this;for(;a;)a._isDirty=!0,a._changeCounter++,a.verbatimLatex=void 0,a._children=void 0,a=a.parent}}serialize(e){var a;return this.body&&this.command?he([this.command,"{",this.bodyToLatex(e),"}",this.supsubToLatex(e)]):this.body?he([this.bodyToLatex(e),this.supsubToLatex(e)]):this.value&&this.value!=="​"?(a=this.command)!==null&&a!==void 0?a:function(i,o){var r;if(i==="text")return(r=li(i,o.codePointAt(0)))!==null&&r!==void 0?r:o;let n;if(n=li(i,o.codePointAt(0)),n)return n;const s=function(l){var u;if((l<119808||l>120831)&&(l<8448||l>8527))return{char:String.fromCodePoint(l)};for(const c in lo)if(lo[c]===l){l=(u=c.codePointAt(0))!==null&&u!==void 0?u:0;break}for(const c of jr)if(l>=c.start&&l<c.start+c.len)return{char:String.fromCodePoint(l-c.start+c.offset),variant:c.variant,style:c.style};return{char:String.fromCodePoint(l)}}(o.codePointAt(0));return s.style||s.variant?(n=s.char,s.variant&&(n="\\"+s.variant+"{"+n+"}"),s.style==="bold"?n="\\mathbf{"+n+"}":s.style==="italic"?n="\\mathit{"+n+"}":s.style==="bolditalic"&&(n="\\mathbfit{"+n+"}"),"\\mathord{"+n+"}"):""}(this.mode,this.value):""}bodyToLatex(e){return Xt(this.body,e)}aboveToLatex(e){return Xt(this.above,e)}belowToLatex(e){return Xt(this.below,e)}supsubToLatex(e){let a="";if(this.branch("subscript")!==void 0){const i=Xt(this.subscript,e);i.length===0?a+="_{}":i.length===1?a+="_"+i:a+=`_{${i}}`}if(this.branch("superscript")!==void 0){const i=Xt(this.superscript,e);i.length===0?a+="^{}":i.length===1?a+=i==="′"?"^\\prime ":i==="″"?"^\\doubleprime ":"^"+i:a+=`^{${i}}`}return a}get treeDepth(){let e=1,a=this.parent;for(;a;)a=a.parent,e+=1;return e}get inCaptureSelection(){let e=!1,a=this;for(;a;){if(a.captureSelection){e=!0;break}a=a.parent}return e}branch(e){if(va(e)&&this._branches)return this._branches[e]}get branches(){if(!this._branches)return[];const e=[];for(const a of It)this._branches[a]&&e.push(a);return e}createBranch(e){return va(e)?(this._branches?this._branches[e]||(this._branches[e]=[this.makeFirstAtom(e)]):this._branches={[e]:[this.makeFirstAtom(e)]},this.isDirty=!0,this._branches[e]):[]}get row(){return ci(this.treeBranch)?this.treeBranch[0]:-1}get col(){return ci(this.treeBranch)?this.treeBranch[1]:-1}get body(){var e;return(e=this._branches)===null||e===void 0?void 0:e.body}set body(e){this.setChildren(e,"body")}get superscript(){var e;return(e=this._branches)===null||e===void 0?void 0:e.superscript}set superscript(e){this.setChildren(e,"superscript")}get subscript(){var e;return(e=this._branches)===null||e===void 0?void 0:e.subscript}set subscript(e){this.setChildren(e,"subscript")}get above(){var e;return(e=this._branches)===null||e===void 0?void 0:e.above}set above(e){this.setChildren(e,"above")}get below(){var e;return(e=this._branches)===null||e===void 0?void 0:e.below}set below(e){this.setChildren(e,"below")}get computedStyle(){var e;if(!this.parent)return{...(e=this.style)!==null&&e!==void 0?e:{}};const a=this.style.verbatimColor!==void 0,i=this.style.verbatimBackgroundColor!==void 0,o={...this.parent.computedStyle,...this.style};return delete o.variant,delete o.variantStyle,i||delete o.verbatimBackgroundColor,a||delete o.verbatimColor,o}applyStyle(e){this.isDirty=!0,this.style={...this.style,...e},this.style.fontFamily==="none"&&delete this.style.fontFamily,this.style.fontShape==="auto"&&delete this.style.fontShape,this.style.fontSeries==="auto"&&delete this.style.fontSeries,this.style.color==="none"&&(delete this.style.color,delete this.style.verbatimColor),this.style.backgroundColor==="none"&&(delete this.style.backgroundColor,delete this.style.verbatimBackgroundColor),this.style.fontSize==="auto"&&delete this.style.fontSize;for(const a of this.children)a.applyStyle(e)}getInitialBaseElement(){let e;return this.hasEmptyBranch("body")||(e=this.body[1].getInitialBaseElement()),e??this}getFinalBaseElement(){return this.hasEmptyBranch("body")?this:this.body[this.body.length-1].getFinalBaseElement()}isCharacterBox(){if(this.type==="leftright")return!1;const e=this.getInitialBaseElement();return/mord/.test(e.type)}hasEmptyBranch(e){const a=this.branch(e);return!a||a.length===1}setChildren(e,a){if(!e||!va(a))return;const i=[this.makeFirstAtom(a),...e];this._branches?this._branches[a]=i:this._branches={[a]:i};for(const o of e)o.parent=this,o.treeBranch=a;this.isDirty=!0}makeFirstAtom(e){const a=new S("first",this.context,{mode:this.mode});return a.parent=this,a.treeBranch=e,a}addChild(e,a){this.createBranch(a).push(e),this.isDirty=!0,e.parent=this,e.treeBranch=a}addChildBefore(e,a){const i=this.createBranch(a.treeBranch);i.splice(i.indexOf(a),0,e),this.isDirty=!0,e.parent=this,e.treeBranch=a.treeBranch}addChildAfter(e,a){const i=this.createBranch(a.treeBranch);i.splice(i.indexOf(a)+1,0,e),this.isDirty=!0,e.parent=this,e.treeBranch=a.treeBranch}addChildren(e,a){for(const i of e)this.addChild(i,a)}addChildrenAfter(e,a){const i=this.createBranch(a.treeBranch);i.splice(i.indexOf(a)+1,0,...e),this.isDirty=!0;for(const o of e)o.parent=this,o.treeBranch=a.treeBranch;return e[e.length-1]}removeBranch(e){const a=this.branch(e);if(va(e)&&(this._branches[e]=void 0),!a)return[];for(const i of a)i.parent=void 0,i.treeBranch=void 0;return a.shift(),this.isDirty=!0,a}removeChild(e){if(e.type==="first")return;const a=this.branch(e.treeBranch),i=a.indexOf(e);a.splice(i,1),this.isDirty=!0,e.parent=void 0,e.treeBranch=void 0}get siblings(){return this.type==="root"?[]:this.parent.branch(this.treeBranch)}get firstSibling(){return this.siblings[0]}get lastSibling(){const{siblings:e}=this;return e[e.length-1]}get isFirstSibling(){return this===this.firstSibling}get isLastSibling(){return this===this.lastSibling}get hasNoSiblings(){return this.siblings.length===1}get leftSibling(){const e=this.parent.branch(this.treeBranch);return e[e.indexOf(this)-1]}get rightSibling(){const e=this.parent.branch(this.treeBranch);return e[e.indexOf(this)+1]}get hasChildren(){return Boolean(this._branches&&this.children.length>0)}get firstChild(){return this.children[0]}get lastChild(){const{children:e}=this;return e[e.length-1]}get children(){if(this._children)return this._children;if(!this._branches)return[];const e=[];for(const a of It)if(this._branches[a])for(const i of this._branches[a])e.push(...i.children),e.push(i);return this._children=e,e}render(e,a){if(this.type==="first"&&!e.atomIdsSettings)return null;const i=new V(e,this.style);let o="";this.type==="root"&&(o+=" ML__base"),this.isSelected&&(o+=" ML__selected");let r=this.createBox(i,{classes:o,newList:(a==null?void 0:a.newList)===!0||this.type==="first"});return r?(this.subsupPlacement||!this.superscript&&!this.subscript||(r=this.attachSupsub(i,{base:r})),r.wrap(i)):null}attachSupsub(e,a){var i,o;const r=a.base,n=this.superscript,s=this.subscript;if(!n&&!s)return r;let l=null,u=null;const c=(i=a.isCharacterBox)!==null&&i!==void 0?i:this.isCharacterBox();let d=0;if(n){const x=new V(e,void 0,"superscript");l=S.createBox(x,n,{newList:!0}),c||(d=r.height-e.metrics.supDrop*x.scalingFactor)}let p,h=0;if(s){const x=new V(e,void 0,"subscript");u=S.createBox(x,s,{newList:!0}),c||(h=r.depth+e.metrics.subDrop*x.scalingFactor)}p=e.isDisplayStyle?e.metrics.sup1:e.isCramped?e.metrics.sup3:e.metrics.sup2;const m=.05/e.scalingFactor;let b=null;if(u&&l){d=Math.max(d,p,l.depth+.25*e.metrics.xHeight),h=Math.max(h,e.metrics.sub2);const x=e.metrics.defaultRuleThickness;if(d-l.depth-(u.height-h)<4*x){h=4*x-(d-l.depth)+u.height;const g=.8*e.metrics.xHeight-(d-l.depth);g>0&&(d+=g,h-=g)}const k=this.isExtensibleSymbol&&r.italic?-r.italic:0;b=new xe({individualShift:[{box:u,shift:h,marginLeft:k},{box:l,shift:-d}]}).wrap(e)}else u&&!l?(h=Math.max(h,e.metrics.sub1,u.height-.3448),b=new xe({shift:h,children:[{box:u,marginRight:m,marginLeft:this.isCharacterBox()?-((o=r.italic)!==null&&o!==void 0?o:0):0}]})):!u&&l&&(d=Math.max(d,p,l.depth+.10775),b=new xe({shift:-d,children:[{box:l,marginRight:m}]}),b.wrap(e));const y=new z(b,{classes:"msubsup"+(this.isSelected?" ML__selected":"")});return this.caret&&(y.caret=this.caret),new z([r,y],{type:a.type})}attachLimits(e,a){var i;const o=this.superscript?S.createBox(new V(e,this.style,"superscript"),this.superscript,{newList:!0}):null,r=this.subscript?S.createBox(new V(e,this.style,"subscript"),this.subscript,{newList:!0}):null;return o||r?function(n,s){var l,u,c,d,p;const h=n.metrics,m=new z(s.base),b=(l=s.baseShift)!==null&&l!==void 0?l:0,y=(u=s.slant)!==null&&u!==void 0?u:0;let x=0,k=0;s.above&&(x=(c=s.aboveShift)!==null&&c!==void 0?c:Math.max(h.bigOpSpacing1,h.bigOpSpacing3-s.above.depth)),s.below&&(k=(d=s.belowShift)!==null&&d!==void 0?d:Math.max(h.bigOpSpacing2,h.bigOpSpacing4-s.below.height));let g=null;if(s.below&&s.above){const f=h.bigOpSpacing5+s.below.height+s.below.depth+k+m.depth+b;g=new xe({bottom:f,children:[h.bigOpSpacing5,{box:s.below,marginLeft:-y,classes:["ML__center"]},k,{box:m,classes:["ML__center"]},x,{box:s.above,marginLeft:y,classes:["ML__center"]},h.bigOpSpacing5]}).wrap(n)}else if(s.below&&!s.above)g=new xe({top:m.height-b,children:[h.bigOpSpacing5,{box:s.below,marginLeft:-y,classes:["ML__center"]},k,{box:m,classes:["ML__center"]}]}).wrap(n);else if(!s.below&&s.above){const f=m.depth+b;g=new xe({bottom:f,children:[{box:m,classes:["ML__center"]},x,{box:s.above,marginLeft:y,classes:["ML__center"]},h.bigOpSpacing5]}).wrap(n)}else{const f=m.depth+b;g=new xe({bottom:f,children:[{box:m},h.bigOpSpacing5]}).wrap(n)}return new z(g,{type:(p=s.type)!==null&&p!==void 0?p:"mop"})}(e,{...a,above:o,below:r,type:(i=a==null?void 0:a.type)!==null&&i!==void 0?i:"mop"}):a.base.wrap(e)}bind(e,a){if(!a||e.isPhantom||this.value==="​")return a;let i=this.parent;for(;i&&!i.captureSelection;)i=i.parent;return i!=null&&i.captureSelection||(this.id||(this.id=e.makeID()),a.atomID=this.id),a}createMathfieldBox(e,a,i){const o=new ns(i,a,{type:"mathfield",mode:this.mode,maxFontSize:e.scalingFactor,style:{variant:"normal",...this.style,letterShapeStyle:e.letterShapeStyle,fontSize:Math.max(1,e.size+e.mathstyle.sizeDelta)},classes:""});return e.isTight&&(o.isTight=!0),this.mode==="math"&&this.style.variant!=="main"||(o.italic=0),o.right=o.italic,this.bind(e,o),jt(o,{type:"mord"})}createBox(e,a){var i,o,r,n;const s=(i=this.value)!==null&&i!==void 0?i:this.body,l=function(d){return Qn.includes(d)}(this.type)?this.type:void 0;let u=(o=a==null?void 0:a.classes)!==null&&o!==void 0?o:"";this.mode==="text"&&(u+=" ML__text");const c=typeof s=="string"||s===void 0?new z((r=s)!==null&&r!==void 0?r:null,{type:l,mode:this.mode,maxFontSize:e.scalingFactor,style:{variant:"normal",...this.style,letterShapeStyle:e.letterShapeStyle,fontSize:Math.max(1,e.size+e.mathstyle.sizeDelta)},classes:u,newList:a==null?void 0:a.newList}):(n=S.createBox(e,s,{type:l,mode:this.mode,style:this.style,classes:u,newList:a==null?void 0:a.newList}))!==null&&n!==void 0?n:new z(null);return e.isTight&&(c.isTight=!0),this.mode==="math"&&this.style.variant!=="main"||(c.italic=0),c.right=c.italic,this.bind(e,c),this.caret&&(this.superscript||this.subscript||(c.caret=this.caret)),c}isDigit(){var e;return this.type==="mord"&&this.value?/^[\d,.]$/.test(this.value):this.type==="group"&&((e=this.body)===null||e===void 0?void 0:e.length)===2&&this.body[0].type==="first"&&this.body[1].value===","}asDigit(){var e;return this.type==="mord"&&this.value&&/^[\d,.]$/.test(this.value)?this.value:this.type==="group"&&((e=this.body)===null||e===void 0?void 0:e.length)===2&&this.body[0].type==="first"&&this.body[1].value===","?".":""}}function Xt(t,e){if(!t||t.length===0)return"";if(t[0].type==="first"){if(t.length===1)return"";t=t.slice(1)}return t.length===0?"":he(tt(t,"cssClass").map(a=>he(tt(a,"color").map(i=>he(function(o){const r=[];let n=[],s="NONE";for(const l of o)l.type!=="first"&&(l.mode!==s?(n.length>0&&r.push(n),n=[l],s=l.mode):n.push(l));return n.length>0&&r.push(n),r}(i).map(o=>Ze.serialize(o,e)))))))}function Vi(t,e,a){var i,o,r,n;function s(h){return h.mode==="text"}if(!e||e.length===0)return null;const l=new V(t,a==null?void 0:a.style),u=!l.atomIdsSettings||!l.atomIdsSettings.groupNumbers;let c,d=[],p=(i=a==null?void 0:a.newList)!==null&&i!==void 0&&i;if(e.length===1){const h=e[0],m=h.render(l,{newList:p});m&&(u&&h.isSelected&&m.selected(!0),d=[m])}else{let h="",m=!0;for(const b of e){!((o=l.atomIdsSettings)===null||o===void 0)&&o.groupNumbers&&h&&(m&&b.isDigit()||!m&&s(b))&&(l.atomIdsSettings.overrideID=h);const y=b.render(l,{newList:p});l.atomIdsSettings&&(l.atomIdsSettings.overrideID=void 0),y&&(p=b.type==="group"&&!b.boxType,!((r=l.atomIdsSettings)===null||r===void 0)&&r.groupNumbers&&((b.isDigit()||s(b))&&(h&&m===b.isDigit()||(m=b.isDigit(),h=(n=b.id)!==null&&n!==void 0?n:"")),!h||(b.isDigit()||s(b))&&b.hasEmptyBranch("superscript")&&b.hasEmptyBranch("subscript")||(h="")),u&&b.isSelected&&y.selected(!0),d.push(y))}}return d.length===0?null:(a||l.isTight||d.length>1?(c=new z(d,{isTight:l.isTight,...a??{}}),c.isSelected=d.every(h=>h.isSelected)):c=d[0],c.wrap(l).wrap(t))}S.customSerializer={};class ia extends S{constructor(e,a,i,o){super("accent",i,{command:e,style:o.style}),o.accentChar?this.accent=o.accentChar:this.svgAccent=o==null?void 0:o.svgAccent,this.body=a,this.skipBoundary=!0}static fromJson(e,a){return new ia(e.command,e.body,a,{accentChar:e.accentChar,svgAccent:e.svgAccent,style:e.style})}toJson(){return{...super.toJson(),accentChar:this.accent,svgAccent:this.svgAccent}}render(e){var a;const i=new V(e,this.style,"cramp"),o=(a=S.createBox(i,this.body))!==null&&a!==void 0?a:new z(null);let r=0;!this.hasEmptyBranch("body")&&this.body.length===2&&this.body[1].isCharacterBox()&&(r=o.skew);let n,s=Math.min(o.height,.431);if(this.svgAccent)n=Qa(this.svgAccent),s=i.metrics.bigOpSpacing1-s;else if(this.accent){const u=new z(this.accent,{fontFamily:"Main-Regular"});u.italic=0;const c=this.accent===8407?" ML__accent-vec":"";n=new z(new z(u),{classes:"ML__accent-body"+c})}n=new xe({shift:0,children:[{box:new z(o)},-s,{box:n,marginLeft:o.left+2*r,classes:["ML__center"]}]});const l=new z(n,{newList:!0,type:"mord"});return this.caret&&(l.caret=this.caret),this.bind(i,l.wrap(i)),this.attachSupsub(i,{base:l})}}const ka={"(":")","{":"}","[":"]","|":"|","\\lbrace":"\\rbrace","\\lparen":"\\rparen","\\{":"\\}","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},ss=Object.fromEntries(Object.entries(ka).map(([t,e])=>[e,t]));function di(t){var e;return(e={"[":91,"]":93,"(":40,")":41,"\\mid":8739,"|":8739,"∣":8739,"∥":8741,"\\|":8739,"\\{":123,"\\}":125,"\\lbrace":123,"\\rbrace":125,"\\lparen":40,"\\rparen":41,"\\lbrack":91,"\\rbrack":93,"\\vert":8739,"\\lvert":8739,"\\mvert":8739,"\\rvert":8739,"\\Vert":8741,"\\lVert":8741,"\\mVert":8741,"\\rVert":8741,"\\parallel":8741,"\\shortparallel":8741,"\\langle":10216,"\\rangle":10217,"\\lfloor":8970,"\\rfloor":8971,"\\lceil":8968,"\\rceil":8969,"\\ulcorner":9484,"\\urcorner":9488,"\\llcorner":9492,"\\lrcorner":9496,"\\lgroup":10222,"\\rgroup":10223,"\\lmoustache":9136,"\\rmoustache":9137,"\\surd":8730}[t])!==null&&e!==void 0?e:t.codePointAt(0)}function Ur(t,e,a,i,o){const r=new V(i,o==null?void 0:o.style,"textstyle"),n=new z(di(t),{fontFamily:"Size"+e+"-Regular",classes:"ML__delim-size"+e}).wrap(r);return a&&n.setTop(.25*(1-r.scalingFactor)),n}function Xr(t,e,a,i,o){var r;let n,s,l,u;n=l=u=di(t),s=null;let c="Size1-Regular";t==="\\vert"||t==="\\lvert"||t==="\\rvert"||t==="\\mvert"||t==="\\mid"?l=n=u=8739:t==="\\Vert"||t==="\\lVert"||t==="\\rVert"||t==="\\mVert"||t==="\\|"?l=n=u=8741:t==="\\uparrow"?l=u=9168:t==="\\Uparrow"?l=u=8214:t==="\\downarrow"?n=l=9168:t==="\\Downarrow"?n=l=8214:t==="\\updownarrow"?(n=8593,l=9168,u=8595):t==="\\Updownarrow"?(n=8657,l=8214,u=8659):t==="["||t==="\\lbrack"?(n=9121,l=9122,u=9123,c="Size4-Regular"):t==="]"||t==="\\rbrack"?(n=9124,l=9125,u=9126,c="Size4-Regular"):t==="\\lfloor"||t==="⌊"?(l=n=9122,u=9123,c="Size4-Regular"):t==="\\lceil"||t==="⌈"?(n=9121,l=u=9122,c="Size4-Regular"):t==="\\rfloor"||t==="⌋"?(l=n=9125,u=9126,c="Size4-Regular"):t==="\\rceil"||t==="⌉"?(n=9124,l=u=9125,c="Size4-Regular"):t==="("||t==="\\lparen"?(n=9115,l=9116,u=9117,c="Size4-Regular"):t===")"||t==="\\rparen"?(n=9118,l=9119,u=9120,c="Size4-Regular"):t==="\\{"||t==="\\lbrace"?(n=9127,s=9128,u=9129,l=9130,c="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(n=9131,s=9132,u=9133,l=9130,c="Size4-Regular"):t==="\\lgroup"||t==="⟮"?(n=9127,u=9129,l=9130,c="Size4-Regular"):t==="\\rgroup"||t==="⟯"?(n=9131,u=9133,l=9130,c="Size4-Regular"):t==="\\lmoustache"||t==="⎰"?(n=9127,u=9133,l=9130,c="Size4-Regular"):t==="\\rmoustache"||t==="⎱"?(n=9131,u=9129,l=9130,c="Size4-Regular"):t==="\\surd"?(n=57345,u=9143,l=57344,c="Size4-Regular"):t==="\\ulcorner"?(n=9484,l=u=32):t==="\\urcorner"?(n=9488,l=u=32):t==="\\llcorner"?(u=9492,l=n=32):t==="\\lrcorner"&&(n=9496,l=n=32);const d=Ft(n,c),p=d.height+d.depth,h=Ft(l,c),m=h.height+h.depth,b=Ft(u,c),y=b.height+b.depth;let x=0,k=1;if(s!==null){const q=Ft(s,c);x=q.height+q.depth,k=2}const g=p+y+x,f=Math.max(0,Math.ceil((e-g)/(k*m))),_=g+f*k*m;let w=.25;a&&(w*=i.scalingFactor);const T=_/2-w,C=[];C.push({box:new z(u,{fontFamily:c})}),C.push(-.008);const K=new z(l,{fontFamily:c});if(s===null)for(let q=0;q<f;q++)C.push({box:K});else{for(let q=0;q<f;q++)C.push({box:K});C.push(-.008),C.push({box:new z(s,{fontFamily:c})}),C.push(-.008);for(let q=0;q<f;q++)C.push({box:K})}C.push(-.008),C.push({box:new z(n,{fontFamily:c})});let $="";c==="Size1-Regular"?$=" delim-size1":c==="Size4-Regular"&&($=" delim-size4");const j=new xe({bottom:T,children:C},{classes:$});return new z(j,{...o??{},classes:((r=o==null?void 0:o.classes)!==null&&r!==void 0?r:"")+" ML__delim-mult"})}const Gr=new Set(["(",")","\\lparen","\\rparen","[","]","\\lbrack","\\rbrack","\\{","\\}","\\lbrace","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd","⌊","⌋","⌈","⌉"]),ls=new Set(["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\mvert","\\mid","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache","⟮","⟯","⎰","⎱"]),Zr=new Set(["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"]),us=[0,1.2,1.8,2.4,3],cs=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],ds=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"stack"}],ps=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}];function pi(t,e,a,i,o,r){var n;if(!e||e.length===0||e===".")return Ht(o,t,t);let s;e==="<"||e==="\\lt"?e="\\langle":e!==">"&&e!=="\\gt"||(e="\\rangle"),s=Zr.has(e)?cs:Gr.has(e)?ps:ds;const l=function(c,d,p,h){for(let b={"-4":0,"-3":1,0:2}[h.mathstyle.sizeDelta];b<p.length&&p[b].type!=="stack";b++){const y=Ft(c,(m=p[b]).type==="small"?"Main-Regular":m.type==="large"?"Size"+m.size+"-Regular":"Size4-Regular");if(y.defaultMetrics)return{type:"small",mathstyle:"scriptstyle"};let x=y.height+y.depth;if(p[b].type==="small"&&(p[b].mathstyle==="scriptscriptstyle"?x*=co[Math.max(1,h.size-2)]:p[b].mathstyle==="scriptstyle"&&(x*=co[Math.max(1,h.size-1)])),x>d)return p[b]}var m;return p[p.length-1]}(di(e),a,s,o),u=new V(o,r==null?void 0:r.style,l.mathstyle);return l.type==="small"?function(c,d,p,h){const m=new z(di(c),{fontFamily:"Main-Regular"}).wrap(d,h);return p&&m.setTop(.25*(1-d.scalingFactor)),m}(e,u,i,{type:t,classes:"ML__small-delim "+((n=r==null?void 0:r.classes)!==null&&n!==void 0?n:"")}):l.type==="large"?Ur(e,l.size,i,u,{...r,type:t}):Xr(e,a,i,u,{...r,type:t})}function wa(t,e,a,i,o,r){if(e===".")return Ht(o,t,r==null?void 0:r.classes);const n=.25*o.scalingFactor,s=Math.max(a-n,i+n);return pi(t,e,Math.max(s/500*901,2*s-.5),!0,o,r)}function Ht(t,e,a){const i=new V(t,void 0,"textstyle");return new z(null,{classes:" nulldelimiter "+(a??""),type:e}).wrap(i)}class We extends S{constructor(e,a,i){var o,r,n,s;super("overunder",a,{command:e,serialize:i.serialize,style:i.style}),this.skipBoundary=(o=i.skipBoundary)===null||o===void 0||o,this.subsupPlacement=i.supsubPlacement,this.body=i.body,this.svgAbove=i.svgAbove,this.svgBelow=i.svgBelow,this.svgBody=i.svgBody,this.above=i.above,this.below=i.below,this.boxType=(r=i.boxType)!==null&&r!==void 0?r:"mord",this.paddedBody=(n=i.paddedBody)!==null&&n!==void 0&&n,this.paddedLabels=(s=i.paddedLabels)!==null&&s!==void 0&&s}static fromJson(e,a){return new We(e.command,a,e)}toJson(){const e={};return this.skipBoundary||(e.skipBoundary=!1),this.subsupPlacement&&(e.subsupPlacement=this.subsupPlacement),this.svgAbove&&(e.svgAbove=this.svgAbove),this.svgBelow&&(e.svgBelow=this.svgBelow),this.svgBody&&(e.svgBody=this.svgBody),this.boxType!=="mord"&&(e.boxType=this.boxType),this.paddedBody&&(e.paddedBody=!0),this.paddedLabels&&(e.paddedLabels=!0),{...super.toJson(),...e}}render(e){let a=this.svgBody?Qa(this.svgBody):S.createBox(e,this.body,{newList:!0});const i=new V(e,this.style,"scriptstyle");let o=null;this.svgAbove?o=Qa(this.svgAbove):this.above&&(o=S.createBox(i,this.above,{newList:!0}));let r=null;this.svgBelow?r=Qa(this.svgBelow):this.below&&(r=S.createBox(i,this.below,{newList:!0})),this.paddedBody&&(a=new z([Ht(e,"mopen"),a,Ht(e,"mclose")],{newList:!0}));let n=function(s,l){if(!l.base)return null;if(!l.above&&!l.below){const h=new z(l.base,{type:l.type});return h.setStyle("position","relative"),h}let u=0;l.above&&(u=-l.above.depth+s.metrics.bigOpSpacing2);let c=null;const d=l.base,p=["ML__center"];if(l.paddedAboveBelow&&p.push("ML__label_padding"),l.below&&l.above){const h=s.metrics.bigOpSpacing5+l.below.height+l.below.depth+d.depth+0;c=new xe({bottom:h,children:[s.metrics.bigOpSpacing5,{box:l.below,classes:p},{box:d,classes:["ML__center"]},u,{box:l.above,classes:p},s.metrics.bigOpSpacing5]})}else l.below?c=new xe({top:d.height-0,children:[s.metrics.bigOpSpacing5,{box:l.below,classes:p},{box:d,classes:["ML__center"]}]}):l.above&&(c=new xe({bottom:d.depth+0,children:[{box:d,classes:["ML__center"]},u,{box:l.above,classes:p},s.metrics.bigOpSpacing5]}));return new z(c,{type:l.type})}(e,{base:a,above:o,below:r,type:this.boxType==="mbin"||this.boxType==="mrel"?this.boxType:"mord",paddedAboveBelow:this.paddedLabels});return n?(n=this.subsupPlacement==="over-under"?this.attachLimits(e,{base:n,type:n.type}):this.attachSupsub(e,{base:n}),this.caret&&(n.caret=this.caret),this.bind(e,n)):null}}class Se extends S{constructor(e,a,i){var o,r,n;super("group",a,{command:i==null?void 0:i.command,mode:(o=i==null?void 0:i.mode)!==null&&o!==void 0?o:"math",serialize:i==null?void 0:i.serialize,style:i==null?void 0:i.style}),this.body=e,this.mathstyleName=i==null?void 0:i.mathstyleName,this.latexOpen=i==null?void 0:i.latexOpen,this.latexClose=i==null?void 0:i.latexClose,this.cssId=i==null?void 0:i.cssId,this.htmlData=i==null?void 0:i.htmlData,this.htmlStyle=i==null?void 0:i.htmlStyle,this.customClass=i==null?void 0:i.customClass,this.boxType=i==null?void 0:i.boxType,this.skipBoundary=!0,this.captureSelection=(r=i==null?void 0:i.captureSelection)!==null&&r!==void 0&&r,this.changeMode=(n=i==null?void 0:i.changeMode)!==null&&n!==void 0&&n,this.displayContainsHighlight=!1,e&&e.length===1&&e[0].command===","&&(this.captureSelection=!0)}static fromJson(e,a){return new Se(e.body,a,e)}toJson(){const e={};return this.mathstyleName&&(e.mathstyleName=this.mathstyleName),this.latexOpen&&(e.latexOpen=this.latexOpen),this.latexClose&&(e.latexClose=this.latexClose),this.cssId&&(e.cssId=this.cssId),this.htmlData&&(e.htmlData=this.htmlData),this.htmlStyle&&(e.htmlStyle=this.htmlStyle),this.customClass&&(e.customClass=this.customClass),this.boxType&&(e.boxType=this.boxType),this.captureSelection&&(e.captureSelection=!0),this.changeMode&&(e.changeMode=!0),{...super.toJson(),...e}}render(e){const a=new V(e,this.style,this.mathstyleName),i=S.createBox(a,this.body,{type:this.boxType,classes:this.customClass,mode:this.mode,style:{backgroundColor:this.style.backgroundColor},newList:!this.boxType});return i?(this.cssId&&(i.cssId=this.cssId),this.htmlData&&(i.htmlData=this.htmlData),this.htmlStyle&&(i.htmlStyle=this.htmlStyle),this.caret&&(i.caret=this.caret),this.bind(e,i)):null}serialize(e){let a=this.bodyToLatex(e);return typeof this.latexOpen=="string"&&(a=this.latexOpen+a+this.latexClose),this.htmlData&&(a=`\\htmlData{${this.htmlData}}{${a}}`),this.htmlStyle&&(a=`\\htmlStyle{${this.htmlStyle}}{${a}}`),this.customClass&&(a=`\\class{${this.customClass}}{${a}}`),this.cssId&&(a=`\\cssId{${this.cssId}}{${a}}`),a}}class Dt extends S{constructor(e,a,i,o){super("spacing",i,{command:e,style:a}),this.width=o}static fromJson(e,a){return new Dt(e.command,e.style,a,e.width)}toJson(){const e={};return this.width&&(e.width=this.width),{...super.toJson(),...e}}render(e){var a;let i;if(this.width)i=new z(null,{classes:"mspace"}),i.left=dt(this.width.glue);else{const o=(a={"\\qquad":"qquad","\\quad":"quad","\\enspace":"enspace","\\;":"thickspace","\\:":"mediumspace","\\,":"thinspace","\\!":"negativethinspace"}[this.command])!==null&&a!==void 0?a:"mediumspace";i=new z(null,{classes:o})}return i=this.bind(e,i),this.caret&&(i.caret=this.caret),i}serialize(e){var a;let i=(a=this.command)!==null&&a!==void 0?a:"";return this.command==="\\hspace"||this.command==="\\hspace*"?Number.isFinite(this.width)?i+=`{${this.width}em'}`:i+="{0pt}":Number.isFinite(this.width)&&(i+=` ${this.width}em`),i}}class ze extends S{constructor(e,a,i,o){super("leftright",i,{style:o.style,displayContainsHighlight:!0}),this.variant=e,this.body=a,this.leftDelim=o.leftDelim,this.rightDelim=o.rightDelim}static fromJson(e,a){var i;return new ze((i=e.variant)!==null&&i!==void 0?i:"",e.body,a,e)}toJson(){const e=super.toJson();return this.variant&&(e.variant=this.variant),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),e}serialize(e){var a,i;const o=this.matchingRightDelim();return this.variant==="left...right"?he(["\\left"+((a=this.leftDelim)!==null&&a!==void 0?a:"."),this.bodyToLatex(e),"\\right"+o]):this.variant==="mleft...mright"?he(["\\mleft"+((i=this.leftDelim)!==null&&i!==void 0?i:"."),this.bodyToLatex(e),"\\mright"+o]):he([this.leftDelim&&this.leftDelim!=="."?this.leftDelim:"",this.bodyToLatex(e),o])}matchingRightDelim(){var e,a;if(this.rightDelim&&this.rightDelim!=="?")return this.rightDelim;const i=(e=this.leftDelim)!==null&&e!==void 0?e:".";return(a=ka[i])!==null&&a!==void 0?a:i}render(e){var a,i,o;const r=new V(e,this.style),n=new V(e,this.style,"textstyle"),s=(a=S.createBox(r,this.body,{newList:!0}))!==null&&a!==void 0?a:new z(null,{newList:!0}),l=s.height/n.scalingFactor,u=s.depth/n.scalingFactor,c=[];if(this.leftDelim&&c.push(this.bind(n,wa("mopen",this.leftDelim,l,u,n,{classes:"ML__open"+(this.containsCaret?" ML__contains-caret":""),mode:this.mode,style:this.style}))),s){if(s.children)for(let h=0;h<s.children.length;h++){const m=s.children[h];if(m.delim){const b=m.caret;s.children[h]=this.bind(r,wa("minner",m.delim,l,u,r)),s.children[h].caret=b}}c.push(s)}if(this.rightDelim){let h=this.containsCaret?" ML__contains-caret":"",m=this.rightDelim;m==="?"&&(this.context.smartFence?(m=this.matchingRightDelim(),h+=" ML__smart-fence__close"):m="."),c.push(this.bind(n,wa("mclose",m,l,u,n,{classes:h+" ML__close",mode:this.mode,style:this.style})))}const d=(o=this.variant==="mleft...mright"||((i=this.leftSibling)===null||i===void 0?void 0:i.isFunction))!==null&&o!==void 0&&o,p=new z(c,{type:d?"mclose":"minner",classes:"left-right"});return this.caret&&(p.caret=this.caret),this.bind(r,p.wrap(r))}}class sa extends S{constructor(e,a){super("msubsup",e,{style:a==null?void 0:a.style})}static fromJson(e,a){const i=new sa(a,e);for(const o of It)e[o]&&i.setChildren(e[o],o);return i}toJson(){return super.toJson()}render(e){var a;const i=this.leftSibling,o=new V(e,{isPhantom:!0}),r=(a=i.render(o))!==null&&a!==void 0?a:new z(null),n=new z(null,{height:r.height,depth:r.depth});return this.attachSupsub(e,{base:n,isCharacterBox:i.isCharacterBox(),type:"supsub"})}serialize(e){return this.supsubToLatex(e)}}class ce extends S{constructor(e,a){var i;const o=(a==null?void 0:a.value)||e.placeholderSymbol;super("placeholder",e,{mode:(i=a==null?void 0:a.mode)!==null&&i!==void 0?i:"math",style:a==null?void 0:a.style,value:o,command:"\\placeholder"}),this.captureSelection=!0,this.placeholderId=a==null?void 0:a.placeholderId,a!=null&&a.default&&(this.defaultValue=a==null?void 0:a.default)}static fromJson(e,a){return new ce(a,e)}toJson(){const e=super.toJson();return this.placeholderId&&(e.placeholderId=this.placeholderId),this.value===this.context.placeholderSymbol&&delete e.value,this.defaultValue&&(e.defaultValue=this.defaultValue.map(a=>a.toJson())),e}render(e){if(typeof e.renderPlaceholder=="function")return e.renderPlaceholder(e,this);let a="";return this.caret&&(a+="ML__placeholder-selected "),this.isSelected&&(a+=" ML__selected "),this.createBox(e,{classes:a})}serialize(e){var a;let i=(a=this.value)!==null&&a!==void 0?a:"";return i===this.context.placeholderSymbol&&(i=""),`\\placeholder${this.placeholderId?`[${this.placeholderId}]`:""}${this.defaultValue?`[${S.serialize(this.defaultValue,e)}]`:""}{${i}}`}}class Ci extends S{constructor(e,a){super("error",a,{value:e,command:e,mode:"math"}),this.verbatimLatex=e}static fromJson(e,a){return new Ci(e.command,a)}toJson(){return super.toJson()}render(e){const a=this.createBox(e,{classes:"ML__error"});return this.caret&&(a.caret=this.caret),a}}class Ai extends S{constructor(e,a,i){var o,r;super("macro",a,{command:e}),this.body=i.body,i.captureSelection===void 0?i.args?this.captureSelection=!1:this.captureSelection=!0:this.captureSelection=i.captureSelection,this.macroArgs=(o=i.args)!==null&&o!==void 0?o:"",this.expand=(r=i.expand)!==null&&r!==void 0&&r}static fromJson(e,a){return new Ai(e.command,a,e)}toJson(){const e=super.toJson();return this.expand&&(e.expand=!0),this.captureSelection!==void 0&&(e.captureSelection=this.captureSelection),this.macroArgs&&(e.args=this.macroArgs),e}serialize(e){return e.expandMacro&&this.expand?this.bodyToLatex(e):this.command+this.macroArgs}render(e){const a=S.createBox(e,this.body);return a?(this.caret&&(a.caret=this.caret),this.bind(e,a)):null}}class Jt extends S{constructor(e,a,i,o){super("text",o,{command:e,mode:"text",displayContainsHighlight:!0}),this.value=a,this.verbatimLatex=a,this.applyStyle(i)}static fromJson(e,a){return new Jt(e.command,e.value,e.style,a)}toJson(){return super.toJson()}render(e){const a=this.createBox(e);return this.caret&&(a.caret=this.caret),a}serialize(e){var a;return(a=this.verbatimLatex)!==null&&a!==void 0?a:li("text",this.value.codePointAt(0))}}function ja(t){return!/^<({|}|\$|\$\$|space)>$/.test(t)}class Di{constructor(e,a,i){var o,r,n,s,l,u;this.index=0,this.endCount=0,this.tokens=e,this.context=a,this.errors=[],this.args=(o=i.args)!==null&&o!==void 0?o:null,this.smartFence=(r=i.smartFence)!==null&&r!==void 0?r:a.smartFence,this._currentParsingContext={parent:void 0,mathlist:[],style:(n=i.style)!==null&&n!==void 0?n:{},parseMode:(s=i.parseMode)!==null&&s!==void 0?s:"math",mathstyle:(l=i.mathstyle)!==null&&l!==void 0?l:"displaystyle",registers:(u=i.registers)!==null&&u!==void 0?u:a.registers,tabular:!1}}get currentContext(){return this._currentParsingContext}get rootContext(){let e=this._currentParsingContext;for(;e.parent;)e=e.parent;return e}beginContext(e){var a,i,o;const r={parent:this.currentContext,mathlist:[],style:{...this.currentContext.style},parseMode:(a=e==null?void 0:e.mode)!==null&&a!==void 0?a:this.currentContext.parseMode,mathstyle:(i=e==null?void 0:e.mathstyle)!==null&&i!==void 0?i:this.currentContext.mathstyle,registers:null,tabular:(o=e==null?void 0:e.tabular)!==null&&o!==void 0&&o};this._currentParsingContext=r}endContext(){this._currentParsingContext=this._currentParsingContext.parent}onError(e){this.errors.push({before:pa(this.tokens.slice(this.index,this.index+10)),after:pa(this.tokens.slice(Math.max(0,this.index-10),this.index)),...e})}get mathlist(){return this.currentContext.mathlist}set mathlist(e){this.currentContext.mathlist=e}get parseMode(){return this.currentContext.parseMode}set parseMode(e){this.currentContext.parseMode=e}get tabularMode(){return this.currentContext.tabular}get style(){let e=this.currentContext;for(;e;){if(e.style)return e.style;e=e.parent}return{}}set style(e){this.currentContext.style=e}getRegister(e){var a,i,o;if(e.startsWith("global "))return(i=(a=this.rootContext.registers)===null||a===void 0?void 0:a[e.slice(7)])!==null&&i!==void 0?i:0;let r=this.currentContext;for(;r;){if(!((o=r.registers)===null||o===void 0)&&o[e])return r.registers[e];r=r.parent}return 0}setRegister(e,a){var i;if(e.startsWith("global ")){e=e.slice(7);let o=this.currentContext;for(;o;)!((i=o.registers)===null||i===void 0)&&i[e]&&delete o.registers[e],o=o.parent;this.rootContext.registers[e]=a}else this.currentContext.registers||(this.currentContext.registers={}),this.currentContext.registers[e]=a}end(){return this.endCount++,this.index>=this.tokens.length||this.endCount>1e3}get(){return this.endCount=0,this.index<this.tokens.length?this.tokens[this.index++]:""}peek(){return this.tokens[this.index]}match(e){return this.tokens[this.index]===e&&(this.index++,!0)}lastSubsupAtom(){let e;return this.mathlist.length>0&&(e=this.mathlist[this.mathlist.length-1],e.type==="msubsup"||e.subsupPlacement!==void 0)||(e=new sa(this.context,{style:this.style}),this.mathlist.push(e)),e}hasPattern(e){return e.test(this.tokens[this.index])}hasInfixCommand(){var e;const{index:a}=this;if(a<this.tokens.length&&this.tokens[a].startsWith("\\")){const i=this.context.getDefinition(this.tokens[a],this.parseMode);return!(!i||i.definitionType==="symbol")&&!(i.ifMode&&!i.ifMode.includes(this.parseMode))&&(e=i.infix)!==null&&e!==void 0&&e}return!1}matchColumnSeparator(){const{index:e}=this;return!(!this.tabularMode||this.tokens[e]!=="&"||(this.index++,0))}matchRowSeparator(){const{index:e}=this;return!(!this.tabularMode||this.tokens[e]!=="\\\\"&&this.tokens[e]!=="\\cr"||(this.index++,0))}placeholder(){var e;const a=(e=this.args)===null||e===void 0?void 0:e.call(this,"?");return a?st(a,this.context,{parseMode:this.parseMode,mathstyle:"textstyle"}):[new ce(this.context,{mode:this.parseMode,style:this.style})]}matchWhitespace(){let e=!1;for(;this.match("<space>");)e=!0;return e}skipUntilToken(e){let a=this.tokens[this.index];for(;a&&a!==e;)a=this.tokens[++this.index];a===e&&this.index++}skipFiller(){let e=!1;do{const a=this.matchWhitespace(),i=this.match("\\relax");e=!a&&!i}while(!e)}matchKeyword(e){const a=this.index;let i=this.end(),o="";for(;!i;){const n=this.get();ja(n)?(o+=n,i=this.end()||o.length>=e.length):i=!0}const r=e.toUpperCase()===o.toUpperCase();return r||(this.index=a),r}scanString(){let e="";for(;!this.end();)if(this.match("<space>"))e+=" ";else{const a=this.peek();if(a==="]")break;if(ja(a))e+=this.get();else{if(!a.startsWith("\\"))break;this.onError({code:"unbalanced-braces"}),e+=this.get()}}return e}scanBalancedString(){let e="",a=this.end(),i=1;for(;!a;){if(this.match("<space>"))e+=" ";else{const o=this.get();o==="<{>"?(e+="{",i+=1):o==="<}>"?(i-=1,i>0?e+="}":this.index-=1):e+=o==="<$>"?"$":o==="<$$>"?"$$":o}a=i===0||this.end()}return e}matchLiteralArg(){var e;let a="";if(this.match("<{>")){let i=1;for(;i>0&&!this.end();){const o=this.get();o==="<}>"?(i-=1,i>0&&(a+="}")):o==="<{>"?(i+=1,a+="{"):a+=(e={"<space>":" ","<$$>":"$$","<$>":"$"}[o])!==null&&e!==void 0?e:o}}return a}scanNumber(e=!0){var a,i;let o=!1,r=this.peek();for(;r==="<space>"||r==="+"||r==="-";)this.get(),r==="-"&&(o=!o),r=this.peek();e=Boolean(e);let n=10,s=/\d/;if(this.match("'"))n=8,s=/[0-7]/,e=!0;else if(this.match('"')||this.match("x"))n=16,s=/[\dA-F]/,e=!0;else if(this.match("`"))return r=this.get(),r?r.startsWith("\\")&&r.length===2?(o?-1:1)*((a=r.codePointAt(1))!==null&&a!==void 0?a:0):(o?-1:1)*((i=r.codePointAt(0))!==null&&i!==void 0?i:0):null;let l="";for(;this.hasPattern(s);)l+=this.get();if(!e&&(this.match(".")||this.match(",")))for(l+=".";this.hasPattern(s);)l+=this.get();const u=e?Number.parseInt(l,n):Number.parseFloat(l);return Number.isNaN(u)?null:o?-u:u}scanDimen(){var e,a,i;let o,r=this.scanNumber(!1);if(r===null){if(!(!((e=this.peek())===null||e===void 0)&&e.startsWith("\\")))return null;r=1}return this.matchWhitespace(),this.matchKeyword("pt")?o={dimension:r,unit:"pt"}:this.matchKeyword("mm")?o={dimension:r,unit:"mm"}:this.matchKeyword("cm")?o={dimension:r,unit:"cm"}:this.matchKeyword("ex")?o={dimension:r,unit:"ex"}:this.matchKeyword("px")?o={dimension:r,unit:"px"}:this.matchKeyword("em")?o={dimension:r,unit:"em"}:this.matchKeyword("bp")?o={dimension:r,unit:"bp"}:this.matchKeyword("dd")?o={dimension:r,unit:"dd"}:this.matchKeyword("pc")?o={dimension:r,unit:"pc"}:this.matchKeyword("in")?o={dimension:r,unit:"in"}:this.matchKeyword("mu")?o={dimension:r,unit:"mu"}:!((a=this.peek())===null||a===void 0)&&a.startsWith("\\")?(o=(i=zi(this.getRegister(this.get().slice(1)),this.context))!==null&&i!==void 0?i:{dimension:0},o.dimension*=r):(this.match("\\relax")||this.onError({code:"missing-unit"}),o={dimension:r,unit:"pt"}),o}scanGlue(){const e=this.scanDimen();if(e===null)return null;const a={glue:e};return this.matchWhitespace(),this.match("\\relax")||(this.matchKeyword("plus")&&this.scanDimen(),this.matchWhitespace(),this.match("\\relax")||(this.matchWhitespace(),this.matchKeyword("minus")&&this.scanDimen())),a}scanColspec(){this.matchWhitespace();const e=[];for(;!this.end()&&this.peek()!=="<}>"&&this.peek()!=="]";){const a=this.get();a==="c"||a==="r"||a==="l"?e.push({align:a}):a==="|"?e.push({separator:"solid"}):a===":"?e.push({separator:"dashed"}):a==="@"&&(this.match("<{>")&&(this.beginContext({mode:"math"}),e.push({gap:this.parse(i=>i==="<}>")}),this.endContext()),this.match("<}>")||this.onError({code:"unbalanced-braces"}))}return e}parseModeSet(){let e="";if(this.match("\\(")&&(e="\\)"),!e&&this.match("\\[")&&(e="\\]"),!e)return null;this.beginContext({mode:"math",mathstyle:e==="\\)"?"textstyle":"displaystyle"});const a=new Se(this.parse(i=>i===e),this.context,{mathstyleName:e==="\\)"?"textstyle":"displaystyle",latexOpen:e==="\\]"?"\\[":"\\(",latexClose:e,boxType:"mord"});return this.match(e)||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),a.hasEmptyBranch("body")?null:a}parseModeShift(){let e="";if(this.match("<$>")&&(e="<$>"),!e&&this.match("<$$>")&&(e="<$$>"),!e)return null;this.beginContext({mode:"math",mathstyle:"textstyle"});const a=new Se(this.parse(i=>i===e),this.context,{mathstyleName:e==="<$>"?"textstyle":"displaystyle",latexOpen:e==="<$>"?"$ ":"$$ ",latexClose:e==="<$>"?" $":" $$"});return this.match(e)||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),a.hasEmptyBranch("body")?null:a}parseEnvironment(){if(!this.match("\\begin"))return null;const e=this.parseArgument("string");if(!e)return null;const a=function(l){var u;return(u=Vr[l])!==null&&u!==void 0?u:null}(e);if(!a)return this.onError({code:"unknown-environment",arg:e}),null;const i=[];if(a.params)for(const l of a.params)if(l.isOptional)i.push(this.parseOptionalArgument(l.type));else{const u=this.parseArgument(l.type);u||this.onError({code:"missing-argument",arg:e}),i.push(u)}this.beginContext({tabular:a.tabular});const o=[],r=[];let n=[],s=!1;do if(this.end()&&(this.onError({code:"unbalanced-environment",arg:e}),s=!0),!s&&this.match("\\end")&&(this.parseArgument("string")!==e&&this.onError({code:"unbalanced-environment",arg:e}),s=!0),!s)if(this.matchColumnSeparator())n.push(this.mathlist),this.mathlist=[];else if(this.matchRowSeparator()){n.push(this.mathlist),this.mathlist=[];let l=null;this.matchWhitespace(),this.match("[")&&(l=this.scanDimen(),this.matchWhitespace(),this.match("]")),r.push(l??{dimension:0}),o.push(n),n=[]}else this.mathlist.push(...this.parse(l=>l==="<}>"||l==="&"||l==="\\end"||l==="\\cr"||l==="\\\\"));while(!s);return n.push(this.mathlist),n.length>0&&o.push(n),this.endContext(),a.createAtom(this.context,e,o,r,i)}parse(e){this.beginContext(),e||(e=l=>l==="<}>");let a="",i=null,o=[],r=null;const n=this.mathlist;for(this.mathlist=[];!this.end()&&!e(this.peek());)this.hasInfixCommand()&&!a?(a=this.get(),i=this.context.getDefinition(a,"math"),i&&(o=this.parseArguments(i)[1]),r=this.mathlist,this.mathlist=[]):this.parseToken();let s;return a?(o.unshift(this.mathlist),this.mathlist=n,r&&o.unshift(r),s=[i.createAtom(a,o,this.style,this.context)]):(s=this.mathlist,this.mathlist=n),this.endContext(),s}parseGroup(){if(!this.match("<{>"))return null;const e=new Se(this.parse(a=>a==="<}>"),this.context,{mode:this.parseMode,latexOpen:"{",latexClose:"}"});return this.match("<}>")||this.onError({code:"unbalanced-braces"}),e}scanSmartFence(){if(this.matchWhitespace(),!this.match("("))return null;this.beginContext();let e=1;for(;!this.end()&&e!==0;)this.match("(")&&(e+=1),this.match(")")&&(e-=1),e!==0&&this.parseToken();e===0&&this.match(")");const a=new ze("",this.mathlist,this.context,{leftDelim:"(",rightDelim:e===0?")":"?"});return this.endContext(),a}scanDelim(){this.matchWhitespace();const e=this.get();if(!e)return this.onError({code:"unexpected-end-of-string"}),null;let a=".";(e.startsWith("\\")||ja(e))&&(a=e);const i=this.context.getDefinition(a,"math");return i?i.definitionType==="function"&&i.ifMode&&!i.ifMode.includes(this.parseMode)?(this.onError({code:"unexpected-delimiter",arg:a}),null):i.definitionType!=="symbol"||i.type!=="mopen"&&i.type!=="mclose"?/^(\.|\?|\||<|>|\\vert|\\Vert|\\\||\\surd|\\uparrow|\\downarrow|\\Uparrow|\\Downarrow|\\updownarrow|\\Updownarrow|\\mid|\\mvert|\\mVert)$/.test(a)?a:(this.onError({code:"unexpected-delimiter",arg:a}),null):a:(this.onError({code:"unknown-command",arg:a}),null)}parseLeftRight(){var e;if(this.match("\\right")||this.match("\\mright"))return this.onError({code:"unbalanced-braces"}),null;let a="\\right";if(!this.match("\\left")){if(!this.match("\\mleft"))return null;a="\\mright"}const i=this.scanDelim();if(!i)return null;for(this.beginContext();!this.end()&&!this.match(a);)this.parseToken();const o=this.mathlist;this.endContext();const r=(e=this.scanDelim())!==null&&e!==void 0?e:".";return new ze(a==="\\right"?"left...right":"mleft...mright",o,this.context,{leftDelim:i,rightDelim:r,style:this.style})}parseSupSub(){if(this.parseMode!=="math")return!1;let e=this.peek();if(e!=="^"&&e!=="_"&&e!=="'")return!1;for(;e==="^"||e==="_"||e==="'";){if(this.match("'"))this.match("'")?this.lastSubsupAtom().addChild(new S("mord",this.context,{command:"\\doubleprime",mode:"math",value:"′′"}),"superscript"):this.lastSubsupAtom().addChild(new S("mord",this.context,{command:"\\prime",mode:"math",value:"′"}),"superscript");else if(this.match("^")||this.match("_")){const a=this.parseArgument("math");a?this.lastSubsupAtom().addChildren(a,e==="_"?"subscript":"superscript"):this.lastSubsupAtom().createBranch(e==="_"?"subscript":"superscript")}e=this.peek()}return!0}parseLimits(){const e=this.match("\\limits"),a=!e&&this.match("\\nolimits"),i=!a&&!e&&this.match("\\displaylimits");if(!e&&!a&&!i)return!1;const o=this.mathlist.length>0?this.mathlist[this.mathlist.length-1]:null;return!(o===null||o.type!=="mop"||(e?(o.subsupPlacement="over-under",o.explicitSubsupPlacement=!0,0):a?(o.subsupPlacement="adjacent",o.explicitSubsupPlacement=!0,0):!i||(o.subsupPlacement="auto",o.explicitSubsupPlacement=!0,0)))}parseArguments(e){if(!(e!=null&&e.params))return[void 0,[]];let a;const i=[];let o=e.infix?2:0;for(;o<e.params.length;){const r=e.params[o];if(r.type==="rest")i.push(this.parse(n=>n==="<}>"||n==="&"||n==="\\end"||n==="\\cr"||n==="\\\\"));else if(r.isOptional)i.push(this.parseOptionalArgument(r.type));else if(r.type.endsWith("*"))a=r.type.slice(0,-1);else{const n=this.parseArgument(r.type);if(n!==null)i.push(n);else switch(this.onError({code:"missing-argument"}),r.type){case"number":i.push(0);break;case"dimen":i.push({dimension:0,unit:"pt"});break;case"glue":i.push({glue:{dimension:0,unit:"pt"}});break;case"string":case"balanced-string":i.push("");break;case"delim":i.push(".");break;case"colspec":i.push("llllllllll");break;default:i.push(this.placeholder())}}o+=1}return[a,i]}parseArgument(e){var a,i;this.skipFiller(),e==="auto"&&(e=this.parseMode);let o=null;const r=this.peek()==="<{>";if(!r){if(e==="delim")return(a=this.scanDelim())!==null&&a!==void 0?a:".";if(e==="text"||e==="math"){this.beginContext();const s=this.parseSimpleToken();return this.endContext(),s}}if(r&&this.get(),e==="text"||e==="math"){this.beginContext({mode:e});do this.mathlist.push(...this.parse());while(!this.match("<}>")&&!this.end())}else if(this.beginContext(),e==="string"?o=this.scanString():e==="balanced-string"?o=this.scanBalancedString():e==="number"?o=this.scanNumber():e==="colspec"?o=this.scanColspec():e==="dimen"?o=this.scanDimen():e==="glue"?o=this.scanGlue():e==="delim"&&(o=(i=this.scanDelim())!==null&&i!==void 0?i:"."),r&&this.skipUntilToken("<}>"),o===null)return this.endContext(),null;const n=this.mathlist;return this.endContext(),o??n}parseOptionalArgument(e){var a,i;if(e=e==="auto"?this.parseMode:e,this.matchWhitespace(),!this.match("["))return null;let o=null;for(;!this.end()&&!this.match("]");)if(e==="string")o=this.scanString();else if(e==="number")o=this.scanNumber();else if(e==="dimen")o=this.scanDimen();else if(e==="glue")o=this.scanGlue();else if(e==="colspec")o=this.scanColspec();else if(e==="bbox"){const r=this.scanString().toLowerCase().trim().split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/),n={};for(const s of r){const l=(i=(a=this.context).backgroundColorMap)===null||i===void 0?void 0:i.call(a,s);if(l)n.backgroundcolor=l;else{const u=s.match(/^\s*([\d.]+)\s*([a-z]{2})/);if(u)n.padding=u[0];else{const c=s.match(/^\s*border\s*:\s*(.*)/);c&&(n.border=c[1])}}}o=n}else e==="math"&&(this.beginContext({mode:"math"}),o=this.mathlist.concat(this.parse(r=>r==="]")),this.endContext());return o}parseCommand(e){var a,i,o,r,n,s,l;if(e==="\\placeholder"){const p=this.parseOptionalArgument("string"),h=this.parseOptionalArgument("math"),m=(a=this.parseArgument("string"))!==null&&a!==void 0?a:void 0;return[new ce(this.context,{mode:this.parseMode,placeholderId:p,value:m,default:h,style:this.style})]}let u=null;if(e==="\\char"){const p=this.index;let h=Math.floor((i=this.scanNumber(!0))!==null&&i!==void 0?i:Number.NaN);(!Number.isFinite(h)||h<0||h>1114111)&&(h=10067);const m="\\char"+pa(this.tokens.slice(p,this.index));return u=new S(this.parseMode==="math"?"mord":"text",this.context,{command:"\\char",mode:this.parseMode,value:String.fromCodePoint(h),serialize:()=>m}),u.verbatimLatex=m,[u]}if(e==="\\hskip"||e==="\\kern"){const p=this.scanGlue();return p?[new Dt(e,this.style,this.context,p)]:null}if(u=this.scanMacro(e),u)return[u];const c=this.context.getDefinition(e,this.parseMode);if(!c)return this.onError({code:"unknown-command",arg:e}),[new Ci(e,this.context)];const d=this.index;if(c.definitionType==="symbol"){const p={...this.style};c.variant&&(p.variant=c.variant),u=new S((o=c.type)!==null&&o!==void 0?o:"mop",this.context,{command:e,style:p,value:String.fromCodePoint(c.codepoint),mode:this.parseMode})}else{if(c.ifMode&&!c.ifMode.includes(this.parseMode))return[];const p=this.parseMode;c.applyMode&&(this.parseMode=c.applyMode);const[h,m]=this.parseArguments(c);if(this.parseMode=p,!m)return null;if(c.applyMode&&!c.applyStyle&&!c.createAtom)return m[0];if(c.infix)return this.onError({code:"too-many-infix-commands",arg:e}),null;if(typeof c.createAtom=="function")u=c.createAtom(e,m,this.style,this.context),h&&(u.body=(r=this.parseArgument(h))!==null&&r!==void 0?r:void 0);else if(typeof c.applyStyle=="function"){const b=c.applyStyle(e,m,this.context),y=this.parseMode;if(c.applyMode&&(this.parseMode=c.applyMode),h){const x=this.style;this.style={...this.style,...b};const k=this.parseArgument(h);return this.style=x,this.parseMode=y,k}this.style={...this.style,...b},this.parseMode=y}else u=new S("mop",this.context,{command:(n=c.command)!==null&&n!==void 0?n:e,style:{...this.style},value:e,mode:(s=c.applyMode)!==null&&s!==void 0?s:this.parseMode})}if(u instanceof S&&u.verbatimLatex===void 0&&!/^\\(llap|rlap|class|cssId|htmlData)$/.test(e)&&(u.verbatimLatex=((l=u.command)!==null&&l!==void 0?l:"")+pa(this.tokens.slice(d,this.index)),u.verbatimLatex.length===0&&(u.verbatimLatex=void 0),u.isFunction&&this.smartFence)){const p=this.scanSmartFence();if(p)return[u,p]}return u?[u]:null}parseLiteral(e){const a=Ze.createAtom(this.parseMode,e,this.context,{...this.style});if(!a)return null;if(a.isFunction&&this.smartFence){const i=this.scanSmartFence();if(i)return[a,i]}return[a]}parseSimpleToken(){const e=this.get();return e?e==="<space>"?this.parseMode==="text"?[new Jt(" "," ",this.style,this.context)]:null:e.startsWith("\\")?this.parseCommand(e):ja(e)?this.parseLiteral(e):(e==="<}>"?this.onError({latex:"",code:"unbalanced-braces"}):this.onError({latex:"",code:"unexpected-token",arg:e}),null):null}scanMacro(e){var a;const i=this.context.getMacro(e);if(!i)return null;const o=this.index,r=i.args,n={"?":(a=this.args)===null||a===void 0?void 0:a.call(this,"?")};for(let s=1;s<=r;s++)n[s]=this.matchLiteralArg();return new Ai(e,this.context,{expand:i.expand,captureSelection:i.captureSelection,args:pa(this.tokens.slice(o,this.index)),body:st(i.def,this.context,{parseMode:this.parseMode,args:s=>n[s],mathstyle:this.currentContext.mathstyle})})}parseToken(){var e,a,i,o;let r=(o=(i=(a=(e=this.parseEnvironment())!==null&&e!==void 0?e:this.parseModeShift())!==null&&a!==void 0?a:this.parseModeSet())!==null&&i!==void 0?i:this.parseGroup())!==null&&o!==void 0?o:this.parseLeftRight();if(r===null){if(this.parseSupSub()||this.parseLimits())return!0;r=this.parseSimpleToken()}return Ce(r)?this.mathlist.push(...r):r&&this.mathlist.push(r),r!==null}}function st(t,e,a){var i,o,r;const n=(i=a==null?void 0:a.args)!==null&&i!==void 0?i:null,s=new Di(ra(t,n),e,{args:n,mathstyle:(o=a==null?void 0:a.mathstyle)!==null&&o!==void 0?o:"displaystyle",parseMode:(r=a==null?void 0:a.parseMode)!==null&&r!==void 0?r:"math"}),l=[];for(;!s.end();)l.push(...s.parse());return l}function hs(t,e,a){var i;const o=new Di(ra(t,null),e,{args:null,mathstyle:"displaystyle",parseMode:(i=a==null?void 0:a.parseMode)!==null&&i!==void 0?i:"math"});for(;!o.end();)o.parse();return o.errors}function ms(t,e,a){return typeof t=="object"&&"glue"in t?t:typeof t=="object"&&"dimension"in t?{glue:t}:typeof t=="number"?{glue:{dimension:t}}:new Di(ra(t),e,{registers:a}).scanGlue()}function zi(t,e,a){return typeof t=="number"?{dimension:t,unit:"pt"}:(typeof t=="object"&&"glue"in t&&(t=t.glue),typeof t=="object"&&"dimension"in t?t:new Di(ra(t),e,{registers:a}).scanDimen())}class Ct extends S{constructor(e,a,i,o){super("box",i,{command:e,serialize:o.serialize,style:o.style}),this.body=a,this.framecolor=o.framecolor,this.verbatimFramecolor=o.verbatimBackgroundcolor,this.backgroundcolor=o.backgroundcolor,this.verbatimBackgroundcolor=o.verbatimBackgroundcolor,this.padding=o.padding,this.border=o.border}static fromJson(e,a){return new Ct(e.command,e.body,a,e)}toJson(){return{...super.toJson(),framecolor:this.framecolor,verbatimFramecolor:this.verbatimFramecolor,backgroundcolor:this.backgroundcolor,verbatimBackgroundcolor:this.verbatimBackgroundcolor,padding:this.padding,border:this.border}}render(e){const a=new V(e,this.style),i=dt(a.getRegisterAsDimension("fboxsep")),o=this.padding===void 0?i:dt(zi(this.padding,{...this.context,registers:e.registers})),r=S.createBox(e,this.body);if(!r)return null;r.setStyle("vertical-align",-r.height,"em");const n=new z(r,{type:"mord"}),s=new z(null,{classes:"ML__box"});s.height=n.height+o,s.depth=n.depth+o,s.setStyle("box-sizing","border-box"),s.setStyle("position","absolute"),s.setStyle("height",n.height+n.depth+2*o,"em"),o===0?s.setStyle("width","100%"):(s.setStyle("width",`calc(100% + ${2*o}em)`),s.setStyle("top",i,"em"),s.setStyle("left",-o,"em")),s.setStyle("z-index","-1"),this.backgroundcolor&&s.setStyle("background-color",this.backgroundcolor),this.framecolor&&s.setStyle("border",`${dt(a.getRegisterAsDimension("fboxrule"))}em solid ${this.framecolor}`),this.border&&s.setStyle("border",this.border),n.setStyle("display","inline-block"),n.setStyle("height",r.height+r.depth,"em"),n.setStyle("vertical-align",-o,"em");const l=new z([s,n]);return l.setStyle("position","relative"),l.setStyle("display","inline-block"),l.setStyle("line-height",0),l.height=n.height+o,l.depth=n.depth+o,l.left=o,l.right=o,l.setStyle("height",n.height+o,"em"),l.setStyle("top",n.depth-n.height,"em"),l.setStyle("vertical-align",n.depth+o,"em"),this.caret&&(l.caret=this.caret),this.attachSupsub(e,{base:l})}}class re extends S{constructor(e,a,i,o,r={}){var n,s;super("array",e),this.environmentName=a,this.rowGaps=o,r.mathstyleName&&(this.mathstyleName=r.mathstyleName),r.columns&&(r.columns.length===0?this.colFormat=[{align:"l"}]:this.colFormat=r.columns),this.colFormat||(this.colFormat=[{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"}]),this.array=function(l,u,c,d){let p=0;for(const k of d)"align"in k&&(p+=1);let h=0;const m=[];for(const k of c){let g=0;for(h=Math.max(h,Math.min(k.length,p));g<k.length;){const f=[],_=Math.min(k.length,g+p);for(;g<_;)k[g].length===0?f.push([new S("first",l,{mode:u.mode})]):k[g][0].type!=="first"?f.push([new S("first",l,{mode:u.mode}),...k[g]]):f.push(k[g]),g+=1;m.push(f)}}m[m.length-1].length===1&&m[m.length-1][0].length===0&&m.pop();const b=[];for(const k of m){if(k.length!==h)for(let g=k.length;g<h;g++)k.push([new S("first",l,{mode:u.mode}),new ce(l)]);b.push(k)}let y=0,x=0;for(const k of b){x=0;for(const g of k){for(const f of g)f.parent=u,f.treeBranch=[y,x];x+=1}y+=1}return u.isDirty=!0,b}(e,this,i,this.colFormat),r.leftDelim&&(this.leftDelim=r.leftDelim),r.rightDelim&&(this.rightDelim=r.rightDelim),r.jot!==void 0&&(this.jot=r.jot),r.arraycolsep&&(this.arraycolsep=r.arraycolsep),this.colSeparationType=r.colSeparationType,this.arraystretch=(n=r.arraystretch)!==null&&n!==void 0?n:1,this.minColumns=(s=r.minColumns)!==null&&s!==void 0?s:1}static fromJson(e,a){return new re(a,e.environmentName,e.array,e.rowGaps,e)}toJson(){const e={...super.toJson(),environmentName:this.environmentName,array:this.array.map(a=>a.map(i=>i.map(o=>o.toJson()))),rowGaps:this.rowGaps,columns:this.colFormat,colSeparationType:this.colSeparationType};return this.arraystretch!==1&&(e.arraystretch=this.arraystretch),this.arraycolsep&&(e.arraycolsep=this.arraycolsep),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),this.jot!==void 0&&(e.jot=this.jot),e}branch(e){var a;if(ci(e))return(a=this.array[e[0]][e[1]])!==null&&a!==void 0?a:void 0}get branches(){const e=super.branches;return this.array.forEach((a,i)=>{this.array[i].forEach((o,r)=>{this.array[i][r]&&e.push([i,r])})}),e}createBranch(e){var a;return ci(e)?(this.isDirty=!0,(a=this.branch(e))!==null&&a!==void 0?a:[]):[]}get rowCount(){return this.array.length}get colCount(){return this.array[0].length}get maxColumns(){return this.colFormat.filter(e=>Boolean(e.align)).length}removeBranch(e){if(va(e))return super.removeBranch(e);const a=this.branch(e);return this.array[e[0]][e[1]]=void 0,a.forEach(i=>{i.parent=void 0,i.treeBranch=void 0}),a.shift(),this.isDirty=!0,a}get hasChildren(){return this.children.length>0}get children(){const e=[];for(const a of this.array)for(const i of a)if(i)for(const o of i)e.push(...o.children),e.push(o);return[...e,...super.children]}render(e){var a,i,o,r,n;const s=new V(e,this.style,this.mathstyleName),l=s.getRegisterAsEm("arrayrulewidth"),u=s.getRegisterAsEm("arraycolsep"),c=s.getRegisterAsEm("doublerulesep"),d=(a=this.arraystretch)!==null&&a!==void 0?a:1;let p=typeof this.arraycolsep=="number"?this.arraycolsep:u;this.colSeparationType==="small"&&(p=new V(e,void 0,"scriptstyle").scalingFactor/e.scalingFactor*.2778);const h=1.2*d,m=.7*h,b=.3*h;let y=0;const x=[];let k=0;const g=this.array.length;for(let H=0;H<g;++H){const J=this.array[H];k=Math.max(k,J.length);const I=new V(s,this.style,this.mathstyleName);let G=m/I.scalingFactor,D=b/I.scalingFactor;const it={cells:[],height:0,depth:0,pos:0};for(const ye of J){const Ne=(i=S.createBox(I,ye,{newList:!0}))!==null&&i!==void 0?i:new z(null,{newList:!0});D=Math.max(D,Ne.depth),G=Math.max(G,Ne.height),it.cells.push(Ne)}let Ee=(o=dt(this.rowGaps[H]))!==null&&o!==void 0?o:0;Ee>0&&(Ee+=b,D=Math.max(D,Ee),Ee=0),this.jot!==void 0&&(D+=this.jot),it.height=G,it.depth=D,y+=G,it.pos=y,y+=D+Ee,x.push(it)}const f=y/2+.25,_=[];for(let H=0;H<k;H++){const J=[];for(const I of x){const G=I.cells[H];G.depth=I.depth,G.height=I.height,J.push({box:G,shift:I.pos-f})}J.length>0&&_.push(new xe({individualShift:J}))}const w=[];let T=!1,C=!1,K=0,$=!this.leftDelim;const{colFormat:j}=this;for(const H of j){if("align"in H&&K>=_.length)break;if("align"in H)T?w.push(Wa(2*p)):(C||$)&&w.push(Wa(p)),w.push(new z(_[K],{classes:"col-align-"+H.align})),K++,T=!0,C=!1,$=!1;else if("gap"in H){if(typeof H.gap=="number")w.push(Wa(H.gap));else{const J=fs(e,x,f,H.gap);J&&w.push(J)}T=!1,C=!1,$=!1}else if("separator"in H){const J=new z(null,{classes:"vertical-separator"});J.setStyle("height",y,"em"),J.setStyle("border-right",`${l}em ${H.separator} currentColor`),J.setStyle("vertical-align",-(y-f),"em");let I=0;C?I=c-l:T&&(I=p-l),J.left=I,w.push(J),T=!1,C=!0,$=!1}}T&&!this.rightDelim&&w.push(Wa(p));const q=new z(w,{classes:"mtable"});if(!(this.leftDelim&&this.leftDelim!=="."||this.rightDelim&&this.rightDelim!=="."))return this.caret&&(q.caret=this.caret),q;const Y=q.height,ke=q.depth,be=this.bind(e,new z([this.bind(e,wa("mopen",(r=this.leftDelim)!==null&&r!==void 0?r:".",Y,ke,s)),q,this.bind(e,wa("mclose",(n=this.rightDelim)!==null&&n!==void 0?n:".",Y,ke,s))],{type:"mord"}));return be?(this.caret&&(be.caret=this.caret),this.attachSupsub(e,{base:be})):null}serialize(e){let a="\\begin{"+this.environmentName+"}";if(this.environmentName==="array"){if(a+="{",this.colFormat!==void 0)for(const i of this.colFormat)"align"in i?a+=i.align:"separator"in i&&i.separator==="solid"?a+="|":"separator"in i&&i.separator==="dashed"&&(a+=":");a+="}"}for(let i=0;i<this.array.length;i++){for(let o=0;o<this.array[i].length;o++)o>0&&(a+=" & "),a=he([a,S.serialize(this.array[i][o],e)]);i<this.array.length-1&&(a+=" \\\\ ")}return a+="\\end{"+this.environmentName+"}",a}getCell(e,a){return this.array[e][a]}setCell(e,a,i){for(const r of this.array[e][a])r.parent=void 0,r.treeBranch=void 0;let o=i;i.length!==0&&i[0].type==="first"||(o=[new S("first",this.context,{mode:this.mode}),...i]),this.array[e][a]=o;for(const r of o)r.parent=this,r.treeBranch=[e,a];this.isDirty=!0}addRowBefore(e){const a=[];for(let i=0;i<this.colCount;i++)a.push(Ha(this));this.array.splice(e,0,a);for(let i=e;i<this.rowCount;i++)for(let o=0;o<this.colCount;o++){const r=this.array[i][o];if(r)for(const n of r)n.treeBranch=[i,o]}this.isDirty=!0}addRowAfter(e){const a=[];for(let i=0;i<this.colCount;i++)a.push(Ha(this));this.array.splice(e+1,0,a);for(let i=e+1;i<this.rowCount;i++)for(let o=0;o<this.colCount;o++){const r=this.array[i][o];if(r)for(const n of r)n.treeBranch=[i,o]}this.isDirty=!0}removeRow(e){const a=this.array.splice(e,1);for(const i of a)for(const o of i)if(o)for(const r of o)r.parent=void 0,r.treeBranch=void 0;for(let i=e;i<this.rowCount;i++)for(let o=0;o<this.colCount;o++){const r=this.array[i][o];if(r)for(const n of r)n.treeBranch=[i,o]}this.isDirty=!0}addColumnBefore(e){for(const a of this.array)a.splice(e,0,Ha(this));for(let a=0;a<this.rowCount;a++)for(let i=e;i<this.colCount;i++){const o=this.array[a][i];if(o)for(const r of o)r.treeBranch=[a,i]}this.isDirty=!0}addColumnAfter(e){for(const a of this.array)a.splice(e+1,0,Ha(this));for(let a=0;a<this.rowCount;a++)for(let i=e+1;i<this.colCount;i++){const o=this.array[a][i];if(o)for(const r of o)r.treeBranch=[a,i]}this.isDirty=!0}addColumn(){this.addColumnAfter(this.colCount-1)}removeColumn(e){for(const a of this.array){const i=a.splice(e,1);for(const o of i)if(o)for(const r of o)r.parent=void 0,r.treeBranch=void 0}for(let a=0;a<this.rowCount;a++)for(let i=e;i<this.colCount;i++){const o=this.array[a][i];if(o)for(const r of o)r.treeBranch=[a,i]}this.isDirty=!0}get cells(){const e=[];for(const a of this.array)for(const i of a)i&&e.push(i);return e}}function Ha(t){const e=new S("first",t.context,{mode:t.mode});e.parent=t;const a=new ce(t.context,{mode:t.mode});return a.parent=t,[e,a]}function Wa(t){const e=new z(null,{classes:"arraycolsep"});return e.width=t,e}function fs(t,e,a,i){if(!i)return null;const o=[];for(const r of e){const n=S.createBox(t,i,{newList:!0});n&&(n.depth=r.depth,n.height=r.height,o.push({box:n,shift:r.pos-a}))}return new xe({individualShift:o}).wrap(t)}class Ti extends S{constructor(e,a,i){var o;super("composition",a,{mode:(o=i==null?void 0:i.mode)!==null&&o!==void 0?o:"math",value:e})}static fromJson(e,a){return new Ti(e.value,a,e)}toJson(){return super.toJson()}get computedStyle(){return{}}render(e){const a=new z(this.value,{classes:"ML__composition",type:"composition"});return this.bind(e,a),this.caret&&(a.caret=this.caret),a}serialize(e){return""}}class Bi extends S{constructor(e,a,i){super("chem",i,{command:e,mode:"math"});const o=te.go(L.go(a,e==="\\pu"?"pu":"ce"),!1);this.body=st(o,i),this.verbatimLatex=e+"{"+a+"}",this.arg=a,this.captureSelection=!0}static fromJson(e,a){return new Bi(e.command,e.arg,a)}toJson(){return{...super.toJson(),arg:this.arg}}render(e){const a=S.createBox(e,this.body,{type:"chem",newList:!0});return this.caret&&(a.caret=this.caret),this.bind(e,a)}serialize(e){return this.verbatimLatex}}M(["ce","pu"],"{chemformula:balanced-string}",{createAtom:(t,e,a,i)=>new Bi(t,e[0],i)});var L={go:function(t,e){if(!t)return[];e===void 0&&(e="ce");var a,i="0",o={parenthesisLevel:0};t=(t=(t=t.replace(/\n/g," ")).replace(/[\u2212\u2013\u2014\u2010]/g,"-")).replace(/[\u2026]/g,"...");for(var r=10,n=[];;){a!==t?(r=10,a=t):r--;var s=L.stateMachines[e],l=s.transitions[i]||s.transitions["*"];e:for(var u=0;u<l.length;u++){var c=L.patterns.match_(l[u].pattern,t);if(c){for(var d=l[u].task,p=0;p<d.action_.length;p++){var h;if(s.actions[d.action_[p].type_])h=s.actions[d.action_[p].type_](o,c.match_,d.action_[p].option);else{if(!L.actions[d.action_[p].type_])throw["MhchemBugA","mhchem bug A. Please report. ("+d.action_[p].type_+")"];h=L.actions[d.action_[p].type_](o,c.match_,d.action_[p].option)}L.concatArray(n,h)}if(i=d.nextState||i,!(t.length>0))return n;if(d.revisit||(t=c.remainder),!d.toContinue)break e}}if(r<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(t,e){if(e)if(Array.isArray(e))for(var a=0;a<e.length;a++)t.push(e[a]);else t.push(e)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(t){var e=t.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:([eE]|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return e&&e[0]?{match_:e.splice(1),remainder:t.substr(e[0].length)}:null},"(-)(9)^(-9)":function(t){var e=t.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return e&&e[0]?{match_:e.splice(1),remainder:t.substr(e[0].length)}:null},"state of aggregation $":function(t){var e=L.patterns.findObserveGroups(t,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(e&&e.remainder.match(/^($|[\s,;\)\]\}])/))return e;var a=t.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return a?{match_:a[0],remainder:t.substr(a[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(t){return L.patterns.findObserveGroups(t,"^{","","","}")},"^($...$)":function(t){return L.patterns.findObserveGroups(t,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(t){return L.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(t){return L.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(t){return L.patterns.findObserveGroups(t,"_{","","","}")},"_($...$)":function(t){return L.patterns.findObserveGroups(t,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(t){return L.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(t){return L.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(t){return L.patterns.findObserveGroups(t,"","{","}","")},"{(...)}":function(t){return L.patterns.findObserveGroups(t,"{","","","}")},"$...$":function(t){return L.patterns.findObserveGroups(t,"","$","$","")},"${(...)}$":function(t){return L.patterns.findObserveGroups(t,"${","","","}$")},"$(...)$":function(t){return L.patterns.findObserveGroups(t,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(t){return L.patterns.findObserveGroups(t,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(t){return L.patterns.findObserveGroups(t,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(t){return L.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(t){return L.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(t){return L.patterns.findObserveGroups(t,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(t){return L.patterns.findObserveGroups(t,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(t){return L.patterns.findObserveGroups(t,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(t){return L.patterns.findObserveGroups(t,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(t){return L.patterns.findObserveGroups(t,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(t){return L.patterns.findObserveGroups(t,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(t){return L.patterns.findObserveGroups(t,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(t){return L.patterns.findObserveGroups(t,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(t){var e;if(e=t.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/))return{match_:e[0],remainder:t.substr(e[0].length)};var a=L.patterns.findObserveGroups(t,"","$","$","");return a&&(e=a.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/))?{match_:e[0],remainder:t.substr(e[0].length)}:null},amount2:function(t){return this.amount(t)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(t){if(t.match(/^\([a-z]+\)$/))return null;var e=t.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return e?{match_:e[0],remainder:t.substr(e[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(t,e,a,i,o,r,n,s,l,u){var c=function(y,x){if(typeof x=="string")return y.indexOf(x)!==0?null:x;var k=y.match(x);return k?k[0]:null},d=c(t,e);if(d===null||(t=t.substr(d.length),(d=c(t,a))===null))return null;var p=function(y,x,k){for(var g=0;x<y.length;){var f=y.charAt(x),_=c(y.substr(x),k);if(_!==null&&g===0)return{endMatchBegin:x,endMatchEnd:x+_.length};if(f==="{")g++;else if(f==="}"){if(g===0)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];g--}x++}return null}(t,d.length,i||o);if(p===null)return null;var h=t.substring(0,i?p.endMatchEnd:p.endMatchBegin);if(r||n){var m=this.findObserveGroups(t.substr(p.endMatchEnd),r,n,s,l);if(m===null)return null;var b=[h,m.match_];return{match_:u?b.join(""):b,remainder:m.remainder}}return{match_:h,remainder:t.substr(p.endMatchEnd)}},match_:function(t,e){var a=L.patterns.patterns[t];if(a===void 0)throw["MhchemBugP","mhchem bug P. Please report. ("+t+")"];if(typeof a=="function")return L.patterns.patterns[t](e);var i=e.match(a);return i?{match_:i[2]?[i[1],i[2]]:i[1]?i[1]:i[0],remainder:e.substr(i[0].length)}:null}},actions:{"a=":function(t,e){t.a=(t.a||"")+e},"b=":function(t,e){t.b=(t.b||"")+e},"p=":function(t,e){t.p=(t.p||"")+e},"o=":function(t,e){t.o=(t.o||"")+e},"q=":function(t,e){t.q=(t.q||"")+e},"d=":function(t,e){t.d=(t.d||"")+e},"rm=":function(t,e){t.rm=(t.rm||"")+e},"text=":function(t,e){t.text_=(t.text_||"")+e},insert:function(t,e,a){return{type_:a}},"insert+p1":function(t,e,a){return{type_:a,p1:e}},"insert+p1+p2":function(t,e,a){return{type_:a,p1:e[0],p2:e[1]}},copy:function(t,e){return e},rm:function(t,e){return{type_:"rm",p1:e||""}},text:function(t,e){return L.go(e,"text")},"{text}":function(t,e){var a=["{"];return L.concatArray(a,L.go(e,"text")),a.push("}"),a},"tex-math":function(t,e){return L.go(e,"tex-math")},"tex-math tight":function(t,e){return L.go(e,"tex-math tight")},bond:function(t,e,a){return{type_:"bond",kind_:a||e}},"color0-output":function(t,e){return{type_:"color0",color:e[0]}},ce:function(t,e){return L.go(e)},"1/2":function(t,e){var a=[];e.match(/^[+\-]/)&&(a.push(e.substr(0,1)),e=e.substr(1));var i=e.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return i[1]=i[1].replace(/\$/g,""),a.push({type_:"frac",p1:i[1],p2:i[2]}),i[3]&&(i[3]=i[3].replace(/\$/g,""),a.push({type_:"tex-math",p1:i[3]})),a},"9,9":function(t,e){return L.go(e,"9,9")}},createTransitions:function(t){var e,a,i,o,r={};for(e in t)for(a in t[e])for(i=a.split("|"),t[e][a].stateArray=i,o=0;o<i.length;o++)r[i[o]]=[];for(e in t)for(a in t[e])for(i=t[e][a].stateArray||[],o=0;o<i.length;o++){var n=t[e][a];if(n.action_){n.action_=[].concat(n.action_);for(var s=0;s<n.action_.length;s++)typeof n.action_[s]=="string"&&(n.action_[s]={type_:n.action_[s]})}else n.action_=[];for(var l=e.split("|"),u=0;u<l.length;u++)if(i[o]==="*")for(var c in r)r[c].push({pattern:l[u],task:n});else r[i[o]].push({pattern:l[u],task:n})}return r},stateMachines:{}};L.stateMachines={ce:{transitions:L.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(t,e){var a;if((t.d||"").match(/^[0-9]+$/)){var i=t.d;t.d=void 0,a=this.output(t),t.b=i}else a=this.output(t);return L.actions["o="](t,e),a},"d= kv":function(t,e){t.d=e,t.dType="kv"},"charge or bond":function(t,e){if(t.beginsWithBond){var a=[];return L.concatArray(a,this.output(t)),L.concatArray(a,L.actions.bond(t,e,"-")),a}t.d=e},"- after o/d":function(t,e,a){var i=L.patterns.match_("orbital",t.o||""),o=L.patterns.match_("one lowercase greek letter $",t.o||""),r=L.patterns.match_("one lowercase latin letter $",t.o||""),n=L.patterns.match_("$one lowercase latin letter$ $",t.o||""),s=e==="-"&&(i&&i.remainder===""||o||r||n);!s||t.a||t.b||t.p||t.d||t.q||i||!r||(t.o="$"+t.o+"$");var l=[];return s?(L.concatArray(l,this.output(t)),l.push({type_:"hyphen"})):(i=L.patterns.match_("digits",t.d||""),a&&i&&i.remainder===""?(L.concatArray(l,L.actions["d="](t,e)),L.concatArray(l,this.output(t))):(L.concatArray(l,this.output(t)),L.concatArray(l,L.actions.bond(t,e,"-")))),l},"a to o":function(t){t.o=t.a,t.a=void 0},"sb=true":function(t){t.sb=!0},"sb=false":function(t){t.sb=!1},"beginsWithBond=true":function(t){t.beginsWithBond=!0},"beginsWithBond=false":function(t){t.beginsWithBond=!1},"parenthesisLevel++":function(t){t.parenthesisLevel++},"parenthesisLevel--":function(t){t.parenthesisLevel--},"state of aggregation":function(t,e){return{type_:"state of aggregation",p1:L.go(e,"o")}},comma:function(t,e){var a=e.replace(/\s*$/,"");return a!==e&&t.parenthesisLevel===0?{type_:"comma enumeration L",p1:a}:{type_:"comma enumeration M",p1:a}},output:function(t,e,a){var i,o,r;for(var n in t.r?(o=t.rdt==="M"?L.go(t.rd,"tex-math"):t.rdt==="T"?[{type_:"text",p1:t.rd||""}]:L.go(t.rd),r=t.rqt==="M"?L.go(t.rq,"tex-math"):t.rqt==="T"?[{type_:"text",p1:t.rq||""}]:L.go(t.rq),i={type_:"arrow",r:t.r,rd:o,rq:r}):(i=[],(t.a||t.b||t.p||t.o||t.q||t.d||a)&&(t.sb&&i.push({type_:"entitySkip"}),t.o||t.q||t.d||t.b||t.p||a===2?t.o||t.q||t.d||!t.b&&!t.p?t.o&&t.dType==="kv"&&L.patterns.match_("d-oxidation$",t.d||"")?t.dType="oxidation":t.o&&t.dType==="kv"&&!t.q&&(t.dType=void 0):(t.o=t.a,t.d=t.b,t.q=t.p,t.a=t.b=t.p=void 0):(t.o=t.a,t.a=void 0),i.push({type_:"chemfive",a:L.go(t.a,"a"),b:L.go(t.b,"bd"),p:L.go(t.p,"pq"),o:L.go(t.o,"o"),q:L.go(t.q,"pq"),d:L.go(t.d,t.dType==="oxidation"?"oxidation":"bd"),dType:t.dType}))),t)n!=="parenthesisLevel"&&n!=="beginsWithBond"&&delete t[n];return i},"oxidation-output":function(t,e){var a=["{"];return L.concatArray(a,L.go(e,"oxidation")),a.push("}"),a},"frac-output":function(t,e){return{type_:"frac-ce",p1:L.go(e[0]),p2:L.go(e[1])}},"overset-output":function(t,e){return{type_:"overset",p1:L.go(e[0]),p2:L.go(e[1])}},"underset-output":function(t,e){return{type_:"underset",p1:L.go(e[0]),p2:L.go(e[1])}},"underbrace-output":function(t,e){return{type_:"underbrace",p1:L.go(e[0]),p2:L.go(e[1])}},"color-output":function(t,e){return{type_:"color",color1:e[0],color2:L.go(e[1])}},"r=":function(t,e){t.r=e},"rdt=":function(t,e){t.rdt=e},"rd=":function(t,e){t.rd=e},"rqt=":function(t,e){t.rqt=e},"rq=":function(t,e){t.rq=e},operator:function(t,e,a){return{type_:"operator",kind_:a||e}}}},a:{transitions:L.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:L.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:L.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(t){if(t.text_){var e={type_:"text",p1:t.text_};for(var a in t)delete t[a];return e}}}},pq:{transitions:L.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(t,e){return{type_:"state of aggregation subscript",p1:L.go(e,"o")}},"color-output":function(t,e){return{type_:"color",color1:e[0],color2:L.go(e[1],"pq")}}}},bd:{transitions:L.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(t,e){return{type_:"color",color1:e[0],color2:L.go(e[1],"bd")}}}},oxidation:{transitions:L.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(t,e){return{type_:"roman numeral",p1:e||""}}}},"tex-math":{transitions:L.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(t){if(t.o){var e={type_:"tex-math",p1:t.o};for(var a in t)delete t[a];return e}}}},"tex-math tight":{transitions:L.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(t,e){t.o=(t.o||"")+"{"+e+"}"},output:function(t){if(t.o){var e={type_:"tex-math",p1:t.o};for(var a in t)delete t[a];return e}}}},"9,9":{transitions:L.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:L.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(t,e){var a=[];return e[0]==="+-"||e[0]==="+/-"?a.push("\\pm "):e[0]&&a.push(e[0]),e[1]&&(L.concatArray(a,L.go(e[1],"pu-9,9")),e[2]&&(e[2].match(/[,.]/)?L.concatArray(a,L.go(e[2],"pu-9,9")):a.push(e[2])),e[3]=e[4]||e[3],e[3]&&(e[3]=e[3].trim(),e[3]==="e"||e[3].substr(0,1)==="*"?a.push({type_:"cdot"}):a.push({type_:"times"}))),e[3]&&a.push("10^{"+e[5]+"}"),a},"number^":function(t,e){var a=[];return e[0]==="+-"||e[0]==="+/-"?a.push("\\pm "):e[0]&&a.push(e[0]),L.concatArray(a,L.go(e[1],"pu-9,9")),a.push("^{"+e[2]+"}"),a},operator:function(t,e,a){return{type_:"operator",kind_:a||e}},space:function(){return{type_:"pu-space-1"}},output:function(t){var e,a=L.patterns.match_("{(...)}",t.d||"");a&&a.remainder===""&&(t.d=a.match_);var i=L.patterns.match_("{(...)}",t.q||"");if(i&&i.remainder===""&&(t.q=i.match_),t.d&&(t.d=t.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.d=t.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),t.q){t.q=t.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.q=t.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var o={d:L.go(t.d,"pu"),q:L.go(t.q,"pu")};t.o==="//"?e={type_:"pu-frac",p1:o.d,p2:o.q}:(e=o.d,o.d.length>1||o.q.length>1?e.push({type_:" / "}):e.push({type_:"/"}),L.concatArray(e,o.q))}else e=L.go(t.d,"pu-2");for(var r in t)delete t[r];return e}}},"pu-2":{transitions:L.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(t,e){t.rm+="^{"+e+"}"},space:function(){return{type_:"pu-space-2"}},output:function(t){var e=[];if(t.rm){var a=L.patterns.match_("{(...)}",t.rm||"");e=a&&a.remainder===""?L.go(a.match_,"pu"):{type_:"rm",p1:t.rm}}for(var i in t)delete t[i];return e}}},"pu-9,9":{transitions:L.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(t){var e=[];if(t.text_=t.text_||"",t.text_.length>4){var a=t.text_.length%3;a===0&&(a=3);for(var i=t.text_.length-3;i>0;i-=3)e.push(t.text_.substr(i,3)),e.push({type_:"1000 separator"});e.push(t.text_.substr(0,a)),e.reverse()}else e.push(t.text_);for(var o in t)delete t[o];return e},"output-o":function(t){var e=[];if(t.text_=t.text_||"",t.text_.length>4){for(var a=t.text_.length-3,i=0;i<a;i+=3)e.push(t.text_.substr(i,3)),e.push({type_:"1000 separator"});e.push(t.text_.substr(i))}else e.push(t.text_);for(var o in t)delete t[o];return e}}}};var te={go:function(t,e){if(!t)return"";for(var a="",i=!1,o=0;o<t.length;o++){var r=t[o];typeof r=="string"?a+=r:(a+=te._go2(r),r.type_==="1st-level escape"&&(i=!0))}return e||i||!a||(a="{"+a+"}"),a},_goInner:function(t){return t&&te.go(t,!0)},_go2:function(t){var e;switch(t.type_){case"chemfive":e="";var a={a:te._goInner(t.a),b:te._goInner(t.b),p:te._goInner(t.p),o:te._goInner(t.o),q:te._goInner(t.q),d:te._goInner(t.d)};a.a&&(a.a.match(/^[+\-]/)&&(a.a="{"+a.a+"}"),e+=a.a+"\\,"),(a.b||a.p)&&(e+="{\\vphantom{X}}",e+="^{\\hphantom{"+(a.b||"")+"}}_{\\hphantom{"+(a.p||"")+"}}",e+="{\\vphantom{X}}",e+="^{\\smash[t]{\\vphantom{2}}\\mathllap{"+(a.b||"")+"}}",e+="_{\\vphantom{2}\\mathllap{\\smash[t]{"+(a.p||"")+"}}}"),a.o&&(a.o.match(/^[+\-]/)&&(a.o="{"+a.o+"}"),e+=a.o),t.dType==="kv"?((a.d||a.q)&&(e+="{\\vphantom{X}}"),a.d&&(e+="^{"+a.d+"}"),a.q&&(e+="_{\\smash[t]{"+a.q+"}}")):t.dType==="oxidation"?(a.d&&(e+="{\\vphantom{X}}",e+="^{"+a.d+"}"),a.q&&(e+="{\\vphantom{X}}",e+="_{\\smash[t]{"+a.q+"}}")):(a.q&&(e+="{\\vphantom{X}}",e+="_{\\smash[t]{"+a.q+"}}"),a.d&&(e+="{\\vphantom{X}}",e+="^{"+a.d+"}"));break;case"rm":case"roman numeral":e="\\mathrm{"+t.p1+"}";break;case"text":t.p1.match(/[\^_]/)?(t.p1=t.p1.replace(" ","~").replace("-","\\text{-}"),e="\\mathrm{"+t.p1+"}"):e="\\text{"+t.p1+"}";break;case"state of aggregation":e="\\mskip2mu "+te._goInner(t.p1);break;case"state of aggregation subscript":e="\\mskip1mu "+te._goInner(t.p1);break;case"bond":if(!(e=te._getBond(t.kind_)))throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+t.kind_+")"];break;case"frac":var i="\\frac{"+t.p1+"}{"+t.p2+"}";e="\\mathchoice{\\textstyle"+i+"}{"+i+"}{"+i+"}{"+i+"}";break;case"pu-frac":var o="\\frac{"+te._goInner(t.p1)+"}{"+te._goInner(t.p2)+"}";e="\\mathchoice{\\textstyle"+o+"}{"+o+"}{"+o+"}{"+o+"}";break;case"tex-math":case"1st-level escape":e=t.p1+" ";break;case"frac-ce":e="\\frac{"+te._goInner(t.p1)+"}{"+te._goInner(t.p2)+"}";break;case"overset":e="\\overset{"+te._goInner(t.p1)+"}{"+te._goInner(t.p2)+"}";break;case"underset":e="\\underset{"+te._goInner(t.p1)+"}{"+te._goInner(t.p2)+"}";break;case"underbrace":e="\\underbrace{"+te._goInner(t.p1)+"}_{"+te._goInner(t.p2)+"}";break;case"color":e="{\\color{"+t.color1+"}{"+te._goInner(t.color2)+"}}";break;case"color0":e="\\color{"+t.color+"}";break;case"arrow":var r={rd:te._goInner(t.rd),rq:te._goInner(t.rq)},n="\\x"+te._getArrow(t.r);r.rq&&(n+="[{"+r.rq+"}]"),e=n+=r.rd?"{"+r.rd+"}":"{}";break;case"operator":e=te._getOperator(t.kind_);break;case"space":e=" ";break;case"entitySkip":case"pu-space-1":e="~";break;case"pu-space-2":e="\\mkern3mu ";break;case"1000 separator":e="\\mkern2mu ";break;case"commaDecimal":e="{,}";break;case"comma enumeration L":e="{"+t.p1+"}\\mkern6mu ";break;case"comma enumeration M":e="{"+t.p1+"}\\mkern3mu ";break;case"comma enumeration S":e="{"+t.p1+"}\\mkern1mu ";break;case"hyphen":e="\\text{-}";break;case"addition compound":e="\\,{\\cdot}\\,";break;case"electron dot":e="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":e="{\\times}";break;case"prime":e="\\prime ";break;case"cdot":e="\\cdot ";break;case"tight cdot":e="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":e="\\times ";break;case"circa":e="{\\sim}";break;case"^":e="uparrow";break;case"v":e="downarrow";break;case"ellipsis":e="\\ldots ";break;case"/":e="/";break;case" / ":e="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return e},_getArrow:function(t){switch(t){case"->":case"→":case"⟶":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<-->":return"rightleftarrows";case"<=>":case"⇌":return"rightleftharpoons";case"<=>>":return"rightequilibrium";case"<<=>":return"leftequilibrium";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(t){switch(t){case"-":case"1":return"{-}";case"=":case"2":return"{=}";case"#":case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\mathrlap{\\raisebox{-.1em}{$-$}}\\raisebox{.1em}{$\\tripledash$}}";case"~=":case"~--":return"{\\mathrlap{\\raisebox{-.2em}{$-$}}\\mathrlap{\\raisebox{.2em}{$\\tripledash$}}-}";case"-~-":return"{\\mathrlap{\\raisebox{-.2em}{$-$}}\\mathrlap{\\raisebox{.2em}{$-$}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(t){switch(t){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":case"$\\approx$":return" {}\\approx{} ";case"v":case"(v)":return" \\downarrow{} ";case"^":case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}};class Ki extends S{constructor(e,a,i,o){super("delim",i,{command:e,style:o==null?void 0:o.style}),this.value=a,this.size=o==null?void 0:o.size}static fromJson(e,a){return new Ki(e.command,e.delim,a,e)}toJson(){return{...super.toJson(),delim:this.value,size:this.size}}render(e){const a=new z(null);return a.delim=this.value,a}serialize(e){return this.value.length===1?this.command+this.value:`${this.command}{${this.value}}`}}class $i extends S{constructor(e,a,i,o){super("sizeddelim",i,{command:e,style:o.style}),this.value=a,this.delimClass=o.delimClass,this.size=o.size}static fromJson(e,a){return new $i(e.command,e.delim,a,e)}toJson(){return{...super.toJson(),delim:this.value,size:this.size,delimClass:this.delimClass}}render(e){let a=function(i,o,r,n){var s;return i===void 0||i==="."?Ht(r,(s=n.type)!==null&&s!==void 0?s:"minner",n.classes):(i==="<"||i==="\\lt"||i==="⟨"?i="\\langle":i!==">"&&i!=="\\gt"&&i!=="⟩"||(i="\\rangle"),Gr.has(i)||Zr.has(i)?Ur(i,o,!1,r,n):ls.has(i)?Xr(i,us[o],!1,r,n):null)}(this.value,this.size,e,{classes:this.delimClass});return a?(a=this.bind(e,a),this.caret&&(a.caret=this.caret),a):null}serialize(e){return this.value.length===1?this.command+this.value:`${this.command}{${this.value}}`}}class Pt extends S{constructor(e,a,i,o,r){super("enclose",o,{command:e,style:r.style}),this.body=a,this.backgroundcolor=r.backgroundcolor,i.updiagonalarrow&&(i.updiagonalstrike=!1),i.box&&(i.left=!1,i.right=!1,i.bottom=!1,i.top=!1),this.notation=i,this.shadow=r.shadow,this.strokeWidth=r.strokeWidth,this.strokeStyle=r.strokeStyle,this.svgStrokeStyle=r.svgStrokeStyle,this.strokeColor=r.strokeColor,this.borderStyle=r.borderStyle,this.padding=r.padding,this.captureSelection=!0}static fromJson(e,a){return new Pt(e.command,e.body,e.notation,a,e)}toJson(){const e={};return this.notation.downdiagonalstrike&&(e.downdiagonalstrike=!0),this.notation.updiagonalstrike&&(e.downdiagonalstrike=!0),this.notation.verticalstrike&&(e.downdiagonalstrike=!0),this.notation.horizontalstrike&&(e.downdiagonalstrike=!0),this.notation.updiagonalarrow&&(e.downdiagonalstrike=!0),this.notation.right&&(e.downdiagonalstrike=!0),this.notation.bottom&&(e.downdiagonalstrike=!0),this.notation.left&&(e.downdiagonalstrike=!0),this.notation.top&&(e.downdiagonalstrike=!0),this.notation.circle&&(e.downdiagonalstrike=!0),this.notation.roundedbox&&(e.downdiagonalstrike=!0),this.notation.madruwb&&(e.downdiagonalstrike=!0),this.notation.actuarial&&(e.downdiagonalstrike=!0),this.notation.box&&(e.downdiagonalstrike=!0),{...super.toJson(),notation:e,shadow:this.shadow,strokeWidth:this.strokeWidth,strokeStyle:this.strokeStyle,svgStrokeStyle:this.svgStrokeStyle,strokeColor:this.strokeColor,borderStyle:this.borderStyle,padding:this.padding}}serialize(e){var a;let i=(a=this.command)!==null&&a!==void 0?a:"";if(this.command==="\\enclose"){i+="{"+Object.keys(this.notation).join(" ")+"}";let o="",r="";this.backgroundcolor&&this.backgroundcolor!=="transparent"&&(o+=r+'mathbackground="'+this.backgroundcolor+'"',r=","),this.shadow&&this.shadow!=="auto"&&(o+=r+'shadow="'+this.shadow+'"',r=","),this.strokeWidth||this.strokeStyle!=="solid"?(o+=r+this.borderStyle,r=","):this.strokeColor&&this.strokeColor!=="currentColor"&&(o+=r+'mathcolor="'+this.strokeColor+'"',r=","),o&&(i+=`[${o}]`)}return i+=`{${this.bodyToLatex(e)}}`,i}render(e){var a;const i=new V(e,this.style),o=S.createBox(i,this.body);if(!o)return null;const r=(a=dt(this.padding&&this.padding!=="auto"?zi(this.padding,{...this.context,registers:e.registers}):i.getRegisterAsDimension("fboxsep")))!==null&&a!==void 0?a:0,n=function(c){if(!c)return"1px";const d=c.match(/([0-9][a-zA-Z\%]+)/);return d===null?"1px":d[1]}(this.borderStyle),s=new z(null,{classes:"ML__notation"});s.setStyle("position","absolute"),s.setStyle("z-index","-1"),s.setStyle("box-sizing","border-box"),s.setStyle("top",`calc(-${n} / 2 - ${r}em)`),s.setStyle("left",`calc(-${n} / 2 - ${r}em)`),s.setStyle("height",`calc(100% + ${2*r}em + 2 * ${n})`),s.height=o.height+r,s.depth=o.depth+r,s.setStyle("width",`calc(100% + ${2*r}em + 2 * ${n})`),this.backgroundcolor&&s.setStyle("background-color",this.backgroundcolor),this.notation.box&&s.setStyle("border",this.borderStyle),this.notation.actuarial&&(s.setStyle("border-top",this.borderStyle),s.setStyle("border-right",this.borderStyle)),this.notation.madruwb&&(s.setStyle("border-bottom",this.borderStyle),s.setStyle("border-right",this.borderStyle)),this.notation.roundedbox&&(s.setStyle("border-radius","8px"),s.setStyle("border",this.borderStyle)),this.notation.circle&&(s.setStyle("border-radius","50%"),s.setStyle("border",this.borderStyle)),this.notation.top&&s.setStyle("border-top",this.borderStyle),this.notation.left&&s.setStyle("border-left",this.borderStyle),this.notation.right&&s.setStyle("border-right",this.borderStyle),this.notation.bottom&&s.setStyle("border-bottom",this.borderStyle);let l="";if(this.notation.horizontalstrike&&(l+='<line x1="3%"  y1="50%" x2="97%" y2="50%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),this.notation.verticalstrike&&(l+='<line x1="50%"  y1="3%" x2="50%" y2="97%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),this.notation.updiagonalstrike&&(l+='<line x1="3%"  y1="97%" x2="97%" y2="3%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),this.notation.downdiagonalstrike&&(l+='<line x1="3%"  y1="3%" x2="97%" y2="97%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),l){let c;this.shadow!=="none"&&(c=this.shadow==="auto"?"filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)":"filter: drop-shadow("+this.shadow+")"),function(d,p,h){d.svgOverlay=p,d.svgStyle=h}(s,l,c)}const u=new z([s,o]);return u.setStyle("position","relative"),u.setStyle("display","inline"),u.height=o.height+r,u.depth=o.depth+r,u.left=r,u.right=r,this.caret&&(u.caret=this.caret),u.wrap(i)}}class _t extends S{constructor(e,a,i,o,r){var n,s;super("genfrac",o,{style:r.style,command:e,serialize:r.serialize,displayContainsHighlight:!0}),this.above=a,this.below=i,this.hasBarLine=(n=r==null?void 0:r.hasBarLine)===null||n===void 0||n,this.continuousFraction=(s=r==null?void 0:r.continuousFraction)!==null&&s!==void 0&&s,this.numerPrefix=r==null?void 0:r.numerPrefix,this.denomPrefix=r==null?void 0:r.denomPrefix,this.mathstyleName=r==null?void 0:r.mathstyleName,this.leftDelim=r==null?void 0:r.leftDelim,this.rightDelim=r==null?void 0:r.rightDelim}static fromJson(e,a){return new _t(e.command,e.above,e.below,a,e)}toJson(){const e={};return this.continuousFraction&&(e.continuousFraction=!0),this.numerPrefix&&(e.numerPrefix=this.numerPrefix),this.denomPrefix&&(e.denomPrefix=this.denomPrefix),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),this.hasBarLine||(e.hasBarLine=!1),this.mathstyleName&&(e.mathstyleName=this.mathstyleName),{...super.toJson(),...e}}serialize(e){return this.command+`{${this.aboveToLatex(e)}}{${this.belowToLatex(e)}}`}get children(){if(this._children)return this._children;const e=[];if(this.context.fractionNavigationOrder==="numerator-denominator"){for(const a of this.above)e.push(...a.children),e.push(a);for(const a of this.below)e.push(...a.children),e.push(a)}else{for(const a of this.below)e.push(...a.children),e.push(a);for(const a of this.above)e.push(...a.children),e.push(a)}return this._children=e,e}render(e){var a,i;const o=new V(e,this.style,this.mathstyleName),r=o.metrics,n=new V(o,this.style,this.continuousFraction?"":"numerator"),s=this.numerPrefix?new z([new z(this.numerPrefix),S.createBox(n,this.above)],{isTight:n.isTight,newList:!0}):(a=S.createBox(n,this.above,{newList:!0}))!==null&&a!==void 0?a:new z(null,{newList:!0}),l=new V(o,this.style,this.continuousFraction?"":"denominator"),u=this.denomPrefix?new z([new z(this.denomPrefix),S.createBox(l,this.below,{newList:!0})]):(i=S.createBox(l,this.below,{newList:!0}))!==null&&i!==void 0?i:new z(null,{newList:!0}),c=this.hasBarLine?r.defaultRuleThickness:0;let d,p,h=0;o.isDisplayStyle?(d=r.num1,h=c>0?3*c:7*c,p=r.denom1):(c>0?(d=r.num2,h=c):(d=r.num3,h=3*c),p=r.denom2);const m=[];this.isSelected&&m.push("ML__selected");const b=s.depth,y=u.height;let x;if(c<=0){const T=d-b-(y-p);T<h&&(d+=(h-T)/2,p+=(h-T)/2),x=new xe({individualShift:[{box:s,shift:-d,classes:[...m,"ML__center"]},{box:u,shift:p,classes:[...m,"ML__center"]}]}).wrap(o)}else{const T=.25+c/2,C=.25-c/2;d<h+b+T&&(d=h+b+T),p<h+y-C&&(p=h+y-C);const K=new z(null,{classes:"ML__frac-line",mode:this.mode,style:this.style});K.height=c/2,K.depth=c/2,x=new xe({individualShift:[{box:u,shift:p,classes:[...m,"ML__center"]},{box:K,shift:c/2-C,classes:m},{box:s,shift:-d,classes:[...m,"ML__center"]}]}).wrap(o)}const k=o.isDisplayStyle?r.delim1:r.delim2,g=this.isSelected?" ML__selected":"",f=this.leftDelim?this.bind(e,pi("mopen",this.leftDelim,k,!0,e,{style:this.style,mode:this.mode,classes:g})):Ht(o,"mopen");let _=null;_=this.continuousFraction?new z(null,{type:"mclose"}):this.rightDelim?this.bind(e,pi("mclose",this.rightDelim,k,!0,e,{style:this.style,mode:this.mode,classes:g})):Ht(o,"mclose");const w=this.bind(e,new z([f,x,_],{isTight:o.isTight,type:"mord",classes:"mfrac"}));return w?(this.caret&&(w.caret=this.caret),this.attachSupsub(e,{base:w})):null}}class fe extends S{constructor(e,a,i){var o;super("latex",a,{value:e,mode:"latex"}),this.isSuggestion=(o=i==null?void 0:i.isSuggestion)!==null&&o!==void 0&&o,this.isError=!1,this.verbatimLatex=e}static fromJson(e,a){const i=new fe(e.command,a);return e.isSuggestion&&(i.isSuggestion=!0),e.isError&&(i.isError=!0),i}toJson(){const e={};return this.isSuggestion&&(e.isSuggestion=!0),this.isError&&(e.isError=!0),{...super.toJson(),...e}}get computedStyle(){return{}}render(e){const a=new z(this.value,{classes:this.isSuggestion?"ML__suggestion":this.isError?"ML__error":"",type:"latex",maxFontSize:1});return a?(this.caret&&(a.caret=this.caret),this.bind(e,a)):null}}class yt extends S{constructor(e,a){super("latexgroup",a,{mode:"latex"}),this.body=[...e].map(i=>new fe(i,a)),this.skipBoundary=!1}static fromJson(e,a){return new yt("",a)}toJson(){return super.toJson()}render(e){const a=S.createBox(e,this.body,{newList:!0});return a?(this.caret&&(a.caret=this.caret),this.bind(e,a)):null}serialize(e){var a,i;return(i=(a=this.body)===null||a===void 0?void 0:a.map(o=>o.value).join(""))!==null&&i!==void 0?i:""}}class za extends S{constructor(e,a,i,o){super("line",i,{command:e,style:o.style}),this.skipBoundary=!0,this.body=a,this.position=o.position}static fromJson(e,a){return new za(e.command,e.body,a,e)}toJson(){return{...super.toJson(),position:this.position}}render(e){const a=new V(e,this.style,"cramp"),i=S.createBox(a,this.body);if(!i)return null;const o=a.metrics.defaultRuleThickness/a.scalingFactor,r=new z(null,{classes:this.position+"-line"});let n;return r.height=o,r.maxFontSize=1.125*o*a.scalingFactor,n=this.position==="overline"?new xe({shift:0,children:[{box:i},3*o,{box:r},o]}):new xe({top:i.height,children:[o,{box:r},3*o,{box:i}]}),this.caret&&(n.caret=this.caret),new z(n,{classes:this.position,type:"mord"})}}class Ge extends S{constructor(e,a,i,o){var r,n,s,l;super((r=o.type)!==null&&r!==void 0?r:"mop",i,{command:e,style:o.style,isFunction:o==null?void 0:o.isFunction}),typeof a=="string"?this.value=a:this.body=a,this.captureSelection=(n=o.captureSelection)!==null&&n!==void 0&&n,this.hasArgument=(s=o.hasArgument)!==null&&s!==void 0&&s,this.variant=o==null?void 0:o.variant,this.variantStyle=o==null?void 0:o.variantStyle,this.subsupPlacement=o==null?void 0:o.limits,this.isExtensibleSymbol=(l=o==null?void 0:o.isExtensibleSymbol)!==null&&l!==void 0&&l}static fromJson(e,a){return new Ge(e.command,e.body?e.body:e.value,a,e)}toJson(){const e=super.toJson();return this.hasArgument&&(e.hasArgument=!0),this.variant&&(e.variant=this.variant),this.variantStyle&&(e.variantStyle=this.variantStyle),this.subsupPlacement&&(e.limits=this.subsupPlacement),this.isExtensibleSymbol&&(e.isExtensibleSymbol=!0),this.value&&(e.symbol=this.value),e}render(e){var a;let i,o=0,r=0;if(this.isExtensibleSymbol){const s=e.isDisplayStyle&&this.value!=="\\smallint";if(i=new z(this.value,{fontFamily:s?"Size2-Regular":"Size1-Regular",classes:"op-symbol "+(s?"large-op":"small-op"),type:"mop",maxFontSize:e.scalingFactor}),!i)return null;i.right=i.italic,o=(i.height-i.depth)/2-.25*e.scalingFactor,r=i.italic,i.setStyle("color",this.style.color),i.setStyle("background-color",this.style.backgroundColor)}else if(this.body){if(i=S.createBox(e,this.body,{newList:!0}),!i)return null;i.setStyle("color",this.style.color),i.setStyle("background-color",this.style.backgroundColor)}else i=new z(this.value,{type:"mop",mode:"math",maxFontSize:e.scalingFactor,style:{color:this.style.color,backgroundColor:this.style.backgroundColor,letterShapeStyle:e.letterShapeStyle,variant:this.variant,variantStyle:this.variantStyle}});this.isExtensibleSymbol&&i.setTop(o);let n=i;if(this.superscript||this.subscript){const s=(a=this.subsupPlacement)!==null&&a!==void 0?a:"auto";n=s==="over-under"||s==="auto"&&e.isDisplayStyle?this.attachLimits(e,{base:i,baseShift:o,slant:r}):this.attachSupsub(e,{base:i})}return this.caret&&(n.caret=this.caret),new z(this.bind(e,n),{type:"mop",classes:"op-group"+(this.isSelected?" ML__selected":"")})}serialize(e){if(this.value==="​")return this.supsubToLatex(e);const a=[];return a.push(this.command),this.hasArgument&&a.push(`{${this.bodyToLatex(e)}}`),this.explicitSubsupPlacement&&(this.subsupPlacement==="over-under"&&a.push("\\limits"),this.subsupPlacement==="adjacent"&&a.push("\\nolimits"),this.subsupPlacement==="auto"&&a.push("\\displaylimits")),a.push(this.supsubToLatex(e)),he(a)}}class pt extends S{constructor(e,a,i,o){var r,n;super("overlap",i,{command:e,style:o==null?void 0:o.style}),this.skipBoundary=!0,this.body=typeof a=="string"?[new S("mord",i,{value:a})]:a,this.align=(r=o==null?void 0:o.align)!==null&&r!==void 0?r:"left",this.boxType=(n=o==null?void 0:o.boxType)!==null&&n!==void 0?n:"mord"}static fromJson(e,a){return new pt(e.command,e.body,a,e)}toJson(){const e={};return this.align&&(e.align=this.align),this.boxType&&(e.boxType=this.boxType),{...super.toJson(),...e}}render(e){const a=S.createBox(e,this.body,{classes:"inner"});return a?(this.caret&&(a.caret=this.caret),this.bind(e,new z([a,new z(null,{classes:"fix"})],{classes:this.align==="left"?"llap":"rlap",type:this.boxType}))):null}}class St extends S{constructor(e,a,i,o){var r,n,s,l;super("phantom",i,{command:e,style:o.style}),this.captureSelection=!0,this.body=a,this.isInvisible=(r=o.isInvisible)!==null&&r!==void 0&&r,this.smashDepth=(n=o.smashDepth)!==null&&n!==void 0&&n,this.smashHeight=(s=o.smashHeight)!==null&&s!==void 0&&s,this.smashWidth=(l=o.smashWidth)!==null&&l!==void 0&&l}static fromJson(e,a){return new St(e.command,e.body,a,e)}toJson(){const e={};return this.isInvisible&&(e.isInvisible=!0),this.smashDepth&&(e.smashDepth=!0),this.smashHeight&&(e.smashHeight=!0),this.smashWidth&&(e.smashWidth=!0),{...super.toJson(),...e}}render(e){const a=new V(e,{isPhantom:!0});if(!this.smashDepth&&!this.smashHeight&&!this.smashWidth)return S.createBox(a,this.body,{classes:"inner"});const i=S.createBox(this.isInvisible?a:e,this.body);if(!i)return null;if(this.smashWidth){const o=new z(null,{classes:"fix"});return new z([i,o],{classes:"rlap"}).wrap(e)}if(!this.smashHeight&&!this.smashDepth)return i;if(this.smashHeight&&(i.height=0),this.smashDepth&&(i.depth=0),i.children)for(const o of i.children)this.smashHeight&&(o.height=0),this.smashDepth&&(o.depth=0);return new xe({firstBaseline:[{box:i}]},{type:"mord"}).wrap(e)}}class qi extends S{constructor(e,a,i){var o;super("rule",a,{command:e,style:i.style}),this.shift=(o=i.shift)!==null&&o!==void 0?o:{dimension:0},this.height=i.height,this.width=i.width}static fromJson(e,a){return new qi(e.command,a,e)}toJson(){const e={height:this.height,width:this.width};return this.shift&&(e.shift=this.shift),{...super.toJson(),...e}}render(e){const a=new V(e,this.style,"textstyle"),i=dt(this.shift),o=dt(this.width),r=dt(this.height),n=new z(null,{classes:"rule",type:"mord"});return n.setStyle("border-right-width",o,"em"),n.setStyle("border-top-width",r,"em"),n.setStyle("border-color",this.style.color),n.setStyle("vertical-align",i,"em"),this.isSelected&&n.setStyle("opacity","50%"),n.width=o,n.height=r+i,n.depth=-i,this.bind(e,n),this.caret&&(n.caret=this.caret),n.wrap(a)}serialize(e){var a;let i=(a=this.command)!==null&&a!==void 0?a:"";return this.shift&&(i+=`[${Ii(this.shift)}]`),i+=`{${Ii(this.width)}}{${Ii(this.height)}}`,i}}class Ei extends S{constructor(e,a,i){var o;super("surd",a,{command:e,mode:(o=i.mode)!==null&&o!==void 0?o:"math",style:i.style,displayContainsHighlight:!0}),this.body=i.body,this.above=i.index}static fromJson(e,a){return new Ei(e.command,a,{...e,index:e.above})}toJson(){return super.toJson()}serialize(e){let a="";return this.above&&(a+=`[${this.aboveToLatex(e)}]`),a+=`{${this.bodyToLatex(e)}}`,this.command+a}render(e){var a;const i=new V(e,this.style,"cramp"),o=(a=S.createBox(i,this.body,{style:this.style,newList:!0}))!==null&&a!==void 0?a:new z(null),r=i.scalingFactor,n=i.metrics.defaultRuleThickness/r,s=e.isDisplayStyle?.431:n,l=new z(null,{classes:"ML__sqrt-line",style:this.style,height:n});let u=r*(n+s/4);const c=Math.max(2*r*s,o.height+o.depth)+u+n,d=new V(e,this.style),p=this.isSelected?" ML__selected":"",h=this.bind(d,new z(pi("","\\surd",c,!1,d,{classes:p}),{classes:"ML__sqrt-sign"+p,style:this.style}));if(!h)return null;const m=h.height+h.depth-n;m>o.height+o.depth+u&&(u=(u+m-(o.height+o.depth))/2),h.setTop(h.height-o.height-u);const b=this.bind(e,new xe({firstBaseline:[{box:new z(o)},u-2*n,{box:l},n]}).wrap(e)),y=S.createBox(new V(e,this.style,"scriptscriptstyle"),this.above,{style:this.style,newList:!0});if(!y){const g=new z([h,b],{classes:this.containsCaret?"ML__contains-caret":"",type:"mord"});return this.caret&&(g.caret=this.caret),this.bind(e,g.wrap(e))}const x=new xe({shift:-.6*(Math.max(h.height,b.height)-Math.max(h.depth,b.depth)),children:[{box:y}]}),k=new z([new z(x,{classes:"ML__sqrt-index"}),h,b],{type:"mord",classes:this.containsCaret?"ML__contains-caret":""});return k.height=h.height,k.depth=h.depth,this.caret&&(k.caret=this.caret),this.bind(e,k.wrap(e))}}const ar={"p@":"1pt ","z@":"0pt",maxdimen:"16383.99999pt",hfuzz:"0.1pt",vfuzz:"0.1pt",overfullrule:"5pt",hsize:"6.5in",vsize:"8.9in",parindent:"20pt",maxdepth:"4pt",splitmaxdepth:"\\maxdimen",boxmaxdepth:"\\maxdimen",delimitershortfall:"5pt",nulldelimiterspace:"1.2pt",scriptspace:"0.5pt",topskip:"10pt",splittopskip:"10pt",normalbaselineskip:"12pt",normallineskip:"1pt",normallineskiplimit:"0pt",jot:"3pt",doublerulesep:"2pt",arrayrulewidth:"0.4pt",arraycolsep:"5pt",fboxsep:"3pt",fboxrule:"0.4pt"},ir={"z@skip":"0pt plust0pt minus0pt",hideskip:"-1000pt plust 1fill","@flushglue":"0pt plust 1fill",parskip:"0pt plus 1pt",abovedisplayskip:"12pt plus 3pt minus 9pt",abovedisplayshortskip:"0pt plus 3pt",belowdisplayskip:"12pt plus 3pt minus 9pt",belowdisplayshortskip:"7pt plus 3pt minus 4pt",parfillskip:"0pt plus 1fil",thinmuskip:"3mu",medmuskip:"4mu plus 2mu minus 4mu",thickmuskip:"5mu plus 5mu",smallskipamount:"3pt plus1pt minus1pt",medskipamount:"6pt plus2pt minus2pt",bigskipamount:"12pt plus4pt minus4pt"},bs={pretolerance:100,tolerance:200,hbadness:1e3,vbadness:1e3,linepenalty:10,hyphenpenalty:50,exhyphenpenalty:50,binoppenalty:700,relpenalty:500,clubpenalty:150,widowpenalty:150,displaywidowpenalty:50,brokenpenalty:100,predisplaypenalty:1e4,doublehyphendemerits:1e4,finalhyphendemerits:5e3,adjdemerits:1e4,tracinglostchars:1,uchyph:1,delimiterfactor:901,defaulthyphenchar:"\\-",defaultskewchar:-1,newlinechar:-1,showboxbreadth:5,showboxdepth:3,errorcontextlines:5,interdisplaylinepenalty:100,interfootnotelinepenalty:100,baselineSkip:1.2,arraystretch:"",month:new Date().getMonth()+1,day:new Date().getDate(),year:new Date().getFullYear()};let xt;function Yr(t){var e,a;if(xt)return xt;xt={...bs};for(const i of Object.keys(ar))xt[i]=(e=zi(ar[i],t,xt))!==null&&e!==void 0?e:0;for(const i of Object.keys(ir))xt[i]=(a=ms(ir[i],t,xt))!==null&&a!==void 0?a:0;return xt}function Qr(){const t={registers:{},smartFence:!1,fractionNavigationOrder:"numerator-denominator",placeholderSymbol:"▢",letterShapeStyle:ae.locale.startsWith("fr")?"french":"tex",colorMap:Li,backgroundColorMap:$o,getDefinition:Eo,getMacro:e=>en(e,Hr())};return{...t,registers:Yr(t)}}function Eo(t,e="math"){if(!t||t.length===0)return null;let a=null;if(t.startsWith("\\")){if(a=bt[t],a)return a;e==="math"?a=ft[t]:Lt[t]&&(a={definitionType:"symbol",type:"mord",codepoint:Lt[t]})}else if(e==="math"){if(a=ft[t],!a&&t.length===1){const i=li("math",t.codePointAt(0));return i.startsWith("\\")?{...Eo(i,"math"),command:i}:null}}else Lt[t]?a={definitionType:"symbol",type:"mord",codepoint:Lt[t]}:e==="text"&&(a={definitionType:"symbol",type:"mord",codepoint:t.codePointAt(0)});return!a||a.definitionType!=="symbol"||a.type!=="mord"||a.codepoint!==102&&a.codepoint!==103&&a.codepoint!==104||(a.isFunction=!0),a??null}function en(t,e){return t.startsWith("\\")?e[t.slice(1)]:null}class Ta extends S{constructor(e,a,i,o){super("tooltip",i,{command:o==null?void 0:o.command,mode:"math",serialize:o==null?void 0:o.serialize,style:o==null?void 0:o.style,displayContainsHighlight:!0}),this.body=e;const r=Qr();this.tooltip=new S("root",r,{style:{}}),this.tooltip.body=a,this.skipBoundary=!0,this.captureSelection=!1}static fromJson(e,a){return new Ta(e.body,nt(e.tooltip,a),a,e)}toJson(){var e;const a=(e=this.tooltip.body)===null||e===void 0?void 0:e.filter(i=>i.type!=="first").map(i=>i.toJson());return{...super.toJson(),tooltip:a}}render(e){const a=S.createBox(e,this.body,{style:this.style});if(!a)return null;const i=qo(Na(new z(this.tooltip.render(new V({registers:e.registers},{fontSize:5},"displaystyle")),{classes:"ML__tooltip-content"}))),o=new z([i,a],{classes:"ML__tooltip-container"});return this.caret&&(o.caret=this.caret),this.bind(e,o)}serialize(e){return`${this.command}{${this.bodyToLatex(e)}}{${S.serialize(this.tooltip.body,e)}}`}}function nt(t,e){if(Ce(t))return t.map(o=>nt(o,e));t={...t};for(const o of It)t[o]&&(t[o]=nt(t[o],e));t.array&&(t.array=nt(t.array,e));const a=t.type;let i;a==="accent"&&(i=ia.fromJson(t,e)),a==="array"&&(i=re.fromJson(t,e)),a==="box"&&(i=Ct.fromJson(t,e)),a==="composition"&&(i=Ti.fromJson(t,e)),a==="chem"&&(i=Bi.fromJson(t,e)),a==="choice"&&(i=Oi.fromJson(t,e)),a==="delim"&&(i=Ki.fromJson(t,e)),a==="enclose"&&(i=Pt.fromJson(t,e)),a==="error"&&(i=Ci.fromJson(t,e)),a==="genfrac"&&(i=_t.fromJson(t,e)),a==="group"&&(i=Se.fromJson(t,e)),a==="latex"&&(i=fe.fromJson(t,e)),a==="latexgroup"&&(i=yt.fromJson(t,e)),a==="leftright"&&(i=ze.fromJson(t,e)),a==="line"&&(i=za.fromJson(t,e)),a==="macro"&&(i=Ai.fromJson(t,e)),a==="msubsup"&&(i=sa.fromJson(t,e)),a==="overlap"&&(i=pt.fromJson(t,e)),a==="overunder"&&(i=We.fromJson(t,e)),a==="placeholder"&&(t.defaultValue&&(t.defaultValue=nt(t.defaultValue,e)),i=ce.fromJson(t,e)),a==="phantom"&&(i=St.fromJson(t,e)),a==="rule"&&(i=qi.fromJson(t,e)),a==="sizeddelim"&&(i=$i.fromJson(t,e)),a==="spacing"&&(i=Dt.fromJson(t,e)),a==="surd"&&(i=Ei.fromJson(t,e)),a==="text"&&(i=Jt.fromJson(t,e)),a==="tooltip"&&(i=Ta.fromJson(t,e)),a==="mop"&&(i=Ge.fromJson(t,e)),i||(i=S.fromJson(t,e));for(const o of It)t[o]&&i.setChildren(t[o],o);return t.verbatimLatex!==void 0&&(i.verbatimLatex=t.verbatimLatex),t.subsupPlacement&&(i.subsupPlacement=t.subsupPlacement),t.explicitSubsupPlacement&&(i.explicitSubsupPlacement=!0),t.isFunction&&(i.isFunction=!0),t.isExtensibleSymbol&&(i.isExtensibleSymbol=!0),t.skipBoundary&&(i.skipBoundary=!0),t.captureSelection&&(i.captureSelection=!0),i}class Oi extends S{constructor(e,a){super("choice",a),this.choices=e,this.skipBoundary=!0}static fromJson(e,a){return new Oi([nt(e.choices[0],a),nt(e.choices[1],a),nt(e.choices[2],a),nt(e.choices[3],a)],a)}toJson(){const e=[];for(const a of this.choices)e.push(a.filter(i=>i.type!=="first").map(i=>i.toJson()));return{...super.toJson(),choices:e}}render(e){const a=S.createBox(e,this.choices[Math.floor(e.mathstyle.id/2)]);return a?(this.caret&&(a.caret=this.caret),this.bind(e,a)):null}serialize(e){return`\\mathchoice{${S.serialize(this.choices[0],e)}}{${S.serialize(this.choices[1],e)}}{${S.serialize(this.choices[2],e)}}{${S.serialize(this.choices[3],e)}}`}}M("mathtip","{:math}{:math}",{createAtom:(t,e,a,i)=>new Ta(e[0],e[1],i,{command:t,content:"math",style:a})}),M("texttip","{:math}{:text}",{createAtom:(t,e,a,i)=>new Ta(e[0],e[1],i,{command:t,content:"text",style:a})}),M("error","{:math}",{createAtom:(t,e,a,i)=>new Se(e[0],i,{mode:"math",command:"\\error",customClass:"ML__error",style:a,serialize:(o,r)=>`\\error{${o.bodyToLatex(r)}}`})}),M("ensuremath","{:math}",{createAtom:(t,e,a,i)=>new Se(e[0],i,{mode:"math",latexOpen:"\\ensuremath{",latexClose:"}",style:a})}),M("color","{:string}",{applyStyle:(t,e,a)=>{var i,o;const r=e[0];return{verbatimColor:e[0],color:(o=(i=a.colorMap)===null||i===void 0?void 0:i.call(a,r))!==null&&o!==void 0?o:r}}}),M("textcolor","{:string}{content:auto*}",{applyStyle:(t,e,a)=>{var i,o;const r=e[0];return{verbatimColor:r,color:(o=(i=a.colorMap)===null||i===void 0?void 0:i.call(a,r))!==null&&o!==void 0?o:r}}}),M("boxed","{content:math}",{createAtom:(t,e,a,i)=>new Ct(t,e[0],i,{framecolor:"black",style:a})}),M("colorbox","{:string}{content:auto*}",{applyMode:"text",applyStyle:(t,e,a)=>{var i,o;const r=e[0];return{verbatimBackgroundColor:e[0],backgroundColor:(o=(i=a.backgroundColorMap)===null||i===void 0?void 0:i.call(a,r))!==null&&o!==void 0?o:r}}}),M("fcolorbox","{frame-color:string}{background-color:string}{content:auto}",{applyMode:"text",createAtom:(t,e,a,i)=>{var o,r,n,s;const l=e[0],u=e[1];return new Ct(t,e[2],i,{verbatimFramecolor:l,framecolor:(r=(o=i.colorMap)===null||o===void 0?void 0:o.call(i,l))!==null&&r!==void 0?r:l,verbatimBackgroundcolor:e[1],backgroundcolor:(s=(n=i.backgroundColorMap)===null||n===void 0?void 0:n.call(i,u))!==null&&s!==void 0?s:u,style:a,serialize:(c,d)=>{var p,h;return`${c.command}{${(p=c.verbatimFramecolor)!==null&&p!==void 0?p:c.framecolor}{${(h=c.verbatimBackgroundcolor)!==null&&h!==void 0?h:c.backgroundcolor}}{${c.bodyToLatex(d)}}`}})}}),M("bbox","[:bbox]{body:auto}",{createAtom:(t,e,a,i)=>{if(e[0]){const o=e[0];return new Ct(t,e[1],i,{padding:o.padding,border:o.border,backgroundcolor:o.backgroundcolor,style:a,serialize:(r,n)=>{var s;let l=t;if(Number.isFinite(r.padding)||r.border!==void 0||r.backgroundcolor!==void 0){const u=[];r.padding&&u.push(r.padding),r.border&&u.push(`border: ${r.border}`),(r.verbatimBackgroundcolor||r.backgroundcolor)&&u.push((s=r.verbatimBackgroundcolor)!==null&&s!==void 0?s:r.backgroundcolor),l+=`[${u.join(",")}]`}return l+`{${r.bodyToLatex(n)}}`}})}return new Ct(t,e[1],i,{style:a})}}),M(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"],"{:rest}",{createAtom:(t,e,a,i)=>new Se(e[0],i,{latexOpen:`{${t} `,latexClose:"}",style:a,mathstyleName:t.slice(1)})}),M(["tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"],"",{applyStyle:(t,e)=>({fontSize:{"\\tiny":1,"\\scriptsize":2,"\\footnotesize":3,"\\small":4,"\\normalsize":5,"\\large":6,"\\Large":7,"\\LARGE":8,"\\huge":9,"\\Huge":10}[t]})}),M("fontseries","{:string}",{ifMode:"text",applyStyle:(t,e)=>({fontSeries:e[0]})}),M("fontshape","{:string}",{ifMode:"text",applyStyle:(t,e)=>({fontShape:e[0]})}),M("fontfamily","{:string}",{ifMode:"text",applyStyle:(t,e)=>({fontFamily:e[0]})}),M("selectfont","",{ifMode:"text",applyStyle:(t,e)=>({})}),M("bf","",{applyStyle:(t,e)=>({fontSeries:"b",fontShape:"n",fontFamily:"cmr"})}),M(["boldsymbol","bm"],"{:math*}",{applyMode:"math",createAtom:(t,e,a,i)=>new Se(e[0],i,{latexOpen:`${t}{`,latexClose:"}",style:a,customClass:"ML__boldsymbol"})}),M("bold","{:math*}",{applyMode:"math",applyStyle:(t,e)=>({variantStyle:"bold"})}),M("bfseries","",{applyMode:"text",applyStyle:(t,e)=>({fontSeries:"b"})}),M("mdseries","",{applyMode:"text",applyStyle:(t,e)=>({fontSeries:"m"})}),M("upshape","",{applyMode:"text",applyStyle:(t,e)=>({fontShape:"n"})}),M("slshape","",{applyMode:"text",applyStyle:(t,e)=>({fontShape:"sl"})}),M("scshape","",{applyMode:"text",applyStyle:(t,e)=>({fontShape:"sc"})}),M("textbf","{:text*}",{applyMode:"text",applyStyle:(t,e)=>({fontSeries:"b"})}),M("textmd","{:text*}",{applyMode:"text",applyStyle:(t,e)=>({fontSeries:"m"})}),M("textup","{:text*}",{applyMode:"text",applyStyle:(t,e)=>({fontShape:"n"})}),M("textnormal","{:text*}",{applyMode:"text",applyStyle:(t,e)=>({fontShape:"n",fontSeries:"m"})}),M("textsl","{:text*}",{applyMode:"text",applyStyle:(t,e)=>({fontShape:"sl"})}),M("textit","{:text*}",{applyMode:"text",applyStyle:(t,e)=>({fontShape:"it"})}),M("textsc","{:text*}",{applyMode:"text",applyStyle:(t,e)=>({fontShape:"sc"})}),M("textrm","{:text*}",{applyMode:"text",applyStyle:(t,e)=>({fontFamily:"roman"})}),M("textsf","{:text*}",{applyMode:"text",applyStyle:(t,e)=>({fontFamily:"sans-serif"})}),M("texttt","{:text*}",{applyMode:"text",applyStyle:(t,e)=>({fontFamily:"monospace"})}),M("mathbf","{:math*}",{applyMode:"math",applyStyle:(t,e)=>({variant:"normal",variantStyle:"bold"})}),M("mathit","{:math*}",{applyMode:"math",applyStyle:(t,e)=>({variant:"main",variantStyle:"italic"})}),M("mathnormal","{:math*}",{applyMode:"math",applyStyle:(t,e)=>({variant:"normal",variantStyle:"italic"})}),M("mathbfit","{:math*}",{applyMode:"math",applyStyle:(t,e)=>({variant:"main",variantStyle:"bolditalic"})}),M("mathrm","{:math*}",{applyMode:"math",applyStyle:(t,e)=>({variant:"normal",variantStyle:"up"})}),M("mathsf","{:math*}",{applyMode:"math",applyStyle:(t,e)=>({variant:"sans-serif",variantStyle:"up"})}),M("mathtt","{:math*}",{applyMode:"math",applyStyle:(t,e)=>({variant:"monospace",variantStyle:"up"})}),M("it","",{applyStyle:(t,e)=>({fontSeries:"m",fontShape:"it",fontFamily:"cmr",variantStyle:"italic"})}),M("rmfamily","",{applyStyle:(t,e)=>({fontFamily:"roman"})}),M("sffamily","",{applyStyle:(t,e)=>({fontFamily:"sans-serif"})}),M("ttfamily","",{applyStyle:(t,e)=>({fontFamily:"monospace"})}),M(["Bbb","mathbb"],"{:math*}",{applyStyle:(t,e)=>({variant:"double-struck",variantStyle:"up"})}),M(["frak","mathfrak"],"{:math*}",{applyStyle:(t,e)=>({variant:"fraktur",variantStyle:"up"})}),M("mathcal","{:math*}",{applyStyle:(t,e)=>({variant:"calligraphic",variantStyle:"up"})}),M("mathscr","{:math*}",{applyStyle:(t,e)=>({variant:"script",variantStyle:"up"})}),M("mbox","{:text}",{ifMode:"math",createAtom:(t,e,a,i)=>new Se(e[0],i,{changeMode:!0,style:a,mode:"text",command:t,serialize:(o,r)=>`\\mbox{${o.bodyToLatex({...r,skipModeCommand:!0})}}`})}),M("text","{:text}",{ifMode:"math",applyMode:"text"}),M("class","{name:string}{content:auto*}",{createAtom:(t,e,a,i)=>new Se(e[1],i,{customClass:e[0],style:a})}),M("cssId","{id:string}{content:auto}",{createAtom:(t,e,a,i)=>new Se(e[1],i,{cssId:e[0],style:a})}),M("htmlData","{data:string}{content:auto}",{createAtom:(t,e,a,i)=>new Se(e[1],i,{htmlData:e[0],style:a})}),M("htmlStyle","{data:string}{content:auto}",{createAtom:(t,e,a,i)=>new Se(e[1],i,{htmlStyle:e[0],style:a})}),M("em","{:auto*}",{createAtom:(t,e,a,i)=>new Se(e[0],i,{latexOpen:"\\em",latexClose:"",customClass:"ML__emph",style:a})}),M("emph","{:auto}",{createAtom:(t,e,a,i)=>new Se(e[0],i,{latexOpen:"\\emph{",latexClose:"}",customClass:"ML__emph",style:a})});const or={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}};M(["bigl","Bigl","biggl","Biggl","bigr","Bigr","biggr","Biggr","bigm","Bigm","biggm","Biggm","big","Big","bigg","Bigg"],"{:delim}",{createAtom:(t,e,a,i)=>new $i(t,e[0],i,{size:or[t].size,delimClass:or[t].mclass,style:a})}),M(["hspace","hspace*"],"{width:glue}",{createAtom:(t,e,a,i)=>{var o;return new Dt(t,a,i,(o=e[0])!==null&&o!==void 0?o:{glue:{dimension:0}})}}),M(["mkern","kern"],"{width:glue}",{createAtom:(t,e,a,i)=>{var o;return new Dt(t,a,i,(o=e[0])!==null&&o!==void 0?o:{glue:{dimension:0}})}}),M("mspace","{width:glue}",{createAtom:(t,e,a,i)=>{var o;return new Dt(t,a,i,(o=e[0])!==null&&o!==void 0?o:{glue:{dimension:0}})}}),M("mathop","{:auto}",{createAtom:(t,e,a,i)=>new Ge(t,e[0],i,{type:"mop",captureSelection:!0,limits:"over-under",isFunction:!0,hasArgument:!0,style:a})}),M("mathchoice","{:math}{:math}{:math}{:math}",{createAtom:(t,e,a,i)=>new Oi(e,i)}),M(["mathbin","mathrel","mathopen","mathclose","mathpunct","mathord","mathinner"],"{:auto}",{createAtom:(t,e,a,i)=>new Ge(t,e[0],i,{type:{"\\mathbin":"mbin","\\mathrel":"mrel","\\mathopen":"mopen","\\mathclose":"mclose","\\mathpunct":"mpunct","\\mathord":"mord","\\mathinner":"minner"}[t],captureSelection:!0,hasArgument:!0,style:a})}),M(["operatorname","operatorname*"],"{operator:math}",{createAtom:(t,e,a,i)=>{const o=new Ge(t,e[0],i,{isFunction:!0,hasArgument:!0,limits:t==="\\operatorname"?"adjacent":"over-under",style:a});return o.captureSelection=!0,o.body&&o.body.forEach(r=>{var n;r.type!=="first"&&(r.type="mord",r.value=(n={"∗":"*","−":"-"}[r.value])!==null&&n!==void 0?n:r.value,r.isFunction=!1,r.style.variant||r.style.variantStyle||(r.style.variant="main",r.style.variantStyle="up"))}),o}});class ys extends S{constructor(e,a,i){let o=Number.parseInt(e);Number.isFinite(o)||(o=10067),super("mord",i,{value:String.fromCodePoint(o),style:a}),this.codepoint=o}serialize(e){return'\\unicode"'+("000000"+this.codepoint.toString(16)).toUpperCase().slice(-6)}}function ei(t){if(t.length===1){const e=t[0];if(e.type==="mbin")return"mbin";if(e.type==="mrel")return"mrel"}return"mord"}M("unicode","{charcode:number}",{createAtom:(t,e,a,i)=>new ys(e[0],a,i)}),M("rule","[raise:dimen]{width:dimen}{thickness:dimen}",{createAtom:(t,e,a,i)=>new qi(t,i,{shift:e[0],width:e[1],height:e[2],style:a})}),M("overline","{:auto}",{createAtom:(t,e,a,i)=>new za(t,e[0],i,{position:"overline",style:a})}),M("underline","{:auto}",{createAtom:(t,e,a,i)=>new za(t,e[0],i,{position:"underline",style:a})}),M("overset","{above:auto}{base:auto}",{createAtom:(t,e,a,i)=>new We(t,i,{above:e[0],body:e[1],skipBoundary:!1,style:a,boxType:ei(e[1]),serialize:(o,r)=>`${o.command}{${o.aboveToLatex(r)}}{${o.bodyToLatex(r)}}`})}),M("underset","{below:auto}{base:auto}",{createAtom:(t,e,a,i)=>new We(t,i,{below:e[0],body:e[1],skipBoundary:!1,style:a,boxType:ei(e[1]),serialize:(o,r)=>`${t}{${o.belowToLatex(r)}}{${o.bodyToLatex(r)}}`})}),M("overunderset","{above:auto}{below:auto}{base:auto}",{createAtom:(t,e,a,i)=>new We(t,i,{above:e[0],below:e[1],body:e[2],skipBoundary:!1,style:a,boxType:ei(e[2]),serialize:(o,r)=>`${o.command}{${o.aboveToLatex(r)}}{${o.bodyToLatex(r)}}`})}),M(["stackrel","stackbin"],"[below:auto]{above:auto}{base:auto}",{createAtom:(t,e,a,i)=>new We(t,i,{body:e[2],above:e[1],below:e[0],skipBoundary:!1,style:a,boxType:t==="\\stackrel"?"mrel":"mbin",serialize:(o,r)=>`${o.command}{${o.aboveToLatex(r)}}{${o.bodyToLatex(r)}}`})}),M("smash","[:string]{:auto}",{createAtom:(t,e,a,i)=>e[0]?new St(t,e[1],i,{smashHeight:e[0].includes("t"),smashDepth:e[0].includes("b"),style:a}):new St(t,e[1],i,{smashHeight:!0,smashDepth:!0,style:a})}),M(["vphantom"],"{:auto*}",{createAtom:(t,e,a,i)=>new St(t,e[1],i,{isInvisible:!0,smashWidth:!0,style:a})}),M(["hphantom"],"{:auto*}",{createAtom:(t,e,a,i)=>new St(t,e[1],i,{isInvisible:!0,smashHeight:!0,smashDepth:!0,style:a})}),M(["phantom"],"{:auto*}",{createAtom:(t,e,a,i)=>new St(t,e[1],i,{isInvisible:!0,style:a})}),M("not","{:math}",{createAtom:(t,e,a,i)=>{if(e.length<1||e[0]===null)return new S("mrel",i,{command:t,style:a,value:""});const o=e[0];return new Se([new pt(t,"",i,{align:"right",style:a,boxType:"mrel"}),...o],i,{boxType:"mrel",captureSelection:!0,command:"\\not",serialize:(r,n)=>{const s=S.serialize(o,n);return s.length!==1||/[a-zA-Z]/.test(s)?`\\not{${s}}`:"\\not"+s}})}}),M(["ne","neq"],"",{createAtom:(t,e,a,i)=>new Se([new pt(t,"",i,{align:"right",style:a,boxType:"mrel"}),new S("mrel",i,{style:a,value:"="})],i,{boxType:"mrel",captureSelection:!0,serialize:()=>t,command:t})}),M("rlap","{:auto}",{createAtom:(t,e,a,i)=>new pt(t,e[0],i,{align:"right",style:a})}),M("llap","{:auto}",{createAtom:(t,e,a,i)=>new pt(t,e[0],i,{style:a})}),M("mathllap","{:auto}",{createAtom:(t,e,a,i)=>new pt(t,e[0],i,{style:a})}),M("mathrlap","{:auto}",{createAtom:(t,e,a,i)=>new pt(t,e[0],i,{align:"right",style:a})});const rr={acute:714,grave:715,dot:729,ddot:168,mathring:730,tilde:126,bar:713,breve:728,check:711,hat:94,vec:8407};function Je(t){for(const e of t)for(const a of e)if(a.length>0)return!1;return!0}M(Object.keys(rr),"{body:auto}",{createAtom:(t,e,a,i)=>new ia(t,e[0],i,{accentChar:rr[t.slice(1)],style:a})}),M(["widehat","widecheck","widetilde"],"{body:auto}",{createAtom:(t,e,a,i)=>{const o=Uo(e[0]);return new ia(t,e[0],i,{style:a,svgAccent:t.slice(1)+(o.length>5?"4":["1","1","2","2","3","3"][o.length])})}}),M(["overarc","overparen","wideparen"],"{body:auto}",{createAtom:(t,e,a,i)=>new ia(t,e[0],i,{style:a,svgAccent:"overarc"})}),M(["underarc","underparen"],"{body:auto}",{createAtom:(t,e,a,i)=>new We(t,i,{body:e[0],style:a,svgBelow:"underarc"})}),M("utilde","{body:auto}",{createAtom:(t,e,a,i)=>{const o=Uo(e[0]),r="widetilde"+(o.length>5?"4":["1","1","2","2","3","3"][o.length]);return new We(t,i,{body:e[0],svgBelow:r,style:a,boxType:ei(e[0])})}}),M("^","{:string}",{createAtom:(t,e,a,i)=>{var o;return new S("mord",i,{command:t,isFunction:!1,limits:"adjacent",style:a,value:e[0]&&(o={a:"â",e:"ê",i:"î",o:"ô",u:"û",A:"Â",E:"Ê",I:"Î",O:"Ô",U:"Û"}[e[0]])!==null&&o!==void 0?o:"^"})}}),M("`","{:string}",{createAtom:(t,e,a,i)=>{var o;return new S("mord",i,{command:t,isFunction:!1,limits:"adjacent",style:a,value:e[0]&&(o={a:"à",e:"è",i:"ì",o:"ò",u:"ù",A:"À",E:"È",I:"Ì",O:"Ò",U:"Ù"}[e[0]])!==null&&o!==void 0?o:"`"})}}),M("'","{:string}",{createAtom:(t,e,a,i)=>{var o;return new S("mord",i,{command:t,isFunction:!1,limits:"adjacent",style:a,value:e[0]&&(o={a:"á",e:"é",i:"í",o:"ó",u:"ú",A:"Á",E:"É",I:"Í",O:"Ó",U:"Ú"}[e[0]])!==null&&o!==void 0?o:"^"})}}),M("~","{:string}",{createAtom:(t,e,a,i)=>{var o;return new S("mord",i,{command:t,isFunction:!1,limits:"adjacent",style:a,value:e[0]&&(o={n:"ñ",N:"Ñ",a:"ã",o:"õ",A:"Ã",O:"Õ"}[e[0]])!==null&&o!==void 0?o:"´"})}}),M("c","{:string}",{createAtom:(t,e,a,i)=>{var o;return new S("mord",i,{command:t,isFunction:!1,limits:"adjacent",style:a,value:e[0]&&(o={c:"ç",C:"Ç"}[e[0]])!==null&&o!==void 0?o:""})}}),M("enclose","{notation:string}[style:string]{body:auto}",{createAtom:(t,e,a,i)=>{var o;const r={strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",backgroundcolor:"transparent",padding:"auto",shadow:"auto",svgStrokeStyle:void 0,borderStyle:void 0,style:a};if(e[1]){const s=e[1].split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(const l of s){const u=l.match(/\s*(\S+)\s+(\S+)\s+(.*)/);if(u)r.strokeWidth=u[1],r.strokeStyle=u[2],r.strokeColor=u[3];else{const c=l.match(/\s*([a-z]*)\s*=\s*"(.*)"/);c&&(c[1]==="mathbackground"?r.backgroundcolor=c[2]:c[1]==="mathcolor"?r.strokeColor=c[2]:c[1]==="padding"?r.padding=c[2]:c[1]==="shadow"&&(r.shadow=c[2]))}}r.strokeStyle==="dashed"?r.svgStrokeStyle="5,5":r.strokeStyle==="dotted"&&(r.svgStrokeStyle="1,5")}r.borderStyle=`${r.strokeWidth} ${r.strokeStyle} ${r.strokeColor}`;const n={};return((o=e[0])!==null&&o!==void 0?o:"").split(/[, ]/).filter(s=>s.length>0).forEach(s=>{n[s.toLowerCase()]=!0}),new Pt(t,e[2],n,i,r)}}),M("cancel","{body:auto}",{createAtom:(t,e,a,i)=>new Pt(t,e[0],{updiagonalstrike:!0},i,{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:a})}),M("bcancel","{body:auto}",{createAtom:(t,e,a,i)=>new Pt(t,e[0],{downdiagonalstrike:!0},i,{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:a})}),M("xcancel","{body:auto}",{createAtom:(t,e,a,i)=>new Pt(t,e[0],{updiagonalstrike:!0,downdiagonalstrike:!0},i,{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:a})}),Ya("math","",(t,e,a,i)=>(Je(a)&&(a=[[[new S("first",t),new ce(t)]]]),new re(t,e,a,i,{mathstyleName:"textstyle"}))),Ya("displaymath","",(t,e,a,i)=>(Je(a)&&(a=[[[new S("first",t),new ce(t)]]]),new re(t,e,a,i,{mathstyleName:"textstyle"}))),lt("array","{columns:colspec}",(t,e,a,i,o)=>(Je(a)&&(a=[[[new S("first",t),new ce(t)]]]),new re(t,e,a,i,{columns:o[0],mathstyleName:"textstyle"}))),lt(["equation","equation*","subequations"],"",(t,e,a,i)=>(Je(a)&&(a=[[[new S("first",t),new ce(t)]]]),new re(t,e,a,i,{columns:[{align:"c"}]}))),lt("multline","",(t,e,a,i)=>(Je(a)&&(a=[[[new S("first",t),new ce(t)]]]),new re(t,e,a,i,{columns:[{align:"m"}]}))),lt(["align","align*","aligned","eqnarray"],"",(t,e,a,i)=>{let o=0;Je(a)&&(a=[[[new S("first",t),new ce(t)],[new S("first",t),new ce(t)]]]);for(const s of a)o=Math.max(o,s.length);const r=[{gap:0},{align:"r"},{gap:.25},{align:"l"}];let n=2;for(;n<o;)r.push({gap:1}),r.push({align:"r"}),r.push({gap:.25}),r.push({align:"l"}),n+=2;return r.push({gap:0}),new re(t,e,a,i,{arraycolsep:0,columns:r,colSeparationType:"align",jot:.3,minColumns:2})}),lt("split","",(t,e,a,i)=>(Je(a)&&(a=[[[new S("first",t),new ce(t)],[new S("first",t),new ce(t)]]]),new re(t,e,a,i,{columns:[{align:"r"},{align:"l"}],minColumns:2}))),lt(["gather","gathered"],"",(t,e,a,i)=>(Je(a)&&(a=[[[new S("first",t),new ce(t)]]]),new re(t,e,a,i,{columns:[{gap:.25},{align:"c"},{gap:0}],colSeparationType:"gather"}))),lt(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],"[columns:colspec]",(t,e,a,i,o)=>{var r;Je(a)&&(a=[[[new S("first",t),new ce(t)]]]);let n=".",s=".";switch(e){case"pmatrix":case"pmatrix*":n="(",s=")";break;case"bmatrix":case"bmatrix*":n="[",s="]";break;case"Bmatrix":case"Bmatrix*":n="\\lbrace",s="\\rbrace";break;case"vmatrix":case"vmatrix*":n="\\vert",s="\\vert";break;case"Vmatrix":case"Vmatrix*":n="\\Vert",s="\\Vert";break;case"matrix":case"matrix*":n=".",s="."}return new re(t,e,a,i,{mathstyleName:"textstyle",leftDelim:n,rightDelim:s,columns:(r=o[0])!==null&&r!==void 0?r:[{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"}]})}),lt(["smallmatrix","smallmatrix*"],"[columns:colspec]",(t,e,a,i,o)=>{var r;return Je(a)&&(a=[[[new S("first",t),new ce(t)]]]),new re(t,e,a,i,{mathstyleName:"scriptstyle",columns:(r=o[0])!==null&&r!==void 0?r:[{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"}],colSeparationType:"small",arraystretch:.5})}),lt(["cases","dcases"],"",(t,e,a,i)=>(Je(a)&&(a=[[[new S("first",t),new ce(t)]]]),new re(t,e,a,i,{mathstyleName:e==="dcases"?"displaystyle":"textstyle",arraystretch:1.2,leftDelim:"\\lbrace",rightDelim:".",columns:[{align:"l"},{gap:1},{align:"l"}]}))),lt("rcases","",(t,e,a,i)=>(Je(a)&&(a=[[[new S("first",t),new ce(t)]]]),new re(t,e,a,i,{arraystretch:1.2,leftDelim:".",rightDelim:"\\rbrace",columns:[{align:"l"},{gap:1},{align:"l"}]}))),Ya("center","",(t,e,a,i)=>(Je(a)&&(a=[[[new S("first",t),new ce(t)]]]),new re(t,e,a,i,{columns:[{align:"c"}]}))),M(["overrightarrow","overleftarrow","Overrightarrow","overleftharpoon","overrightharpoon","overleftrightarrow","overlinesegment","overgroup"],"{:auto}",{createAtom:(t,e,a,i)=>new We(t,i,{body:e[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mrel",style:a,svgAbove:t.slice(1)})}),M("overbrace","{:auto}",{createAtom:(t,e,a,i)=>new We(t,i,{body:e[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mord",style:a,svgAbove:t.slice(1)})}),M(["underrightarrow","underleftarrow","underleftrightarrow","underlinesegment","undergroup"],"{:auto}",{createAtom:(t,e,a,i)=>new We(t,i,{body:e[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mrel",style:a,svgBelow:t.slice(1)})}),M(["underbrace"],"{:auto}",{createAtom:(t,e,a,i)=>new We(t,i,{body:e[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mord",style:a,svgBelow:t.slice(1)})}),M(["xrightarrow","xleftarrow","xRightarrow","xLeftarrow","xleftharpoonup","xleftharpoondown","xrightharpoonup","xrightharpoondown","xlongequal","xtwoheadleftarrow","xtwoheadrightarrow","xleftrightarrow","xLeftrightarrow","xrightleftharpoons","xleftrightharpoons","xhookleftarrow","xhookrightarrow","xmapsto","xtofrom","xrightleftarrows","xrightequilibrium","xleftequilibrium"],"[:auto]{:auto}",{createAtom:(t,e,a,i)=>{var o,r;return new We(t,i,{style:a,svgBody:t.slice(1),above:((o=e[1])===null||o===void 0?void 0:o.length)===0?void 0:e[1],below:(r=e[0])!==null&&r!==void 0?r:null,skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,paddedLabels:!0,boxType:"mrel",serialize:(n,s)=>t+(n.hasEmptyBranch("below")?"":`[${n.belowToLatex(s)}]`)+`{${n.aboveToLatex(s)}}${n.supsubToLatex(s)}`})}}),M(["arccos","arcsin","arctan","arctg","arcctg","arg","ch","cos","cosh","cot","cotg","coth","ctg","cth","csc","cosec","dim","exp","hom","inf","ker","lb","lg","ln","log","Pr","sec","sh","sin","sinh","sup","tan","tanh","tg","th","arcsec","arccsc","arsinh","arcosh","artanh","arcsech","arccsch"],"",{isFunction:!0,createAtom:(t,e,a,i)=>new Ge(t,t.slice(1),i,{limits:"adjacent",isFunction:!0,variant:"main",variantStyle:"up",style:a})}),M(["liminf","limsup"],"",{createAtom:(t,e,a,i)=>new Ge(t,{"\\liminf":"lim inf","\\limsup":"lim sup"}[t],i,{limits:"over-under",variant:"main",style:a})}),M(["lim","mod"],"",{createAtom:(t,e,a,i)=>new Ge(t,t.slice(1),i,{limits:"over-under",variant:"main",style:a})}),M(["det","max","min"],"",{isFunction:!0,createAtom:(t,e,a,i)=>new Ge(t,t.slice(1),i,{limits:"over-under",isFunction:!0,variant:"main",style:a})}),M(["ang"],"{:math}",{isFunction:!0,createAtom:(t,e,a,i)=>new Se([...e[0],new S("mord",i,{value:"°",style:a})],i,{mode:"math",latexOpen:"\\ang{",latexClose:"}",style:a})}),M("sqrt","[index:auto]{radicand:auto}",{createAtom:(t,e,a,i)=>new Ei(t,i,{body:e[1],index:e[0],style:a})}),M(["frac","dfrac","tfrac","cfrac","binom","dbinom","tbinom"],"{numerator}{denominator}",{createAtom:(t,e,a,i)=>{const o={style:a};switch(t){case"\\dfrac":case"\\frac":case"\\tfrac":o.hasBarLine=!0;break;case"\\atopfrac":o.hasBarLine=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o.hasBarLine=!1,o.leftDelim="(",o.rightDelim=")"}switch(t){case"\\dfrac":case"\\dbinom":o.mathstyleName="displaystyle";break;case"\\tfrac":case"\\tbinom":o.mathstyleName="textstyle";break;case"\\cfrac":o.hasBarLine=!0,o.continuousFraction=!0}return new _t(t,e[0],e[1],i,o)}}),M(["brace","brack"],"",{infix:!0,createAtom:(t,e,a,i)=>new _t(t,e[0],e[1],i,{hasBarLine:!1,leftDelim:t==="\\brace"?"\\lbrace":"\\lbrack",rightDelim:t==="\\brace"?"\\rbrace":"\\rbrack",style:a,serialize:(o,r)=>he([o.aboveToLatex(r),o.command,o.belowToLatex(r)])})}),M(["over","atop","choose"],"",{infix:!0,createAtom:(t,e,a,i)=>{let o,r;return t==="\\choose"&&(o="(",r=")"),new _t(t,e[0],e[1],i,{hasBarLine:t==="\\over",leftDelim:o,rightDelim:r,style:a,serialize:(n,s)=>he([n.aboveToLatex(s),n.command,n.belowToLatex(s)])})}}),M(["overwithdelims","atopwithdelims"],"{numer:auto}{denom:auto}{left-delim:delim}{right-delim:delim}",{infix:!0,createAtom:(t,e,a,i)=>new _t(t,e[0],e[1],i,{leftDelim:e[2],rightDelim:e[3],hasBarLine:!1,style:a,serialize:(o,r)=>`${o.aboveToLatex(r)} ${o.command}${o.leftDelim}${o.rightDelim}${o.belowToLatex(r)}`})}),M("pdiff","{numerator}{denominator}",{createAtom:(t,e,a,i)=>new _t(t,e[0],e[1],i,{hasBarLine:!0,numerPrefix:"∂",denomPrefix:"∂",style:a})}),M(["sum","prod","bigcup","bigcap","coprod","bigvee","bigwedge","biguplus","bigotimes","bigoplus","bigodot","bigsqcup","smallint","intop"],"",{createAtom:(t,e,a,i)=>new Ge(t,{coprod:"∐",bigvee:"⋁",bigwedge:"⋀",biguplus:"⨄",bigcap:"⋂",bigcup:"⋃",intop:"∫",prod:"∏",sum:"∑",bigotimes:"⨂",bigoplus:"⨁",bigodot:"⨀",bigsqcup:"⨆",smallint:"∫"}[t.slice(1)],i,{isExtensibleSymbol:!0,limits:"auto",variant:"main",style:a})});const ji={int:"∫",iint:"∬",iiint:"∭",oint:"∮",oiint:"∯",oiiint:"∰",intclockwise:"∱",varointclockwise:"∲",ointctrclockwise:"∳",intctrclockwise:"⨑",sqcup:"⊔",sqcap:"⊓",uplus:"⊎",wr:"≀",amalg:"⨿",Cap:"⋒",Cup:"⋓",doublecap:"⋒",doublecup:"⋓"};function gs(t,e){return t[0]===e[0]&&t[1]===e[1]?"equal":"different"}function at(t){let e=1/0,a=-1/0;for(const i of t.ranges)e=Math.min(e,i[0],i[1]),a=Math.max(a,i[0],i[1]);return[e,a]}function Oo(t,e,a){return a?function(i,o){if(!o)return"";if(typeof o=="string")return o;if(!i||o.after===void 0)return o.value;let r=!1,n=!1,s=!1,l=!1,u=!1,c=!1,d=!1,p=!1,h=!1,m=!1,b=!1,y=!1,x=!1,k=!1,g=!1,f=i[0],_=0;for(;f&&/msubsup|placeholder/.test(f.type);)_+=1,f=i[_];return r=!f||f.type==="first",f&&(k=f.mode==="text",n=!k&&f.type==="mord"&&Gn.test(f.value),s=!k&&f.type==="mord"&&/\d+$/.test(f.value),l=!k&&f.isFunction,u=f.type==="genfrac",c=f.type==="surd",d=f.type==="mbin",p=f.type==="mrel",h=f.type==="mop",m=f.type==="mpunct"||f.type==="minner",b=f.type==="array",y=f.type==="mopen",x=f.type==="mclose"||f.type==="leftright",g=f.type==="space"),o.after.includes("nothing")&&r||o.after.includes("letter")&&n||o.after.includes("digit")&&s||o.after.includes("function")&&l||o.after.includes("frac")&&u||o.after.includes("surd")&&c||o.after.includes("binop")&&d||o.after.includes("relop")&&p||o.after.includes("operator")&&h||o.after.includes("punct")&&m||o.after.includes("array")&&b||o.after.includes("openfence")&&y||o.after.includes("closefence")&&x||o.after.includes("text")&&k||o.after.includes("space")&&g?o.value:""}(t,a[e]):""}M(Object.keys(ji),"",{createAtom:(t,e,a,i)=>new Ge(t,ji[t.slice(1)],i,{limits:"adjacent",isExtensibleSymbol:!0,style:a,variant:{"⋒":"ams","⋓":"ams"}[ji[t.slice(1)]]})}),M(["Re","Im"],"",{createAtom:(t,e,a,i)=>new Ge(t,{"\\Re":"ℜ","\\Im":"ℑ"}[t],i,{limits:"adjacent",style:a,isFunction:!0,variant:"fraktur"})}),M("middle","{:delim}",{createAtom:(t,e,a,i)=>new Ki(t,e[0],i,{size:1,style:a})}),Ae("0123456789/@.?!"),Wo(65,90),Wo(97,122),Ae([["\\forall",8704],["\\exists",8707],["\\nexists",8708,"mord","ams"],["\\mid",8739,"mrel"],["\\top",8868],["\\bot",8869]]),Ae([["\\sharp",9839],["\\flat",9837],["\\natural",9838],["\\#",35],["\\&",38],["\\clubsuit",9827],["\\heartsuit",9825],["\\spadesuit",9824],["\\diamondsuit",9826],["\\parallelogram",9649]]),Ae([["\\backslash",92],["\\nabla",8711],["\\partial",8706],["\\ell",8467],["\\hbar",8463],["\\Q",81,"mord","double-struck"],["\\C",67,"mord","double-struck"],["\\P",80,"mord","double-struck"],["\\pounds",163],["\\euro",8364]]),Ae([["\\rightarrow",8594],["\\to",8594],["\\leftarrow",8592],["\\gets",8592],["\\Rightarrow",8658],["\\Leftarrow",8656],["\\longrightarrow",10230],["\\longleftarrow",10229],["\\Longrightarrow",10233],["\\implies",10233],["\\Longleftarrow",10232],["\\impliedby",10232],["\\longleftrightarrow",10231],["\\biconditional",10231],["\\Longleftrightarrow",10234],["\\mapsto",8614],["\\longmapsto",10236],["\\uparrow",8593],["\\downarrow",8595],["\\Uparrow",8657],["\\Downarrow",8659],["\\updownarrow",8597],["\\Updownarrow",8661],["\\hookrightarrow",8618],["\\hookleftarrow",8617],["\\rightharpoonup",8640],["\\leftharpoonup",8636],["\\rightharpoondown",8641],["\\leftharpoondown",8637],["\\searrow",8600],["\\nearrow",8599],["\\swarrow",8601],["\\nwarrow",8598],["\\originalof",8886],["\\laplace",8886],["\\imageof",8887],["\\Laplace",8887]],"mrel"),Ae([["\\lbrace",123,"mopen"],["\\rbrace",125,"mclose"],["\\lparen",40,"mopen"],["\\rparen",41,"mclose"],["\\langle",10216,"mopen"],["\\rangle",10217,"mclose"],["\\lfloor",8970,"mopen"],["\\rfloor",8971,"mclose"],["\\lceil",8968,"mopen"],["\\rceil",8969,"mclose"],["\\vert",8739],["\\lvert",8739,"mopen"],["\\rvert",8739,"mclose"],["\\|",8741],["\\Vert",8741],["\\mVert",8741],["\\lVert",8741,"mopen"],["\\rVert",8741,"mclose"],["\\lbrack",91,"mopen"],["\\rbrack",93,"mclose"],["\\{",123,"mopen"],["\\}",125,"mclose"],["(",40,"mopen"],[")",41,"mclose"],["[",91,"mopen"],["]",93,"mclose"],["\\ulcorner",9484,"mopen","ams"],["\\urcorner",9488,"mclose","ams"],["\\llcorner",9492,"mopen","ams"],["\\lrcorner",9496,"mclose","ams"],["\\lgroup",10222,"mopen"],["\\rgroup",10223,"mclose"],["\\lmoustache",9136,"mopen"],["\\rmoustache",9137,"mclose"]]),Ae([["\\dashrightarrow",8674],["\\dashleftarrow",8672],["\\Rrightarrow",8667],["\\Lleftarrow",8666],["\\leftrightarrows",8646],["\\rightleftarrows",8644],["\\curvearrowright",8631],["\\curvearrowleft",8630],["\\rightrightarrows",8649],["\\leftleftarrows",8647],["\\upuparrows",8648],["\\downdownarrows",8650],["\\vartriangle",9651],["\\triangleq",8796],["\\vartriangleleft",8882],["\\trianglelefteq",8884],["\\ntriangleleft",8938],["\\ntrianglelefteq",8940],["\\vartriangleright",8883],["\\trianglerighteq",8885],["\\ntriangleright",8939],["\\ntrianglerighteq",8941],["\\blacktriangleleft",9664],["\\blacktriangleright",9654],["\\leftarrowtail",8610],["\\rightarrowtail",8611],["\\looparrowright",8620],["\\looparrowleft",8619],["\\twoheadleftarrow",8606],["\\twoheadrightarrow",8608],["\\rightleftharpoons",8652],["\\leftrightharpoons",8651],["\\Rsh",8625],["\\Lsh",8624],["\\circlearrowright",8635],["\\circlearrowleft",8634],["\\restriction",8638],["\\upharpoonright",8638],["\\upharpoonleft",8639],["\\downharpoonright",8642],["\\downharpoonleft",8643],["\\rightsquigarrow",8669],["\\leadsto",8669],["\\leftrightsquigarrow",8621],["\\multimap",8888],["\\nrightarrow",8603],["\\nleftarrow",8602],["\\nRightarrow",8655],["\\nLeftarrow",8653],["\\nleftrightarrow",8622],["\\nLeftrightarrow",8654],["\\shortparallel",8741],["\\nless",8814],["\\nleqslant",57360],["\\lneq",10887],["\\lneqq",8808],["\\nleqq",57361],["\\lvertneqq",57356],["\\lnsim",8934],["\\lnapprox",10889],["\\nprec",8832],["\\npreceq",8928],["\\precnsim",8936],["\\precnapprox",10937],["\\nsim",8769],["\\nshortmid",57350],["\\nmid",8740],["\\nvdash",8876],["\\nvDash",8877],["\\ngtr",8815],["\\ngeqslant",57359],["\\ngeqq",57358],["\\gneq",10888],["\\gneqq",8809],["\\gvertneqq",57357],["\\gnsim",8935],["\\gnapprox",10890],["\\nsucc",8833],["\\nsucceq",8929],["\\succnsim",8937],["\\succnapprox",10938],["\\ncong",8774],["\\nshortparallel",57351],["\\nparallel",8742],["\\nVDash",8879],["\\nsupseteqq",57368],["\\supsetneq",8843],["\\varsupsetneq",57371],["\\supsetneqq",10956],["\\varsupsetneqq",57369],["\\nVdash",8878],["\\precneqq",10933],["\\succneqq",10934],["\\nsubseteqq",57366],["\\leqslant",10877],["\\geqslant",10878],["\\gtrsim",8819],["\\approxeq",8778],["\\thickapprox",8776],["\\lessapprox",10885],["\\gtrapprox",10886],["\\precapprox",10935],["\\succapprox",10936],["\\thicksim",8764],["\\succsim",8831],["\\precsim",8830],["\\backsim",8765],["\\eqsim",8770],["\\backsimeq",8909],["\\lesssim",8818],["\\nleq",8816],["\\ngeq",8817],["\\smallsmile",8995],["\\smallfrown",8994],["\\leqq",8806],["\\eqslantless",10901],["\\lll",8920],["\\lessgtr",8822],["\\lesseqgtr",8922],["\\lesseqqgtr",10891],["\\risingdotseq",8787],["\\fallingdotseq",8786],["\\subseteqq",10949],["\\Subset",8912],["\\sqsubset",8847],["\\preccurlyeq",8828],["\\curlyeqprec",8926],["\\vDash",8872],["\\Vvdash",8874],["\\bumpeq",8783],["\\Bumpeq",8782],["\\geqq",8807],["\\eqslantgtr",10902],["\\ggg",8921],["\\gtrless",8823],["\\gtreqless",8923],["\\gtreqqless",10892],["\\supseteqq",10950],["\\Supset",8913],["\\sqsupset",8848],["\\succcurlyeq",8829],["\\curlyeqsucc",8927],["\\Vdash",8873],["\\shortmid",8739],["\\between",8812],["\\pitchfork",8916],["\\varpropto",8733],["\\backepsilon",8717],["\\llless",8920],["\\gggtr",8921],["\\doteqdot",8785],["\\Doteq",8785],["\\eqcirc",8790],["\\circeq",8791],["\\therefore",8756],["\\because",8757]],"mrel","ams"),Ae([["+",43],["-",8722],["−",8722],["\\pm",177],["\\mp",8723],["*",8727],["\\times",215],["\\div",247],["\\divides",8739],["\\cdot",8901],["\\cap",8745],["\\cup",8746],["\\setminus",8726],["\\land",8743],["\\wedge",8743],["\\lor",8744],["\\vee",8744],["\\circ",8728],["\\bigcirc",9711],["\\bullet",8729],["\\oplus",8853],["\\ominus",8854],["\\otimes",8855],["\\odot",8857],["\\oslash",8856],["\\bigtriangleup",9651],["\\bigtriangledown",9661],["\\triangleleft",9667],["\\triangleright",9657],["\\And",38],["\\dagger",8224],["\\dag",8224],["\\ddag",8225],["\\ddagger",8225],["\\ast",8727],["\\star",8902],["\\bigstar",9733],["\\diamond",8900]],"mbin"),Ae([["\\lhd",8882],["\\rhd",8883],["\\lessdot",8918],["\\gtrdot",8919],["\\ltimes",8905],["\\rtimes",8906],["\\leftthreetimes",8907],["\\rightthreetimes",8908],["\\intercal",8890],["\\dotplus",8724],["\\doublebarwedge",10846],["\\divideontimes",8903],["\\centerdot",8901],["\\smallsetminus",8726],["\\barwedge",8892],["\\veebar",8891],["\\nor",8891],["\\curlywedge",8911],["\\curlyvee",8910],["\\boxminus",8863],["\\boxplus",8862],["\\boxtimes",8864],["\\boxdot",8865],["\\circleddash",8861],["\\circledast",8859],["\\circledcirc",8858],["\\unlhd",8884],["\\unrhd",8885]],"mbin","ams"),Ae([["\\surd",8730],["\\infty",8734],["\\prime",8242],["\\doubleprime",8243],["\\angle",8736],["`",8216],["\\$",36],["\\%",37],["\\_",95],["\\alpha",945],["\\beta",946],["\\gamma",947],["\\delta",948],["\\epsilon",1013],["\\varepsilon",949],["\\zeta",950],["\\eta",951],["\\theta",952],["\\vartheta",977],["\\iota",953],["\\kappa",954],["\\varkappa",1008,"mord","ams"],["\\lambda",955],["\\mu",956],["\\nu",957],["\\xi",958],["\\omicron",111],["\\pi",960],["\\varpi",982],["\\rho",961],["\\varrho",1009],["\\sigma",963],["\\varsigma",962],["\\tau",964],["\\phi",981],["\\varphi",966],["\\upsilon",965],["\\chi",967],["\\psi",968],["\\omega",969],["\\Gamma",915],["\\Delta",916],["\\Theta",920],["\\Lambda",923],["\\Xi",926],["\\Pi",928],["\\Sigma",931],["\\Upsilon",933],["\\Phi",934],["\\Psi",936],["\\Omega",937],["\\digamma",989,"mord","ams"],["\\emptyset",8709]]),Ae([["=",61],["<",60],["\\lt",60],[">",62],["\\gt",62],["\\le",8804],["\\leq",8804],["\\ge",8805],["\\geq",8805],["\\ll",8810],["\\gg",8811],["\\coloneq",8788],["\\measeq",8797],["\\eqdef",8798],["\\questeq",8799],[":",58],["\\cong",8773],["\\equiv",8801],["\\prec",8826],["\\preceq",10927],["\\succ",8827],["\\succeq",10928],["\\perp",8869],["\\propto",8733],["\\Colon",8759],["\\smile",8995],["\\frown",8994],["\\sim",8764],["\\doteq",8784],["\\bowtie",8904],["\\Join",8904],["\\asymp",8781],["\\sqsubseteq",8849],["\\sqsupseteq",8850],["\\approx",8776],["\\~",126],["\\leftrightarrow",8596],["\\Leftrightarrow",8660],["\\models",8872],["\\vdash",8866],["\\dashv",8867],["\\roundimplies",10608],["\\in",8712],["\\notin",8713],["\\ni",8715],["\\owns",8715],["\\subset",8834],["\\supset",8835],["\\subseteq",8838],["\\supseteq",8839],["\\differencedelta",8710],["\\mvert",8739],["\\parallel",8741],["\\simeq",8771]],"mrel"),Ae([["\\lnot",172],["\\neg",172],["\\triangle",9651],["\\subsetneq",8842],["\\varsubsetneq",57370],["\\subsetneqq",10955],["\\varsubsetneqq",57367],["\\nsubset",8836],["\\nsupset",8837],["\\nsubseteq",8840],["\\nsupseteq",8841]],"mrel","ams"),Ae([["\\wp",8472],["\\aleph",8501]]),Ae([["\\blacktriangle",9650],["\\hslash",8463],["\\Finv",8498],["\\Game",8513],["\\eth",240],["\\mho",8487],["\\Bbbk",107],["\\yen",165],["\\square",9633],["\\Box",9633],["\\blacksquare",9632],["\\circledS",9416],["\\circledR",174],["\\triangledown",9661],["\\blacktriangledown",9660],["\\checkmark",10003],["\\diagup",9585],["\\measuredangle",8737],["\\sphericalangle",8738],["\\backprime",8245],["\\backdoubleprime",8246],["\\Diamond",9674],["\\lozenge",9674],["\\blacklozenge",10731],["\\varnothing",8709],["\\complement",8705],["\\maltese",10016],["\\beth",8502],["\\daleth",8504],["\\gimel",8503]],"mord","ams"),Ae([["\\ ",160],["~",160],["\\space",160]],"space"),M(["!",",",":",";","enskip","enspace","quad","qquad"],"",{createAtom:(t,e,a,i)=>new Dt(t,a,i)}),Ae([["\\colon",58],["\\cdotp",8901],["\\vdots",8942,"mord"],["\\ldotp",46],[",",44],[";",59]],"mpunct"),Ae([["\\cdots",8943],["\\ddots",8945],["\\ldots",8230],["\\mathellipsis",8230]],"minner"),Ae([["\\/",47],["|",8739,"mord"],["\\imath",305],["\\jmath",567],["\\degree",176],["'",8242],['"',8221]]);const tn={"&":"\\&","%":"\\%","''":"^{\\doubleprime}",alpha:"\\alpha",delta:"\\delta",Delta:"\\Delta",pi:"\\pi",Pi:"\\Pi",theta:"\\theta",Theta:"\\Theta",ii:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryI"},jj:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryJ"},ee:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\exponentialE"},nabla:"\\nabla",grad:"\\nabla",del:"\\partial",deg:{after:"digit+space",value:"\\degree"},infty:"\\infty","∞":"\\infty",oo:{after:"nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\infty"},"∑":"\\sum",sum:"\\sum_{#?}^{#?}",int:"\\int_{#?}^{#?}",prod:"\\prod_{#?}^{#?}",sqrt:"\\sqrt{#?}","∆":"\\differentialD","∂":"\\differentialD",arcsin:"\\arcsin",arccos:"\\arccos",arctan:"\\arctan",arcsec:"\\arcsec",arccsc:"\\arccsc",arsinh:"\\arsinh",arcosh:"\\arcosh",artanh:"\\artanh",arcsech:"\\arcsech",arccsch:"\\arccsch",arg:"\\arg",ch:"\\ch",cosec:"\\cosec",cosh:"\\cosh",cot:"\\cot",cotg:"\\cotg",coth:"\\coth",csc:"\\csc",ctg:"\\ctg",cth:"\\cth",sec:"\\sec",sinh:"\\sinh",sh:"\\sh",tanh:"\\tanh",tg:"\\tg",th:"\\th",sin:"\\sin",cos:"\\cos",tan:"\\tan",lg:"\\lg",lb:"\\lb",log:"\\log",ln:"\\ln",exp:"\\exp",lim:"\\lim_{#?}",dx:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD x"},dy:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD y"},dt:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD t"},AA:"\\forall",EE:"\\exists","!EE":"\\nexists","&&":"\\land",xin:{after:"nothing+text+relop+punct+openfence+space",value:"x \\in"},in:{after:"nothing+letter+closefence",value:"\\in"},"!in":"\\notin",NN:"\\mathbb{N}",ZZ:"\\Z",QQ:"\\Q",RR:"\\R",CC:"\\C",xx:"\\times","+-":"\\pm","≠":"\\ne","!=":"\\ne","≥":"\\ge",">=":"\\ge","≤":"\\le","<=":"\\le","<<":"\\ll",">>":"\\gg","~~":"\\approx","≈":"\\approx","?=":"\\questeq","÷":"\\div","¬":"\\neg",":=":"\\coloneq","::":"\\Colon","(:":"\\langle",":)":"\\rangle",beta:"\\beta",chi:"\\chi",epsilon:"\\epsilon",varepsilon:"\\varepsilon",eta:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta"},gamma:"\\gamma",Gamma:"\\Gamma",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",Lambda:"\\Lambda",mu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu"},nu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu"},µ:"\\mu",phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\phi"},Phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Phi"},varphi:"\\varphi",psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\psi"},Psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Psi"},rho:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\rho"},sigma:"\\sigma",Sigma:"\\Sigma",tau:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\tau"},vartheta:"\\vartheta",upsilon:"\\upsilon",xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\xi"},Xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Xi"},zeta:"\\zeta",omega:"\\omega",Omega:"\\Omega",Ω:"\\omega",forall:"\\forall",exists:"\\exists","!exists":"\\nexists",":.":"\\therefore",liminf:"\\liminf_{#?}",limsup:"\\limsup_{#?}",argmin:"\\operatorname*{arg~min}_{#?}",argmax:"\\operatorname*{arg~max}_{#?}",det:"\\det",mod:"\\mod",max:"\\max",min:"\\min",erf:"\\operatorname{erf}",erfc:"\\operatorname{erfc}",bessel:"\\operatorname{bessel}",mean:"\\operatorname{mean}",median:"\\operatorname{median}",fft:"\\operatorname{fft}",lcm:"\\operatorname{lcm}",gcd:"\\operatorname{gcd}",randomReal:"\\operatorname{randomReal}",randomInteger:"\\operatorname{randomInteger}",Re:"\\operatorname{Re}",Im:"\\operatorname{Im}",mm:{after:"nothing+digit+operator",value:"\\operatorname{mm}"},cm:{after:"nothing+digit+operator",value:"\\operatorname{cm}"},km:{after:"nothing+digit+operator",value:"\\operatorname{km}"},kg:{after:"nothing+digit+operator",value:"\\operatorname{kg}"},"...":"\\ldots","+...":"+\\cdots","-...":"-\\cdots","->...":"\\to\\cdots","->":"\\to","|->":"\\mapsto","-->":"\\longrightarrow","<--":"\\longleftarrow","=>":"\\Rightarrow","==>":"\\Longrightarrow","<=>":"\\Leftrightarrow","<->":"\\leftrightarrow","(.)":"\\odot","(+)":"\\oplus","(/)":"\\oslash","(*)":"\\otimes","(-)":"\\ominus","||":"\\Vert","{":"\\{","}":"\\}","*":"\\cdot"};function nr(t,e){var a;let i=(a=e==null?void 0:e.format)!==null&&a!==void 0?a:"auto";return i==="auto"&&([i,t]=function(o){if((o=o.trim()).length<=1)return["latex",o];let r;return[r,o]=fo(o),r?["latex",o]:o.startsWith("`")&&o.endsWith("`")?["ascii-math",o=o.substring(1,o.length-1)]:o.includes("\\")?["latex",o]:/\$.+\$/.test(o)?["latex",`\\text{${o}}`]:[void 0,o]}(t)),i==="ascii-math"?["ascii-math",Ie(t=(t=(t=(t=(t=(t=t.replace(/\u2061/gu,"")).replace(/\u3016/gu,"{")).replace(/\u3017/gu,"}")).replace(/([^\\])sinx/g,"$1\\sin x")).replace(/([^\\])cosx/g,"$1\\cos x ")).replace(/\u2013/g,"-"),{inlineShortcuts:e==null?void 0:e.inlineShortcuts})]:["latex",t]}function Ie(t,e){var a,i,o;if(!t)return"";let r,n=!1;const s=(a=e.inlineShortcuts)!==null&&a!==void 0?a:tn;if(n||!t.startsWith("^")&&!t.startsWith("_")||(r=Kt(t.slice(1),{inlineShortcuts:s,noWrap:!0}),t=t[0]+"{"+r.match+"}",t+=Ie(r.rest,e),n=!0),!n&&(r=t.match(/^(sqrt|\u221A)(.*)/),r)&&(r=Kt(r[2],{inlineShortcuts:s,noWrap:!0}),t="\\sqrt{"+((i=r.match)!==null&&i!==void 0?i:"\\placeholder{}")+"}",t+=Ie(r.rest,e),n=!0),!n&&(r=t.match(/^(\\cbrt|\u221B)(.*)/),r)&&(r=Kt(r[2],{inlineShortcuts:s,noWrap:!0}),t="\\sqrt[3]{"+((o=r.match)!==null&&o!==void 0?o:"\\placeholder{}")+"}",t+=Ie(r.rest,e),n=!0),n||(r=t.match(/^abs(.*)/),r&&(r=Kt(r[1],{inlineShortcuts:s,noWrap:!0}),t="\\left|"+r.match+"\\right|",t+=Ie(r.rest,e),n=!0)),n||(r=t.match(/^["\u201d\u201c](.*?)["\u201d\u201c](.*)/),r&&(t="\\text{"+r[1]+"}",t+=Ie(r[2],e),n=!0)),n||(r=t.match(/^([^a-zA-Z\(\{\[\_\^\\\s"]+)(.*)/),r&&(t=sr(r[1],s),t+=Ie(r[2],e),n=!0)),!n&&/^([fgh])[^a-zA-Z]/.test(t)&&(r=Kt(t.slice(1),{inlineShortcuts:s,noWrap:!0}),t=t[1]==="("?t[0]+"\\left("+r.match+"\\right)":t[0]+r.match,t+=Ie(r.rest,e),n=!0),n||(r=t.match(/^([a-zA-Z]+)(.*)/),r&&(t=sr(r[1],s),t+=Ie(r[2],e),n=!0)),!n)if(r=Kt(t,{inlineShortcuts:s,noWrap:!0}),r.match&&r.rest[0]==="/"){const l=Kt(r.rest.slice(1),{inlineShortcuts:s,noWrap:!0});l.match&&(t="\\frac{"+r.match+"}{"+l.match+"}"+Ie(l.rest,e)),n=!0}else r.match&&(t=t.startsWith("(")?"\\left("+r.match+"\\right)"+Ie(r.rest,e):r.match+Ie(r.rest,e),n=!0);return n||(r=t.match(/^(\s+)(.*)$/),r&&(t=" "+Ie(r[2],e),n=!0)),t}function Kt(t,e){let a="",i=t=t.trim(),o=t.charAt(0),r={"(":")","{":"}","[":"]"}[o];if(r){let n=1,s=1;for(;s<t.length&&n>0;)t[s]===o&&n++,t[s]===r&&n--,s++;n===0?(e.noWrap&&o==="("?a=Ie(t.substring(1,s-1),e):(o==="{"&&r==="}"&&(o="\\{",r="\\}"),a="\\left"+o+Ie(t.substring(1,s-1),e)+"\\right"+r),i=t.slice(Math.max(0,s))):(a=t.substring(1,s),i="")}else{let n=t.match(/^([a-zA-Z]+)/);if(n){let s=Oo(null,t,e.inlineShortcuts);if(s)return s=s.replace("_{#?}",""),s=s.replace("^{#?}",""),{match:s,rest:t.slice(s.length)}}if(n=t.match(/^([a-zA-Z])/),n)return{match:n[1],rest:t.slice(1)};if(n=t.match(/^(-)?\d+(\.\d*)?/),n)return{match:n[0],rest:t.slice(n[0].length)};/^\\(left|right)/.test(t)||(n=t.match(/^(\\[a-zA-Z]+)/),n&&(i=t.slice(n[1].length),a=n[1]))}return{match:a,rest:i}}function sr(t,e){let a=Oo(null,t,e);return a?(a=a.replace("_{#?}",""),a=a.replace("^{#?}",""),a+=" "):a=t,a}const an=[["\\[","\\]"],["\\(","\\)"],["$$","$$"],["$","$"],["\\begin{math}","\\end{math}"],["\\begin{displaymath}","\\end{displaymath}"],["\\begin{equation}","\\end{equation}"],["\\begin{equation*}","\\end{equation*}"]];function fo(t){const e=t.trim();for(const a of an)if(e.startsWith(a[0])&&e.endsWith(a[1]))return[!0,e.substring(a[0].length,e.length-a[1].length)];return[!1,t]}const vs=(t,e,a)=>(an.some(i=>e.startsWith(i[0])&&e.endsWith(i[1]))||(e=`$$ ${e} $$`),e);class ee{constructor(e){ee._registry[e]=this}static onPaste(e,a,i){var o;const r=new ClipboardEvent("paste",{clipboardData:i.clipboardData,cancelable:!0});return!!(!((o=a.host)===null||o===void 0)&&o.dispatchEvent(r))&&ee._registry[e].onPaste(a,i)}static onCopy(e,a){if(!a.clipboardData)return;const i=e.model,o=i.selectionIsCollapsed?[0,i.lastOffset]:at(i.selection);let r=i.getAtoms(o);if(r.every(n=>n.mode==="text"||!n.mode))a.clipboardData.setData("text/plain",r.filter(n=>n instanceof Jt).map(n=>n.value).join(""));else if(r.every(n=>n.mode==="latex"))a.clipboardData.setData("text/plain",i.getAtoms(o,{includeChildren:!0}).map(n=>{var s;return(s=n.value)!==null&&s!==void 0?s:""}).join(""));else{let n;n=r.length===1&&r[0].verbatimLatex!==void 0?r[0].verbatimLatex:i.getValue(o,"latex-expanded"),a.clipboardData.setData("application/x-latex",n);try{a.clipboardData.setData("text/plain",e.options.onExport(e,n,o))}catch{}r.length!==1||r[0].type!=="root"&&r[0].type!=="group"||(r=r[0].body.filter(l=>l.type!=="first"));try{a.clipboardData.setData("application/json+mathlive",JSON.stringify(r.map(l=>l.toJson())))}catch{}const s=e.computeEngine;if(s)try{s.jsonSerializationOptions={metadata:["latex"]};const l=s.parse(n),u=JSON.stringify(l.json);u&&a.clipboardData.setData("application/json",u)}catch{}}a.preventDefault()}static insert(e,a,i,o={}){return ee._registry[e].insert(a,i,o)}onPaste(e,a){return!1}insert(e,a,i){return!1}}ee._registry={};const Ue={"\\ne":"<mo>&ne;</mo>","\\neq":"<mo>&neq;</mo>","\\pm":"&#177;","\\times":"&#215;","\\colon":":","\\vert":"|","\\Vert":"∥","\\mid":"∣","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"⟨","\\rangle":"⟩","\\lfloor":"⌊","\\rfloor":"⌋","\\lceil":"⌈","\\rceil":"⌉","\\vec":"&#x20d7;","\\acute":"&#x00b4;","\\grave":"&#x0060;","\\dot":"&#x02d9;","\\ddot":"&#x00a8;","\\tilde":"&#x007e;","\\bar":"&#x00af;","\\breve":"&#x02d8;","\\check":"&#x02c7;","\\hat":"&#x005e;"};function ti(t){return t.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function oe(t,e){return t&&e.generateID?` extid="${t}"`:""}function xs(t,e,a){let i=!1;e=e??t.atoms.length;let o="",r="";const n=t.atoms[t.index];return t.index<e&&(n.type==="mord"||n.type==="macro")&&!n.isDigit()&&(r=hi(n,a),t.index+=1),r.length>0&&(i=!0,o=r,t.lastType!=="mi"&&t.lastType!=="mn"&&t.lastType!=="mtext"&&t.lastType!=="fence"||/^<mo>(.*)<\/mo>$/.test(o)||(o=`<mo>&#8290;</mo>${o}`),r.endsWith(">f</mi>")||r.endsWith(">g</mi>")?(o+="<mo>&#x2061;</mo>",t.lastType="applyfunction"):t.lastType=/^<mo>(.*)<\/mo>$/.test(o)?"mo":"mi",Fa(r,t,a)||(t.mathML+=o)),i}function on(t){return t.index<t.atoms.length&&t.atoms[t.index].superscript&&t.atoms[t.index].type==="msubsup"}function Fa(t,e,a){let i=e.atoms[e.index-1];if(!i||(i.superscript||i.subscript||(on(e)||function(s){return s.index<s.atoms.length&&s.atoms[s.index].subscript&&s.atoms[s.index].type==="msubsup"}(e))&&(i=e.atoms[e.index],e.index+=1),!i))return!1;const o=Z(i.superscript,a),r=Z(i.subscript,a);if(!o&&!r)return!1;let n="";return o&&r?n=`<msubsup>${t}${r}${o}</msubsup>`:o?n=`<msup>${t}${o}</msup>`:r&&(n=`<msub>${t}${r}</msub>`),e.mathML+=n,e.lastType="",!0}function ks(t,e,a){e=e??t.atoms.length;const i=t.index;let o="";for(;t.index<e&&t.atoms[t.index].mode==="text";)o+=t.atoms[t.index].value?t.atoms[t.index].value:" ",t.index+=1;return o.length>0&&(t.mathML+=`<mtext ${oe(t.atoms[i].id,a)}
      >${o}</mtext>`,t.lastType="mtext",!0)}function ws(t,e,a){e=e??t.atoms.length;const i=t.index;let o="",r=function(n){let s=-1,l=n.index,u=!1,c=!1;for(;l<n.atoms.length&&!u&&!c;){const d=n.atoms[l];u=!d.isDigit(),c=!u&&d.superscript!==void 0,l++}return c&&(s=l-1),s}(t);for(r>=0&&r<e&&(e=r);t.index<e&&t.atoms[t.index].isDigit();)o+=t.atoms[t.index].asDigit(),t.index+=1;return!(o.length<=0||(o="<mn"+oe(t.atoms[i].id,a)+">"+o+"</mn>",r<0&&on(t)&&(r=t.index,t.index+=1),Fa(o,t,a)||(t.mathML+=o,t.lastType="mn"),0))}function _s(t,e,a){let i=!1;e=e??t.atoms.length;let o="",r="";if(t.index<e&&t.atoms[t.index].type==="mopen"){let n=!1,s=0;const l=t.index;let u=-1,c=l+1;for(;c<e&&!n;)t.atoms[c].type==="mopen"?s+=1:t.atoms[c].type==="mclose"&&(s-=1),s===-1&&(n=!0,u=c),c+=1;n&&(o="<mrow>",o+=na(t.atoms[l],a),o+=Z(t.atoms,a,l+1,u),o+=na(t.atoms[u],a),o+="</mrow>",t.lastType!=="mi"&&t.lastType!=="mn"&&t.lastType!=="mfrac"&&t.lastType!=="fence"||(o=`<mo>&#8290;</mo>${o}`),t.index=u+1,Fa(o,t,a)&&(i=!0,t.lastType="",o=""),r="fence")}return o.length>0&&(i=!0,t.mathML+=o,t.lastType=r),i}function Ss(t,e,a){let i=!1;e=e??t.atoms.length;let o="",r="";const n=t.atoms[t.index];if(t.index<e&&(n.type==="mbin"||n.type==="mrel"))o+=hi(t.atoms[t.index],a),t.index+=1,r="mo";else if(t.index<e&&n.type==="mop"){if(n.subsupPlacement==="over-under"&&(n.superscript||n.subscript)){const s=na(n,a);n.superscript&&n.subscript?(o+="<munderover>"+s,o+=Z(n.subscript,a),o+=Z(n.superscript,a),o+="</munderover>"):n.superscript?(o+="<mover>"+s,o+=Z(n.superscript,a),o+="</mover>"):n.subscript&&(o+="<munder>"+s,o+=Z(n.subscript,a),o+="</munder>"),r="mo"}else{const s=t.atoms[t.index],l=s.value==="\\operatorname",u=l?'<mi class="MathML-Unit"'+oe(s.id,a)+">"+No(s.value)+"</mi>":na(s,a);o+=u,l||/^<mo>(.*)<\/mo>$/.test(u)?r=l?"mi":"mo":(o+="<mo>&#x2061;</mo>",r="applyfunction")}t.lastType!=="mi"&&t.lastType!=="mn"||/^<mo>(.*)<\/mo>$/.test(o)||(o=`<mo>&#8290;</mo>${o}`),t.index+=1}return Fa(o,t,a)||o.length>0&&(i=!0,t.mathML+=o,t.lastType=r),i}function Z(t,e,a,i){const o={atoms:[],index:a??0,mathML:"",lastType:""};if(typeof t=="number"||typeof t=="boolean")o.mathML=t.toString();else if(typeof t=="string")o.mathML=t;else if(t instanceof S)o.mathML=hi(t,e);else if(Array.isArray(t)){o.atoms=t;let r=0;for(i=i||(t?t.length:0);o.index<i;)if(ks(o,i,e)||ws(o,i,e)||xs(o,i,e)||Ss(o,i,e)||_s(o,i,e))r+=1;else if(o.index<i){let n=hi(o.atoms[o.index],e);o.lastType==="mn"&&n.length>0&&o.atoms[o.index].type==="genfrac"&&(n="<mo>&#x2064;</mo>"+n),o.atoms[o.index].type==="genfrac"?o.lastType="mfrac":o.lastType="",o.index+=1,Fa(n,o,e)?r+=2:n.length>0&&(o.mathML+=n,r+=1)}r>1&&(o.mathML="<mrow>"+o.mathML+"</mrow>")}return o.mathML}function na(t,e){let a="";const i=No(t.value);return i&&(a="<mo"+oe(t.id,e)+">"+i+"</mo>"),a}function No(t){if(!t)return"";if(typeof t=="string")return ti(t);if(!Array.isArray(t)&&typeof t.body=="string")return ti(t.body);let e="";for(const a of t)typeof a.value=="string"&&(e+=a.value);return ti(e)}function hi(t,e){var a,i,o,r,n,s,l,u,c,d,p,h,m,b,y,x,k,g,f,_,w,T,C,K,$;const j={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋"},q={"\\exponentialE":"&#x02147;","\\imaginaryI":"&#x2148;","\\differentialD":"&#x2146;","\\capitalDifferentialD":"&#x2145;","\\alpha":"&#x03b1;","\\pi":"&#x03c0;","\\infty":"&#x221e;","\\forall":"&#x2200;","\\nexists":"&#x2204;","\\exists":"&#x2203;","\\hbar":"ℏ","\\cdotp":"⋅","\\ldots":"…","\\cdots":"⋯","\\ddots":"⋱","\\vdots":"⋮","\\ldotp":"."},Y={"\\!":-3/18,"\\ ":6/18,"\\,":3/18,"\\:":4/18,"\\;":5/18,"\\enspace":.5,"\\quad":1,"\\qquad":2,"\\enskip":.5};let ke,be,H,J,I,G,D="",it="",Ee=(i={cal:"script",frak:"fraktur",bb:"double-struck",scr:"script",cmtt:"monospace",cmss:"sans-serif"}[(a=t.fontFamily)!==null&&a!==void 0?a:t.font])!==null&&i!==void 0?i:"";Ee&&(Ee=` mathvariant="${Ee}"`);const{command:ye}=t;if(t.mode==="text")D=`<mi${oe(t.id,e)}>${t.value}</mi>`;else switch(t.type){case"first":case"line":case"overlap":case"msubsup":case"phantom":case"composition":case"rule":case"chem":case"error":break;case"group":case"root":D=Ue[t.command]?Ue[t.command]:Z(t.body,e);break;case"array":if((t.leftDelim&&t.leftDelim!=="."||t.rightDelim&&t.rightDelim!==".")&&(D+="<mrow>",t.leftDelim&&t.leftDelim!=="."&&(D+="<mo>"+(Ue[t.leftDelim]||t.leftDelim)+"</mo>")),D+="<mtable",t.colFormat){for(D+=' columnalign="',H=0;H<t.colFormat.length;H++)t.colFormat[H].align&&(D+={l:"left",c:"center",r:"right"}[t.colFormat[H].align]+" ");D+='"'}for(D+=">",be=0;be<t.array.length;be++){for(D+="<mtr>",ke=0;ke<t.array[be].length;ke++)D+="<mtd>"+Z(t.array[be][ke],e)+"</mtd>";D+="</mtr>"}D+="</mtable>",(t.leftDelim&&t.leftDelim!=="."||t.rightDelim&&t.rightDelim!==".")&&(t.rightDelim&&t.rightDelim!=="."&&(D+="<mo>"+(Ue[t.leftDelim]||t.rightDelim)+"</mo>"),D+="</mrow>");break;case"genfrac":(t.leftDelim||t.rightDelim)&&(D+="<mrow>"),t.leftDelim&&t.leftDelim!=="."&&(D+="<mo"+oe(t.id,e)+">"+(Ue[t.leftDelim]||t.leftDelim)+"</mo>"),t.hasBarLine?(D+="<mfrac>",D+=Z(t.above,e)||"<mi>&nbsp;</mi>",D+=Z(t.below,e)||"<mi>&nbsp;</mi>",D+="</mfrac>"):(D+="<mtable"+oe(t.id,e)+">",D+="<mtr>"+Z(t.above,e)+"</mtr>",D+="<mtr>"+Z(t.below,e)+"</mtr>",D+="</mtable>"),t.rightDelim&&t.rightDelim!=="."&&(D+="<mo"+oe(t.id,e)+">"+(Ue[t.rightDelim]||t.rightDelim)+"</mo>"),(t.leftDelim||t.rightDelim)&&(D+="</mrow>");break;case"surd":t.hasEmptyBranch("above")?(D+="<msqrt"+oe(t.id,e)+">",D+=Z(t.body,e),D+="</msqrt>"):(D+="<mroot"+oe(t.id,e)+">",D+=Z(t.body,e),D+=Z(t.above,e),D+="</mroot>");break;case"leftright":D="<mrow>",t.leftDelim&&t.leftDelim!=="."&&(D+="<mo"+oe(t.id,e)+">"+((o=Ue[t.leftDelim])!==null&&o!==void 0?o:t.leftDelim)+"</mo>"),t.body&&(D+=Z(t.body,e)),t.rightDelim&&t.rightDelim!=="."&&(D+="<mo"+oe(t.id,e)+">"+((r=Ue[t.rightDelim])!==null&&r!==void 0?r:t.rightDelim)+"</mo>"),D+="</mrow>";break;case"sizeddelim":case"delim":D+='<mo separator="true"'+oe(t.id,e)+">"+(Ue[t.delim]||t.delim)+"</mo>";break;case"accent":D+='<mover accent="true"'+oe(t.id,e)+">",D+=Z(t.body,e),D+="<mo>"+(Ue[ye]||t.accent)+"</mo>",D+="</mover>";break;case"overunder":I=t.above,J=t.below,(t.svgAbove||I)&&(t.svgBelow||J)?G=t.body:I&&I.length>0?(G=t.body,!((s=(n=t.body)===null||n===void 0?void 0:n[0])===null||s===void 0)&&s.below?(J=t.body[0].below,G=t.body[0].body):((u=(l=t.body)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.type)==="first"&&(!((d=(c=t.body)===null||c===void 0?void 0:c[1])===null||d===void 0)&&d.below)&&(J=t.body[1].below,G=t.body[1].body)):J&&J.length>0&&(G=t.body,!((h=(p=t.body)===null||p===void 0?void 0:p[0])===null||h===void 0)&&h.above?(I=t.body[0].above,G=t.body[0].body):((b=(m=t.body)===null||m===void 0?void 0:m[0])===null||b===void 0?void 0:b.type)==="first"&&(!((x=(y=t.body)===null||y===void 0?void 0:y[1])===null||x===void 0)&&x.above)&&(I=t.body[1].overscript,G=t.body[1].body)),(t.svgAbove||I)&&(t.svgBelow||J)?(D+=`<munderover ${Ee} ${oe(t.id,e)}>`,D+=(k=j[t.svgBody])!==null&&k!==void 0?k:Z(G,e),D+=(g=j[t.svgBelow])!==null&&g!==void 0?g:Z(J,e),D+=(f=j[t.svgAbove])!==null&&f!==void 0?f:Z(I,e),D+="</munderover>"):t.svgAbove||I?(D+=`<mover ${Ee} ${oe(t.id,e)}>`+((_=j[t.svgBody])!==null&&_!==void 0?_:Z(G,e)),D+=(w=j[t.svgAbove])!==null&&w!==void 0?w:Z(I,e),D+="</mover>"):(t.svgBelow||J)&&(D+=`<munder ${Ee} ${oe(t.id,e)}>`+((T=j[t.svgBody])!==null&&T!==void 0?T:Z(G,e)),D+=(C=j[t.svgBelow])!==null&&C!==void 0?C:Z(J,e),D+="</munder>");break;case"placeholder":case"mord":{D=q[ye]||ye||(typeof t.value=="string"?t.value:"");const Ne=ye?ye.match(/{?\\char"([\dabcdefABCDEF]*)}?/):null;Ne?D="&#x"+Ne[1]+";":D.length>0&&D.startsWith("\\")&&(D=typeof t.value=="string"&&t.value.charCodeAt(0)>255?"&#x"+("000000"+t.value.charCodeAt(0).toString(16)).slice(-4)+";":typeof t.value=="string"?t.value.charAt(0):"");const Ra=/\d/.test(D)?"mn":"mi";D=`<${Ra}${Ee}${oe(t.id,e)}>${ti(D)}</${Ra}>`;break}case"mbin":case"mrel":case"minner":D=ye&&q[ye]?"<mi"+oe(t.id,e)+">"+q[ye]+"</mi>":ye&&Ue[ye]?"<mo"+oe(t.id,e)+">"+Ue[ye]+"</mo>":na(t,e);break;case"mpunct":D='<mo separator="true"'+oe(t.id,e)+">"+((K=Ue[ye])!==null&&K!==void 0?K:ye)+"</mo>";break;case"mop":t.body!=="​"&&(D="<mo"+oe(t.id,e)+">",D+=ye==="\\operatorname"?t.body:ye||t.body,D+="</mo>");break;case"box":D='<menclose notation="box"',t.backgroundcolor&&(D+=' mathbackground="'+t.backgroundcolor+'"'),D+=oe(t.id,e)+">"+Z(t.body,e)+"</menclose>";break;case"spacing":D+='<mspace width="'+(($=Y[ye])!==null&&$!==void 0?$:0)+'em"/>';break;case"enclose":D='<menclose notation="';for(const Ne in t.notation)Object.prototype.hasOwnProperty.call(t.notation,Ne)&&t.notation[Ne]&&(D+=it+Ne,it=" ");D+=oe(t.id,e)+'">'+Z(t.body,e)+"</menclose>";break;case"space":D+="&nbsp;";break;case"mopen":case"mclose":D+=na(t,e);break;case"macro":{const Ne=t.command+No(t.macroArgs);Ne&&(D+=`<mo ${oe(t.id,e)}>${Ne}</mo>`)}break;case"latexgroup":case"tooltip":D+=Z(t.body,e);break;case"latex":D+="<mtext"+oe(t.id,e)+">"+t.value+"</mtext>"}return D}const Gt={"\\alpha":"alpha ","\\mu":"mew ","\\sigma":"sigma ","\\pi":"pie ","\\imaginaryI":"eye ","\\sum":"Summation ","\\prod":"Product ",a:'<phoneme alphabet="ipa" ph="eɪ">a</phoneme>',A:'capital <phoneme alphabet="ipa" ph="eɪ">A</phoneme>',"+":"plus ","-":"minus ",";":'<break time="150ms"/> semi-colon <break time="150ms"/>',",":'<break time="150ms"/> comma  <break time="150ms"/>',"|":'<break time="150ms"/>Vertical bar<break time="150ms"/>',"(":'<break time="150ms"/>Open paren. <break time="150ms"/>',")":'<break time="150ms"/> Close paren. <break time="150ms"/>',"=":"equals ","<":"is less than ","\\lt":"is less than ","<=":"is less than or equal to ","\\le":"is less than or equal to ","\\gt":"is greater than ",">":"is greater than ","\\ge":"is greater than or equal to ","\\geq":"is greater than or equal to ","\\leq":"is less than or equal to ","!":"factorial ","\\sin":"sine ","\\cos":"cosine ","​":"","−":"minus ",":":'<break time="150ms"/> such that <break time="200ms"/> ',"\\colon":'<break time="150ms"/> such that <break time="200ms"/> ',"\\hbar":"etch bar ","\\iff":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\Longleftrightarrow":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\land":"and ","\\lor":"or ","\\neg":"not ","\\div":"divided by ","\\forall":"for all ","\\exists":"there exists ","\\nexists":"there does not exists ","\\in":"element of ","\\N":'the set <break time="150ms"/><say-as interpret-as="character">n</say-as>',"\\C":'the set <break time="150ms"/><say-as interpret-as="character">c</say-as>',"\\Z":'the set <break time="150ms"/><say-as interpret-as="character">z</say-as>',"\\Q":'the set <break time="150ms"/><say-as interpret-as="character">q</say-as>',"\\infty":"infinity ","\\nabla":"nabla ","\\partial":"partial derivative of ","\\cdot":"times ","\\cdots":"dot dot dot ","\\Rightarrow":"implies ","\\lparen":'<break time="150ms"/>open paren<break time="150ms"/>',"\\rparen":'<break time="150ms"/>close paren<break time="150ms"/>',"\\lbrace":'<break time="150ms"/>open brace<break time="150ms"/>',"\\{":'<break time="150ms"/>open brace<break time="150ms"/>',"\\rbrace":'<break time="150ms"/>close brace<break time="150ms"/>',"\\}":'<break time="150ms"/>close brace<break time="150ms"/>',"\\langle":'<break time="150ms"/>left angle bracket<break time="150ms"/>',"\\rangle":'<break time="150ms"/>right angle bracket<break time="150ms"/>',"\\lfloor":'<break time="150ms"/>open floor<break time="150ms"/>',"\\rfloor":'<break time="150ms"/>close floor<break time="150ms"/>',"\\lceil":'<break time="150ms"/>open ceiling<break time="150ms"/>',"\\rceil":'<break time="150ms"/>close ceiling<break time="150ms"/>',"\\vert":'<break time="150ms"/>vertical bar<break time="150ms"/>',"\\mvert":'<break time="150ms"/>divides<break time="150ms"/>',"\\lvert":'<break time="150ms"/>left vertical bar<break time="150ms"/>',"\\rvert":'<break time="150ms"/>right vertical bar<break time="150ms"/>',"\\lbrack":'<break time="150ms"/> open square bracket <break time="150ms"/>',"\\rbrack":'<break time="150ms"/> close square bracket <break time="150ms"/>',mm:"millimeters",cm:"centimeters",km:"kilometers",kg:"kilograms"};function ha(t){let e=0;if(Ce(t))for(const a of t)a.type!=="first"&&(e+=1);return e===1}function lr(t){let e="";if(Ce(t))for(const a of t)a.type!=="first"&&typeof a.value=="string"&&(e+=a.value);return e}function ne(t,e,a){var i,o,r,n;function s(d){return"<emphasis>"+d+"</emphasis>"}if(!e)return"";let l="";if(Ce(e)){let d=!1,p=!1;for(let h=0;h<e.length;h++)e[h].mode!=="text"&&(p=!1),h<e.length-2&&e[h].type==="mopen"&&e[h+2].type==="mclose"&&e[h+1].type==="mord"?(l+=" of ",l+=s(ne(t,e[h+1],a)),h+=2):e[h].mode==="text"?p?l+=(i=e[h].value)!==null&&i!==void 0?i:" ":(p=!0,l+=ne("text",e[h],a)):e[h].isDigit()?d?l+=e[h].asDigit():(d=!0,l+=ne(t,e[h],a)):(d=!1,l+=ne(t,e[h],a))}else if(e.mode==="text")e.id&&t==="math"&&(l+='<mark name="'+e.id.toString()+'"/>'),l+=e.value;else{e.id&&t==="math"&&(l+='<mark name="'+e.id.toString()+'"/>');let d="",p="",h="",m=!1;switch(e.type){case"group":case"root":l+=ne("math",e.body,a);break;case"genfrac":if(d=ne("math",e.above,a),p=ne("math",e.below,a),ha(e.above)&&ha(e.below)){const b={"1/2":" half ","1/3":" one third ","2/3":" two third","1/4":" one quarter ","3/4":" three quarter ","1/5":" one fifth ","2/5":" two fifths ","3/5":" three fifths ","4/5":" four fifths ","1/6":" one sixth ","5/6":" five sixths ","1/8":" one eight ","3/8":" three eights ","5/8":" five eights ","7/8":" seven eights ","1/9":" one ninth ","2/9":" two ninths ","4/9":" four ninths ","5/9":" five ninths ","7/9":" seven ninths ","8/9":" eight ninths "}[lr(e.above)+"/"+lr(e.below)];b?l=b:l+=d+" over "+p}else l+=' the fraction <break time="150ms"/>'+d+', over <break time="150ms"/>'+p+'.<break time="150ms"/> End fraction.<break time="150ms"/>';break;case"surd":if(h=ne("math",e.body,a),e.hasEmptyBranch("above"))l+=ha(e.body)?" the square root of "+h+" , ":' the square root of <break time="200ms"/>'+h+'. <break time="200ms"/> End square root';else{let b=ne("math",e.above,a);b=b.trim();const y=b.replace(/<mark([^/]*)\/>/g,"");l+=y==="3"?' the cube root of <break time="200ms"/>'+h+'. <break time="200ms"/> End cube root':y==="n"?' the nth root of <break time="200ms"/>'+h+'. <break time="200ms"/> End root':' the root with index: <break time="200ms"/>'+b+', of <break time="200ms"/>'+h+'. <break time="200ms"/> End root'}break;case"leftright":{const b=e;l+=(o=b.leftDelim?Gt[b.leftDelim]:void 0)!==null&&o!==void 0?o:b.leftDelim,l+=ne("math",e.body,a),l+=(r=b.rightDelim?Gt[b.rightDelim]:void 0)!==null&&r!==void 0?r:b.rightDelim}break;case"rule":case"overunder":case"overlap":break;case"placeholder":l+="placeholder ";break;case"delim":case"sizeddelim":case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":{const{command:b}=e;if(b==="\\mathbin"||b==="\\mathrel"||b==="\\mathopen"||b==="\\mathclose"||b==="\\mathpunct"||b==="\\mathord"||b==="\\mathinner"){l=ne(t,e.body,a);break}let y=e.isDigit()?e.asDigit():e.value,x=e.command;if(e.type!=="delim"&&e.type!=="sizeddelim"||(x=e.value,y=x),t==="text")l+=y;else{if(e.type==="mbin"&&(l+='<break time="150ms"/>'),y){const k=Gt[y]||(x?Gt[x.trim()]:"");if(k)l+=" "+k;else{const g=x?function(f){let _="";return f.startsWith("\\")&&(_=" "+f.replace("\\","")+" "),_}(x.trim()):"";l+=g||(c=y,a.textToSpeechMarkup?/[a-z]/.test(c)?` <say-as interpret-as="character">${c}</say-as>`:/[A-Z]/.test(c)?`capital <say-as interpret-as="character">${c.toLowerCase()}</say-as>`:c:/[a-z]/.test(c)?" '"+c.toUpperCase()+"'":/[A-Z]/.test(c)?" 'capital "+c.toUpperCase()+"'":c)}}else l+=ne("math",e.body,a);e.type==="mbin"&&(l+='<break time="150ms"/>')}break}case"mop":if(e.value!=="​"){const b=e.command;if(b==="\\sum")if(e.hasEmptyBranch("superscript")||e.hasEmptyBranch("subscript"))if(e.hasEmptyBranch("subscript"))l+=" the summation of";else{let y=ne("math",e.subscript,a);y=y.trim(),l+=' the summation from <break time="200ms"/>'+y+'<break time="200ms"/> of <break time="150ms"/>',m=!0}else{let y=ne("math",e.superscript,a);y=y.trim();let x=ne("math",e.subscript,a);x=x.trim(),l+=' the summation from <break time="200ms"/>'+x+'<break time="200ms"/> to  <break time="200ms"/>'+y+'<break time="200ms"/> of <break time="150ms"/>',m=!0}else if(b==="\\prod")if(e.hasEmptyBranch("superscript")||e.hasEmptyBranch("subscript"))if(e.hasEmptyBranch("subscript"))l+=" the product  of ";else{let y=ne("math",e.subscript,a);y=y.trim(),l+=' the product from <break time="200ms"/>'+y+'<break time="200ms"/> of <break time="150ms"/>',m=!0}else{let y=ne("math",e.superscript,a);y=y.trim();let x=ne("math",e.subscript,a);x=x.trim(),l+=' the product from <break time="200ms"/>'+x+'<break time="200ms"/> to <break time="200ms"/>'+y+'<break time="200ms"/> of <break time="150ms"/>',m=!0}else if(b==="\\int")if(e.hasEmptyBranch("superscript")||e.hasEmptyBranch("subscript"))l+=' the integral of <break time="200ms"/> ';else{let y=ne("math",e.superscript,a);y=y.trim();let x=ne("math",e.subscript,a);x=x.trim(),l+=' the integral from <break time="200ms"/>'+s(x)+'<break time="200ms"/> to <break time="200ms"/>'+s(y)+' <break time="200ms"/> of ',m=!0}else typeof e.value=="string"?l+=((n=Gt[e.value])!==null&&n!==void 0?n:e.command?Gt[e.command]:void 0)||" "+e.value:e.command&&(e.command==="\\mathop"?l+=ne("math",e.body,a):e.command==="\\operatorname"?l+=(u=e.body)?u.map(y=>y.value).join(""):"":l+=e.command.startsWith("\\")?" "+e.command.slice(1):" "+e.command)}break;case"enclose":h=ne("math",e.body,a),l+=" crossed out "+h+". End crossed out."}if(!m&&!e.hasEmptyBranch("superscript")){let b=ne(t,e.superscript,a);b=b.trim();const y=b.replace(/<[^>]*>/g,"");if(ha(e.superscript)){if(t==="math"){const x=function(k){if(Ce(k)){for(const g of k)if(g.type!=="first"&&g.id)return g.id.toString()}return""}(e.superscript);x&&(l+='<mark name="'+x+'"/>')}y==="′"?l+=" prime ":y==="2"?l+=" squared ":y==="3"?l+=" cubed ":Number.isNaN(Number.parseInt(y))?l+=" to the "+b+"; ":l+=' to the <say-as interpret-as="ordinal">'+y+"</say-as> power; "}else Number.isNaN(Number.parseInt(y))?l+=" raised to the "+b+"; ":l+=' raised to the <say-as interpret-as="ordinal">'+y+"</say-as> power; "}if(!m&&!e.hasEmptyBranch("subscript")){let b=ne("math",e.subscript,a);b=b.trim(),l+=ha(e.subscript)?" sub "+b:" subscript "+b+". End subscript. "}}var u,c;return l}function _a(t,e){var a;const i={...e,textToSpeechRulesOptions:{...e.textToSpeechRulesOptions}};if(i.textToSpeechRules==="sre"&&"sre"in globalThis){const r=Z(t,i);return r?(i.textToSpeechMarkup&&(i.textToSpeechRulesOptions=(a=i.textToSpeechRulesOptions)!==null&&a!==void 0?a:{},i.textToSpeechRulesOptions.markup=i.textToSpeechMarkup,i.textToSpeechRulesOptions.markup==="ssml"&&(i.textToSpeechRulesOptions.markup="ssml_step"),i.textToSpeechRulesOptions.rate=i.speechEngineRate),i.textToSpeechRulesOptions&&globalThis.sre.System.getInstance().setupEngine(i.textToSpeechRulesOptions),globalThis.sre.System.getInstance().toSpeech(r)):""}let o=ne("math",t,i);if(i.textToSpeechMarkup==="ssml"){let r="";i.speechEngineRate&&(r='<prosody rate="'+i.speechEngineRate+'">'),o='<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><amazon:auto-breaths>'+r+"<p><s>"+o+"</s></p>"+(r?"</prosody>":"")+"</amazon:auto-breaths></speak>"}else o=i.textToSpeechMarkup==="mac"&&Da()==="macos"?o.replace(/<mark([^/]*)\/>/g,"").replace(/<emphasis>/g,"[[emph+]]").replace(/<\/emphasis>/g,"").replace(/<break time="(\d*)ms"\/>/g,"[[slc $1]]").replace(/<say-as[^>]*>/g,"").replace(/<\/say-as>/g,""):o.replace(/<[^>]*>/g,"").replace(/\s{2,}/g," ");return o}function De(t,e,a,i){const o=e.split(" ");for(const r of o){const n=r.match(/(.*):(.*)/);if(n){const s=i??{};n[2]==="active"?s.passive=!1:s[n[2]]=!0,t.addEventListener(n[1],a,s)}else t.addEventListener(r,a,i)}}function ot(t,e,a,i){const o=e.split(" ");for(const r of o){const n=r.match(/(.*):(.*)/);if(n){const s=i??{};n[2]==="active"?s.passive=!1:s[n[2]]=!0,t.removeEventListener(n[1],a,s)}else t.removeEventListener(r,a,i)}}function rn(t){var e;gt();let a=document.getElementById(t);return a?a.dataset.refcount=Number(Number.parseInt((e=a.getAttribute("data-refcount"))!==null&&e!==void 0?e:"0")+1).toString():(a=document.createElement("div"),a.setAttribute("aria-hidden","true"),a.dataset.refcount="1",a.id=t,document.body.append(a)),a}function ur(t){var e;if(!t)return;const a=Number.parseInt((e=t.getAttribute("data-refcount"))!==null&&e!==void 0?e:"0");a<=1?t.remove():t.dataset.refcount=Number(a-1).toString()}function Nt(t){var e;return((e=t.element)===null||e===void 0?void 0:e.mathfield)===t}function Sa(t){const e=function(i){var o,r;return(r=(o=i.querySelector(".ML__caret"))!==null&&o!==void 0?o:i.querySelector(".ML__text-caret"))!==null&&r!==void 0?r:i.querySelector(".ML__latex-caret")}(t);if(!e)return null;const a=e.getBoundingClientRect();return{x:a.right,y:a.bottom,height:a.height}}function Ms(t){var e;if(!t.parent)return"root";let a=(e=t.parent.id)!==null&&e!==void 0?e:"";return a+=typeof t.treeBranch=="string"?"-"+t.treeBranch:`-${t.treeBranch[0]}/${t.treeBranch[0]}`,a}function nn(t,e){if(!e)return null;const a=t.field.getBoundingClientRect(),i=e.right-e.left,o=e.bottom-e.top,r=Math.ceil(e.left-a.left+t.field.scrollLeft),n=Math.ceil(e.top-a.top);return{left:r,right:r+i,top:n,bottom:n+o}}function sn(t){const e=t.getBoundingClientRect(),a=parseInt(getComputedStyle(t).marginRight),i={top:e.top-1,bottom:e.bottom,left:e.left,right:e.right-1+a};if(t.children.length===0||t.tagName.toUpperCase()==="SVG")return i;for(const o of t.children)if(o.nodeType===1&&"atomId"in o.dataset&&!o.classList.contains("pstrut")){const r=sn(o);i.left=Math.min(i.left,r.left),i.right=Math.max(i.right,r.right),i.top=Math.min(i.top,r.top),i.bottom=Math.max(i.bottom,r.bottom)}return i}function Pa(t,e){var a,i;if(!e.id)return null;let o=(i=(a=t.atomBoundsCache)===null||a===void 0?void 0:a.get(e.id))!==null&&i!==void 0?i:null;if(o!==null)return o;const r=t.field.querySelector(`[data-atom-id="${e.id}"]`);return o=r?sn(r):null,t.atomBoundsCache&&(o?t.atomBoundsCache.set(e.id,o):t.atomBoundsCache.delete(e.id)),o??null}function ln(t,e){return t.model.selection.ranges.reduce((a,i)=>a.concat(...function(o,r,n){const s=new Map;for(const l of o.model.getAtoms(r,{includeChildren:!0})){if(n!=null&&n.excludeAtomsWithBackground&&l.style.backgroundColor)break;const u=nn(o,Pa(o,l));if(u){const c=Ms(l);if(s.has(c)){const d=s.get(c);s.set(c,{left:Math.min(d.left,u.left),right:Math.max(d.right,u.right),top:Math.min(d.top,u.top),bottom:Math.max(d.bottom,u.bottom)})}else s.set(c,u)}}return[...s.values()]}(t,i,e)),[])}function Ls(t,e){return t==="*"||e==="none"||(e==="same-origin"?!globalThis.origin||t===globalThis.origin:typeof e=="function"&&e(t))}function cr(t){let e=0,a=0;const i=t.offsetWidth,o=t.offsetHeight;for(;t instanceof HTMLElement;)e+=t.offsetTop,a+=t.offsetLeft,t=t.offsetParent;return new DOMRect(a,e,i,o)}const Cs={main:["Main-Regular","ML__cmr"],"main-italic":["Main-Italic","ML__cmr ML__it"],"main-bold":["Main-Bold","ML__cmr ML__bold"],"main-bolditalic":["Main-BoldItalic","ML__cmr ML__bold ML__it"],normal:["Main-Regular","ML__cmr"],"normal-bold":["Main-Bold","ML__mathbf"],"normal-italic":["Math-Italic","ML__mathit"],"normal-bolditalic":["Math-BoldItalic","ML__mathbfit"],ams:["AMS-Regular","ML__ams"],"ams-bold":["AMS-Regular","ML__ams"],"ams-italic":["AMS-Regular","ML__ams"],"ams-bolditalic":["AMS-Regular","ML__ams"],"sans-serif":["SansSerif-Regular","ML__sans"],"sans-serif-bold":["SansSerif-Regular","ML__sans ML__bold"],"sans-serif-italic":["SansSerif-Regular","ML__sans"],"sans-serif-bolditalic":["SansSerif-Regular","ML__sans"],calligraphic:["Caligraphic-Regular","ML__cal"],"calligraphic-bold":["Caligraphic-Regular","ML__cal ML__bold"],"calligraphic-italic":["Caligraphic-Regular","ML__cal ML__it"],"calligraphic-bolditalic":["Caligraphic-Regular","ML__cal ML__bold ML__it"],script:["Script-Regular","ML__script"],"script-bold":["Script-Regular","ML__script ML__bold"],"script-italic":["Script-Regular","ML__script ML__it"],"script-bolditalic":["Script-Regular","ML__script ML__bold ML__it"],fraktur:["Fraktur-Regular","ML__frak"],"fraktur-bold":["Fraktur-Regular","ML__frak"],"fraktur-italic":["Fraktur-Regular","ML__frak"],"fraktur-bolditalic":["Fraktur-Regular","ML__frak"],monospace:["Typewriter-Regular","ML__tt"],"monospace-bold":["Typewriter-Regular","ML__tt ML__bold"],"monospace-italic":["Typewriter-Regular","ML__tt ML__it"],"monospace-bolditalic":["Typewriter-Regular","ML__tt ML__bold ML__it"],"double-struck":["AMS-Regular","ML__bb"],"double-struck-bold":["AMS-Regular","ML__bb"],"double-struck-italic":["AMS-Regular","ML__bb"],"double-struck-bolditalic":["AMS-Regular","ML__bb"]},dr={"double-struck":/^[A-Z ]$/,script:/^[A-Z ]$/,calligraphic:/^[\dA-Z ]$/,fraktur:/^[\dA-Za-z ]$|^[!"#$%&'()*+,\-./:;=?[]^\u2019\u2018]$/,monospace:/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/,"sans-serif":/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/},un=/^[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5]$/,As=[/^[a-z]$/,/^[A-Z]$/,un,/^[\u0393|\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A6\u03A8\u03A9]$/],Ds={iso:["it","it","it","it"],tex:["it","it","it","up"],french:["it","up","up","up"],upright:["up","up","up","up"]};function Hi(t){if(!t)return"";const{style:e}=t;if(e.variant===void 0)return"";let a=e.variant;return e.variantStyle&&e.variantStyle!=="up"&&(a+="-"+e.variantStyle),a}function Zt(t){return[he(t.map(e=>e[0])),t.map(e=>e[1]).some(e=>e===!0)]}new class extends Ze{constructor(){super("math")}createAtom(t,e,a){var i,o,r,n,s;const l=e.getDefinition(t,"math");if(l===null)return new S("mord",e,{mode:"math",command:t,value:t,style:a});if(l.definitionType==="symbol"){const c=new S((i=l.type)!==null&&i!==void 0?i:"mord",e,{mode:"math",command:(o=l.command)!==null&&o!==void 0?o:t,value:String.fromCodePoint(l.codepoint),style:a});return(r=l.isFunction)!==null&&r!==void 0&&r&&(c.isFunction=!0),t.startsWith("\\")&&(c.verbatimLatex=t),c}const u=new S("mord",e,{mode:"math",command:(n=l.command)!==null&&n!==void 0?n:t,value:t,style:a});return(s=l.isFunction)!==null&&s!==void 0&&s&&(u.isFunction=!0),t.startsWith("\\")&&(u.verbatimLatex=t),u}serialize(t,e){const{parent:a}=t[0],i=a==null?void 0:a.computedStyle.fontSize;return he(tt(t,"fontSize").map(o=>{const r=function(s,l){const{parent:u}=s[0],c=u==null?void 0:u.computedStyle.backgroundColor;return he(tt(s,"backgroundColor").map(d=>{var p,h;let m=function(y,x){const{parent:k}=y[0],g=k==null?void 0:k.computedStyle.color;return he(tt(y,"color").map(f=>{var _,w;const T=function(K,$){var j;const{parent:q}=K[0],Y=Hi(q),ke=(j=q==null?void 0:q.mode)!==null&&j!==void 0?j:"math";return he(tt(K,"variant").map(be=>{const H=Hi(be[0]);if(be.every(I=>{const G=I.context.getDefinition(I.command,ke);return!(!G||G.definitionType==="function"||!G.variant)&&Hi(I)===H}))return he(be.map(I=>S.serialize(I,$)));let J="";return H&&H!==Y&&(J={calligraphic:"\\mathcal{",fraktur:"\\mathfrak{","double-struck":"\\mathbb{",script:"\\mathscr{",monospace:"\\mathtt{","sans-serif":"\\mathsf{",normal:"\\mathrm{","normal-italic":"\\mathnormal{","normal-bold":"\\mathbf{","normal-bolditalic":"\\mathbfit{",ams:"","ams-italic":"\\mathit{","ams-bold":"\\mathbf{","ams-bolditalic":"\\mathbfit{",main:"","main-italic":"\\mathit{","main-bold":"\\mathbf{","main-bolditalic":"\\mathbfit{"}[H]),J?J+he(be.map(I=>S.serialize(I,$)))+"}":he(be.map(I=>S.serialize(I,$)))}))}(f,x),C=f[0].computedStyle;return(_=x.skipStyles)!==null&&_!==void 0&&_||!C.color||k&&g===C.color?T:"\\textcolor{"+((w=C.verbatimColor)!==null&&w!==void 0?w:C.color)+"}{"+T+"}"}))}(d,l);const b=d[0].computedStyle;return(p=l.skipStyles)!==null&&p!==void 0&&p||!m.trim()||!b.backgroundColor||u&&c===b.backgroundColor||!(d.length>0)&&d[0]instanceof Ct||(m=`\\ensuremath{${m}}`,m=`\\colorbox{${(h=b.verbatimBackgroundColor)!==null&&h!==void 0?h:b.backgroundColor}}{${m}}`),m}))}(o,e),n=o[0].computedStyle.fontSize;return!n||a&&i===n?r:"\\"+["","tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"][n]+" "+r}))}applyStyle(t,e){if(e.variant===void 0)return"";const a=e.letterShapeStyle!=="auto"&&e.letterShapeStyle?e.letterShapeStyle:"tex";let{variant:i}=e,{variantStyle:o}=e;i==="normal"&&!o&&/[\u00A3\u0131\u0237]/.test(t.value)&&(i="main",o="italic"),i!=="normal"||o||t.value.length!==1||As.forEach((l,u)=>{l.test(t.value)&&Ds[a][u]==="it"&&(o="italic")}),o==="up"&&(o=void 0);const r=o?i+"-"+o:i,[n,s]=Cs[r];return dr[i]&&!dr[i].test(t.value)?(t.value=function(l,u,c){if(!/[A-Za-z\d]/.test(l)||!u&&!c)return l;const d=l.codePointAt(0);if(d===void 0)return l;for(const p of jr)if((!u||p.variant===u)&&(!c||p.style===c)&&d>=p.offset&&d<p.offset+p.len){const h=p.start+d-p.offset;return String.fromCodePoint(lo[h]||h)}return l}(t.value,i,o),null):(un.test(t.value)&&(t.classes+=" lcGreek"),s&&(t.classes+=" "+s),n)}};const pr={roman:"","sans-serif":"ML__sans",monospace:"ML__tt"};function zt(t){let e=0;for(let a=0;a<t.length;a++)e=Math.imul(31,e)+t.charCodeAt(a)|0;return Math.abs(e)}function Tt(t,e,a){var i,o;if(gt(),!e)return null;let r=(i=t==null?void 0:t.getRootNode())!==null&&i!==void 0?i:document==null?void 0:document.head;if(!r)return null;r===document&&(r=document.head);const n=r.querySelector(`style[data-id="${a}"]`);if(n){const s=Number.parseFloat((o=n.getAttribute("data-refcount"))!==null&&o!==void 0?o:"0");n.dataset.refcount=Number(s+1).toString()}else{const s=document.createElement("style");s.dataset.id=a,s.dataset.refcount="1",s.append(document.createTextNode(e)),r.appendChild(s)}return{release:()=>{var s;const l=document.head.querySelector(`style[data-id="${a}"]`);if(l){const u=Number.parseFloat((s=l.getAttribute("data-refcount"))!==null&&s!==void 0?s:"0");u===1?l.remove():l.dataset.refcount=Number(u-1).toString()}}}}function cn(t){const e=t.split("+"),a={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:e.pop()};return e.includes("shift")&&(a.shift=!0),e.includes("alt")&&(a.alt=!0),e.includes("ctrl")&&(a.ctrl=!0),e.includes("cmd")&&(a.cmd=!0),e.includes("win")&&(a.win=!0),e.includes("meta")&&(a.meta=!0),a}function ai(t){let e="";return t.shift&&(e+="shift+"),t.alt&&(e+="alt+"),t.ctrl&&(e+="ctrl+"),t.cmd&&(e+="cmd+"),t.win&&(e+="win+"),t.meta&&(e+="meta+"),e+t.key}new class extends Ze{constructor(){super("text")}createAtom(t,e,a){const i=e.getDefinition(t,"text");return i&&i.definitionType==="symbol"?new Jt(t,String.fromCodePoint(i.codepoint),a??{},e):null}serialize(t,e){var a;let[i,o]=function(r,n){return Zt(tt(r,"backgroundColor").map(s=>{var l,u;const[c,d]=function(h,m){var b;if(!h||h.length===0)return["",!1];const y=(b=h[0].parent)===null||b===void 0?void 0:b.style.color;return Zt(tt(h,"color").map(x=>{var k,g;const[f,_]=function(w,T){return function(C,K){return Zt(tt(C,"fontFamily").map($=>{var j,q;const[Y,ke]=function(H,J){return Zt(tt(H,"fontSize").map(I=>{var G,D;const[it,Ee]=function(Ne,Ra){return Zt(tt(Ne,"fontSeries").map(Ro=>{const[la,Bn]=function(Kn,$n){return Zt(tt(Kn,"fontShape").map(Ni=>{const[Ut,qn]=function(En,On){return[he(En.map(Nn=>S.serialize(Nn,On))),!0]}(Ni,$n),{fontShape:ca}=Ni[0].style;return ca==="it"?["\\textit{"+Ut+"}",!1]:ca==="sl"?["\\textsl{"+Ut+"}",!1]:ca==="sc"?["\\textsc{"+Ut+"}",!1]:ca==="n"?["\\textup{"+Ut+"}",!1]:ca?[`{\\fontshape{${Ni[0].style.fontShape}}${Ut}`,!1]:[Ut,qn]}))}(Ro,Ra),{fontSeries:ua}=Ro[0].style;return ua==="b"?[`\\textbf{${la}}`,!1]:ua==="l"?[`\\textlf{${la}}`,!1]:ua==="m"?[`\\textmd{${la}}`,!1]:ua?[`\\fontseries{${ua}}${la}`,!1]:[la,Bn]}))}(I,J),ye=(D=["","tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"][(G=I[0].style.fontSize)!==null&&G!==void 0?G:""])!==null&&D!==void 0?D:"";return ye?[`{\\${ye} ${it}}`,Ee]:[it,Ee]}))}($,K),be=(q={roman:"textrm",monospace:"texttt","sans-serif":"textsf"}[(j=$[0].style.fontFamily)!==null&&j!==void 0?j:""])!==null&&q!==void 0?q:"";return be?[`\\${be}{${Y}}`,!1]:$[0].style.fontFamily?[`\\fontfamily{${$[0].style.fontFamily}}${Y}`,ke]:[Y,ke]}))}(w,T)}(x,m);return(k=m.skipStyles)!==null&&k!==void 0&&k||!x[0].style.color||x[0].style.color==="none"||y===x[0].style.color?[f,_]:[`\\textcolor{${(g=x[0].style.verbatimColor)!==null&&g!==void 0?g:x[0].style.color}}{${f}}`,!1]}))}(s,n),p=s[0].computedStyle;return(l=n.skipStyles)!==null&&l!==void 0&&l||!p.backgroundColor||p.backgroundColor==="none"?[c,d]:[`\\colorbox{${(u=p.verbatimBackgroundColor)!==null&&u!==void 0?u:p.backgroundColor}}{${c}}`,!1]}))}(t,e);return((a=e.skipModeCommand)!==null&&a!==void 0&&a)===!0&&(o=!1),o&&(i=`\\text{${i}}`),i}applyStyle(t,e){var a,i,o,r,n,s;const{fontFamily:l}=e;if(pr[l]?t.classes+=(a=" "+pr[l])!==null&&a!==void 0?a:"":l&&t.setStyle("font-family",l),e.fontShape&&(t.classes+=" ",t.classes+=(i={it:"ML__it",sl:"ML__shape_sl",sc:"ML__shape_sc",ol:"ML__shape_ol"}[e.fontShape])!==null&&i!==void 0?i:""),e.fontSeries){const u=e.fontSeries.match(/(.?[lbm])?(.?[cx])?/);u&&(t.classes+=" ",t.classes+=(r={ul:"ML__series_ul",el:"ML__series_el",l:"ML__series_l",sl:"ML__series_sl",m:"",sb:"ML__series_sb",b:"ML__bold",eb:"ML__series_eb",ub:"ML__series_ub"}[(o=u[1])!==null&&o!==void 0?o:""])!==null&&r!==void 0?r:"",t.classes+=" ",t.classes+=(s={uc:"ML__series_uc",ec:"ML__series_ec",c:"ML__series_c",sc:"ML__series_sc",n:"",sx:"ML__series_sx",x:"ML__series_x",ex:"ML__series_ex",ux:"ML__series_ux"}[(n=u[2])!==null&&n!==void 0?n:""])!==null&&s!==void 0?s:"")}return"Main-Regular"}},new class extends Ze{constructor(){super("latex")}createAtom(t,e,a){return new fe(t,e)}serialize(t,e){return t.filter(a=>a instanceof fe&&!a.isSuggestion).map(a=>a.value).join("")}applyStyle(){return null}};const dn=bo()==="apple"?{id:"apple.en-intl",displayName:"English (international)",virtualLayout:"qwerty",platform:"apple",locale:"en",score:0,mapping:{KeyA:["a","A","å","Å"],KeyB:["b","B","∫","ı"],KeyC:["c","C","ç","Ç"],KeyD:["d","D","∂","Î"],KeyE:["e","E","´","´"],KeyF:["f","F","ƒ","Ï"],KeyG:["g","G","©","˝"],KeyH:["h","H","˙","Ó"],KeyI:["i","I","ˆ","ˆ"],KeyJ:["j","J","∆","Ô"],KeyK:["k","K","˚",""],KeyL:["l","L","¬","Ò"],KeyM:["m","M","µ","Â"],KeyN:["n","N","˜","˜"],KeyO:["o","O","ø","Ø"],KeyP:["p","P","π","∏"],KeyQ:["q","Q","œ","Œ"],KeyR:["r","R","®","‰"],KeyS:["s","S","ß","Í"],KeyT:["t","T","†","ˇ"],KeyU:["u","U","¨","¨"],KeyV:["v","V","√","◊"],KeyW:["w","W","∑","„"],KeyX:["x","X","≈","˛"],KeyY:["y","Y","¥","Á"],KeyZ:["z","Z","Ω","¸"],Digit1:["1","!","¡","⁄"],Digit2:["2","@","™","€"],Digit3:["3","#","£","‹"],Digit4:["4","$","¢","›"],Digit5:["5","%","∞","ﬁ"],Digit6:["6","^","§","ﬂ"],Digit7:["7","&","¶","‡"],Digit8:["8","*","•","°"],Digit9:["9","(","ª","·"],Digit0:["0",")","º","‚"],Space:[" "," "," "," "],Minus:["-","_","–","—"],Equal:["=","+","≠","±"],BracketLeft:["[","{","“","”"],BracketRight:["]","}","‘","’"],Backslash:["\\","|","«","»"],Semicolon:[";",":","…","Ú"],Quote:["'",'"',"æ","Æ"],Backquote:["`","˜","`","`"],Comma:[",","<","≤","¯"],Period:[".",">","≥","˘"],Slash:["/","?","÷","¿"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["§","±","§","±"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}}:bo()==="windows"?{id:"windows.en-intl",displayName:"English (international)",platform:"windows",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","á","Á"],KeyB:["b","B","",""],KeyC:["c","C","©","¢"],KeyD:["d","D","ð","Ð"],KeyE:["e","E","é","É"],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","í","Í"],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","ø","Ø"],KeyM:["m","M","µ",""],KeyN:["n","N","ñ","Ñ"],KeyO:["o","O","ó","Ó"],KeyP:["p","P","ö","Ö"],KeyQ:["q","Q","ä","Ä"],KeyR:["r","R","®",""],KeyS:["s","S","ß","§"],KeyT:["t","T","þ","Þ"],KeyU:["u","U","ú","Ú"],KeyV:["v","V","",""],KeyW:["w","W","å","Å"],KeyX:["x","X","",""],KeyY:["y","Y","ü","Ü"],KeyZ:["z","Z","æ","Æ"],Digit1:["1","!","¡","¹"],Digit2:["2","@","²",""],Digit3:["3","#","³",""],Digit4:["4","$","¤","£"],Digit5:["5","%","€",""],Digit6:["6","^","¼",""],Digit7:["7","&","½",""],Digit8:["8","*","¾",""],Digit9:["9","(","‘",""],Digit0:["0",")","’",""],Space:[" "," ","",""],Minus:["-","_","¥",""],Equal:["=","+","×","÷"],BracketLeft:["[","{","«",""],BracketRight:["]","}","»",""],Backslash:["\\","|","¬","¦"],Semicolon:[";",":","¶","°"],Quote:["'",'"',"´","¨"],Backquote:["`","~","",""],Comma:[",","<","ç","Ç"],Period:[".",">","",""],Slash:["/","?","¿",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["\\","|","",""]}}:{id:"linux.en",displayName:"English",platform:"linux",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","a","A"],KeyB:["b","B","b","B"],KeyC:["c","C","c","C"],KeyD:["d","D","d","D"],KeyE:["e","E","e","E"],KeyF:["f","F","f","F"],KeyG:["g","G","g","G"],KeyH:["h","H","h","H"],KeyI:["i","I","i","I"],KeyJ:["j","J","j","J"],KeyK:["k","K","k","K"],KeyL:["l","L","l","L"],KeyM:["m","M","m","M"],KeyN:["n","N","n","N"],KeyO:["o","O","o","O"],KeyP:["p","P","p","P"],KeyQ:["q","Q","q","Q"],KeyR:["r","R","r","R"],KeyS:["s","S","s","S"],KeyT:["t","T","t","T"],KeyU:["u","U","u","U"],KeyV:["v","V","v","V"],KeyW:["w","W","w","W"],KeyX:["x","X","x","X"],KeyY:["y","Y","y","Y"],KeyZ:["z","Z","z","Z"],Digit1:["1","!","1","!"],Digit2:["2","@","2","@"],Digit3:["3","#","3","#"],Digit4:["4","$","4","$"],Digit5:["5","%","5","%"],Digit6:["6","^","6","^"],Digit7:["7","&","7","&"],Digit8:["8","*","8","*"],Digit9:["9","(","9","("],Digit0:["0",")","0",")"],Space:[" "," "," "," "],Minus:["-","_","-","_"],Equal:["=","+","=","+"],BracketLeft:["[","{","[","{"],BracketRight:["]","}","]","}"],Backslash:["\\","|","\\","|"],Semicolon:[";",":",";",":"],Quote:["'",'"',"'",'"'],Backquote:["`","~","`","~"],Comma:[",","<",",","<"],Period:[".",">",".",">"],Slash:["/","?","/","?"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","¦"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}},zs={enter:"[Enter]",escape:"[Escape]",backspace:"[Backspace]",tab:"[Tab]",space:"[Space]",pausebreak:"[Pause]",insert:"[Insert]",home:"[Home]",pageup:"[PageUp]",delete:"[Delete]",end:"[End]",pagedown:"[PageDown]",right:"[ArrowRight]",left:"[ArrowLeft]",down:"[ArrowDown]",up:"[ArrowUp]",numpad0:"[Numpad0]",numpad1:"[Numpad1]",numpad2:"[Numpad2]",numpad3:"[Numpad3]",numpad4:"[Numpad4]",numpad5:"[Numpad5]",numpad6:"[Numpad6]",numpad7:"[Numpad7]",numpad8:"[Numpad8]",numpad9:"[Numpad9]",numpad_divide:"[NumpadDivide]",numpad_multiply:"[NumpadMultiply]",numpad_subtract:"[NumpadSubtract]",numpad_add:"[NumpadAdd]",numpad_decimal:"[NumpadDecimal]",numpad_separator:"[NumpadComma]",capslock:"[Capslock]",f1:"[F1]",f2:"[F2]",f3:"[F3]",f4:"[F4]",f5:"[F5]",f6:"[F6]",f7:"[F7]",f8:"[F8]",f9:"[F9]",f10:"[F10]",f11:"[F11]",f12:"[F12]",f13:"[F13]",f14:"[F14]",f15:"[F15]",f16:"[F16]",f17:"[F17]",f18:"[F18]",f19:"[F19]"},mi=[];function bo(){switch(Da()){case"macos":case"ios":return"apple";case"windows":return"windows"}return"linux"}function ut(t){t.platform&&t.platform!==bo()||mi.push(t)}function Ba(){return mi[0]}ut(dn),ut({id:"apple.french",locale:"fr",displayName:"French",platform:"apple",virtualLayout:"azerty",score:0,mapping:{KeyA:["q","Q","‡","Ω"],KeyB:["b","B","ß","∫"],KeyC:["c","C","©","¢"],KeyD:["d","D","∂","∆"],KeyE:["e","E","ê","Ê"],KeyF:["f","F","ƒ","·"],KeyG:["g","G","ﬁ","ﬂ"],KeyH:["h","H","Ì","Î"],KeyI:["i","I","î","ï"],KeyJ:["j","J","Ï","Í"],KeyK:["k","K","È","Ë"],KeyL:["l","L","¬","|"],KeyM:[",","?","∞","¿"],KeyN:["n","N","~","ı"],KeyO:["o","O","œ","Œ"],KeyP:["p","P","π","∏"],KeyQ:["a","A","æ","Æ"],KeyR:["r","R","®","‚"],KeyS:["s","S","Ò","∑"],KeyT:["t","T","†","™"],KeyU:["u","U","º","ª"],KeyV:["v","V","◊","√"],KeyW:["z","Z","Â","Å"],KeyX:["x","X","≈","⁄"],KeyY:["y","Y","Ú","Ÿ"],KeyZ:["w","W","‹","›"],Digit1:["&","1","","´"],Digit2:["é","2","ë","„"],Digit3:['"',"3","“","”"],Digit4:["'","4","‘","’"],Digit5:["(","5","{","["],Digit6:["§","6","¶","å"],Digit7:["è","7","«","»"],Digit8:["!","8","¡","Û"],Digit9:["ç","9","Ç","Á"],Digit0:["à","0","ø","Ø"],Space:[" "," "," "," "],Minus:[")","°","}","]"],Equal:["-","_","—","–"],BracketLeft:["^","¨","ô","Ô"],BracketRight:["$","*","€","¥"],Backslash:["`","£","@","#"],Semicolon:["m","M","µ","Ó"],Quote:["ù","%","Ù","‰"],Backquote:["<",">","≤","≥"],Comma:[";",".","…","•"],Period:[":","/","÷","\\"],Slash:["=","+","≠","±"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",".",",","."],IntlBackslash:["@","#","•","Ÿ"],NumpadEqual:["=","=","=","="]}}),ut({id:"apple.spanish",locale:"es",displayName:"Spanish ISO",platform:"apple",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","å","Å"],KeyB:["b","B","ß",""],KeyC:["c","C","©"," "],KeyD:["d","D","∂","∆"],KeyE:["e","E","€","€"],KeyF:["f","F","ƒ","ﬁ"],KeyG:["g","G","","ﬂ"],KeyH:["h","H","™"," "],KeyI:["i","I"," "," "],KeyJ:["j","J","¶","¯"],KeyK:["k","K","§","ˇ"],KeyL:["l","L"," ","˘"],KeyM:["m","M","µ","˚"],KeyN:["n","N"," ","˙"],KeyO:["o","O","ø","Ø"],KeyP:["p","P","π","∏"],KeyQ:["q","Q","œ","Œ"],KeyR:["r","R","®"," "],KeyS:["s","S","∫"," "],KeyT:["t","T","†","‡"],KeyU:["u","U"," "," "],KeyV:["v","V","√","◊"],KeyW:["w","W","æ","Æ"],KeyX:["x","X","∑","›"],KeyY:["y","Y","¥"," "],KeyZ:["z","Z","Ω","‹"],Digit1:["1","!","|","ı"],Digit2:["2",'"',"@","˝"],Digit3:["3","·","#","•"],Digit4:["4","$","¢","£"],Digit5:["5","%","∞","‰"],Digit6:["6","&","¬"," "],Digit7:["7","/","÷","⁄"],Digit8:["8","(","“","‘"],Digit9:["9",")","”","’"],Digit0:["0","=","≠","≈"],Space:[" "," "," "," "],Minus:["'","?","´","¸"],Equal:["¡","¿","‚","˛"],BracketLeft:["`","^","[","ˆ"],BracketRight:["+","*","]","±"],Backslash:["ç","Ç","}","»"],Semicolon:["ñ","Ñ","~","˜"],Quote:["´","¨","{","«"],Backquote:["<",">","≤","≥"],Comma:[",",";","„",""],Period:[".",":","…","…"],Slash:["-","_","–","—"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[",",",",",",","],IntlBackslash:["º","ª","\\","°"]}}),ut({id:"windows.spanish",locale:"es",displayName:"Spanish",platform:"windows",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","€",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","·","#",""],Digit4:["4","$","~",""],Digit5:["5","%","€",""],Digit6:["6","&","¬",""],Digit7:["7","/","",""],Digit8:["8","(","",""],Digit9:["9",")","",""],Digit0:["0","=","",""],Space:[" "," ","",""],Minus:["'","?","",""],Equal:["¡","¿","",""],BracketLeft:["`","^","[",""],BracketRight:["+","*","]",""],Backslash:["ç","Ç","}",""],Semicolon:["ñ","Ñ","",""],Quote:["´","¨","{",""],Backquote:["º","ª","\\",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}}),ut({id:"linux.spanish",locale:"es",displayName:"Spanish",platform:"linux",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","æ","Æ"],KeyB:["b","B","”","’"],KeyC:["c","C","¢","©"],KeyD:["d","D","ð","Ð"],KeyE:["e","E","€","¢"],KeyF:["f","F","đ","ª"],KeyG:["g","G","ŋ","Ŋ"],KeyH:["h","H","ħ","Ħ"],KeyI:["i","I","→","ı"],KeyJ:["j","J","̉","̛"],KeyK:["k","K","ĸ","&"],KeyL:["l","L","ł","Ł"],KeyM:["m","M","µ","º"],KeyN:["n","N","n","N"],KeyO:["o","O","ø","Ø"],KeyP:["p","P","þ","Þ"],KeyQ:["q","Q","@","Ω"],KeyR:["r","R","¶","®"],KeyS:["s","S","ß","§"],KeyT:["t","T","ŧ","Ŧ"],KeyU:["u","U","↓","↑"],KeyV:["v","V","“","‘"],KeyW:["w","W","ł","Ł"],KeyX:["x","X","»",">"],KeyY:["y","Y","←","¥"],KeyZ:["z","Z","«","<"],Digit1:["1","!","|","¡"],Digit2:["2",'"',"@","⅛"],Digit3:["3","·","#","£"],Digit4:["4","$","~","$"],Digit5:["5","%","½","⅜"],Digit6:["6","&","¬","⅝"],Digit7:["7","/","{","⅞"],Digit8:["8","(","[","™"],Digit9:["9",")","]","±"],Digit0:["0","=","}","°"],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:["'","?","\\","¿"],Equal:["¡","¿","̃","~"],BracketLeft:["̀","̂","[","̊"],BracketRight:["+","*","]","̄"],Backslash:["ç","Ç","}","̆"],Semicolon:["ñ","Ñ","~","̋"],Quote:["́","̈","{","{"],Backquote:["º","ª","\\","\\"],Comma:[",",";","─","×"],Period:[".",":","·","÷"],Slash:["-","_","̣","̇"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadEnter:["\r","\r","\r","\r"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","¦"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}}),ut({id:"linux.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"linux",score:0,mapping:{KeyA:["q","Q","@","Ω"],KeyB:["b","B","”","’"],KeyC:["c","C","¢","©"],KeyD:["d","D","ð","Ð"],KeyE:["e","E","€","¢"],KeyF:["f","F","đ","ª"],KeyG:["g","G","ŋ","Ŋ"],KeyH:["h","H","ħ","Ħ"],KeyI:["i","I","→","ı"],KeyJ:["j","J","̉","̛"],KeyK:["k","K","ĸ","&"],KeyL:["l","L","ł","Ł"],KeyM:[",","?","́","̋"],KeyN:["n","N","n","N"],KeyO:["o","O","ø","Ø"],KeyP:["p","P","þ","Þ"],KeyQ:["a","A","æ","Æ"],KeyR:["r","R","¶","®"],KeyS:["s","S","ß","§"],KeyT:["t","T","ŧ","Ŧ"],KeyU:["u","U","↓","↑"],KeyV:["v","V","“","‘"],KeyW:["z","Z","«","<"],KeyX:["x","X","»",">"],KeyY:["y","Y","←","¥"],KeyZ:["w","W","ł","Ł"],Digit1:["&","1","¹","¡"],Digit2:["é","2","~","⅛"],Digit3:['"',"3","#","£"],Digit4:["'","4","{","$"],Digit5:["(","5","[","⅜"],Digit6:["-","6","|","⅝"],Digit7:["è","7","`","⅞"],Digit8:["_","8","\\","™"],Digit9:["ç","9","^","±"],Digit0:["à","0","@","°"],Enter:["\r","\r","\r","\r"],Escape:["\x1B","\x1B","\x1B","\x1B"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:[")","°","]","¿"],Equal:["=","+","}","̨"],BracketLeft:["̂","̈","̈","̊"],BracketRight:["$","£","¤","̄"],Backslash:["*","µ","̀","̆"],Semicolon:["m","M","µ","º"],Quote:["ù","%","̂","̌"],Backquote:["²","~","¬","¬"],Comma:[";",".","─","×"],Period:[":","/","·","÷"],Slash:["!","§","̣","̇"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","¦"]}}),ut({id:"windows.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"windows",score:0,mapping:{KeyA:["q","Q","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","€",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:[",","?","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["é","2","~",""],Digit3:['"',"3","#",""],Digit4:["'","4","{",""],Digit5:["(","5","[",""],Digit6:["-","6","|",""],Digit7:["è","7","`",""],Digit8:["_","8","\\",""],Digit9:["ç","9","^",""],Digit0:["à","0","@",""],Space:[" "," ","",""],Minus:[")","°","]",""],Equal:["=","+","}",""],BracketLeft:["^","¨","",""],BracketRight:["$","£","¤",""],Backslash:["*","µ","",""],Semicolon:["m","M","",""],Quote:["ù","%","",""],Backquote:["²","","",""],Comma:[";",".","",""],Period:[":","/","",""],Slash:["!","§","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}}),ut({id:"windows.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","€",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","µ",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"²",""],Digit3:["3","§","³",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Space:[" "," ","",""],Minus:["ß","?","\\","ẞ"],Equal:["´","`","",""],BracketLeft:["ü","Ü","",""],BracketRight:["+","*","~",""],Backslash:["#","'","",""],Semicolon:["ö","Ö","",""],Quote:["ä","Ä","",""],Backquote:["^","°","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","|",""]}}),ut({id:"apple.german",locale:"de",displayName:"German",virtualLayout:"qwertz",platform:"apple",score:0,mapping:{KeyA:["a","A","å","Å"],KeyB:["b","B","∫","‹"],KeyC:["c","C","ç","Ç"],KeyD:["d","D","∂","™"],KeyE:["e","E","€","‰"],KeyF:["f","F","ƒ","Ï"],KeyG:["g","G","©","Ì"],KeyH:["h","H","ª","Ó"],KeyI:["i","I","⁄","Û"],KeyJ:["j","J","º","ı"],KeyK:["k","K","∆","ˆ"],KeyL:["l","L","@","ﬂ"],KeyM:["m","M","µ","˘"],KeyN:["n","N","~","›"],KeyO:["o","O","ø","Ø"],KeyP:["p","P","π","∏"],KeyQ:["q","Q","«","»"],KeyR:["r","R","®","¸"],KeyS:["s","S","‚","Í"],KeyT:["t","T","†","˝"],KeyU:["u","U","¨","Á"],KeyV:["v","V","√","◊"],KeyW:["w","W","∑","„"],KeyX:["x","X","≈","Ù"],KeyY:["z","Z","Ω","ˇ"],KeyZ:["y","Y","¥","‡"],Digit1:["1","!","¡","¬"],Digit2:["2",'"',"“","”"],Digit3:["3","§","¶","#"],Digit4:["4","$","¢","£"],Digit5:["5","%","[","ﬁ"],Digit6:["6","&","]","^"],Digit7:["7","/","|","\\"],Digit8:["8","(","{","˜"],Digit9:["9",")","}","·"],Digit0:["0","=","≠","¯"],Space:[" "," "," "," "],Minus:["ß","?","¿","˙"],Equal:["´","`","'","˚"],BracketLeft:["ü","Ü","•","°"],BracketRight:["+","*","±",""],Backslash:["#","'","‘","’"],Semicolon:["ö","Ö","œ","Œ"],Quote:["ä","Ä","æ","Æ"],Backquote:["<",">","≤","≥"],Comma:[",",";","∞","˛"],Period:[".",":","…","÷"],Slash:["-","_","–","—"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",",",".","."],IntlBackslash:["^","°","„","“"],NumpadEqual:["=","=","=","="]}}),ut({id:"dvorak",locale:"en",displayName:"Dvorak",virtualLayout:"dvorak",platform:"",score:0,mapping:{KeyA:["a","A","å","Å"],KeyB:["x","X","≈","˛"],KeyC:["j","J","∆","Ô"],KeyD:["e","E","´","´"],KeyE:[".",">","≥","˘"],KeyF:["u","U","¨","¨"],KeyG:["i","I","ˆ","ˆ"],KeyH:["d","D","∂","Î"],KeyI:["c","C","ç","Ç"],KeyJ:["h","H","˙","Ó"],KeyK:["t","T","†","ˇ"],KeyL:["n","N","˜","˜"],KeyM:["m","M","µ","Â"],KeyN:["b","B","∫","ı"],KeyO:["r","R","®","‰"],KeyP:["l","L","¬","Ò"],KeyQ:["'",'"',"æ","Æ"],KeyR:["p","P","π","∏"],KeyS:["o","O","ø","Ø"],KeyT:["y","Y","¥","Á"],KeyU:["g","G","©","˝"],KeyV:["k","K","˚",""],KeyW:[",","<","≤","¯"],KeyX:["q","Q","œ","Œ"],KeyY:["f","F","ƒ","Ï"],KeyZ:[";",":","…","Ú"],Digit1:["1","!","¡","⁄"],Digit2:["2","@","™","€"],Digit3:["3","#","£","‹"],Digit4:["4","$","¢","›"],Digit5:["5","%","∞","ﬁ"],Digit6:["6","^","§","ﬂ"],Digit7:["7","&","¶","‡"],Digit8:["8","*","•","°"],Digit9:["9","(","ª","·"],Digit0:["0",")","º","‚"],Space:[" "," "," "," "],Minus:["[","{","“","”"],Equal:["]","}","‘","’"],BracketLeft:["/","?","÷","¿"],BracketRight:["=","+","≠","±"],Backslash:["\\","|","«","»"],Semicolon:["s","S","ß","Í"],Quote:["-","_","–","—"],Backquote:["`","~","`","`"],Comma:["w","W","∑","„"],Period:["v","V","√","◊"],Slash:["z","Z","Ω","¸"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["§","±","§","±"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}});const Ts=[{key:"left",command:"moveToPreviousChar"},{key:"right",command:"moveToNextChar"},{key:"up",command:"moveUp"},{key:"down",command:"moveDown"},{key:"shift+[ArrowLeft]",command:"extendSelectionBackward"},{key:"shift+[ArrowRight]",command:"extendSelectionForward"},{key:"shift+[ArrowUp]",command:"extendSelectionUpward"},{key:"shift+[ArrowDown]",command:"extendSelectionDownward"},{key:"[Backspace]",command:"deleteBackward"},{key:"alt+[Delete]",command:"deleteBackward"},{key:"[Delete]",command:"deleteForward"},{key:"alt+[Backspace]",command:"deleteForward"},{key:"alt+[ArrowLeft]",command:"moveToPreviousWord"},{key:"alt+[ArrowRight]",command:"moveToNextWord"},{key:"shift+alt+[ArrowLeft]",command:"extendToPreviousWord"},{key:"shift+alt+[ArrowRight]",command:"extendToNextWord"},{key:"ctrl+[ArrowLeft]",command:"moveToGroupStart"},{key:"ctrl+[ArrowRight]",command:"moveToGroupEnd"},{key:"shift+ctrl+[ArrowLeft]",command:"extendToGroupStart"},{key:"shift+ctrl+[ArrowRight]",command:"extendToGroupEnd"},{key:"[Space]",ifMode:"math",command:"moveAfterParent"},{key:"shift+[Space]",ifMode:"math",command:"moveBeforeParent"},{key:"[Home]",command:"moveToMathFieldStart"},{key:"cmd+[ArrowLeft]",command:"moveToMathFieldStart"},{key:"shift+[Home]",command:"extendToMathFieldStart"},{key:"shift+cmd+[ArrowLeft]",command:"extendToMathFieldStart"},{key:"[End]",command:"moveToMathFieldEnd"},{key:"cmd+[ArrowRight]",command:"moveToMathFieldEnd"},{key:"shift+[End]",command:"extendToMathFieldEnd"},{key:"shift+cmd+[ArrowRight]",command:"extendToMathFieldEnd"},{key:"[Pageup]",command:"moveToGroupStart"},{key:"[Pagedown]",command:"moveToGroupEnd"},{key:"[Tab]",ifMode:"math",command:"moveToNextPlaceholder"},{key:"shift+[Tab]",ifMode:"math",command:"moveToPreviousPlaceholder"},{key:"[Tab]",ifMode:"text",command:"moveToNextPlaceholder"},{key:"shift+[Tab]",ifMode:"text",command:"moveToPreviousPlaceholder"},{key:"[Escape]",ifMode:"math",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"text",command:["switchMode","latex"]},{key:"\\",ifMode:"math",command:["switchMode","latex","\\"]},{key:"[IntlBackslash]",ifMode:"math",command:["switchMode","latex","\\"]},{key:"[Escape]",ifMode:"latex",command:["complete","complete",{selectItem:"true"}]},{key:"[Tab]",ifMode:"latex",command:["complete","accept-suggestion"]},{key:"[Return]",ifMode:"latex",command:"complete"},{key:"[Enter]",ifMode:"latex",command:"complete"},{key:"shift+[Escape]",ifMode:"latex",command:["complete","reject"]},{key:"[ArrowDown]",ifMode:"latex",command:"nextSuggestion"},{key:"[ArrowUp]",ifMode:"latex",command:"previousSuggestion"},{key:"ctrl+a",ifPlatform:"!macos",command:"selectAll"},{key:"cmd+a",command:"selectAll"},{key:"[Cut]",command:"cutToClipboard"},{key:"[Copy]",command:"copyToClipboard"},{key:"[Paste]",command:"pasteFromClipboard"},{key:"[Clear]",command:"deleteBackward"},{key:"ctrl+z",ifPlatform:"!macos",command:"undo"},{key:"cmd+z",command:"undo"},{key:"[Undo]",command:"undo"},{key:"ctrl+y",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+y",command:"redo"},{key:"shift+ctrl+z",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+z",command:"redo"},{key:"[Redo]",command:"redo"},{key:"[EraseEof]",command:"deleteToGroupEnd"},{key:"ctrl+b",ifPlatform:"macos",command:"moveToPreviousChar"},{key:"ctrl+f",ifPlatform:"macos",command:"moveToNextChar"},{key:"ctrl+p",ifPlatform:"macos",command:"moveUp"},{key:"ctrl+n",ifPlatform:"macos",command:"moveDown"},{key:"ctrl+a",ifPlatform:"macos",command:"moveToMathFieldStart"},{key:"ctrl+e",ifPlatform:"macos",command:"moveToMathFieldEnd"},{key:"shift+ctrl+b",ifPlatform:"macos",command:"extendSelectionBackward"},{key:"shift+ctrl+f",ifPlatform:"macos",command:"extendSelectionForward"},{key:"shift+ctrl+p",ifPlatform:"macos",command:"extendSelectionUpward"},{key:"shift+ctrl+n",ifPlatform:"macos",command:"extendSelectionDownward"},{key:"shift+ctrl+a",ifPlatform:"macos",command:"extendToMathFieldStart"},{key:"shift+ctrl+e",ifPlatform:"macos",command:"extendToMathFieldEnd"},{key:"alt+ctrl+b",ifPlatform:"macos",command:"moveToPreviousWord"},{key:"alt+ctrl+f",ifPlatform:"macos",command:"moveToNextWord"},{key:"shift+alt+ctrl+b",ifPlatform:"macos",command:"extendToPreviousWord"},{key:"shift+alt+ctrl+f",ifPlatform:"macos",command:"extendToNextWord"},{key:"ctrl+h",ifPlatform:"macos",command:"deleteBackward"},{key:"ctrl+d",ifPlatform:"macos",command:"deleteForward"},{key:"ctrl+l",ifPlatform:"macos",command:"scrollIntoView"},{key:"ctrl+[Digit2]",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"ctrl+[Digit5]",ifMode:"math",command:"moveToOpposite"},{key:"ctrl+[Digit6]",ifMode:"math",command:"moveToSuperscript"},{key:"ctrl+[Return]",ifMode:"math",command:"addRowAfter"},{key:"ctrl+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Return]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"alt+p",ifMode:"math",command:["insert","\\pi"]},{key:"alt+v",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"alt+w",ifMode:"math",command:["insert","\\sum_{i=#?}^{#?}"]},{key:"alt+b",command:["insert","\\int_{#?}^{#?}"]},{key:"alt+u",ifMode:"math",command:["insert","\\cup"]},{key:"alt+n",ifMode:"math",command:["insert","\\cap"]},{key:"alt+o",ifMode:"math",command:["insert","\\emptyset"]},{key:"alt+d",ifMode:"math",command:["insert","\\differentialD"]},{key:"shift+alt+o",ifMode:"math",command:["insert","\\varnothing"]},{key:"shift+alt+d",ifMode:"math",command:["insert","\\partial"]},{key:"shift+alt+p",ifMode:"math",command:["insert","\\prod_{i=#?}^{#?}"]},{key:"shift+alt+u",ifMode:"math",command:["insert","\\bigcup"]},{key:"shift+alt+n",ifMode:"math",command:["insert","\\bigcap"]},{key:"shift+alt+a",ifMode:"math",command:["insert","\\forall"]},{key:"shift+alt+e",ifMode:"math",command:["insert","\\exists"]},{key:"alt+[Backslash]",ifMode:"math",command:["insert","\\backslash"]},{key:"[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#?}{#@}"]},{key:"shift+alt+k",command:"toggleKeystrokeCaption"},{key:"alt+[Space]",command:"toggleVirtualKeyboard"},{key:"alt+ctrl+[ArrowUp]",command:["speak","all",{withHighlighting:!1}]},{key:"alt+ctrl+[ArrowDown]",command:["speak","selection",{withHighlighting:!1}]},{key:"alt+[Equal]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["applyStyle",{mode:"text"}]},{key:"alt+[Equal]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"text",command:["applyStyle",{mode:"math"}]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["switchMode","text","",""]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"text",command:["switchMode","math","",""]},{key:"/",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\/"]},{key:"alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrack #0 \\right\\rbrack"]},{key:"ctrl+[Minus]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"moveToSubscript"},{key:"shift+alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrace #0 \\right\\rbrace"]},{key:"ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"shift+ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"shift+cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"ctrl+[Backspace]",ifMode:"math",command:"removeRow"},{key:"cmd+[Backspace]",ifMode:"math",command:"removeRow"},{key:"ctrl+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnAfter"},{key:"cmd+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnAfter"},{key:"shift+ctrl+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnBefore"},{key:"shift+cmd+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnBefore"},{key:"shift+[Backspace]",ifMode:"math",command:"removeColumn"},{key:"alt+[Digit5]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","$\\infty"]},{key:"alt+[Digit6]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\wedge"]},{key:"shift+alt+[Digit6]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\vee"]},{key:"alt+[Digit9]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","("]},{key:"alt+[Digit0]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert",")"]},{key:"alt+|",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","|"]},{key:"shift+[Backquote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\~"]},{key:"[Backquote]",ifLayout:["windows.french","linux.french"],ifMode:"math",command:["insert","^2"]}],Bs={"\\theta":"alt+q","\\sqrt":["alt+v","ctrl+[Digit2]"],"\\pi":"alt+p","\\prod":"shift+alt+p","\\sum":"alt+w","\\int":"alt+b","\\cup":"alt+u","\\cap":"alt+n","\\bigcup":"shift+alt+u","\\bigcap":"shift+alt+n","\\forall":"shift+alt+a","\\exists":"shift+alt+e","\\infty":"alt+[Digit5]","\\wedge":"alt+[Digit6]","\\vee":"shift+alt+[Digit6]","\\differentialD":"alt+d","\\partial":"shift+alt+d","\\frac":"Slash","\\emptyset":"alt+o","\\varnothing":"shift+alt+o","\\~":"~"};function hr(t){let e=t;return Ce(e)&&(e=e.length>0?e[0]+"("+e.slice(1).join("")+")":""),e}function Ks(t,e){let a=[];if(typeof e=="string"){const r=Bs[e];Ce(r)?a=r.slice():r&&a.push(r)}const i=hr(e),o=new RegExp("^"+i.replace("\\","\\\\").replace("|","\\|").replace("*","\\*").replace("$","\\$").replace("^","\\^")+"([^*a-zA-Z]|$)");for(const r of t)o.test(hr(r.command))&&a.push(r.key);return a.map(pn)}function pn(t){var e;const a=/macos|ios|/.test(Da()),i=t.split("+");let o="";for(const r of i)!a&&o&&(o+='<span class="ML__shortcut-join">+</span>'),r.startsWith("[Key")?o+=r.slice(4,5):r.startsWith("Key")?o+=r.slice(3,4):r.startsWith("[Digit")?o+=r.slice(6,7):r.startsWith("Digit")?o+=r.slice(5,6):o+=(e={cmd:"⌘",meta:a?"⌘":"command",shift:a?"⇧":"shift",alt:a?"⌥":"alt",ctrl:a?"⌃":"control","\n":a?"⏎":"return","[return]":a?"⏎":"return","[enter]":a?"⌤":"enter","[tab]":a?"⇥":"tab","[escape]":"esc","[backspace]":a?"⌫":"backspace","[delete]":a?"⌦":"del","[pageup]":a?"⇞":"page up","[pagedown]":a?"⇟":"page down","[home]":a?"⤒":"home","[end]":a?"⤓":"end","[space]":"space","[equal]":"=","[minus]":"-","[comma]":",","[slash]":"/","[backslash]":"\\","[bracketleft]":"[","[bracketright]":"]",semicolon:";",period:".",comma:",",minus:"-",equal:"=",quote:"'",bracketLeft:"[",bracketRight:"]",backslash:"\\",intlbackslash:"\\",backquote:"`",slash:"/",numpadmultiply:"* &#128290;",numpaddivide:"/ &#128290;",numpadsubtract:"- &#128290;",numpadadd:"+ &#128290;",numpaddecimal:". &#128290;",numpadcomma:", &#128290;",help:"help",left:"⇠",up:"⇡",right:"⇢",down:"⇣","[arrowleft]":"⇠","[arrowup]":"⇡","[arrowright]":"⇢","[arrowdown]":"⇣","[digit0]":"0","[digit1]":"1","[digit2]":"2","[digit3]":"3","[digit4]":"4","[digit5]":"5","[digit6]":"6","[digit7]":"7","[digit8]":"8","[digit9]":"9"}[r.toLowerCase()])!==null&&e!==void 0?e:r.toUpperCase();return o}function $s(t,e){if(t.ifPlatform&&!/^!?(macos|windows|android|ios|chromeos|other)$/.test(t.ifPlatform))throw new Error(`Unexpected platform "${t.ifPlatform}" for keybinding ${t.key}`);if(t.ifLayout!==void 0&&(e.score===0||!t.ifLayout.includes(e.id)))return;const a=cn(t.key);let i=t.ifPlatform;if(a.cmd){if(i&&i!=="macos"&&i!=="ios")throw new Error('Unexpected "cmd" modifier with platform "'+i+`"
"cmd" modifier can only be used with macOS or iOS platform.`);i||(i=Da()==="ios"?"ios":"macos"),a.win=!1,a.cmd=!1,a.meta=!0}if(a.win){if(i&&i!=="windows")throw new Error('Unexpected "win" modifier with platform "'+i+`"
"win" modifier can only be used with Windows platform.`);i="windows",a.win=!1,a.cmd=!1,a.meta=!0}if(i&&!function(r){if(ie()){const n=Da(),s=r.startsWith("!"),l=r.endsWith(n);if(s&&!l||!s&&l)return!0}return r!=="!other"&&r==="other"}(i))return;if(/^\[.+\]$/.test(a.key))return{...t,ifPlatform:i,key:ai(a)};const o=function(r,n){var s;const l={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:""};if(!r)return l;for(const[u,c]of Object.entries(n.mapping)){if(c[0]===r)return l.key=`[${u}]`,l;if(c[1]===r)return l.shift=!0,l.key=`[${u}]`,l;if(c[2]===r)return l.alt=!0,l.key=`[${u}]`,l;if(c[3]===r)return l.shift=!0,l.alt=!0,l.key=`[${u}]`,l}return l.key=(s=zs[r])!==null&&s!==void 0?s:"",l}(a.key,e);if(!o)throw new Error('Invalid keybinding key "'+t.key+'"');if(o.shift&&a.shift||o.alt&&a.alt)throw new Error(`The keybinding ${t.key} (${yo(t.command)}) is conflicting with the key combination ${ai(o)} using the ${e.displayName} keyboard layout`);return o.shift=o.shift||a.shift,o.alt=o.alt||a.alt,o.meta=a.meta,o.ctrl=a.ctrl,{...t,ifPlatform:i,key:ai(o)}}function yo(t){if(Array.isArray(t)){const e=[...t];return e.shift()+"("+e.map(a=>typeof a=="string"?`"${a}"`:a.toString()).join(", ")+")"}return t}var mr='#mathlive-popover-panel{background-color:rgba(97,97,97,.95);border-radius:8px;box-shadow:0 14px 28px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.22);color:#fff;display:flex;flex-direction:column;justify-content:center;position:fixed;text-align:center;transition:all .2s cubic-bezier(.64,.09,.08,1);visibility:hidden;z-index:1}#mathlive-popover-panel:after{border-bottom:5px solid rgba(97,97,97,.9);border-left:5px solid transparent;border-right:5px solid transparent;content:"";font-size:1rem;height:0;left:calc(50% - 3px);position:absolute;top:-5px;width:0}#mathlive-popover-panel.is-visible{animation:ML__fade-in .15s cubic-bezier(0,0,.2,1);visibility:inherit}@keyframes ML__fade-in{0%{opacity:0}to{opacity:1}}#mathlive-popover-panel ul{align-items:flex-start;display:flex;flex-flow:column;justify-content:center;list-style:none;margin:0;padding:0}#mathlive-popover-panel li{border-radius:8px;column-gap:1em;cursor:pointer;display:flex;flex-direction:row;justify-content:space-between;margin:8px;padding:8px;width:calc(100% - 32px)}#mathlive-popover-panel li a{color:#5ea6fd;display:block;margin-top:.4em;padding-top:.3em}#mathlive-popover-panel li a:hover{color:#5ea6fd;text-decoration:underline}#mathlive-popover-panel li.is-active,#mathlive-popover-panel li.is-pressed,#mathlive-popover-panel li:hover{background:hsla(0,0%,100%,.1)}.ML__popover__command{font-family:KaTeX_Main;font-size:1.6rem}.ML__popover__latex{align-self:center;font-family:IBM Plex Mono,Source Code Pro,Consolas,Roboto Mono,Menlo,Bitstream Vera Sans Mono,DejaVu Sans Mono,Monaco,Courier,monospace}.ML__popover__keybinding{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:.8em;opacity:.7}.ML__shortcut-join{opacity:.5}',Bt='.ML__sr-only{clip:rect(0,0,0,0);border:0;-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ML__base,.ML__isInline{display:inline-block}.ML__base{border:0;box-sizing:content-box;cursor:text;font-family:inherit;font-style:inherit;font-weight:inherit;margin:0;outline:0;padding:0;position:relative;text-decoration:none;vertical-align:baseline;visibility:inherit;width:min-content}body.ML__fonts-loading .ML__base{visibility:hidden}.ML__strut,.ML__strut--bottom{display:inline-block;min-height:.5em}.ML__small-delim{font-family:KaTeX_Main}.ML__text{font-family:var(--text-font-family,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif);white-space:pre}.ML__cmr{font-family:KaTeX_Main;font-style:normal}.ML__mathit{font-family:KaTeX_Math;font-style:italic}.ML__mathbf{font-family:KaTeX_Main;font-weight:700}.lcGreek.ML__mathbf{font-family:KaTeX_Math;font-weight:400}.ML__mathbfit{font-family:KaTeX_Math;font-style:italic;font-weight:700}.ML__ams,.ML__bb{font-family:KaTeX_AMS}.ML__cal{font-family:KaTeX_Caligraphic}.ML__frak{font-family:KaTeX_Fraktur}.ML__tt{font-family:KaTeX_Typewriter}.ML__script{font-family:KaTeX_Script}.ML__sans{font-family:KaTeX_SansSerif}.ML__series_el,.ML__series_ul{font-weight:100}.ML__series_l{font-weight:200}.ML__series_sl{font-weight:300}.ML__series_sb{font-weight:500}.ML__bold,.ML__boldsymbol{font-weight:700}.ML__series_eb{font-weight:800}.ML__series_ub{font-weight:900}.ML__series_uc{font-stretch:ultra-condensed}.ML__series_ec{font-stretch:extra-condensed}.ML__series_c{font-stretch:condensed}.ML__series_sc{font-stretch:semi-condensed}.ML__series_sx{font-stretch:semi-expanded}.ML__series_x{font-stretch:expanded}.ML__series_ex{font-stretch:extra-expanded}.ML__series_ux{font-stretch:ultra-expanded}.ML__it{font-style:italic}.ML__shape_ol{-webkit-text-stroke:1px #000;text-stroke:1px #000;color:transparent}.ML__shape_sc{font-variant:small-caps}.ML__shape_sl{font-style:oblique}.ML__emph{color:#bc2612}.ML__emph .ML__emph{color:#0c7f99}.ML__highlight{background:#edd1b0;color:#007cb2}.ML__center{text-align:center}.ML__label_padding{padding:0 .5em}.ML__frac-line{min-height:1px;width:100%}.ML__frac-line:after{background:currentColor;box-sizing:content-box;content:"";display:block;margin-top:-.04em;min-height:.04em;-webkit-print-color-adjust:exact;print-color-adjust:exact;transform:translate(0)}.ML__sqrt,.ML__sqrt-sign{display:inline-block}.ML__sqrt-sign{font-family:KaTeX_Main;position:relative}.ML__sqrt-line{display:inline-block;height:.04em;width:100%}.ML__sqrt-line:before{background:currentColor;content:"";display:block;margin-top:-.04em;min-height:.04em;-webkit-print-color-adjust:exact;print-color-adjust:exact;transform:translate(0)}.ML__sqrt-line:after{border-bottom-width:1px;content:" ";display:block;margin-top:-.1em}.ML__sqrt-index{margin-left:.27777778em;margin-right:-.55555556em}.ML__delim-size1{font-family:KaTeX_Size1}.ML__delim-size2{font-family:KaTeX_Size2}.ML__delim-size3{font-family:KaTeX_Size3}.ML__delim-size4{font-family:KaTeX_Size4}.ML__delim-mult .delim-size1>span{font-family:KaTeX_Size1}.ML__delim-mult .delim-size4>span{font-family:KaTeX_Size4}.ML__accent-body>span{font-family:KaTeX_Main;width:0}.ML__accent-vec>span{left:.24em;position:relative}.ML__mathlive{word-wrap:normal;direction:ltr;display:inline-block;font-family:KaTeX_Main,Times New Roman,serif;font-size-adjust:none;font-stretch:normal;font-style:normal;font-variant-caps:normal;letter-spacing:normal;line-height:1.2;text-align:left;text-indent:0;text-rendering:auto;text-shadow:none;-webkit-user-select:none;user-select:none;white-space:nowrap;width:min-content;word-spacing:normal}.ML__mathlive .style-wrap{position:relative}.ML__mathlive .left-right,.ML__mathlive .mfrac{display:inline-block}.ML__mathlive .vlist-t{border-collapse:collapse;display:inline-table;table-layout:fixed}.ML__mathlive .vlist-r{display:table-row}.ML__mathlive .vlist{display:table-cell;position:relative;vertical-align:bottom}.ML__mathlive .vlist>span{display:block;height:0;position:relative}.ML__mathlive .vlist>span>span{display:inline-block}.ML__mathlive .vlist>span>.pstrut{overflow:hidden;width:0}.ML__mathlive .vlist-t2{margin-right:-2px}.ML__mathlive .vlist-s{display:table-cell;font-size:1px;min-width:2px;vertical-align:bottom;width:2px}.ML__mathlive .msubsup{text-align:left}.ML__mathlive .negativethinspace{display:inline-block;height:.71em;margin-left:-.16667em}.ML__mathlive .thinspace{display:inline-block;height:.71em;width:.16667em}.ML__mathlive .mediumspace{display:inline-block;height:.71em;width:.22222em}.ML__mathlive .thickspace{display:inline-block;height:.71em;width:.27778em}.ML__mathlive .enspace{display:inline-block;height:.71em;width:.5em}.ML__mathlive .quad{display:inline-block;height:.71em;width:1em}.ML__mathlive .qquad{display:inline-block;height:.71em;width:2em}.ML__mathlive .llap,.ML__mathlive .rlap{display:inline-block;position:relative;width:0}.ML__mathlive .llap>.inner,.ML__mathlive .rlap>.inner{position:absolute}.ML__mathlive .llap>.fix,.ML__mathlive .rlap>.fix{display:inline-block}.ML__mathlive .llap>.inner{right:0}.ML__mathlive .rlap>.inner{left:0}.ML__mathlive .rule{border:0 solid;box-sizing:border-box;display:inline-block;position:relative}.ML__mathlive .overline .overline-line,.ML__mathlive .underline .underline-line{width:100%}.ML__mathlive .overline .overline-line:before,.ML__mathlive .underline .underline-line:before{border-bottom-style:solid;border-bottom-width:.04em;content:"";display:block}.ML__mathlive .overline .overline-line:after,.ML__mathlive .underline .underline-line:after{border-bottom-style:solid;border-bottom-width:.04em;content:"";display:block;margin-top:-1px;min-height:thin}.ML__mathlive .stretchy{display:block;left:0;overflow:hidden;position:absolute;width:100%}.ML__mathlive .stretchy:after,.ML__mathlive .stretchy:before{content:""}.ML__mathlive .stretchy svg{fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;display:block;height:inherit;position:absolute;width:100%}.ML__mathlive .slice-1-of-2{left:0}.ML__mathlive .slice-1-of-2,.ML__mathlive .slice-2-of-2{display:inline-flex;overflow:hidden;position:absolute;width:50.2%}.ML__mathlive .slice-2-of-2{right:0}.ML__mathlive .slice-1-of-3{display:inline-flex;left:0;overflow:hidden;position:absolute;width:25.1%}.ML__mathlive .slice-2-of-3{display:inline-flex;left:25%;overflow:hidden;position:absolute;width:50%}.ML__mathlive .slice-3-of-3{display:inline-flex;overflow:hidden;position:absolute;right:0;width:25.1%}.ML__mathlive .slice-1-of-1{display:inline-flex;left:0;overflow:hidden;position:absolute;width:100%}.ML__mathlive .nulldelimiter{display:inline-block;width:.12em}.ML__mathlive .op-group{display:inline-block}.ML__mathlive .op-symbol{position:relative}.ML__mathlive .op-symbol.small-op{font-family:KaTeX_Size1}.ML__mathlive .op-symbol.large-op{font-family:KaTeX_Size2}.ML__mathlive .accent>.vlist>span{text-align:center}.ML__mathlive .mtable .vertical-separator{box-sizing:border-box;display:inline-block;min-width:1px}.ML__mathlive .mtable .arraycolsep{display:inline-block}.ML__mathlive .mtable .col-align-m>.vlist-t{text-align:center}.ML__mathlive .mtable .col-align-c>.vlist-t{text-align:center}.ML__mathlive .mtable .col-align-l>.vlist-t{text-align:left}.ML__mathlive .mtable .col-align-r>.vlist-t{text-align:right}.ML__error{background-color:rgba(204,0,65,.1);background-image:radial-gradient(ellipse at center,#cc0041,transparent 70%);background-position:0 100%;background-repeat:repeat-x;background-size:3px 3px;display:inline-block;padding-bottom:3px}.ML__error>.ML__error{background:transparent;padding:0}.ML__composition{background:#fff1c2;color:#000;-webkit-text-decoration:underline var(--caret-color-computed,var(--ML__caret-color));text-decoration:underline var(--caret-color-computed,var(--ML__caret-color))}@media (prefers-color-scheme:dark){.ML__composition{background:#69571c;color:#fff}}.ML__placeholder{color:var(--placeholder-color,var(--ML__placeholder-color));font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;opacity:var(--placeholder-opacity,.4);padding-left:.4ex;padding-right:.4ex}.ML__placeholdercontainer{display:none}.ML__placeholdercontainer math-field{border:1px solid var(--editable-border);border-radius:4px;display:inline-block;min-width:32px;padding-left:4px;padding-right:4px;position:absolute;z-index:1001}.ML__isReadOnly .ML__placeholdercontainer{display:block}.ML__container{min-height:auto!important}';function hn(t){var e;typeof((e=t.listeners)===null||e===void 0?void 0:e.onSelectionDidChange)!="function"||t.suppressChangeNotifications||(t.suppressChangeNotifications=!0,t.listeners.onSelectionDidChange(t),t.suppressChangeNotifications=!1)}function se(t,e={}){if(t.suppressChangeNotifications||!t.mathfield.host)return!0;t.suppressChangeNotifications=!0;const a=t.mathfield.host.dispatchEvent(new InputEvent("beforeinput",{...e,cancelable:!0,bubbles:!0,composed:!0}));return t.suppressChangeNotifications=!1,a}function me(t,e){!t.suppressChangeNotifications&&t.mathfield.host&&(t.suppressChangeNotifications=!0,t.mathfield.host.dispatchEvent(new InputEvent("input",{...e,bubbles:!0,composed:!0})),t.suppressChangeNotifications=!1)}function Ka(t){var e,a;const i=t.atoms.find(o=>o instanceof yt);return i&&(a=(e=i.body)===null||e===void 0?void 0:e.filter(o=>o instanceof fe))!==null&&a!==void 0?a:[]}function mn(t,e){var a;let i=0,o=!1;const r=Number.isFinite(e==null?void 0:e.before)?(a=e==null?void 0:e.before)!==null&&a!==void 0?a:0:t.lastOffset;for(;i<=r&&!o;){const l=t.at(i);o=l instanceof fe&&l.isSuggestion,o||i++}if(!o)return[void 0,void 0];let n=i,s=!1;for(;n<=r&&!s;){const l=t.at(n);s=!(l instanceof fe&&l.isSuggestion),s||n++}return[i-1,n-1]}function Fo(t){const e=Ka(t.model).filter(a=>a.isSuggestion);if(e.length!==0){t.model.position=t.model.offsetOf(e[0].leftSibling);for(const a of e)a.parent.removeChild(a)}}function fi(t,e){var a;const{model:i}=t;Fo(t);for(const u of Ka(i))u.isError=!1;if(!i.selectionIsCollapsed)return void Ma(t);const o=[];let r=i.at(i.position);for(;r&&r instanceof fe&&/^[a-zA-Z\*]$/.test(r.value);)r=r.leftSibling;if(r&&r instanceof fe&&r.value==="\\")for(o.push(r),r=r.rightSibling;r&&r instanceof fe&&/^[a-zA-Z\*]$/.test(r.value);)o.push(r),r=r.rightSibling;const n=o.map(u=>u.value).join(""),s=n?function(u,c){var d,p;if(c==="\\")return[];if(!c.startsWith("\\"))return[];const h=[];for(const b in bt)b.startsWith(c)&&!bt[b].infix&&h.push({match:b,frequency:(d=bt[b].frequency)!==null&&d!==void 0?d:0});for(const b in ft)b.startsWith(c)&&h.push({match:b,frequency:(p=ft[b].frequency)!==null&&p!==void 0?p:0});const m=c.substring(1);for(const b of Object.keys(u.options.macros))b.startsWith(m)&&h.push({match:"\\"+b,frequency:0});return h.sort((b,y)=>{var x,k;return b.frequency===y.frequency?b.match.length===y.match.length?b.match<y.match?-1:1:b.match.length-y.match.length:((x=y.frequency)!==null&&x!==void 0?x:0)-((k=b.frequency)!==null&&k!==void 0?k:0)}),h.map(b=>b.match)}(t,n):[];if(s.length===0)return/^\\[a-zA-Z\*]+$/.test(n)&&o.forEach(u=>{u.isError=!0}),void Ma(t);t.suggestionIndex=(a=e==null?void 0:e.atIndex)!==null&&a!==void 0?a:0,t.suggestionIndex<0&&(t.suggestionIndex=s.length-1);const l=s[t.suggestionIndex%s.length];if(l!==n){const u=o[o.length-1];u.parent.addChildrenAfter([...l.slice(n.length-l.length)].map(c=>new fe(c,t,{isSuggestion:!0})),u),ve(t)}(function(u,c){if(c.length===0||u.options.enablePopover===!1)return void Ma(u);c=c.slice(0,10);let d="<ul>";for(const h of c){const m=h,b=qs(u,h),y=Ks(u.keybindings,m).join("<br>");d+=`<li role="button" data-command="${m}"><span class="ML__popover__latex">${m}</span><span class="ML__popover__command">${b}</span>`,y&&(d+=`<span class="ML__popover__keybinding">${y}</span>`),d+="</li>"}d+="</ul>",u.popover=function(h,m){return h.popover?(h.popover.innerHTML=h.options.createHTML(m),h.popover):(h.popover=rn("mathlive-popover-panel"),Wi===void 0&&(Wi=zt(mr).toString(36)),go=Tt(null,mr,Wi),vo=Tt(null,Bt,zt(Bt).toString(36)),h.popover.innerHTML=h.options.createHTML(m),h.popover)}(u,d);const p=u.popover.querySelectorAll("ul li");for(const h of p)h.addEventListener("pointerdown",m=>{m.preventDefault()}),h.addEventListener("click",m=>{Vt(u,"reject"),ee.insert("math",u.model,h.dataset.command,{selectionMode:"placeholder",format:"latex"}),u.dirty=!0,u.scrollIntoView(),u.focus()});setTimeout(()=>{const h=Sa(u.field);h&&fn(u,h),u.popover&&(u.popover.classList.add("is-visible"),u.popoverVisible=!0)},32)})(t,s)}function fr(t){const[e,a]=mn(t,{before:t.position});if(e===void 0||a===void 0)return!1;let i=!1;return t.getAtoms([e,a]).forEach(o=>{o.isSuggestion&&(o.isSuggestion=!1,i=!0)}),i}function Vt(t,e="accept",a){var i,o;Ma(t);const r=t.model.atoms.find(l=>l instanceof yt);if(!r)return!1;if(e==="accept-suggestion"){const l=Ka(t.model).filter(u=>u.isSuggestion);if(l.length===0)return!1;for(const u of l)u.isSuggestion=!1;return t.model.position=t.model.offsetOf(l[l.length-1]),!0}const n=Ka(t.model).filter(l=>!l.isSuggestion).map(l=>l.value).join(""),s=r.leftSibling;return r.parent.removeChild(r),t.model.position=t.model.offsetOf(s),t.mode=(i=a==null?void 0:a.mode)!==null&&i!==void 0?i:"math",e==="reject"||(ee.insert("math",t.model,n,{selectionMode:(o=a==null?void 0:a.selectItem)!==null&&o!==void 0&&o?"item":"placeholder",format:"latex"}),t.snapshot(),t.model.announce("replacement")),!0}let Wi;new class extends ee{constructor(){super("latex")}createAtom(t,e,a){return new fe(t,e)}onPaste(t,e){if(!e.clipboardData)return!1;let a=e.clipboardData.getData("text/x-latex");return a||(a=e.clipboardData.getData("text/plain")),!(!a||!se(t.model,{inputType:"insertFromPaste",data:a})||(t.snapshot(),this.insert(t.model,a)&&(me(t.model,{inputType:"insertFromPaste"}),ve(t)),e.preventDefault(),e.stopPropagation(),0))}insert(t,e,a){if(!se(t,{data:e,inputType:"insertText"}))return!1;a||(a={}),a.insertionMode||(a.insertionMode="replaceSelection"),a.selectionMode||(a.selectionMode="placeholder");const{suppressChangeNotifications:i}=t;a.suppressChangeNotifications&&(t.suppressChangeNotifications=!0);const o=t.suppressChangeNotifications;t.suppressChangeNotifications=!0,a.insertionMode!=="replaceSelection"||t.selectionIsCollapsed?a.insertionMode==="replaceAll"?(t.root.setChildren([],"body"),t.position=0):a.insertionMode==="insertBefore"?t.collapseSelection("backward"):a.insertionMode==="insertAfter"&&t.collapseSelection("forward"):t.deleteAtoms(at(t.selection));const r=[];for(const l of e)Xn.test(l)&&r.push(new fe(l,t.mathfield));let n=t.at(t.position);if(n instanceof yt&&(n=n.lastChild),!(n.parent instanceof yt)){const l=new yt("",t.mathfield);n.parent.addChildAfter(l,n),n=l.firstChild}const s=n.parent.addChildrenAfter(r,n);return t.suppressChangeNotifications=o,a.selectionMode==="before"||(a.selectionMode==="item"?t.setSelection(t.anchor,t.offsetOf(s)):s&&(t.position=t.offsetOf(s))),me(t,{data:e,inputType:"insertText"}),t.suppressChangeNotifications=i,!0}};let go=null,vo=null;function qs(t,e){const a=t,i=new S("root",a);return i.body=st(e,a,{parseMode:"math"}),jt(qo(Na(new z(i.render(new V({registers:a.registers},{fontSize:5},"displaystyle")),{classes:"ML__base"}))),{classes:"ML__mathlive"}).toMarkup()}function bi(t,e){var a;if(t.element&&t.element.mathfield===t&&t.popover&&t.popoverVisible)if(e!=null&&e.deferred)setTimeout(()=>bi(t),100);else if(((a=t.model.at(t.model.position))===null||a===void 0?void 0:a.type)!=="latex")Ma(t);else{const i=Sa(t.field);i&&fn(t,i)}}function fn(t,e){if(gt(),!t.popover||!t.popoverVisible)return;const a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,o=window.innerWidth-document.documentElement.clientWidth,r=window.innerHeight-document.documentElement.clientHeight,n=t.virtualKeyboard.height;e.x+t.popover.offsetWidth/2>i-o?t.popover.style.left=i-t.popover.offsetWidth-o+"px":e.x-t.popover.offsetWidth/2<0?t.popover.style.left="0":t.popover.style.left=e.x-t.popover.offsetWidth/2+"px",e.y+t.popover.offsetHeight+5>a-r-n?(t.popover.classList.add("ML__popover--reverse-direction"),t.popover.style.top=e.y-e.height-t.popover.offsetHeight-5+"px"):(t.popover.classList.remove("ML__popover--reverse-direction"),t.popover.style.top=`${e.y+5}px`)}function Ma(t){t.suggestionIndex=0,t.popoverVisible=!1,t.popover&&(t.popover.classList.remove("is-visible"),t.popover.innerHTML="")}function Es(t){let e=0;for(let a=0;a<t.length;a++)e=31*e+t.charCodeAt(a),e|=0;return Math.abs(e)}function ve(t,e){t.dirty||(t.dirty=!0,requestAnimationFrame(()=>{Nt(t)&&t.dirty&&(t.atomBoundsCache=new Map,Rt(t,e),t.atomBoundsCache=void 0)}))}function Rt(t,e){var a;if(gt(),!Nt(t))return;e=e??{};const{model:i}=t;i.root.caret="",i.root.isSelected=!1,i.root.containsCaret=!0;for(const l of i.atoms)l.caret="",l.isSelected=!1,l.containsCaret=!1;const o=!t.options.readOnly&&t.hasFocus();if(i.selectionIsCollapsed)i.at(i.position).caret=o?t.mode:"";else{const l=i.getAtoms(i.selection,{includeChildren:!0});for(const u of l)u.isSelected=!0}if(o){let l=i.at(i.position).parent;for(;l;)l.containsCaret=!0,l=l.parent}const r=function(l,u){var c;return u=u??{},jt(Na(l.model.root.render(new V({registers:l.registers,atomIdsSettings:{seed:u.forHighlighting?Es(S.serialize(l.model.root,{expandMacro:!1,defaultMode:l.options.defaultMode})):"random",groupNumbers:(c=u.forHighlighting)!==null&&c!==void 0&&c},renderPlaceholder:l.options.readOnly?(d,p)=>{if(p.placeholderId){const h=l.getPlaceholderField(p.placeholderId);return p.createMathfieldBox(d,h,p.placeholderId)}return p.createBox(d)}:void 0},{fontSize:5,letterShapeStyle:l.options.letterShapeStyle},l.options.defaultMode==="inline-math"?"textstyle":"displaystyle")),l.options.horizontalSpacingScale),{classes:"ML__mathlive",attributes:{translate:"no","aria-hidden":"true"}})}(t,e),n=t.field,s=n.classList.contains("ML__focused");s&&!o?n.classList.remove("ML__focused"):!s&&o&&n.classList.add("ML__focused"),n.innerHTML=t.options.createHTML(r.toMarkup()),t.fieldContent=n.querySelector(".ML__mathlive"),t.accessibleNode.innerHTML=t.options.createHTML('<math xmlns="http://www.w3.org/1998/Math/MathML">'+Z(i.root,t.options)+"</math>"),br(t),t.options.readOnly&&t.attachNestedMathfield(),(a=e.interactive)!==null&&a!==void 0&&a||setTimeout(()=>br(t),32),t.dirty=!1}function br(t){gt();const e=t.field;if(!e)return;for(const r of e.querySelectorAll(".ML__selection, .ML__contains-highlight"))r.remove();if(!t.hasFocus())return;const a=t.model,i=parseFloat(getComputedStyle(e).width);let o=e.getBoundingClientRect().width/i;if(o=isNaN(o)?1:o,a.selectionIsCollapsed){setTimeout(()=>bi(t),32);let r=a.at(a.position);for(;r&&(!r.containsCaret||!r.displayContainsHighlight);)r=r.parent;if(r!=null&&r.containsCaret&&r.displayContainsHighlight){const n=nn(t,Pa(t,r));if(n){n.left/=o,n.right/=o,n.top/=o,n.bottom/=o;const s=document.createElement("div");s.classList.add("ML__contains-highlight"),s.style.position="absolute",s.style.left=`${n.left}px`,s.style.top=`${n.top}px`,s.style.width=`${Math.ceil(n.right-n.left)}px`,s.style.height=`${Math.ceil(n.bottom-n.top-1)}px`,e.insertBefore(s,e.childNodes[0])}}}else for(const r of function(n){let s=[];for(const l of n){let u=!1;for(const c of s)if(l.left===c.left&&l.right===c.right&&l.top===c.top&&l.bottom===c.bottom){u=!0;break}u||s.push(l)}n=s,s=[];for(const l of n){let u=0;for(const c of n)if(l.left>=c.left&&l.right<=c.right&&l.top>=c.top&&l.bottom<=c.bottom&&(u+=1,u>1))break;u===1&&s.push(l)}return s}(ln(t,{excludeAtomsWithBackground:!0}))){r.left/=o,r.right/=o,r.top/=o,r.bottom/=o;const n=document.createElement("div");n.classList.add("ML__selection"),n.style.position="absolute",n.style.left=`${r.left}px`,n.style.top=`${r.top}px`,n.style.width=`${Math.ceil(r.right-r.left)}px`,n.style.height=`${Math.ceil(r.bottom-r.top-1)}px`,e.insertBefore(n,e.childNodes[0])}}const At={};function Ve(t,e){e=e??{target:"mathfield",canUndo:!1};for(const a of Object.keys(t))At[a]={...e,fn:t[a]}}function xo(t){var e;let a;return a=Ce(t)?t[0]:t,a=a.replace(/-\w/g,i=>i[1].toUpperCase()),(e=At[a])===null||e===void 0?void 0:e.target}function Yt(t,e,a){return e+_a(a,{...t,textToSpeechMarkup:"",textToSpeechRulesOptions:{...t.textToSpeechRulesOptions,markup:"none"}})}function Os(t,e){var a,i,o;if(ie()&&(e!=null||(e=(a=$e().config)!==null&&a!==void 0?a:{}),e))if(e.speechEngine&&e.speechEngine!=="local")if(e.speechEngine==="amazon"){if("AWS"in window){const r=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),n={OutputFormat:"mp3",VoiceId:(i=e.speechEngineVoice)!==null&&i!==void 0?i:"Joanna",Engine:["Amy","Emma","Brian","Ivy","Joanna","Kendra","Kimberly","Salli","Joey","Justin","Matthew"].includes((o=e.speechEngineVoice)!==null&&o!==void 0?o:"Joanna")?"neural":"standard",Text:t,TextType:"ssml"};r.synthesizeSpeech(n,(s,l)=>{if(!s){if(l!=null&&l.AudioStream){const u=new Uint8Array(l.AudioStream),c=new Blob([u.buffer],{type:"audio/mpeg"}),d=URL.createObjectURL(c);new Audio(d).play().catch(p=>{})}}})}}else e.speechEngine;else{const r=new SpeechSynthesisUtterance(t);window.speechSynthesis.speak(r)}}function bn(t){if(t&&(t.classList.remove("ML__highlight"),t.children))for(const e of t.children)bn(e)}function ko(t,e){var a;t&&(e&&((a=t.dataset)===null||a===void 0?void 0:a.atomId)!==e?(t.classList.remove("ML__highlight"),t.children&&t.children.length>0&&[...t.children].forEach(i=>{i instanceof HTMLElement&&ko(i,e)})):(t.classList.add("ML__highlight"),t.children&&t.children.length>0&&[...t.children].forEach(i=>{i instanceof HTMLElement&&ko(i)})))}function Ns(t,e,a){var i;if(!ie())return;if(a!=null||(a=$e().config),a.speechEngine!=="amazon")return void(a.speakHook&&a.speakHook(e,a));if(!globalThis.AWS)return;const o=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),r={OutputFormat:"json",VoiceId:(i=a.speechEngineVoice)!==null&&i!==void 0?i:"Joanna",Engine:"standard",Text:e,TextType:"ssml",SpeechMarkTypes:["ssml"]};$e().readAloudElement=t,o.synthesizeSpeech(r,(n,s)=>{if(n||!(s!=null&&s.AudioStream))return;const l=new TextDecoder("utf-8").decode(new Uint8Array(s.AudioStream));$e().readAloudMarks=l.split(`
`).map(u=>u?JSON.parse(u):{}),$e().readAloudTokens=[];for(const u of $e().readAloudMarks)u.value&&$e().readAloudTokens.push(u.value);$e().readAloudCurrentMark="",r.OutputFormat="mp3",r.SpeechMarkTypes=[],o.synthesizeSpeech(r,(u,c)=>{if(u||!(c!=null&&c.AudioStream))return;const d=new Uint8Array(c.AudioStream),p=new Blob([d.buffer],{type:"audio/mpeg"}),h=URL.createObjectURL(p),m=$e();m.readAloudAudio?m.readAloudAudio.pause():(m.readAloudAudio=new Audio,m.readAloudAudio.addEventListener("ended",()=>{const b=m.readAloudMathField;m.readAloudStatus="ended",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),b?(Rt(b),m.readAloudElement=null,m.readAloudMathField=null,m.readAloudTokens=[],m.readAloudMarks=[],m.readAloudCurrentMark=""):bn(m.readAloudElement)}),m.readAloudAudio.addEventListener("timeupdate",()=>{let b="";const y=1e3*m.readAloudAudio.currentTime+100;for(const x of m.readAloudMarks)x.time<y&&(b=x.value);m.readAloudCurrentMark!==b&&(m.readAloudCurrentToken=b,b&&b===m.readAloudFinalToken?m.readAloudAudio.pause():(m.readAloudCurrentMark=b,ko(m.readAloudElement,m.readAloudCurrentMark)))})),m.readAloudAudio.src=h,m.readAloudStatus="playing",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),m.readAloudAudio.play()})})}function wo(t,e){var a,i,o;const r=oa(t,Object.keys(t));for(const n of Object.keys(e))switch(n){case"scriptDepth":if(Ce(e.scriptDepth))r.scriptDepth=[e.scriptDepth[0],e.scriptDepth[1]];else{if(typeof e.scriptDepth!="number")throw new TypeError("Unexpected value for scriptDepth");r.scriptDepth=[e.scriptDepth,e.scriptDepth]}break;case"locale":e.locale==="auto"?r.locale=ie()?navigator.language.slice(0,5):"en":r.locale=e.locale,ae.locale=r.locale;break;case"strings":ae.merge(e.strings),r.strings=ae.strings;break;case"virtualKeyboardLayout":r.virtualKeyboardLayout=e.virtualKeyboardLayout;break;case"virtualKeyboardMode":const s=e.virtualKeyboardMode.toLowerCase();r.virtualKeyboardMode=s==="auto"?no()?"onfocus":"off":s;break;case"customVirtualKeyboardLayers":r.customVirtualKeyboardLayers={...r.customVirtualKeyboardLayers,...e.customVirtualKeyboardLayers};break;case"customVirtualKeyboards":r.customVirtualKeyboards={...r.customVirtualKeyboards,...e.customVirtualKeyboards};break;case"letterShapeStyle":e.letterShapeStyle==="auto"?ae.locale.startsWith("fr")?r.letterShapeStyle="french":r.letterShapeStyle="tex":r.letterShapeStyle=e.letterShapeStyle;break;case"plonkSound":e.plonkSound!==void 0&&(r.plonkSound=e.plonkSound);break;case"keypressSound":e.keypressSound===null?r.keypressSound={default:null,delete:null,return:null,spacebar:null}:typeof e.keypressSound=="string"?r.keypressSound={delete:e.keypressSound,return:e.keypressSound,spacebar:e.keypressSound,default:e.keypressSound}:typeof e.keypressSound=="object"&&"default"in e.keypressSound&&(r.keypressSound={...e.keypressSound},r.keypressSound.delete=(a=r.keypressSound.delete)!==null&&a!==void 0?a:e.keypressSound.default,r.keypressSound.return=(i=r.keypressSound.return)!==null&&i!==void 0?i:e.keypressSound.default,r.keypressSound.spacebar=(o=r.keypressSound.spacebar)!==null&&o!==void 0?o:e.keypressSound.default);break;case"computeEngine":r.computeEngine=e.computeEngine;break;case"virtualKeyboardContainer":r.virtualKeyboardContainer=e.virtualKeyboardContainer;break;case"macros":r.macros=uo(e.macros);break;default:Ce(e[n])?r[n]=[...e[n]]:typeof e[n]=="object"?r[n]={...e[n]}:r[n]=e[n]}return r}function oa(t,e){let a;a=typeof e=="string"?[e]:e===void 0?Object.keys(t):e;const i={};for(const o of a)t[o]===null?i[o]=null:Ce(t[o])?i[o]=[...t[o]]:typeof t[o]!="object"||t[o]instanceof Element||o==="computeEngine"?i[o]=t[o]:i[o]={...t[o]};return typeof e=="string"?i[e]:i}Ve({performWithFeedback:(t,e)=>function(a,i){a.focus(),a.options.keypressVibration&&Ko()&&navigator.vibrate(3),(i=i.replace(/-\w/g,r=>r[1].toUpperCase()))==="moveToNextPlaceholder"||i==="moveToPreviousPlaceholder"||i==="complete"?a.playSound("return"):i==="deleteBackward"||i==="deleteForward"||i==="deletePreviousWord"||i==="deleteNextWord"||i==="deleteToGroupStart"||i==="deleteToGroupEnd"||i==="deleteToMathFieldStart"||i==="deleteToMathFieldEnd"?a.playSound("delete"):a.playSound("keypress");const o=a.executeCommand(i);return a.scrollIntoView(),o}(t,e)}),Ve({complete:Vt,nextSuggestion:function(t){return fi(t,{atIndex:t.suggestionIndex+1}),!1},previousSuggestion:function(t){return fi(t,{atIndex:t.suggestionIndex-1}),!1}},{target:"mathfield",category:"autocomplete"}),Ve({speak:(t,e,a)=>function(i,o,r){var n,s;r=r??{withHighlighting:!1};const{model:l}=i,u=function(p){let h=null;switch(p){case"all":default:h=l.root;break;case"selection":h=l.getAtoms(l.selection);break;case"left":h=l.getAtoms(l.offsetOf(l.at(l.position).leftSibling),l.position);break;case"right":h=l.getAtoms(l.position,l.offsetOf(l.at(l.position).rightSibling));break;case"group":h=l.getAtoms(l.getSiblingsRange(l.position));break;case"parent":{const{parent:m}=l.at(l.position);h=m&&m.type!=="root"?m:l.root;break}}return h}(o);if(u===null)return(s=(n=i.options).speakHook)===null||s===void 0||s.call(n,function(p){let h="";switch(p){case"all":case"group":default:break;case"selection":h="no selection";break;case"left":h="at start";break;case"right":h="at end";break;case"parent":h="no parent"}return h}(o),i.options),!1;const c={...i.options};(r.withHighlighting||c.speechEngine==="amazon")&&(c.textToSpeechMarkup=globalThis.sre&&c.textToSpeechRules==="sre"?"ssml_step":"ssml"),c.textToSpeechMarkup||/firefox/i.test(navigator.userAgent)||(c.textToSpeechMarkup="ssml");const d=_a(u,c);return ie()&&r.withHighlighting?($e().readAloudMathField=i,Rt(i,{forHighlighting:!0}),i.options.readAloudHook&&i.options.readAloudHook(i.field,d,i.options)):i.options.speakHook&&i.options.speakHook(d,c),!1}(t,e,a)},{target:"mathfield",category:"speech"});const yn='<span style="width: 21px; margin-top: 4px;"><svg style="width: 21px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg></span>';function _o(){var t,e,a;return{readOnly:!1,createHTML:i=>i,fontsDirectory:"./fonts",soundsDirectory:"./sounds",computeEngine:void 0,defaultMode:"math",macros:Hr(),registers:{},colorMap:Li,backgroundColorMap:$o,horizontalSpacingScale:1,letterShapeStyle:ae.locale.startsWith("fr")?"french":"tex",smartMode:!1,smartFence:!0,smartSuperscript:!0,scriptDepth:[1/0,1/0],removeExtraneousParentheses:!0,mathModeSpace:"",decimalSeparator:".",fractionNavigationOrder:"numerator-denominator",placeholderSymbol:"▢",enablePopover:!0,locale:ae.locale,strings:ae.strings,keybindings:Ts,inlineShortcuts:tn,inlineShortcutTimeout:0,virtualKeyboardToggleGlyph:yn,virtualKeyboardMode:"auto",virtualKeyboards:"all",virtualKeyboardLayout:"auto",customVirtualKeyboardLayers:{},customVirtualKeyboards:{},virtualKeyboardTheme:ie()&&/android|cros/i.test(navigator.userAgent)?"material":"apple",keypressVibration:!0,keypressSound:null,plonkSound:null,virtualKeyboardToolbar:"default",virtualKeyboardContainer:(e=(t=globalThis.document)===null||t===void 0?void 0:t.body)!==null&&e!==void 0?e:null,useSharedVirtualKeyboard:!1,sharedVirtualKeyboardTargetOrigin:(a=globalThis.window)===null||a===void 0?void 0:a.origin,originValidator:"same-origin",textToSpeechRules:"mathlive",textToSpeechMarkup:"",textToSpeechRulesOptions:{},speechEngine:"local",speechEngineVoice:"Joanna",speechEngineRate:"100%",speakHook:Os,readAloudHook:Ns,onInlineShortcut:()=>"",onExport:vs,value:""}}function Ji(t){return t.defaultMode==="inline-math"?"math":t.defaultMode}var Ui,Xi,yr='@keyframes ML__caret-blink{0%,to{opacity:1}50%{opacity:0}}.ML__caret:after{animation:ML__caret-blink 1.05s step-end infinite forwards;border:none;border-radius:2px;border-right:2px solid var(--caret-color,var(--ML__caret-color));content:"";left:-1px;margin-right:-2px;position:relative}.ML__text-caret:after{animation:ML__caret-blink 1.05s step-end infinite forwards;border:none;border-radius:1px;border-right:1px solid var(--caret-color,var(--ML__caret-color));content:"";left:0;margin-right:-1px;position:relative}.ML__latex-caret:after{animation:ML__caret-blink 1.05s step-end infinite forwards;border:none;color:var(--caret-color,var(--ML__caret-color));content:"_";margin-right:calc(-1ex - 2px);position:relative}.ML__container{--ML__selection-background-color:hsl(var(--hue,212),97%,85%);--ML__text-highlight-background-color:hsla(var(--hue,212),40%,50%,0.1);--ML__contains-highlight-background-color:hsl(var(--hue,212),40%,95%);--ML__selection-color:currentColor;--ML__caret-color:hsl(var(--hue,212),40%,49%);--ML__smart-fence-color:currentColor;--ML__latex-color:var(--primary,hsl(var(--hue,212),40%,50%));--ML__placeholder-color:hsl(var(--hue,212),40%,49%);align-items:flex-end;display:flex;flex-flow:row;isolation:isolate;justify-content:space-between;min-height:39px;touch-action:none;width:100%}@media (prefers-color-scheme:dark){.ML__container{--ML__selection-background-color:hsl(var(--hue,212),25%,45%);--ML__text-highlight-background-color:hsla(var(--hue,212),40%,50%,0.2);--ML__contains-highlight-background-color:hsl(var(--hue,212),5%,34%);--ML__caret-color:hsl(var(--hue,212),60%,69%);--ML__latex-color:var(--primary,hsl(var(--hue,212),40%,50%));--ML__placeholder-color:hsl(var(--hue,212),60%,69%)}}.ML__content{align-items:center;align-self:center;display:flex;overflow:hidden;padding:2px 0 2px 1px;position:relative;width:100%}.ML__virtual-keyboard-toggle{box-sizing:border-box;display:none}.ML__virtual-keyboard-toggle>span{align-items:center;align-self:center;display:flex}.ML__virtual-keyboard-toggle.is-visible{fill:currentColor;align-items:center;align-self:center;background:transparent;border:1px solid transparent;border-radius:8px;color:var(--primary,hsl(var(--hue,212),40%,50%));cursor:pointer;display:flex;flex-direction:column;flex-shrink:0;height:34px;justify-content:center;margin-right:4px;padding:0;transition:background .2s cubic-bezier(.64,.09,.08,1);width:34px}.ML__virtual-keyboard-toggle.is-visible:hover{fill:currentColor;background:hsla(0,0%,70%,.5);border-radius:8px;color:#333}.ML__textarea__textarea{clip:rect(0 0 0 0);border:none;display:inline-block;font-family:KaTeX_Main;font-size:1em;height:1px;outline:none;position:absolute;resize:none;transform:scale(0);width:1px}.ML__focused .ML__text{background:var(--highlight-text,var(--ML__text-highlight-background-color))}.ML__smart-fence__close{color:var(--smart-fence-color,var(--ML__smart-fence-color));opacity:var(--smart-fence-opacity,.5)}.ML__focused .ML__selection{background:var(--selection-background-color-focused,var(--selection-background-color,var(--ML__selection-background-color)))!important}.ML__focused .ML__selected,.ML__focused .ML__selected .ML__contains-caret,.ML__focused .ML__selected .ML__placeholder,.ML__focused .ML__selected .ML__smart-fence__close{color:var(--selection-color-focused,var(--selection-color,var(--ML__selection-color)))!important}.ML__selection{background:var(--selection-background-color,var(--ML__selection-background-color))!important;box-sizing:border-box}.ML__selected,.ML__selected .ML__contains-caret,.ML__selected .ML__placeholder,.ML__selected .ML__smart-fence__close{color:var(--selection-color,var(--ML__selection-color));opacity:1}.ML__contains-caret .ML__sqrt-line,.ML__contains-caret .ML__sqrt-sign,.ML__contains-caret.ML__close,.ML__contains-caret.ML__open,.ML__contains-caret>.ML__close,.ML__contains-caret>.ML__open{color:var(--caret-color,var(--ML__caret-color))}.ML__contains-highlight{background:var(--contains-highlight-backround-color,var(--ML__contains-highlight));box-sizing:border-box}.ML__latex{color:var(--latex-color,var(--ML__latex-color));font-family:IBM Plex Mono,Source Code Pro,Consolas,Roboto Mono,Menlo,Bitstream Vera Sans Mono,DejaVu Sans Mono,Monaco,Courier,monospace;font-weight:400}.ML__suggestion{opacity:.5}.ML__virtual-keyboard-toggle.is-visible.is-pressed:hover{fill:currentColor;background:hsl(var(--hue,212),25%,35%);color:#fafafa}.ML__virtual-keyboard-toggle:focus{border:2px solid var(--primary,hsl(var(--hue,212),40%,50%));border-radius:8px;outline:none}.ML__virtual-keyboard-toggle.is-active,.ML__virtual-keyboard-toggle.is-active:hover,.ML__virtual-keyboard-toggle.is-pressed{fill:currentColor;background:hsl(var(--hue,212),25%,35%);color:#fafafa}.ML__tooltip-container{position:relative;transform:scale(0)}.ML__tooltip-container .ML__tooltip-content{background:#616161;border-radius:8px;box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2);color:#fff;display:inline-table;max-width:400px;opacity:0;padding:12px;position:fixed;transition:opacity .15s cubic-bezier(.4,0,1,1);visibility:hidden;width:max-content;z-index:2}.ML__tooltip-container .ML__tooltip-content .ML__text{white-space:normal}.ML__tooltip-container .ML__tooltip-content .ML__base{display:contents}.ML__tooltip-container:hover .ML__tooltip-content{font-size:.75em;opacity:1;transform:scale(1) translateY(3em);visibility:visible}[data-ML__tooltip]{position:relative}[data-ML__tooltip][data-placement=top]:after{bottom:100%;top:inherit}[data-ML__tooltip]:after{background:#616161;border-radius:2px;box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2);color:#fff;content:attr(data-ML__tooltip);display:none;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:12px;font-weight:400;max-width:200px;opacity:0;padding:8px;position:absolute;right:110%;text-align:center;transform:scale(.5);transition:all .15s cubic-bezier(.4,0,1,1);width:max-content;z-index:2}@media only screen and (max-width:767px){[data-ML__tooltip]:after{font-size:16px;padding:8px 16px}}:not(.tracking) [data-ML__tooltip]:hover{position:relative}:not(.tracking) [data-ML__tooltip]:hover:after{display:inline-table;opacity:1;transform:scale(1);visibility:visible}[data-ML__tooltip][data-delay]:after{transition-delay:0s}[data-ML__tooltip][data-delay]:hover:after{transition-delay:1s}';let Ja=null;function gn(t){if(/^(?:[a-z+]+:)?\/\//i.test(t))return new URL(t).href;if(Ja===null)try{const e=new XMLHttpRequest;e.open("HEAD",Fs,!1),e.send(null),e.status===200&&(Ja=e.responseURL)}catch{}return Ja?new URL(t,Ja).href:""}const Fs=((Xi=(Ui=globalThis==null?void 0:globalThis.document)===null||Ui===void 0?void 0:Ui.currentScript)===null||Xi===void 0?void 0:Xi.src)||function(){const t=String(new Error().stack).replace(/^Error.*\n/,"").split(`
`);if(t.length===0)return"";let e=t[1],a=e.match(/http.*\.ts[\?:]/);return a&&(e=t[2]),a=e.match(/(https?:.*):[0-9]+:[0-9]+/),a||(a=e.match(/at (.*(\.ts))[\?:]/),a||(a=e.match(/at (.*(\.mjs|\.js))[\?:]/))),a?a[1]:""}();async function vn(t){var e;if(ie()&&!document.body.classList.contains("ML__fonts-loading")&&((e=getComputedStyle(document.documentElement).getPropertyValue("--ML__static-fonts"))===null||e===void 0||!e)&&(document.body.classList.remove("ML__fonts-did-not-load"),"fonts"in document)){const a=["KaTeX_Main","KaTeX_Math","KaTeX_AMS","KaTeX_Caligraphic","KaTeX_Fraktur","KaTeX_SansSerif","KaTeX_Script","KaTeX_Typewriter","KaTeX_Size1","KaTeX_Size2","KaTeX_Size3","KaTeX_Size4"],i=Array.from(document.fonts).map(n=>n.family);if(a.every(n=>i.includes(n)))return;const o=gn(t??"./fonts");if(!o)return;document.body.classList.add("ML__fonts-loading");const r=[["KaTeX_Main-Regular"],["KaTeX_Main-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_Main-Bold",{weight:"bold"}],["KaTeX_Main-Italic",{style:"italic"}],["KaTeX_Math-Italic",{style:"italic"}],["KaTeX_Math-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_AMS-Regular"],["KaTeX_Caligraphic-Regular"],["KaTeX_Caligraphic-Bold",{weight:"bold"}],["KaTeX_Fraktur-Regular"],["KaTeX_Fraktur-Bold",{weight:"bold"}],["KaTeX_SansSerif-Regular",{style:"italic"}],["KaTeX_SansSerif-Bold",{weight:"bold"}],["KaTeX_SansSerif-Italic",{style:"italic"}],["KaTeX_Script-Regular"],["KaTeX_Typewriter-Regular"],["KaTeX_Size1-Regular"],["KaTeX_Size2-Regular"],["KaTeX_Size3-Regular"],["KaTeX_Size4-Regular"]].map(n=>function(s,l,u={}){return new FontFace(s,`url(${l}.woff2) format('woff2')`,u)}(n[0].replace(/-[a-zA-Z]+$/,""),o+"/"+n[0],n[1]));try{(await Promise.all(r.map(n=>{try{return n.load()}catch{}}))).forEach(n=>document.fonts.add(n))}catch{document.body.classList.add("ML__fonts-did-not-load")}document.body.classList.remove("ML__fonts-loading")}}function kt(t){return typeof t=="number"&&!Number.isNaN(t)}function yi(t){return Array.isArray(t)&&t.length===2}function ii(t){return t!=null&&typeof t=="object"&&"ranges"in t&&Array.isArray(t.ranges)}const ma={"\\ne":"≠","\\neq":"≠","−":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon","\\varepsilon":"varepsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta","\\vartheta":"vartheta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi","\\varphi":"varphi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega","\\exponentialE":"e","\\imaginaryI":"i","\\imaginaryJ":"j","\\!":" ","\\,":" ","\\:":" ","\\;":" ","\\enskip":" ","\\enspace":" ","\\qquad":" ","\\quad":" "},Gi={"\\pm":"+-","\\times":"xx","\\colon":":","\\vert":"|","\\Vert":"||","\\mid":"|","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"(:","\\rangle":":)"};function ge(t){var e,a,i,o,r,n,s,l,u,c,d,p,h;if(!t)return"";if(Ce(t)){if(t.length===0||(t[0].type==="first"&&(t=t.slice(1)),t.length===0))return"";let x="";if(t[0].mode==="latex")for(const k of t)x+=ge(k);else if(t[0].mode==="text"){let k=0;for(x='"';((e=t[k])===null||e===void 0?void 0:e.mode)==="text";)x+=t[k].body?ge(t[k].body):t[k].value,k++;x+='"'+ge(t.slice(k))}else if(t[0].mode==="math"){let k=0;for(;t[k]&&t[k].mode==="math";)x+=ge(t[k]),k++;x+=ge(t.slice(k))}return x.trim()}if(t.mode==="text")return'"'+t.value+'"';let m="";const{command:b}=t;let y;switch(t.type){case"first":return"";case"group":case"root":m=(a=ma[b])!==null&&a!==void 0?a:ge(t.body);break;case"genfrac":{const w=t;(w.leftDelim||w.rightDelim)&&(m+=w.leftDelim!=="."&&w.leftDelim?w.leftDelim:"{:"),w.hasBarLine?(m+="(",m+=ge(w.above),m+=")/(",m+=ge(w.below),m+=")"):(m+="("+ge(w.above)+"),",m+="("+ge(w.below)+")"),(w.leftDelim||w.rightDelim)&&(m+=w.rightDelim!=="."&&w.rightDelim?w.rightDelim:"{:")}break;case"surd":m+=t.hasEmptyBranch("above")?"sqrt("+ge(t.body)+")":"root("+ge(t.above)+")("+ge(t.body)+")";break;case"latex":m=t.value;break;case"leftright":{const w=t;m+=w.leftDelim!=="."&&w.leftDelim?w.leftDelim:"{:",m+=ge(w.body),m+=w.rightDelim!=="."&&w.rightDelim?w.rightDelim:":}"}break;case"sizeddelim":case"delim":case"overlap":case"overunder":case"box":break;case"mord":m=(o=(i=ma[b])!==null&&i!==void 0?i:b)!==null&&o!==void 0?o:typeof t.value=="string"?t.value:"",m.startsWith("\\")&&(m+=" "),y=b?b.match(/{?\\char"([\dabcdefABCDEF]*)}?/):null,y?m=String.fromCodePoint(Number.parseInt("0x"+y[1])):m.length>0&&m.startsWith("\\")&&(m=typeof t.value=="string"?t.value.charAt(0):t.command);break;case"mbin":case"mrel":case"minner":m=(n=(r=ma[b])!==null&&r!==void 0?r:Gi[b])!==null&&n!==void 0?n:t.value;break;case"mopen":case"mclose":m+=t.value;break;case"mpunct":m=(s=Gi[b])!==null&&s!==void 0?s:b;break;case"mop":t.value!=="​"&&(m="",m+=b==="\\operatorname"?ge(t.body):(l=t.value)!==null&&l!==void 0?l:b,m+=" ");break;case"array":const x=t.array,k=t.environmentName,g=(u={bmatrix:["[","]"],"bmatrix*":["[","]"]}[k])!==null&&u!==void 0?u:["(",")"],f=[];for(const w of x){const T=[];for(const C of w)T.push(g[0]+ge(C)+g[1]);f.push(T.join(","))}const _=(c={bmatrix:["[","]"],"bmatrix*":["[","]"],cases:["{",":}"]}[k])!==null&&c!==void 0?c:["(",")"];m=_[0]+f.join(",")+_[1];break;case"spacing":m=(d=ma[b])!==null&&d!==void 0?d:" ";break;case"enclose":m="("+ge(t.body)+")";break;case"space":m=" ";break;case"msubsup":m="";break;case"macro":m=(h=(p=ma[b])!==null&&p!==void 0?p:Gi[b])!==null&&h!==void 0?h:ge(t.body)}if(!t.hasEmptyBranch("subscript")){m+="_";const x=ge(t.subscript);m+=x.length>1?"("+x+")":x}if(!t.hasEmptyBranch("superscript")){m+="^";const x=ge(t.superscript);m+=x.length>1?"("+x+")":x}return m}function gr(t){let e;if(t.treeBranch==="body")e={enclose:"cross out",leftright:"delimiter",surd:"square root",root:"math field",mop:"operator"}[t.type];else if(t.parent.type==="genfrac"){if(t.treeBranch==="above")return"numerator";if(t.treeBranch==="below")return"denominator"}else t.parent.type==="surd"?t.treeBranch==="above"&&(e="index"):t.treeBranch==="superscript"?e="superscript":t.treeBranch==="subscript"&&(e="subscript");return e??"parent"}class Ps{constructor(e,a,i){this.options=e,this._selection={ranges:[[0,0]],direction:"none"},this._anchor=0,this._position=0,this.mathfield=i,this.suppressChangeNotifications=!1,this.root=new S("root",i,{mode:e.mode}),this.root.body=[],this.setListeners(a)}get atoms(){return this.root.children}get selection(){return this._selection}set selection(e){this.setSelection(e)}setSelection(e,a){return this.deferNotifications({selection:!0},()=>{const i=this.normalizeSelection(e,a);if(i===void 0)throw new TypeError("Invalid selection");if(i.ranges.length===1&&i.ranges[0][0]===i.ranges[0][1]){const o=i.ranges[0][0];this._position=o,this._anchor=o,this._selection=i}else{const o=at(i);i.direction==="backward"?[this._position,this._anchor]=o:[this._anchor,this._position]=o;const r=this.at(o[0]+1),n=this.at(o[1]),s=S.commonAncestor(r,n);(s==null?void 0:s.type)==="array"&&r.parent===s&&n.parent,this._selection={ranges:[o],direction:i.direction}}})}setPositionHandlingPlaceholder(e){var a,i,o;((a=this.at(e))===null||a===void 0?void 0:a.type)==="placeholder"?this.setSelection(e-1,e):((o=(i=this.at(e))===null||i===void 0?void 0:i.rightSibling)===null||o===void 0?void 0:o.type)==="placeholder"?this.setSelection(e,e+1):this.position=e}getState(){return{content:this.root.toJson(),selection:this.selection}}setState(e,a){var i;const o=this.suppressChangeNotifications;this.suppressChangeNotifications=(i=a==null?void 0:a.suppressChangeNotifications)===null||i===void 0||i;let r={};(a==null?void 0:a.type)==="undo"&&(r={inputType:"historyUndo"}),(a==null?void 0:a.type)==="redo"&&(r={inputType:"historyRedo"}),se(this,r)&&(this.root=nt(e.content,this.mathfield),this.selection=e.selection,me(this,r)),this.suppressChangeNotifications=o}get position(){return this._position}set position(e){this.setSelection(e,e)}get anchor(){return this._anchor}get selectionIsCollapsed(){return this._anchor===this._position}get selectionIsPlaceholder(){return Math.abs(this._anchor-this._position)===1&&this.at(Math.max(this._anchor,this._position)).type==="placeholder"}collapseSelection(e="forward"){return this._anchor!==this._position&&(this.position=e==="backward"?Math.min(this._anchor,this._position):Math.max(this._anchor,this._position),!0)}get lastOffset(){return this.atoms.length-1}at(e){return this.atoms[e]}offsetOf(e){return this.atoms.indexOf(e)}getSiblingsRange(e){const a=this.at(e),{parent:i}=a;if(!i)return[0,this.lastOffset];const o=a.parent.branch(a.treeBranch);return[this.offsetOf(o[0]),this.offsetOf(o[o.length-1])]}getBranchRange(e,a){const i=this.at(e).branch(a);return[this.offsetOf(i[0]),this.offsetOf(i[i.length-1])]}getAtoms(e,a,i){var o,r;let n,s,l=i??{};if(ii(e)){if(l=(o=a)!==null&&o!==void 0?o:{},e.ranges.length>1)return e.ranges.reduce((p,h)=>[...p,...this.getAtoms(h,l)],[]);e=e.ranges[0]}if(kt(e)){if(n=e,!kt(a))return[];s=a}else[n,s]=e,l=(r=a)!==null&&r!==void 0?r:{};if(!Number.isFinite(n))return[];l.includeChildren===void 0&&(l.includeChildren=!1),n<0&&(n=this.lastOffset-n+1),s<0&&(s=this.lastOffset-s+1);const u=Math.min(n,s)+1,c=Math.max(n,s);if(u===1&&c===this.lastOffset)return[this.root];let d=[];for(let p=u;p<=c;p++){const h=this.atoms[p];vr(this,h,u,c)&&d.push(h)}return l.includeChildren||(d=d.filter(p=>{let h=!1,{parent:m}=p;for(;m&&!h;)h=vr(this,m,u,c),m=m.parent;return!h})),d}getAllAtoms(e){const a=[],i=this.lastOffset;for(let o=e;o<=i;o++)a.push(this.atoms[o]);for(let o=0;o<e;o++)a.push(this.atoms[o]);return a}extractAtoms(e){let a=this.getAtoms(e);a.length===1&&a[0].type==="root"&&(a=a[0].children);for(const i of a)i.parent.removeChild(i);return a}deleteAtoms(e){this.extractAtoms(e),this.position=e[0]}atomToString(e,a){const i=a??"latex";if(i.startsWith("latex"))return Ze.serialize([e],{expandMacro:i==="latex-expanded",skipStyles:i==="latex-unstyled",defaultMode:this.mathfield.options.defaultMode});if(i==="math-ml")return Z(e,this.mathfield.options);if(i==="spoken")return _a(e,this.mathfield.options);if(i==="spoken-text"){const o=this.mathfield.options.textToSpeechMarkup;this.mathfield.options.textToSpeechMarkup="";const r=_a(e,this.mathfield.options);return this.mathfield.options.textToSpeechMarkup=o,r}if(i==="spoken-ssml"||i==="spoken-ssml-with-highlighting"){const o=this.mathfield.options.textToSpeechMarkup;this.mathfield.options.textToSpeechMarkup="ssml";const r=_a(e,this.mathfield.options);return this.mathfield.options.textToSpeechMarkup=o,r}if(i==="math-json"){if(!this.mathfield.computeEngine)return"";try{const o=this.mathfield.computeEngine.parse(S.serialize(e,{expandMacro:!1,defaultMode:"math"}));return JSON.stringify(o.json)}catch(o){return JSON.stringify(["Error","Nothing",`'${o.toString()}'`])}}return i==="ascii-math"?ge(e):""}getValue(e,a,i){if(e===void 0)return this.atomToString(this.root,"latex");if(typeof e=="string")return this.atomToString(this.root,e);let o,r;if(kt(e)&&kt(a)?(o=[this.normalizeRange([e,a])],r=i??"latex"):yi(e)?(o=[this.normalizeRange(e)],r=a):ii(e)?(o=e.ranges,r=a):(o=[],r="latex"),r.startsWith("latex")){const n={expandMacro:r==="latex-expanded",skipStyles:r==="latex-unstyled",defaultMode:this.mathfield.options.defaultMode};return he(o.map(s=>S.serialize(this.getAtoms(s),n)))}return o.map(n=>this.getAtoms(n).map(s=>this.atomToString(s,r)).join("")).join("")}extendSelection(e){let a=this._anchor;if(e==="forward"){let o=this._position;do{let r=this.at(o+1);if(r!=null&&r.inCaptureSelection){for(;!r.captureSelection;)r=r.parent;o=this.offsetOf(r==null?void 0:r.lastChild)+1}else o+=1}while(o<=this.lastOffset&&this.at(o).isFirstSibling);return o===a-1&&this.at(a).type==="first"&&(o=a),this.extendSelectionTo(a,o)}let i=this._position-1;if(i<0)return!1;for(;i>=0&&this.at(i).isLastSibling;){let o=this.at(i);if(o!=null&&o.inCaptureSelection){for(;!o.captureSelection;)o=o.parent;i=this.offsetOf(o.firstChild)-1}else i-=1}return i<0&&(i=0),i===a+1&&this.at(i).type==="first"&&(a=i),this.extendSelectionTo(a,i)}extendSelectionTo(e,a){return this.deferNotifications({selection:!0},()=>{const i=this.normalizeRange([e,a]);let[o,r]=i,{parent:n}=this.at(r);if(n&&(n.type==="genfrac"||n.type==="msubsup"))for(;n!==this.root&&Zi(this,n,[o,r]);)r=this.offsetOf(n),n=n.parent;for(n=this.at(o).parent;n!==this.root&&Zi(this,n,[o,r]);)o=this.offsetOf(n.leftSibling),n=n.parent;if(n=this.at(r).parent,(n==null?void 0:n.type)==="genfrac")for(;n!==this.root&&Zi(this,n,[o,r]);)r=this.offsetOf(n),n=n.parent;this._position=this.normalizeOffset(a),this._selection={ranges:[[o,r]],direction:"none"}})}setListeners(e){this.listeners=e}announce(e,a,i=[]){var o,r;(r=(o=this.mathfield.host)===null||o===void 0?void 0:o.dispatchEvent(new CustomEvent("announce",{detail:{command:e,previousPosition:a,atoms:i},cancelable:!0,bubbles:!0,composed:!0})))===null||r===void 0||r||function(n,s,l,u){let c="";s==="plonk"?(n.playSound("plonk"),n.flushInlineShortcutBuffer()):s==="delete"?c=Yt(n.options,"deleted: ",u):s==="focus"||s.includes("move")?c=function(p,h){if(Number.isNaN(h))return"";const m=p.at(h);if(!m||m.treeDepth<=p.at(p.position).treeDepth)return"";let b="",y=m.parent;const x=p.at(p.position).parent;for(;y!==p.root&&y!==x;)b+=`out of ${gr(y)};`,y=y.parent;return b}(n.model,l)+(n.model.selectionIsCollapsed?"":"selected: ")+function(p,h){if(!p.selectionIsCollapsed)return Yt(h,"",p.getAtoms(p.selection));let m="";const b=p.at(p.position),y=gr(b);return b.isFirstSibling&&(m=(y?"start of "+y:"unknown")+": "),b.isLastSibling?b.isFirstSibling||(m+=y?"end of "+y:"unknown"):m+=Yt(h,"",b),m}(n.model,n.options):s==="replacement"?c=Yt(n.options,"",n.model.at(n.model.position)):s==="line"?(c=Yt(n.options,"",n.model.root),n.keyboardDelegate.setAriaLabel("after: "+c)):c=u?Yt(n.options,s+" ",u):s;const d=n.ariaLiveText.textContent.includes(" ")?"   ":"   ";n.ariaLiveText.textContent=c+d}(this.mathfield,e,a,i)}deferNotifications(e,a){const i=this._selection,o=this._anchor,r=this._position,n=this.suppressChangeNotifications;this.suppressChangeNotifications=!0;const s=this.root.changeCounter;a();const l=this.root.changeCounter!==s,u=o!==this._anchor||r!==this._position||function(c,d){if(c.direction===d.direction){const p=c.ranges.length;if(d.ranges.length===p){let h=0;for(;h<p&&gs(c.ranges[h],d.ranges[h])==="equal";)h++;return h===p?"equal":"different"}}return"different"}(this._selection,i)==="different";return this.suppressChangeNotifications=n,e.content&&l&&me(this,{data:e.data,inputType:e.type}),e.selection&&u&&hn(this),l||u}normalizeOffset(e){return e>0?e=Math.min(e,this.lastOffset):e<0&&(e=this.lastOffset+e+1),e}normalizeRange(e){let[a,i]=e;return a=this.normalizeOffset(a),i=this.normalizeOffset(i),a<i?[a,i]:[i,a]}normalizeSelection(e,a){var i;let o;if(kt(e)){const r=this.normalizeOffset(e);if(kt(a)){const n=this.normalizeOffset(a);o=r<=n?{ranges:[[r,n]],direction:"none"}:{ranges:[[n,r]],direction:"backward"}}else o={ranges:[[r,r]],direction:"none"}}else if(yi(e)){const r=this.normalizeOffset(e[0]),n=this.normalizeOffset(e[1]);o=r<=n?{ranges:[[r,n]],direction:"none"}:{ranges:[[n,r]],direction:"backward"}}else ii(e)&&(o={ranges:e.ranges.map(r=>this.normalizeRange(r)),direction:(i=e.direction)!==null&&i!==void 0?i:"none"});return o}}function vr(t,e,a,i){const o=t.offsetOf(e);if(o<a||o>i)return!1;if(!e.hasChildren)return!0;const r=t.offsetOf(e.firstChild);if(r>=a&&r<=i){const n=t.offsetOf(e.lastChild);if(n>=a&&n<=i)return!0}return!1}function Zi(t,e,a){if(!(e!=null&&e.hasChildren))return!1;const[i,o]=a,r=t.offsetOf(e.firstChild),n=t.offsetOf(e.lastChild);return r>=i&&r<=o&&n>=r&&n<=o}function gi(t,e){let a=t.at(t.position);for(;a&&!(Array.isArray(a.treeBranch)&&a.parent instanceof re);)a=a.parent;if(Array.isArray(a==null?void 0:a.treeBranch)&&(a==null?void 0:a.parent)instanceof re){const i=a.parent;let o;switch(e){case"after row":i.addRowAfter(a.treeBranch[0]),o=t.offsetOf(i.getCell(a.treeBranch[0]+1,0)[0]);break;case"after column":if(i.maxColumns<=i.colCount)return void t.announce("plonk");i.addColumnAfter(a.treeBranch[1]),o=t.offsetOf(i.getCell(a.treeBranch[0],a.treeBranch[1]+1)[0]);break;case"before row":i.addRowBefore(a.treeBranch[0]),o=t.offsetOf(i.getCell(a.treeBranch[0]-1,0)[0]);break;case"before column":if(i.maxColumns<=i.colCount)return void t.announce("plonk");i.addColumnBefore(a.treeBranch[1]),o=t.offsetOf(i.getCell(a.treeBranch[0],a.treeBranch[1]-1)[0])}t.setSelection(o,o+1)}}function xn(t){return!!se(t,{inputType:"insertText"})&&(gi(t,"after row"),me(t,{inputType:"insertText"}),!0)}function kn(t){return!!se(t,{inputType:"insertText"})&&(gi(t,"after column"),me(t,{inputType:"insertText"}),!0)}function xr(t,e){let a=t.at(t.position);for(;a&&!(Array.isArray(a.treeBranch)&&a.parent instanceof re);)a=a.parent;if(Array.isArray(a==null?void 0:a.treeBranch)&&(a==null?void 0:a.parent)instanceof re){const i=a.parent,o=a.treeBranch;let r;switch(e){case"row":if(i.rowCount>1){i.removeRow(o[0]);const n=i.getCell(Math.max(0,o[0]-1),o[1]);r=t.offsetOf(n[n.length-1])}break;case"column":if(i.colCount>i.minColumns){i.removeColumn(o[1]);const n=i.getCell(o[0],Math.max(0,o[1]-1));r=t.offsetOf(n[n.length-1])}}r&&t.setPositionHandlingPlaceholder(r)}}function fa(t,e,a,i){var o,r,n,s,l,u;const c=a.parent;if(a instanceof ze){const d=!i&&e==="forward"||i==="body"&&e==="backward";let p=d?t.offsetOf(a.firstChild):t.offsetOf(a.lastChild);return d?a.rightDelim!=="?"&&a.rightDelim!=="."?(a.leftDelim=".",a.isDirty=!0):(c.addChildrenAfter(a.removeBranch("body"),a),c.removeChild(a),p--):a.leftDelim!=="?"&&a.leftDelim!=="."?(a.rightDelim=".",a.isDirty=!0):(c.addChildrenAfter(a.removeBranch("body"),a),c.removeChild(a),p--),t.position=p,!0}if(a.type==="surd"){if(e==="forward"&&!i||e==="backward"&&i==="body"){const d=a.leftSibling;a.hasChildren&&c.addChildrenAfter(a.removeBranch("body"),a),c.removeChild(a),t.position=t.offsetOf(d)}else e==="forward"&&i==="body"?t.position=t.offsetOf(a):i||e!=="backward"?i==="above"&&(a.hasEmptyBranch("above")&&a.removeBranch("above"),t.position=e==="backward"?t.offsetOf(a.leftSibling):t.offsetOf(a.body[0])):a.hasChildren?t.position=t.offsetOf(a.lastChild):(t.position=Math.max(0,t.offsetOf(a)-1),c.removeChild(a));return!0}if(a.type==="box"||a.type==="enclose"){const d=i&&e==="backward"||!i&&e==="forward"?a.leftSibling:a.lastChild;return c.addChildrenAfter(a.removeBranch("body"),a),c.removeChild(a),t.position=t.offsetOf(d),!0}if(a.type==="genfrac"||a.type==="overunder"){if(!i)return!(a.type==="overunder"&&a.hasEmptyBranch("body")||a.type==="genfrac"&&a.hasEmptyBranch("below")&&a.hasEmptyBranch("above")||(t.position=t.offsetOf(e==="forward"?a.firstChild:a.lastChild),0));const d=a.context.fractionNavigationOrder==="numerator-denominator"?"above":"below",p=d==="above"?"below":"above";if(e==="forward"&&i===d||e==="backward"&&i===p){const h=a.removeBranch(d),m=a.removeBranch(p);return c.addChildrenAfter([...h,...m],a),c.removeChild(a),t.position=t.offsetOf(h.length>0?h[h.length-1]:m[0]),!0}return e==="backward"?(t.position=t.offsetOf(a.leftSibling),!0):(t.position=t.offsetOf(a),!0)}if(a.isExtensibleSymbol||a.type==="msubsup"){if(!i&&e==="forward")return!1;if(!i){if(a.subscript||a.superscript){const d=e==="forward"?(r=(o=a.superscript)===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:(n=a.subscript)===null||n===void 0?void 0:n[0]:(l=(s=a.subscript)===null||s===void 0?void 0:s[0].lastSibling)!==null&&l!==void 0?l:(u=a.superscript)===null||u===void 0?void 0:u[0].lastSibling;return d&&(t.position=t.offsetOf(d)),!0}return!1}if(i&&a.hasEmptyBranch(i)&&a.removeBranch(i),!a.hasChildren){const d=e==="forward"?t.offsetOf(a):Math.max(0,t.offsetOf(a)-1);return a.parent.removeChild(a),t.position=d,!0}if(i==="superscript")if(e==="backward"){const d=t.offsetOf(a.firstChild)-1;t.position=d}else a.subscript?t.position=t.offsetOf(a.subscript[0]):t.position=t.offsetOf(a);else i==="subscript"&&(e==="backward"&&a.superscript?t.position=t.offsetOf(a.superscript[0].lastSibling):t.position=e==="backward"?t.offsetOf(a.firstChild)-1:t.offsetOf(a));return!0}return!1}function ct(t,e,a){const i=t.getAtoms(e);if(i.length>0&&i[0].parent){let o=i[0].parent.firstChild;o.type==="first"&&(o=o.rightSibling);const r=i[i.length-1].parent.lastChild;let n=i[0];n.type==="first"&&(n=n.rightSibling);const s=i[i.length-1];if(n===o&&s===r){const l=i[0].parent;l.type!=="root"&&(e=[t.offsetOf(l.leftSibling),t.offsetOf(l.rightSibling)])}}return t.deferNotifications({content:!0,selection:!0,type:a},()=>t.deleteAtoms(e))}function wn(t,e){const a=t.at(e);let i;if(a){i=a.mode;let o=a.parent;for(;!i&&o;)o&&(i=o.mode),o=o.parent}return i}function wt(t,e){t&&e&&(Ce(t)?t.forEach(a=>wt(a,e)):typeof t=="object"&&(t.style.color||t.style.backgroundColor||t.style.fontFamily||t.style.fontShape||t.style.fontSeries||t.style.fontSize||t.style.variant||t.style.variantStyle||(t.applyStyle(e),wt(t.body,e),wt(t.above,e),wt(t.below,e),wt(t.subscript,e),wt(t.superscript,e))))}function So(t,e,a,i){function o(n,s){for(const l of r)if(l.style[n]!==s)return!1;return!0}if((e=t.normalizeRange(e))[0]===e[1])return!1;const r=t.getAtoms(e,{includeChildren:!0});i.operation==="toggle"&&(a.color&&o("color",a.color)&&(a.color="none",a.verbatimColor=void 0),a.backgroundColor&&o("backgroundColor",a.backgroundColor)&&(a.backgroundColor="none",a.verbatimBackgroundColor=void 0),a.fontFamily&&o("fontFamily",a.fontFamily)&&(a.fontFamily="none"),a.fontSeries&&o("fontSeries",a.fontSeries)&&(a.fontSeries="auto"),a.fontShape&&o("fontShape",a.fontShape)&&(a.fontShape="auto"),a.fontSize&&o("fontSize",a.fontSize)&&(a.fontSize=5));for(const n of r)n.applyStyle(a);return!0}function Mo(t,e,a){if(t.at(e).mode!=="text")return e;const i=a==="backward"?-1:1;let o;if(si.test(t.at(e).value)){let r,n=e;do r=t.at(n).mode==="text"&&si.test(t.at(n).value),n+=i;while(t.at(n)&&r);o=t.at(n)?n-2*i:n-i}else if(/\s/.test(t.at(e).value)){let r=e;for(;t.at(r)&&t.at(r).mode==="text"&&/\s/.test(t.at(r).value);)r+=i;if(t.at(r)){let n=!0;do n=t.at(r).mode==="text"&&!/\s/.test(t.at(r).value),r+=i;while(t.at(r)&&n);o=t.at(r)?r-2*i:r-i}else o=r-i}else{let r=e;for(;t.at(r)&&t.at(r).mode==="text"&&!/\s/.test(t.at(r).value);)r+=i;o=t.at(r)?r:r-i;let n=!0;for(;t.at(r)&&n;)n=t.at(r).mode==="text"&&/\s/.test(t.at(r).value),n&&(o=r),r+=i;o=t.at(r)?r-2*i:r-i}return o-(i>0?0:1)}function Qt(t,e,a){var i,o,r,n,s,l,u;const c=t.position;(i=a==null?void 0:a.extend)!==null&&i!==void 0&&i||t.collapseSelection(e);let d=t.at(t.position);if(e==="forward"&&(d.type==="msubsup"?(d=d.rightSibling,d||(d=t.at(t.position+1))):d=t.at(t.position+1)),!d)return t.announce("plonk"),!1;let p=t.offsetOf(d);if(d instanceof Jt)p=Mo(t,p,e);else if(d instanceof fe)if(d.isSuggestion)for(;d&&d instanceof fe;)d.isSuggestion=!1,p=t.offsetOf(d),d=d.rightSibling;else if(e==="forward"){if(d=d.rightSibling,!(d&&d instanceof fe))return t.announce("plonk"),!1;for(;d&&d instanceof fe&&/[a-zA-Z\*]/.test(d.value);)p=t.offsetOf(d),d=d.rightSibling}else{if(d=d.leftSibling,!(d&&d instanceof fe))return t.announce("plonk"),!1;for(;d&&d instanceof fe&&/[a-zA-Z\*]/.test(d.value);)p=t.offsetOf(d),d=d.leftSibling}else if(e==="forward"&&d.type==="mopen"){let h=0;do d.type==="mopen"?h+=1:d.type==="mclose"&&(h-=1),d=d.rightSibling;while(!d.isLastSibling&&h!==0);p=t.offsetOf(d.leftSibling)}else if(e==="backward"&&d.type==="mclose"){let h=0;do d.type==="mopen"?h+=1:d.type==="mclose"&&(h-=1),d=d.leftSibling;while(!d.isFirstSibling&&h!==0);p=t.offsetOf(d)}else if(e==="backward")if(d.type==="first")for(;p>0&&d.type==="first";)p-=1,d=t.at(p);else{const h=d.type;d.type==="msubsup"&&(p=t.offsetOf(t.at(p).leftSibling)),p-=1;let m=(o=t.at(p))===null||o===void 0?void 0:o.type;for(;p>=0&&m===h;)((r=t.at(p))===null||r===void 0?void 0:r.type)==="msubsup"?p=t.offsetOf(t.at(p).leftSibling):p-=1,m=t.at(p).type}else{const{type:h}=d;let m=(n=t.at(p))===null||n===void 0?void 0:n.type;const{lastOffset:b}=t;for(;p<=b&&(m===h||m==="msubsup");){for(;((s=t.at(p).rightSibling)===null||s===void 0?void 0:s.type)==="msubsup";)p=t.offsetOf(t.at(p).rightSibling);p+=1,m=(l=t.at(p))===null||l===void 0?void 0:l.type}p-=1}if((u=a==null?void 0:a.extend)!==null&&u!==void 0&&u){if(!t.setSelection(t.anchor,p))return t.announce("plonk"),!1}else{if(p===t.position)return t.announce("plonk"),!1;t.position=p}return t.announce("move",c),!0}function ht(t,e,a){var i,o,r,n,s,l,u,c;if(a=a??{extend:!1},e!=="forward"){const[p,h]=mn(t);p!==void 0&&h!==void 0&&t.deleteAtoms([p,h])}if(e==="upward")return function(p,h){var m,b,y,x;const k=(m=h==null?void 0:h.extend)!==null&&m!==void 0&&m;k||p.collapseSelection("backward");const g=p.at(p.position);let f=g;for(;f&&f.treeBranch!=="below"&&!(Array.isArray(f.treeBranch)&&f.parent instanceof re);)f=f.parent;if(Array.isArray(f==null?void 0:f.treeBranch)&&f.parent instanceof re){const _=f.parent,w=Math.max(0,f.treeBranch[0]-1);Ua(p,g,_.array[w][f.treeBranch[1]],k,"up")}else{if(!f){let _=!0;return p.suppressChangeNotifications||(_=(x=(y=p.mathfield.host)===null||y===void 0?void 0:y.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"upward"},cancelable:!0,bubbles:!0,composed:!0})))===null||x===void 0||x),p.announce(_?"plonk":"line"),_}Ua(p,g,(b=f.parent.branch("above"))!==null&&b!==void 0?b:f.parent.createBranch("above"),k,"up")}return!0}(t,a);if(e==="downward")return function(p,h){var m,b,y,x;const k=(m=h==null?void 0:h.extend)!==null&&m!==void 0&&m;k||p.collapseSelection("forward");const g=p.at(p.position);let f=g;for(;f&&f.treeBranch!=="above"&&!(Array.isArray(f.treeBranch)&&f.parent instanceof re);)f=f.parent;if(Array.isArray(f==null?void 0:f.treeBranch)&&f.parent instanceof re){const _=f.parent,w=Math.min(_.array.length-1,f.treeBranch[0]+1);Ua(p,g,_.array[w][f.treeBranch[1]],k,"down")}else{if(!f){let _=!0;return p.suppressChangeNotifications||(_=(x=(y=p.mathfield.host)===null||y===void 0?void 0:y.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"downward"},cancelable:!0,bubbles:!0,composed:!0})))===null||x===void 0||x),p.announce(_?"plonk":"line"),_}Ua(p,g,(b=f.parent.branch("below"))!==null&&b!==void 0?b:f.parent.createBranch("below"),k,"down")}return!0}(t,a);const d=t.position;if(a.extend)return t.extendSelection(e);if(t.selectionIsPlaceholder)return t.collapseSelection(e),ht(t,e);if(!t.collapseSelection(e)){let p=t.position+(e==="forward"?1:-1),h=t.at(p);if(p>=0&&p<=t.lastOffset){if(e==="forward")if(h.inCaptureSelection){for(;!h.captureSelection;)h=h.parent;p=t.offsetOf(h)}else if(!h.isFirstSibling&&h.isLastSibling&&(!((i=h.parent)===null||i===void 0)&&i.skipBoundary)){if(p+1!==t.lastOffset)return t.position=p,ht(t,"forward",a);p+=1}else!((o=h.parent)===null||o===void 0)&&o.skipBoundary&&(!((r=h.rightSibling)===null||r===void 0)&&r.isLastSibling)?p+=2:!((n=h.parent)===null||n===void 0)&&n.skipBoundary&&h.type==="first"?p+=1:h instanceof fe&&h.isSuggestion&&(h.isSuggestion=!1);else if(e==="backward")if(!((s=h.parent)===null||s===void 0)&&s.inCaptureSelection){for(;!h.captureSelection;)h=h.parent;p=Math.max(0,t.offsetOf(h.leftSibling))}else(h.skipBoundary||!((l=h.parent)===null||l===void 0)&&l.skipBoundary&&h.type==="first")&&(p=Math.max(0,t.position-2))}if(p<0||p>t.lastOffset){let m=!0;return t.suppressChangeNotifications||(m=(c=(u=t.mathfield.host)===null||u===void 0?void 0:u.dispatchEvent(new CustomEvent("move-out",{detail:{direction:e},cancelable:!0,bubbles:!0,composed:!0})))===null||c===void 0||c),m&&t.announce("plonk"),m}t.setPositionHandlingPlaceholder(p)}return t.announce("move",d),!0}function Ua(t,e,a,i,o){const r=cr(t.mathfield.getHTMLElement(e)).right,n=t.offsetOf(function(s,l,u){let c=1/0,d=0;for(;d<l.length;d++){const p=cr(s.getHTMLElement(l[d])).right,h=Math.abs(u-p);if(!(h<=c))break;c=h}return l[d-1]}(t.mathfield,a,r));if(i){const[s,l]=t.selection.ranges[0];let u;u=n<(o==="up"?s:l)?{ranges:[[n,l]],direction:"backward"}:{ranges:[[s,n]],direction:"forward"},t.setSelection(u)}else t.setPositionHandlingPlaceholder(n);t.announce(`move ${o}`)}function _n(t){const e=t.position,a=t.at(e).parent;return a&&a.type!=="root"?(t.position=t.offsetOf(a),t.announce("move",e),!0):(t.announce("plonk"),!1)}function kr(t){var e;if(t.collapseSelection(),function(i){let o=0,r=i.at(i.position),n=!1;for(;r;)r.hasEmptyBranch("superscript")&&r.hasEmptyBranch("subscript")||(o+=1),r.hasEmptyBranch("superscript")?r.hasEmptyBranch("subscript")||(n=!1):n=!0,r=r.parent;return n?o:0}(t)>=t.mathfield.options.scriptDepth[1])return t.announce("plonk"),!1;let a=t.at(t.position);return a.subsupPlacement===void 0&&(((e=a.rightSibling)===null||e===void 0?void 0:e.type)!=="msubsup"&&a.parent.addChildAfter(new sa(t.mathfield,{style:a.computedStyle}),a),a=a.rightSibling),a.createBranch("superscript"),t.setSelection(t.getSiblingsRange(t.offsetOf(a.superscript[0]))),!0}function wr(t){var e;if(t.collapseSelection(),function(i){let o=0,r=i.at(i.position),n=!1;for(;r;)r.hasEmptyBranch("superscript")&&r.hasEmptyBranch("subscript")||(o+=1),r.hasEmptyBranch("superscript")?r.hasEmptyBranch("subscript")||(n=!0):n=!1,r=r.parent;return n?o:0}(t)>=t.mathfield.options.scriptDepth[0])return t.announce("plonk"),!1;let a=t.at(t.position);return a.subsupPlacement===void 0&&(((e=t.at(t.position+1))===null||e===void 0?void 0:e.type)!=="msubsup"&&a.parent.addChildAfter(new sa(t.mathfield,{style:t.at(t.position).computedStyle}),a),a=t.at(t.position+1)),a.createBranch("subscript"),t.setSelection(t.getSiblingsRange(t.offsetOf(a.subscript[0]))),!0}function _r(t,e,a=!0){var i,o;const r=e==="forward"?1:-1;t.at(t.anchor).type==="placeholder"&&ht(t,e);const n=t.getAllAtoms(Math.max(t.position+r,0));e==="backward"&&n.reverse();const s=n.filter(d=>d.type==="placeholder"||d.treeDepth>2&&d.isFirstSibling&&d.isLastSibling);if(s.length===0){if(!a||(o=(i=t.mathfield.host)===null||i===void 0?void 0:i.dispatchEvent(new CustomEvent("focus-out",{detail:{direction:e},cancelable:!0,bubbles:!0,composed:!0})))!==null&&o!==void 0&&!o)return t.announce("plonk"),!1;const d=function(){function h(b){return!((y=b).disabled||y.type==="hidden"&&y.tagName.toUpperCase()==="INPUT"||function(x){if(!ie()||x===document.activeElement||x.contains(document.activeElement))return!1;if(getComputedStyle(x).visibility==="hidden")return!0;const k=x.getBoundingClientRect();if(k.width===0||k.height===0)return!0;for(;x;){if(getComputedStyle(x).display==="none")return!0;x=x.parentElement}return!1}(y)||function(x){return x.tagName.toUpperCase()==="INPUT"&&x.type==="radio"&&!function(k){var g;if(!k.name)return!0;const f=function(_,w){for(const T of _)if(T.checked&&T.form===w)return T;return null}(((g=k.form)!==null&&g!==void 0?g:k.ownerDocument).querySelectorAll('input[type="radio"][name="'+k.name+'"]'),k.form);return!f||f===k}(x)}(b)||m(b)<0);var y}function m(b){var y;const x=Number.parseInt((y=b.getAttribute("tabindex"))!==null&&y!==void 0?y:"NaN",10);return Number.isNaN(x)?b.contentEditable==="true"?0:b.nodeName!=="AUDIO"&&b.nodeName!=="VIDEO"||b.getAttribute("tabindex")!==null?b.tabIndex:0:x}return ie()?function(b){const y=[],x=[];return[...b.querySelectorAll(`input, select, textarea, a[href], button,
        [tabindex], audio[controls], video[controls],
        [contenteditable]:not([contenteditable="false"]), details>summary`)].filter(h).forEach((k,g)=>{const f=m(k);f===0?y.push(k):x.push({documentOrder:g,tabIndex:f,node:k})}),x.sort((k,g)=>k.tabIndex===g.tabIndex?k.documentOrder-g.documentOrder:k.tabIndex-g.tabIndex).map(k=>k.node).concat(y)}(document.body):[]}();if(!document.activeElement||d.length===1)return t.announce("plonk"),!1;let p=d.indexOf(document.activeElement)+r;return!!(document.activeElement instanceof Xe&&l(document.activeElement,e,r))||(p<0&&(p=d.length-1),p>=d.length&&(p=0),!!(d[p]instanceof Xe&&l(d[p],e,r))||(d[p].focus(),p!==0||(t.announce("plonk"),!1)))}function l(d,p,h){var m,b,y;const x=[...(b=(m=d.shadowRoot)===null||m===void 0?void 0:m.querySelectorAll("math-field"))!==null&&b!==void 0?b:[]];if(x.length){const k=(y=d.shadowRoot)===null||y===void 0?void 0:y.activeElement,g=x.indexOf(k);let f=g+h;if(g<0&&p==="backward"&&(f=x.length-1),f>=0&&f<x.length)return x[f].focus(),!0}return!1}const u=t.position,c=t.offsetOf(s[0]);return s[0].type==="placeholder"?t.setSelection(c-1,c):t.position=c,t.announce("move",u),!0}function Sn(t){var e,a,i,o,r,n;if(wn(t,t.position)==="text"){let s=Math.min(t.anchor,t.position),l=Math.max(t.anchor,t.position),u=!1;for(;!u&&s>0;){const c=t.at(s);c.mode==="text"&&si.test(c.value)?s-=1:u=!0}for(u=!1;!u&&l<=t.lastOffset;){const c=t.at(l);c.mode==="text"&&si.test(c.value)?l+=1:u=!0}if(u&&(l-=1),s>=l)return t.setSelection(l-1,l),!0;t.setSelection(s,l)}else{const s=t.at(t.position);if(s.isDigit()){let l=Math.min(t.anchor,t.position),u=Math.max(t.anchor,t.position);for(;!((e=t.at(l))===null||e===void 0)&&e.isDigit();)l-=1;for(;!((a=t.at(u))===null||a===void 0)&&a.isDigit();)u+=1;t.setSelection(l,u-1)}else if(s.style.variant||s.style.variantStyle){let l=Math.min(t.anchor,t.position),u=Math.max(t.anchor,t.position),c=(i=t.at(l))===null||i===void 0?void 0:i.style;for(;c&&c.variant===s.style.variant&&c.variantStyle===s.style.variantStyle;)l-=1,c=(o=t.at(l))===null||o===void 0?void 0:o.style;for(c=(r=t.at(u))===null||r===void 0?void 0:r.style;c&&c.variant===s.style.variant&&c.variantStyle===s.style.variantStyle;)u+=1,c=(n=t.at(u))===null||n===void 0?void 0:n.style;t.setSelection(l,u-1)}else t.setSelection(t.offsetOf(s.firstSibling),t.offsetOf(s.lastSibling))}return!0}Ve({addRowAfter:xn,addColumnAfter:kn,addRowBefore:function(t){return!!se(t,{inputType:"insertText"})&&(gi(t,"before row"),me(t,{inputType:"insertText"}),!0)},addColumnBefore:function(t){return!!se(t,{inputType:"insertText"})&&(gi(t,"before column"),me(t,{inputType:"insertText"}),!0)},removeRow:function(t){return!!se(t,{inputType:"deleteContent"})&&(xr(t,"row"),me(t,{inputType:"deleteContent"}),!0)},removeColumn:function(t){return!!se(t,{inputType:"deleteContent"})&&(xr(t,"column"),me(t,{inputType:"deleteContent"}),!0)}},{target:"model",category:"array-edit"}),Ve({deleteAll:t=>se(t,{inputType:"deleteContent"})&&ct(t,[0,-1],"deleteContent"),deleteForward:t=>function(e){return!!se(e,{inputType:"deleteContentForward"})&&(e.selectionIsCollapsed?e.deferNotifications({content:!0,selection:!0,type:"deleteContentForward"},()=>{var a,i;let o=e.at(e.position).rightSibling;if(o&&fa(e,"forward",o))return;if(o){if(e.at(e.position).isLastSibling&&fa(e,"forward",o.parent,o.treeBranch))return}else{if(o=e.at(e.position),o.isLastSibling&&fa(e,"forward",o.parent,o.treeBranch))return;o=null}if(e.position===e.lastOffset||!o)return void e.announce("plonk");o.parent.removeChild(o);let r=(a=e.at(e.position))===null||a===void 0?void 0:a.rightSibling;for(;(r==null?void 0:r.type)==="msubsup";)r.parent.removeChild(r),r=(i=e.at(e.position))===null||i===void 0?void 0:i.rightSibling;e.announce("delete",void 0,[o])}):ct(e,at(e.selection),"deleteContentForward"))}(t),deleteBackward:t=>function(e){return!!se(e,{inputType:"deleteContentBackward"})&&(e.selectionIsCollapsed?e.deferNotifications({content:!0,selection:!0,type:"deleteContentBackward"},()=>{let a=e.at(e.position);if(!a||!fa(e,"backward",a)){if(a!=null&&a.isFirstSibling){if(fa(e,"backward",a.parent,a.treeBranch))return;a=null}a?(e.position=e.offsetOf(a.leftSibling),a.parent.removeChild(a),e.announce("delete",void 0,[a])):e.announce("plonk")}}):ct(e,at(e.selection),"deleteContentBackward"))}(t),deleteNextWord:t=>se(t,{inputType:"deleteWordForward"})&&ct(t,[t.anchor,Mo(t,t.position,"forward")],"deleteWordForward"),deletePreviousWord:t=>se(t,{inputType:"deleteWordBackward"})&&ct(t,[t.anchor,Mo(t,t.position,"backward")],"deleteWordBackward"),deleteToGroupStart:t=>se(t,{inputType:"deleteSoftLineBackward"})&&ct(t,[t.anchor,t.offsetOf(t.at(t.position).firstSibling)],"deleteSoftLineBackward"),deleteToGroupEnd:t=>se(t,{inputType:"deleteSoftLineForward"})&&ct(t,[t.anchor,t.offsetOf(t.at(t.position).lastSibling)],"deleteSoftLineForward"),deleteToMathFieldStart:t=>se(t,{inputType:"deleteHardLineBackward"})&&ct(t,[t.anchor,0],"deleteHardLineBackward"),deleteToMathFieldEnd:t=>se(t,{inputType:"deleteHardLineForward"})&&ct(t,[t.anchor,-1],"deleteHardLineForward")},{target:"model",category:"delete"}),Ve({moveToOpposite:t=>{const e=t.at(t.position),{parent:a}=e;if(!a)return t.announce("plonk"),!1;const i=e.treeBranch;let o;return typeof i=="string"&&(o={superscript:"subscript",subscript:"superscript",above:"below",below:"above"}[i]),o?(a.branch(o)||a.createBranch(o),t.setSelection(t.getBranchRange(t.offsetOf(a),o))):e.subsupPlacement?wr(t):kr(t)},moveBeforeParent:t=>{const{parent:e}=t.at(t.position);return e?(t.position=t.offsetOf(e),!0):(t.announce("plonk"),!1)},moveAfterParent:t=>_n(t),moveToNextPlaceholder:t=>_r(t,"forward"),moveToPreviousPlaceholder:t=>_r(t,"backward"),moveToNextChar:t=>ht(t,"forward"),moveToPreviousChar:t=>ht(t,"backward"),moveUp:t=>ht(t,"upward"),moveDown:t=>ht(t,"downward"),moveToNextWord:t=>Qt(t,"forward"),moveToPreviousWord:t=>Qt(t,"backward"),moveToGroupStart:t=>{const e=t.offsetOf(t.at(t.position).firstSibling);return e===t.position?(t.announce("plonk"),!1):(t.position=e,!0)},moveToGroupEnd:t=>{const e=t.offsetOf(t.at(t.position).lastSibling);return e===t.position?(t.announce("plonk"),!1):(t.position=e,!0)},moveToMathFieldStart:t=>t.position===0?(t.announce("plonk"),!1):(t.position=0,!0),moveToMathFieldEnd:t=>t.position===t.lastOffset?(t.announce("plonk"),!1):(t.position=t.lastOffset,!0),moveToSuperscript:t=>kr(t),moveToSubscript:t=>wr(t)},{target:"model",category:"selection-anchor"}),Ve({selectGroup:t=>{const e=Sn(t);return e||t.announce("plonk"),e},selectAll:t=>t.setSelection(0,t.lastOffset),extendSelectionForward:t=>{const e=t.extendSelection("forward");return e||t.announce("plonk"),e},extendSelectionBackward:t=>{const e=t.extendSelection("backward");return e||t.announce("plonk"),e},extendToNextWord:t=>Qt(t,"forward",{extend:!0}),extendToPreviousWord:t=>Qt(t,"backward",{extend:!0}),extendSelectionUpward:t=>ht(t,"upward",{extend:!0}),extendSelectionDownward:t=>ht(t,"downward",{extend:!0}),extendToNextBoundary:t=>Qt(t,"forward",{extend:!0}),extendToPreviousBoundary:t=>Qt(t,"backward",{extend:!0}),extendToGroupStart:t=>{const e=t.setSelection(t.anchor,t.offsetOf(t.at(t.position).firstSibling));return e||t.announce("plonk"),e},extendToGroupEnd:t=>{const e=t.setSelection(t.anchor,t.offsetOf(t.at(t.position).lastSibling));return e||t.announce("plonk"),e},extendToMathFieldStart:t=>{const e=t.setSelection(t.anchor,0);return e||t.announce("plonk"),e},extendToMathFieldEnd:t=>{const e=t.setSelection(t.anchor,t.lastOffset);return e||t.announce("plonk"),e}},{target:"model",category:"selection-extend"});class aa{constructor(e){var a,i;this.preventOverlayClose=(a=e==null?void 0:e.preventOverlayClose)!==null&&a!==void 0&&a,this.translucent=(i=e==null?void 0:e.translucent)!==null&&i!==void 0&&i,this.state="closed"}get element(){if(this._element)return this._element;const e=document.createElement("div");return e.setAttribute("role","presentation"),e.style.position="fixed",e.style.contain="content",e.style.top="0",e.style.left="0",e.style.right="0",e.style.bottom="0",e.style.zIndex="var(--scrim-zindex, 10099)",e.style.outline="none",this.translucent?(e.style.background="rgba(255, 255, 255, .2)",e.style.backdropFilter="contrast(40%)"):e.style.background="transparent",this._element=e,e}open(e){var a;if(this.state!=="closed")return;this.state="opening",this.savedActiveElement=Sr();const{element:i}=this;((a=e==null?void 0:e.root)!==null&&a!==void 0?a:document.body).appendChild(i),i.addEventListener("click",this),document.addEventListener("touchmove",this,!1),document.addEventListener("scroll",this,!1);const o=window.innerWidth-document.documentElement.clientWidth;this.savedMarginRight=document.body.style.marginRight,this.savedOverflow=document.body.style.overflow,document.body.style.overflow="hidden";const r=Number.parseFloat(getComputedStyle(document.body).marginRight);document.body.style.marginRight=`${r+o}px`,e!=null&&e.child&&i.append(e.child),this.state="open"}close(){var e,a,i,o;if(this.state!=="open")return;this.state="closing",typeof this.onClose=="function"&&this.onClose();const{element:r}=this;r.removeEventListener("click",this),document.removeEventListener("touchmove",this,!1),document.removeEventListener("scroll",this,!1),r.remove(),document.body.style.overflow=(e=this.savedOverflow)!==null&&e!==void 0?e:"",document.body.style.marginRight=(a=this.savedMarginRight)!==null&&a!==void 0?a:"",Sr()!==this.savedActiveElement&&((o=(i=this.savedActiveElement)===null||i===void 0?void 0:i.focus)===null||o===void 0||o.call(i)),r.innerHTML="",this.state="closed"}handleEvent(e){this.preventOverlayClose||(e.target===this._element&&e.type==="click"?(this.close(),e.preventDefault(),e.stopPropagation()):e.target!==document||e.type!=="touchmove"&&e.type!=="scroll"||(this.close(),e.preventDefault(),e.stopPropagation()))}}function Sr(){var t;let e=document.activeElement;for(;!((t=e==null?void 0:e.shadowRoot)===null||t===void 0)&&t.activeElement;)e=e.shadowRoot.activeElement;return e}const Rs=new Set(["Backquote","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Minus","Equal","IntlYen","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","IntlRo","Space","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadAdd","NumpadComma","NumpadDecimal","NumpadDivide","NumpadEqual","NumpadHash","NumpadMultiply","NumpadParenLeft","NumpadParenRight","NumpadStar","NumpadSubstract"]);function Mr(t){return!t.ctrlKey&&!t.metaKey&&t.key!=="Dead"&&(t.code===""||Rs.has(t.code))}function Lr(t){const e=[];return(t=function(a){if(a.code)return a;const i=Object.entries(Ba().mapping);let o=!1,r=!1,n="";for(let s=0;s<4;s++){for(const[l,u]of i)if(u[s]===a.key){n=l,s===3?(o=!0,r=!0):s===2?o=!0:s===1&&(r=!0);break}if(n)break}return new KeyboardEvent(a.type,{...a,altKey:o,shiftKey:r,code:n})}(t)).ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),t.altKey&&e.push("alt"),t.shiftKey&&e.push("shift"),e.length===0?"["+t.code+"]":(e.push("["+t.code+"]"),e.join("+"))}function Yi(){var t;if(!ie())return null;let e=document.activeElement;for(;!((t=e==null?void 0:e.shadowRoot)===null||t===void 0)&&t.activeElement;)e=e.shadowRoot.activeElement;return e}function Xa(t){var e;if(!t)return"";let a;return t.key==="Unidentified"&&t.target&&(a=t.target.value),a=(e=a??t.key)!==null&&e!==void 0?e:t.code,/^(Dead|Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(a)&&(a=""),a}class Is{get maximumDepth(){return 1e3}constructor(e){this.recording=!1,this.canCoalesce=!1,this.model=e,this.reset()}reset(){this.stack=[],this.index=-1}startRecording(){this.recording=!0}canUndo(){return this.index>0}canRedo(){return this.index!==this.stack.length-1}undo(){return!!this.canUndo()&&(this.model.setState(this.stack[this.index-1],{suppressChangeNotifications:!1,type:"undo"}),this.index-=1,this.canCoalesce=!1,!0)}redo(){return!!this.canRedo()&&(this.index+=1,this.model.setState(this.stack[this.index],{suppressChangeNotifications:!1,type:"redo"}),this.canCoalesce=!1,!0)}pop(){this.canUndo()&&(this.index-=1,this.stack.pop())}snapshot(){return!!this.recording&&(this.stack.splice(this.index+1,this.stack.length-this.index-1),this.stack.push(this.model.getState()),this.index++,this.stack.length>this.maximumDepth&&this.stack.shift(),this.canCoalesce=!1,!0)}snapshotAndCoalesce(){if(!this.recording)return!1;this.canCoalesce&&this.pop();const e=this.snapshot();return this.canCoalesce=!0,e}}var Cr='.ML__keyboard{--hue:206;--keyboard-background:rgba(209,213,217,.97);--keyboard-text:#000;--keyboard-text-active:var(--primary,hsl(var(--hue),40%,50%));--keyboard-background-border:#ddd;--keycap-background:#fff;--keycap-background-active:#e5e5e5;--keycap-background-border:#e5e6e9;--keycap-background-border-bottom:#8d8f92;--keycap-text:#000;--keycap-text-active:#fff;--keycap-secondary-text:#000;--keycap-modifier-background:#b9bdc7;--keycap-modifier-border:#c5c9d0;--keycap-modifier-border-bottom:#989da6;--keyboard-alternate-background:#fff;--keyboard-alternate-background-active:var(--primary,hsl(var(--hue),40%,50%));--keyboard-alternate-text:var(--keycap-text,#000);--keyboard-alternate-text-active:#fff;--keyboard-alternate-key-length:70px;--keyboard-alternate-key-font-size:30px;--keyboard-alternate-key-aside-font-size:12px;--keyboard-height:276px;--keycap-height:52px;--keycap-font-size:20px;--keycap-small-font-size:calc(var(--keycap-font-size)*0.8);--keycap-extra-small-font-size:calc(var(--keycap-font-size)/1.42);--keycap-tt-font-size:calc(var(--keycap-font-size)*1.5);height:100%;left:0;pointer-events:none;position:fixed;top:0;width:100%;z-index:var(--keyboard-zindex,105)}.ML__keyboard.is-visible .ML__keyboard--plate{opacity:1;transform:translateY(calc(var(--keyboard-height, 276px)*-1));transition-timing-function:cubic-bezier(.4,0,1,1);visibility:visible}.ML__keyboard.alternate-keys{align-content:center;background-color:var(--keyboard-alternate-background);border-radius:6px;bottom:auto;box-shadow:0 14px 28px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.22);box-sizing:content-box;display:flex;flex-direction:row;justify-content:center;max-width:286px;position:fixed;text-align:center;top:0;transform:none;transition:none;visibility:hidden;z-index:calc(var(--keyboard-zindex, 105) + 1)}@media only screen and (max-height:412px){.ML__keyboard.alternate-keys{max-width:320px}}.ML__keyboard.alternate-keys.is-visible{visibility:visible}.ML__keyboard.alternate-keys.compact{--keyboard-alternate-key-length:50px;--keyboard-alternate-key-font-size:24px;--keyboard-alternate-key-aside-font-size:10px}.ML__keyboard.alternate-keys ul{display:flex;flex-flow:row wrap-reverse;justify-content:center;list-style:none;margin:3px;padding:0}.ML__keyboard.alternate-keys ul>li{fill:currentColor;align-items:center;background:transparent;border:1px solid transparent;border-radius:5px;box-sizing:border-box;color:var(--keyboard-alternate-text);display:flex;flex-flow:column;font-size:var(--keyboard-alternate-key-font-size);height:var(--keyboard-alternate-key-length);justify-content:center;margin:0;pointer-events:all;width:var(--keyboard-alternate-key-length)}@media only screen and (max-height:412px){.ML__keyboard.alternate-keys ul>li{font-size:24px;height:50px;width:50px}}.ML__keyboard.alternate-keys ul>li.is-active,.ML__keyboard.alternate-keys ul>li.is-pressed,.ML__keyboard.alternate-keys ul>li:hover{background:var(--keyboard-alternate-background-active);color:var(--keyboard-alternate-text-active)}.ML__keyboard.alternate-keys ul>li.small{font-size:var(--keycap-small-font-size,16px)}.ML__keyboard.alternate-keys ul>li.small-button{background:#fbfbfb;height:42px;margin:2px;width:42px}.ML__keyboard.alternate-keys ul>li.small-button:hover{background:var(--keyboard-alternate-background-active)}.ML__keyboard.alternate-keys ul>li.box>div,.ML__keyboard.alternate-keys ul>li.box>span{border:1px dashed rgba(0,0,0,.24)}.ML__keyboard.alternate-keys ul>li .warning{align-items:center;background:#cd0030;border-radius:5px;color:#fff;display:flex;justify-content:center;min-height:60px;min-width:60px;padding:5px}.ML__keyboard.alternate-keys ul>li .warning.is-active,.ML__keyboard.alternate-keys ul>li .warning.is-pressed,.ML__keyboard.alternate-keys ul>li .warning:hover{background:red}.ML__keyboard.alternate-keys ul>li .warning svg.svg-glyph{height:50px;width:50px}.ML__keyboard.alternate-keys ul>li aside{font-size:var(--keyboard-alternate-key-aside-font-size);line-height:12px;opacity:.78;padding-top:2px}.ML__keyboard .ML__keyboard--plate{-webkit-backdrop-filter:grayscale(50%);backdrop-filter:grayscale(50%);background-color:var(--keyboard-background);border:1px solid var(--keyboard-background-border);bottom:calc(var(--keyboard-height, 276px)*-1);box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);box-sizing:border-box;cursor:pointer;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:16px;font-weight:400;left:0;margin:0;opacity:0;padding-top:5px;pointer-events:all;position:absolute;text-shadow:none;touch-action:none;transform:translate(0);transition:.28s cubic-bezier(0,0,.2,1);transition-property:transform,opacity;-webkit-user-select:none;user-select:none;visibility:hidden;width:100%}.ML__keyboard .ML__keyboard--plate .tex{font-family:KaTeX_Math,KaTeX_Main,Cambria Math,Asana Math,OpenSymbol,Symbola,STIX,Times,serif!important}.ML__keyboard .ML__keyboard--plate .tex-math{font-family:KaTeX_Math,Cambria Math,Asana Math,OpenSymbol,Symbola,STIX,Times,serif!important}.ML__keyboard .ML__keyboard--plate .tt{font-family:IBM Plex Mono,Source Code Pro,Consolas,Roboto Mono,Menlo,Bitstream Vera Sans Mono,DejaVu Sans Mono,Monaco,Courier,monospace!important;font-size:var(--keycap-tt-font-size,30px);font-weight:400}.ML__keyboard .ML__keyboard--plate>div.keyboard-layer{display:none;outline:none}.ML__keyboard .ML__keyboard--plate>div.keyboard-layer.is-visible{display:flex;flex-flow:column}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar{align-self:center;display:flex;flex-flow:row;justify-content:space-between;min-width:736px}@media only screen and (min-width:768px) and (max-width:1024px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar{min-width:556px}}@media only screen and (max-width:767px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar{max-width:100vw;min-width:365px;width:365px}}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar svg{height:20px;width:20px}@media only screen and (max-width:767px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar svg{height:13px;width:17px}}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>.left{display:flex;flex-flow:row;justify-content:flex-start;position:relative}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>.right{display:flex;flex-flow:row;justify-content:flex-end}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div{fill:currentColor;align-items:baseline;background:0;border:none;border-bottom:2px solid transparent;box-shadow:none;color:var(--keyboard-text);cursor:pointer;display:flex;font-size:110%;justify-content:center;margin:7px 4px 6px;min-height:0;padding:4px 10px}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.disabled svg,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.disabled.is-pressed svg,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.disabled:hover svg{color:var(--keyboard-text);opacity:.2}@media only screen and (max-width:414px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div{font-size:100%;padding:0 6px 0 0}}@media only screen and (max-width:767px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div{font-size:90%;padding-left:4px;padding-right:4px}}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.is-active,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.is-pressed,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div:active,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div:hover{color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.selected{border-bottom:2px solid var(--keyboard-text-active);color:var(--keyboard-text-active);margin-bottom:8px;padding-bottom:0}.ML__keyboard .ML__keyboard--plate [data-tooltip]{position:relative}.ML__keyboard .ML__keyboard--plate [data-tooltip]:after{background:#616161;border-radius:2px;bottom:100%;box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2);color:#fff;content:attr(data-tooltip);display:inline-table;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:12px;font-weight:400;max-width:200px;opacity:0;padding:8px;position:absolute;text-align:center;top:inherit;transform:scale(.5);transition:all .15s cubic-bezier(.4,0,1,1) 1s;width:max-content;z-index:2}@media only screen and (max-width:767px){.ML__keyboard .ML__keyboard--plate [data-tooltip]:after{font-size:16px;padding:8px 16px}}.ML__keyboard .ML__keyboard--plate [data-tooltip]:hover{position:relative}.ML__keyboard .ML__keyboard--plate [data-tooltip]:hover:after{opacity:1;transform:scale(1)}.ML__keyboard .ML__keyboard--plate div .rows{align-items:center;border:0;border-collapse:separate;clear:both;display:flex;flex-flow:column;margin:auto}.ML__keyboard .ML__keyboard--plate div .rows>ul{height:40px;list-style:none;margin:0 0 3px;padding:0}.ML__keyboard .ML__keyboard--plate div .rows>ul>li{fill:currentColor;-webkit-tap-highlight-color:transparent;align-items:center;background:var(--keycap-background);border:1px solid var(--keycap-background-border);border-bottom-color:var(--keycap-background-border-bottom);border-radius:5px;box-sizing:border-box;color:var(--keycap-text);display:flex;flex-flow:column;float:left;font-size:var(--keycap-font-size,20px);height:40px;justify-content:center;margin-right:2px;overflow:hidden;padding:8px 0;position:relative;text-align:center;-webkit-user-select:none;user-select:none;vertical-align:top;width:34px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li:last-child{margin-right:0}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.small{font-size:var(--keycap-small-font-size,16px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.tt{color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.bottom{justify-content:flex-end}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.left{align-items:flex-start;padding-left:4px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.right{align-items:flex-end;padding-right:4px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li svg.svg-glyph{height:20px;width:20px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning{align-items:center;background:#cd0030;border-radius:100%;color:#fff;display:flex;height:25px;justify-content:center;margin-bottom:-2px;min-height:25px;min-width:25px;padding:5px;width:25px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning svg.svg-glyph{height:16px;width:16px}@media only screen and (max-width:768px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning{height:16px;min-height:16px;min-width:16px;width:16px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning svg.svg-glyph{height:14px;width:14px}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li>.w0{width:0}.ML__keyboard .ML__keyboard--plate div .rows>ul>li>.w5{width:16px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li>.w15{width:52px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li>.w20{width:70px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li>.w50{width:178px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.separator{background:transparent;border:none;pointer-events:none}@media only screen and (max-width:560px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.if-wide{display:none}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.tex-math{font-size:25px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.is-pressed,.ML__keyboard .ML__keyboard--plate div .rows>ul>li:hover{background:var(--keycap-background-active);color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.is-active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action:active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.keycap.is-active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.keycap:active{color:var(--keyboard-text-active);transform:translateY(calc(var(--keycap-height, 52px)*-.2)) scale(1.4);z-index:calc(var(--keyboard-zindex, 105) - 5)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.is-active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier:active{background:var(--keyboard-text-active);color:var(--keycap-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.font-glyph,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.font-glyph{font-size:18px}@media only screen and (max-width:767px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.font-glyph,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.font-glyph{font-size:16px}}@media only screen and (max-width:767px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.fnbutton{font-size:12px}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.bigfnbutton{font-size:var(--keycap-extra-small-font-size,14px)}@media only screen and (max-width:767px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.bigfnbutton{font-size:calc(var(--keycap-extra-small-font-size, 14px)/1.55)}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier{background-color:var(--keycap-modifier-background);border-color:var(--keycap-modifier-border);border-bottom-color:var(--keycap-modifier-border-bottom);font-size:65%;font-weight:100}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected{color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected.is-active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected.is-pressed,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected:active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected:hover,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected.is-active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected.is-pressed,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected:active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected:hover{color:#fff}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.keycap.w50{font-size:80%;font-weight:100;padding-top:10px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li small{color:#555}@media only screen and (max-width:767px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li small{font-size:9px}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li aside{color:#666;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:10px;line-height:10px}@media only screen and (max-width:767px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li aside{display:none}}@media only screen and (max-width:414px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li{margin-right:2px;width:calc(10vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>.w5{width:calc(5vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>.w15{width:calc(15vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>.w20{width:calc(20vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>.w50{width:calc(50vw - 2px)}}@media only screen and (min-width:415px) and (max-width:768px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li{margin-right:3px;width:37px}.ML__keyboard .ML__keyboard--plate div .rows>ul>.w5{width:17px}.ML__keyboard .ML__keyboard--plate div .rows>ul>.w15{width:57px}.ML__keyboard .ML__keyboard--plate div .rows>ul>.w20{width:77px}.ML__keyboard .ML__keyboard--plate div .rows>ul>.w50{width:197px}}@media only screen and (min-width:768px) and (max-width:1024px){.ML__keyboard .ML__keyboard--plate div .rows>ul{height:var(--keycap-height,52px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li{height:var(--keycap-height,52px);margin-right:4px;width:51px}.ML__keyboard .ML__keyboard--plate div .rows>ul>.w5{width:23.5px}.ML__keyboard .ML__keyboard--plate div .rows>ul>.w15{width:78.5px}.ML__keyboard .ML__keyboard--plate div .rows>ul>.w20{width:106px}.ML__keyboard .ML__keyboard--plate div .rows>ul>.w50{width:271px}}@media only screen and (min-width:1025px){.ML__keyboard .ML__keyboard--plate div .rows>ul{height:var(--keycap-height,52px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li{height:var(--keycap-height,52px);margin-right:6px;width:66px}.ML__keyboard .ML__keyboard--plate div .rows>ul>.action,.ML__keyboard .ML__keyboard--plate div .rows>ul>.modifier{font-size:80%}.ML__keyboard .ML__keyboard--plate div .rows>ul>.w5{width:30px}.ML__keyboard .ML__keyboard--plate div .rows>ul>.w15{width:102px}.ML__keyboard .ML__keyboard--plate div .rows>ul>.w20{width:138px}.ML__keyboard .ML__keyboard--plate div .rows>ul>.w50{width:354px}}@media (prefers-color-scheme:dark){body:not([theme=light]) .ML__keyboard{--hue:206;--keyboard-background:#4e6373;--keyboard-background:#4e6073;--keyboard-background:hsl(var(--hue),19%,38%);--keyboard-text:#f0f0f0;--keyboard-text-active:hsl(var(--hue),100%,60%);--keyboard-background-border:#333;--keycap-background:hsl(var(--hue),25%,39%);--keycap-background-active:hsl(var(--hue),35%,42%);--keycap-background-border:hsl(var(--hue),25%,35%);--keycap-background-border-bottom:#426b8a;--keycap-text:#d0d0d0;--keycap-text-active:#000;--keycap-secondary-text:#fff;--keycap-modifier-background:hsl(var(--hue),35%,40%);--keycap-modifier-border:hsl(var(--hue),35%,35%);--keycap-modifier-border-bottom:hsl(var(--hue),35%,42%);--keyboard-alternate-background:hsl(var(--hue),19%,38%)}}body[theme=dark] .ML__keyboard{--hue:206;--keyboard-background:hsl(var(--hue),19%,38%);--keyboard-text:#f0f0f0;--keyboard-text-active:hsl(var(--hue),100%,60%);--keyboard-background-border:#333;--keycap-background:hsl(var(--hue),25%,39%);--keycap-background-active:hsl(var(--hue),35%,42%);--keycap-background-border:hsl(var(--hue),25%,35%);--keycap-background-border-bottom:#426b8a;--keycap-text:#d0d0d0;--keycap-text-active:#000;--keycap-secondary-text:#fff;--keycap-modifier-background:hsl(var(--hue),35%,40%);--keycap-modifier-border:hsl(var(--hue),35%,35%);--keycap-modifier-border-bottom:hsl(var(--hue),35%,42%);--keyboard-alternate-background:hsl(var(--hue),19%,38%)}div.ML__keyboard.material{--keyboard-background:rgba(209,213,217,.9);--keyboard-background-border:#ddd;--keycap-background:transparent;--keycap-background-active:#cccfd1;--keycap-background-border:transparent;--keyboard-alternate-background:#efefef;--keyboard-alternate-text:#000;font-family:Roboto,sans-serif}div.ML__keyboard.material.alternate-keys{background:var(--keyboard-alternate-background);border:1px solid transparent;border-radius:5px;box-shadow:0 14px 28px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.22)}div.ML__keyboard.material.alternate-keys ul li.is-active,div.ML__keyboard.material.alternate-keys ul li.is-pressed,div.ML__keyboard.material.alternate-keys ul li:active,div.ML__keyboard.material.alternate-keys ul li:hover{fill:currentColor;background:#5f97fc;border:1px solid transparent;color:#fff}div.ML__keyboard.material .ML__keyboard__plate .keyboard-toolbar>div>div{font-size:16px}div.ML__keyboard.material .ML__keyboard__plate .keyboard-toolbar div div:active,div.ML__keyboard.material .ML__keyboard__plate .keyboard-toolbar div div:hover,div.ML__keyboard.material .ML__keyboard__plate .keyboard-toolbar div.div.is-active,div.ML__keyboard.material .ML__keyboard__plate .keyboard-toolbar div.div.is-pressed{fill:currentColor;color:#5f97fc}div.ML__keyboard.material .ML__keyboard__plate .keyboard-toolbar>div>.selected{fill:currentColor;border-bottom:2px solid #5f97fc;color:#5f97fc;margin-bottom:8px;padding-bottom:0}div.ML__keyboard.material .ML__keyboard__plate div>.rows>ul>.keycap{fill:currentColor;background:transparent;border:1px solid transparent;border-radius:5px;color:var(--keycap-text);transition:none}div.ML__keyboard.material .ML__keyboard__plate div>.rows>ul>.keycap.tt{color:#5f97fc}div.ML__keyboard.material .ML__keyboard__plate div>.rows>ul>.keycap[data-key=" "]{background:#e0e0e0;height:20px;margin-bottom:10px;margin-top:10px}div.ML__keyboard.material .ML__keyboard__plate div>.rows>ul>.keycap[data-key=" "].is-active,div.ML__keyboard.material .ML__keyboard__plate div>.rows>ul>.keycap[data-key=" "].is-pressed,div.ML__keyboard.material .ML__keyboard__plate div>.rows>ul>.keycap[data-key=" "]:active,div.ML__keyboard.material .ML__keyboard__plate div>.rows>ul>.keycap[data-key=" "]:hover{background:#d0d0d0;box-shadow:none;transform:none}div.ML__keyboard.material .ML__keyboard__plate div>.rows>ul>.keycap:not([data-key=" "]):hover{background:var(--keycap-background-active);border:1px solid transparent;box-shadow:none}div.ML__keyboard.material .ML__keyboard__plate div>.rows>ul>.keycap:not([data-key=" "]).is-active,div.ML__keyboard.material .ML__keyboard__plate div>.rows>ul>.keycap:not([data-key=" "]).is-pressed,div.ML__keyboard.material .ML__keyboard__plate div>.rows>ul>.keycap:not([data-key=" "]):active{background:var(--keyboard-alternate-background);box-shadow:0 10px 20px rgba(0,0,0,.19),0 6px 6px rgba(0,0,0,.23);color:var(--keyboard-alternate-text)}@media only screen and (max-width:767px){div.ML__keyboard.material .ML__keyboard__plate div>.rows>ul>.keycap:not([data-key=" "]).is-active,div.ML__keyboard.material .ML__keyboard__plate div>.rows>ul>.keycap:not([data-key=" "]).is-pressed,div.ML__keyboard.material .ML__keyboard__plate div>.rows>ul>.keycap:not([data-key=" "]):active{box-shadow:0 10px 20px rgba(0,0,0,.19),0 6px 6px rgba(0,0,0,.23);font-size:10px;justify-content:flex-start;margin-left:10px;margin-right:10px;padding:2px 0 0;transform:translateY(-10px) scale(2);transition:none;vertical-align:top;width:19.5px;z-index:calc(var(--ML_keyboard-zindex, 105) - 5)}}@media only screen and (max-width:414px){div.ML__keyboard.material .ML__keyboard__plate div>.rows>ul>.keycap:not([data-key=" "]).is-active,div.ML__keyboard.material .ML__keyboard__plate div>.rows>ul>.keycap:not([data-key=" "]).is-pressed,div.ML__keyboard.material .ML__keyboard__plate div>.rows>ul>.keycap:not([data-key=" "]):active{width:16.5px}}@media only screen and (max-width:767px){div.ML__keyboard.material .ML__keyboard__plate div>.rows>ul>.keycap:last-child.is-active,div.ML__keyboard.material .ML__keyboard__plate div>.rows>ul>.keycap:last-child:active{margin-left:14px;margin-right:0}}div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.action,div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.modifier{fill:currentColor;background:transparent;border:0;color:#869096;font-size:16px;transition:none}div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.action.selected,div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.modifier.selected{border-bottom:2px solid #5f97fc;border-radius:0;color:#5f97fc}div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.action.is-active,div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.action.is-pressed,div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.action:active,div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.action:hover,div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.modifier.is-active,div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.modifier.is-pressed,div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.modifier:active,div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.modifier:hover{background:var(--keycap-background-active);border:0;box-shadow:none;color:var(--keycap-text)}div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.bigfnbutton,div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.fnbutton{background:transparent;border:0}div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.bigfnbutton.selected,div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.fnbutton.selected{fill:currentColor;border-bottom:2px solid #5f97fc;border-radius:0;color:#5f97fc}div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.bigfnbutton.is-active,div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.bigfnbutton.is-pressed,div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.bigfnbutton:active,div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.bigfnbutton:hover,div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.fnbutton.is-active,div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.fnbutton.is-pressed,div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.fnbutton:active,div.ML__keyboard.material .ML__keyboard__plate div div.rows ul li.fnbutton:hover{fill:currentColor;background:var(--keycap-background-active);border:0;box-shadow:none;color:#5f97fc}@media (prefers-color-scheme:dark){body:not([theme=light]) div.ML__keyboard.material{--hue:198;--keyboard-background:hsl(var(--hue),19%,18%);--keyboard-text:#d4d6d7;--keyboard-text-active:#5f97fc;--keyboard-background-border:#333;--keycap-background:hsl(var(--hue),25%,39%);--keycap-background-active:#5f97fc;--keycap-background-border:transparent;--keycap-background-border-bottom:transparent;--keycap-text:#d0d0d0;--keycap-text-active:#d4d6d7;--keycap-secondary-text:#5f97fc;--keycap-modifier-background:hsl(var(--hue),35%,40%);--keycap-modifier-border:hsl(var(--hue),35%,35%);--keycap-modifier-border-bottom:hsl(var(--hue),35%,42%);--keyboard-alternate-background:hsl(var(--hue),8%,2%);--keyboard-alternate-background-active:hsl(var(--hue),35%,42%);--keyboard-alternate-text:#d1d1d1}}body[theme=dark] div.ML__keyboard.material{--hue:198;--keyboard-background:hsl(var(--hue),19%,18%);--keyboard-text:#d4d6d7;--keyboard-text-active:#5f97fc;--keyboard-background-border:#333;--keycap-background:hsl(var(--hue),25%,39%);--keycap-background-active:#5f97fc;--keycap-background-border:transparent;--keycap-background-border-bottom:transparent;--keycap-text:#d0d0d0;--keycap-text-active:#d4d6d7;--keycap-secondary-text:#5f97fc;--keycap-modifier-background:hsl(var(--hue),35%,40%);--keycap-modifier-border:hsl(var(--hue),35%,35%);--keycap-modifier-border-bottom:hsl(var(--hue),35%,42%);--keyboard-alternate-background:hsl(var(--hue),8%,2%);--keyboard-alternate-background-active:hsl(var(--hue),35%,42%);--keyboard-alternate-text:#d1d1d1}';function vi(t,e,a){var i;let o,r,n,s,l;typeof(i=a)=="object"&&("default"in i||"pressed"in i)?(a.default&&(e.dataset.command=JSON.stringify(a.default)),a.alt&&(e.dataset.commandAlt=JSON.stringify(a.alt)),a.altshift&&(e.dataset.commandAltshift=JSON.stringify(a.altshift)),a.shift&&(e.dataset.commandShift=JSON.stringify(a.shift)),a.pressed&&(e.dataset.commandPressed=JSON.stringify(a.pressed)),a.pressAndHoldStart&&(e.dataset.commandPressAndHoldStart=JSON.stringify(a.pressAndHoldStart)),a.pressAndHoldEnd&&(e.dataset.commandPressAndHoldEnd=JSON.stringify(a.pressAndHoldEnd))):e.dataset.command=JSON.stringify(a),De(e,"mousedown touchstart:passive",u=>{if(u.type!=="mousedown"||u.buttons===1){u.stopPropagation(),u.type!=="touchstart"&&u.preventDefault(),document.body.style["-webkit-user-select"]="none",e.classList.add("is-pressed"),o=Date.now(),u.type==="touchstart"&&(n=u.changedTouches[0].identifier);const c=e.getAttribute("data-command-pressed");c&&t(JSON.parse(c));const d=e.getAttribute("data-command-press-and-hold-start");d&&(r=e,l&&clearTimeout(l),l=setTimeout(()=>{e.classList.contains("is-pressed")&&t(JSON.parse(d))},300))}}),De(e,"mouseleave touchcancel",()=>{e.classList.remove("is-pressed")}),De(e,"touchmove:passive",u=>{for(let c=0;c<u.changedTouches.length;c++)if(u.changedTouches[c].identifier===n){const d=document.elementsFromPoint(u.changedTouches[c].clientX,u.changedTouches[c].clientY),p=d[d.length-1];p!==s&&s&&(s.dispatchEvent(new MouseEvent("mouseleave"),{bubbles:!0}),s=null),p&&(s=p,p.dispatchEvent(new MouseEvent("mouseenter",{bubbles:!0,buttons:1})))}}),De(e,"mouseenter",u=>{u.buttons===1&&e.classList.add("is-pressed")}),De(e,"mouseup touchend click",u=>{if(document.body.style["-webkit-user-select"]="",s){u.stopPropagation(),u.preventDefault();const p=s;return s=null,void p.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0}))}if(e.classList.remove("is-pressed"),e.classList.add("is-active"),u.type==="click"&&u.detail!==0)return u.stopPropagation(),void u.preventDefault();setTimeout(()=>e.classList.remove("is-active"),150);let c=e.getAttribute("data-command-press-and-hold-end");const d=Date.now();(e!==r||d<o+300)&&(c=null),!c&&u.altKey&&u.shiftKey&&(c=e.getAttribute("data-command-altshift")),!c&&u.altKey&&(c=e.getAttribute("data-command-alt")),!c&&u.shiftKey&&(c=e.getAttribute("data-command-shift")),c||(c=e.getAttribute("data-command")),c&&t(JSON.parse(c)),u.stopPropagation(),u.preventDefault()})}let Qi;function $a(){var t;gt();const e=document.querySelector("#mathlive-alternate-keys-panel");return e&&(e.classList.remove("is-visible"),e.innerHTML=""),(t=aa.scrim)===null||t===void 0||t.close(),!1}class Vs{constructor(e,a){this.originalContainerBottomPadding=null,this.options=e,this.visible=!1,this._mathfield=a,this.coreStylesheet=null,this.virtualKeyboardStylesheet=null}setOptions(e){var a,i;let o="";if(this._element){const r=this._element.querySelector("div.keyboard-layer.is-visible");r&&(o=(a=r.getAttribute("data-layer"))!==null&&a!==void 0?a:""),this._element.remove(),this._element=void 0}if(this.options=e,this.visible){this.buildAndAttachElement(e.virtualKeyboardTheme);const r=this.element.querySelector(`.keyboard-layer[data-layer="${o}"]`);r&&((i=this.element.querySelector(".keyboard-layer.is-visible"))===null||i===void 0||i.classList.remove("is-visible"),r.classList.add("is-visible")),this.element.classList.add("is-visible")}}get element(){return this._element}set element(e){var a;this._element!==e&&((a=this._element)===null||a===void 0||a.remove(),this._element=e)}get visible(){return this._visible}set visible(e){this._visible=e}get height(){var e,a;return(a=(e=this.element)===null||e===void 0?void 0:e.offsetHeight)!==null&&a!==void 0?a:0}buildAndAttachElement(e){var a;this.element=function(i,o){var r,n,s,l;gt();let u=`<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">

    <symbol id="svg-delete-backward" viewBox="0 0 576 512">
      <path d="M432.1 208.1L385.9 256L432.1 303C442.3 312.4 442.3 327.6 432.1 336.1C423.6 346.3 408.4 346.3 399 336.1L352 289.9L304.1 336.1C295.6 346.3 280.4 346.3 271 336.1C261.7 327.6 261.7 312.4 271 303L318.1 256L271 208.1C261.7 199.6 261.7 184.4 271 175C280.4 165.7 295.6 165.7 304.1 175L352 222.1L399 175C408.4 165.7 423.6 165.7 432.1 175C442.3 184.4 442.3 199.6 432.1 208.1V208.1zM512 64C547.3 64 576 92.65 576 128V384C576 419.3 547.3 448 512 448H205.3C188.3 448 172 441.3 160 429.3L9.372 278.6C3.371 272.6 0 264.5 0 256C0 247.5 3.372 239.4 9.372 233.4L160 82.75C172 70.74 188.3 64 205.3 64L512 64zM528 128C528 119.2 520.8 112 512 112H205.3C201 112 196.9 113.7 193.9 116.7L54.63 256L193.9 395.3C196.9 398.3 201 400 205.3 400H512C520.8 400 528 392.8 528 384V128z"/>
    </symbol>

    <symbol id="svg-shift" viewBox="0 0 384 512">
      <path d="M2.438 252.3C7.391 264.2 19.06 272 32 272h80v160c0 26.51 21.49 48 48 48h64C250.5 480 272 458.5 272 432v-160H352c12.94 0 24.61-7.797 29.56-19.75c4.953-11.97 2.219-25.72-6.938-34.88l-160-176C208.4 35.13 200.2 32 192 32S175.6 35.13 169.4 41.38l-160 176C.2188 226.5-2.516 240.3 2.438 252.3zM192 86.63L313.4 224H224v208H160V224H70.63L192 86.63z"/>
    </symbol>

    <symbol id="svg-commit" viewBox="0 0 512 512">
      <path d="M135 432.1l-128-128C2.344 300.3 0 294.2 0 288s2.344-12.28 7.031-16.97l128-128c9.375-9.375 24.56-9.375 33.94 0s9.375 24.56 0 33.94L81.94 264H464v-208C464 42.75 474.8 32 488 32S512 42.75 512 56V288c0 13.25-10.75 24-24 24H81.94l87.03 87.03c9.375 9.375 9.375 24.56 0 33.94S144.4 442.3 135 432.1z"/>
    </symbol>

    <symbol id="svg-command" viewBox="0 0 640 512">
      <path d="M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z"/>
    </symbol>

    <symbol id="svg-undo" viewBox="0 0 512 512">
      <path d="M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z"/>
    </symbol>
    <symbol id="svg-redo" viewBox="0 0 512 512">
      <path d="M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"/>
    </symbol>
    <symbol id="svg-arrow-left" viewBox="0 0 320 512">
      <path d="M206.7 464.6l-183.1-191.1C18.22 267.1 16 261.1 16 256s2.219-11.97 6.688-16.59l183.1-191.1c9.152-9.594 24.34-9.906 33.9-.7187c9.625 9.125 9.938 24.37 .7187 33.91L73.24 256l168 175.4c9.219 9.5 8.906 24.78-.7187 33.91C231 474.5 215.8 474.2 206.7 464.6z"/>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 320 512">
      <path d="M113.3 47.41l183.1 191.1c4.469 4.625 6.688 10.62 6.688 16.59s-2.219 11.97-6.688 16.59l-183.1 191.1c-9.152 9.594-24.34 9.906-33.9 .7187c-9.625-9.125-9.938-24.38-.7187-33.91l168-175.4L78.71 80.6c-9.219-9.5-8.906-24.78 .7187-33.91C88.99 37.5 104.2 37.82 113.3 47.41z"/>
    </symbol>
    <symbol id="svg-tab" viewBox="0 0 448 512">
      <path d="M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z"/>
    </symbol>
    <symbol id="svg-copy" viewBox="0 0 448 512">
      <path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM352 32.491a15.88 15.88 0 0 1 7.431 4.195l51.882 51.883A15.885 15.885 0 0 1 415.508 96H352V32.491zM288 464c0 8.822-7.178 16-16 16H48c-8.822 0-16-7.178-16-16V144c0-8.822 7.178-16 16-16h80v240c0 26.51 21.49 48 48 48h112v48zm128-96c0 8.822-7.178 16-16 16H176c-8.822 0-16-7.178-16-16V48c0-8.822 7.178-16 16-16h144v72c0 13.2 10.8 24 24 24h72v240z"/>
    </symbol>
    <symbol id="svg-angle-double-right" viewBox="0 0 320 512">
      <path d="M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17zm128-17l-117.8-116c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17L255.3 256 153.1 356.4c-4.7 4.7-4.7 12.3 0 17l7.1 7.1c4.7 4.7 12.3 4.7 17 0l117.8-116c4.6-4.7 4.6-12.3-.1-17z"/>
    </symbol>
    <symbol id="svg-angle-double-left" viewBox="0 0 320 512">
      <path d="M153.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L192.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L153 264.5c-4.6-4.7-4.6-12.3.1-17zm-128 17l117.8 116c4.7 4.7 12.3 4.7 17 0l7.1-7.1c4.7-4.7 4.7-12.3 0-17L64.7 256l102.2-100.4c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L25 247.5c-4.6 4.7-4.6 12.3.1 17z"/>
    </symbol>
    <symbol id="svg-trash" viewBox="0 0 448 512">
      <path d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"/>
    </symbol>
</svg>
        `;i.create(),ba["foreground-color"]=[];for(const g of Object.keys(ri))ba["foreground-color"].push({class:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; box-sizing: border-box; border: 3px solid '+ri[g]+'"></span>',command:["applyStyle",{color:g}]});ba["background-color"]=[];for(const g of Object.keys(oi))ba["background-color"].push({class:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; background:'+oi[g]+'"></span>',command:["applyStyle",{backgroundColor:g}]});Q={...ba};for(const g of Object.keys(Q))Q[g]=Q[g].slice();for(let g=0;g<26;g++){const f="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[g];Q[f]||(Q[f]=[]),Q[f].unshift({latex:"\\mathbb{"+f+"}",aside:"blackboard",insert:"\\mathbb{"+f+"}"}),Q[f].unshift({latex:"\\mathbf{"+f+"}",aside:"bold",insert:"\\mathbf{"+f+"}"}),Q[f].unshift({latex:"\\mathsf{"+f+"}",aside:"sans",insert:"\\mathsf{"+f+"}"}),Q[f].unshift({latex:"\\mathtt{"+f+"}",aside:"monospace",insert:"\\mathtt{"+f+"}"}),Q[f].unshift({latex:"\\mathcal{"+f+"}",aside:"calligraphy",insert:"\\mathcal{"+f+"}"}),Q[f].unshift({latex:"\\mathfrak{"+f+"}",aside:"fraktur",insert:"\\mathfrak{"+f+"}"})}for(let g=0;g<=26;g++){const f="abcdefghijklmnopqrstuvwxyz"[g];Q[f]||(Q[f]=[]),Q[f].unshift({latex:"\\mathsf{"+f+"}",aside:"sans",insert:"\\mathsf{"+f+"}"}),Q[f].unshift({latex:"\\mathbf{"+f+"}",aside:"bold",insert:"\\mathbf{"+f+"}"}),Q[f].unshift({latex:"\\mathtt{"+f+"}",aside:"monospace",insert:"\\mathtt{"+f+"}"}),Q[f].unshift({latex:"\\mathfrak{"+f+"}",aside:"fraktur",insert:"\\mathfrak{"+f+"}"})}for(let g=0;g<10;g++){const f="0123456789"[g];Q[f]||(Q[f]=[]),Q[f].unshift({latex:"\\mathbf{"+f+"}",aside:"bold",insert:"\\mathbf{"+f+"}"}),Q[f].unshift({latex:"\\mathsf{"+f+"}",aside:"sans",insert:"\\mathsf{"+f+"}"}),Q[f].unshift({latex:"\\mathtt{"+f+"}",aside:"monospace",insert:"\\mathtt{"+f+"}"}),Q[f].unshift({latex:"\\mathcal{"+f+"}",aside:"script",insert:"\\mathcal{"+f+"}"}),Q[f].unshift({latex:"\\mathfrak{"+f+"}",aside:"fraktur",insert:"\\mathfrak{"+f+"}"})}let c=i.options.virtualKeyboards;c||(c="all"),c=c.replace(/\ball\b/i,"numeric functions symbols roman  greek");const d={...js,...(r=i.options.customVirtualKeyboardLayers)!==null&&r!==void 0?r:{}},p={...Mn,...(n=i.options.customVirtualKeyboards)!==null&&n!==void 0?n:{}},h=c.replace(/\s+/g," ").split(" ");for(const g of h){if(!p[g])continue;let f=(s=p[g].layers)!==null&&s!==void 0?s:[];p[g].layer&&f.push(p[g].layer),f=[...new Set(f)];for(const _ of f){if(!d[_])break;if(typeof d[_]=="object"){const T=d[_];let C="";if(typeof T.styles=="string"?C+=`<style>${T.styles}</style>`:typeof T.styles=="object"&&(C+=`<style>${Js(T.styles)}</style>`),T.backdrop&&(C+=`<div class='${T.backdrop}'>`),T.container&&(C+=`<div class='${T.container}'>`),T.rows){C+="<div class='rows'>";for(const K of T.rows){C+="<ul>";for(const $ of K){if(C+="<li",$.class){let j=$.class;$.layer&&!/layer-switch/.test(j)&&(j+=" layer-switch"),/separator/.test(j)||(j+=" keycap"),C+=` class="${j}"`}else C+=' class="keycap"';if($.key&&(C+=` data-key="${$.key}"`),$.command&&(typeof $.command=="string"?C+=` data-command='"${$.command}"'`:(C+=" data-command='",C+=JSON.stringify($.command),C+="'")),$.insert&&(C+=` data-insert="${$.insert}"`),$.latex&&(C+=` data-latex="${$.latex}"`),$.aside&&(C+=` data-aside="${$.aside}"`),$.variants){const j=Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);Q[j]=$.variants,C+=` data-alt-keys="${j}"`}$.shifted&&(C+=` data-shifted="${$.shifted}"`),$.shiftedCommand&&(C+=` data-shifted-command="${$.shiftedCommand}"`),$.layer&&(C+=` data-layer="${$.layer}"`),C+=`>${$.label?$.label:""}</li>`}C+="</ul>"}C+="</div>"}T.container&&(C+="</div>"),T.backdrop&&(C+="</div>"),d[_]=C}u+=`<div tabindex="-1" class='keyboard-layer' data-layer='${_}'>`,u+=Hs(i.options,c,g);const w=d[_];typeof w=="string"&&(u+=Ws(i.options,w)),u+="</div>"}}const m=document.createElement("div");m.className="ML__keyboard",o?m.classList.add(o):i.options.virtualKeyboardTheme&&m.classList.add(i.options.virtualKeyboardTheme);const b=document.createElement("div");b.className="ML__keyboard--plate",b.innerHTML=i.options.createHTML(u),m.appendChild(b);const y=m.querySelectorAll(".keycap, .action, .fnbutton, .bigfnbutton");for(const g of y)g.id="ML__k"+Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);Ln(i,[...y]);const x=m.querySelectorAll(".layer-switch");for(const g of x)g.classList.contains("shift")?vi(f=>i.executeCommand(f),g,{pressed:"shiftKeyboardLayer",default:["switchKeyboardLayer",g.getAttribute("data-layer")],pressAndHoldEnd:"unshiftKeyboardLayer"}):vi(f=>i.executeCommand(f),g,{default:["switchKeyboardLayer",g.getAttribute("data-layer")]});const k=m.querySelectorAll(".keyboard-layer");for(const g of k)g.addEventListener("mousedown",f=>{f.preventDefault(),f.stopPropagation()}),g.addEventListener("touchstart",f=>{f.preventDefault(),f.stopPropagation()},{passive:!1});return(l=k[0])===null||l===void 0||l.classList.add("is-visible"),m}(this,e??""),De(this.element,"touchstart:passive mousedown",()=>this.focusMathfield()),(a=this.options.virtualKeyboardContainer)===null||a===void 0||a.appendChild(this.element)}handleEvent(e){if(this.element)switch(e.type){case"mouseup":case"blur":case"touchend":case"touchcancel":document.body.style.userSelect="",xi(this)}}focusMathfield(){var e,a;(a=(e=this._mathfield)===null||e===void 0?void 0:e.focus)===null||a===void 0||a.call(e)}blurMathfield(){var e,a;(a=(e=this._mathfield)===null||e===void 0?void 0:e.blur)===null||a===void 0||a.call(e)}stateChanged(){var e,a;(a=(e=this._mathfield)===null||e===void 0?void 0:e.element)===null||a===void 0||a.dispatchEvent(new Event("virtual-keyboard-toggle",{bubbles:!0,cancelable:!1,composed:!0}))}executeCommand(e){var a,i,o;let r,n=[];return Ce(e)?(r=e[0],n=e.slice(1)):r=e,r=r.replace(/-\w/g,s=>s[1].toUpperCase()),((a=At[r])===null||a===void 0?void 0:a.target)==="virtual-keyboard"?At[r].fn(this,...n):(o=(i=this._mathfield)===null||i===void 0?void 0:i.executeCommand(e))!==null&&o!==void 0&&o}create(){this.virtualKeyboardStylesheet||(Qi||(Qi=zt(Cr).toString(36)),this.virtualKeyboardStylesheet=Tt(null,Cr,Qi)),this.coreStylesheet||(this.coreStylesheet=Tt(null,Bt,zt(Bt).toString(36))),this.options.fontsDirectory!==null&&vn(this.options.fontsDirectory)}enable(){ie()&&(window.addEventListener("mouseup",this),window.addEventListener("blur",this),window.addEventListener("touchend",this),window.addEventListener("touchcancel",this))}disable(){ie()&&(window.removeEventListener("mouseup",this),window.removeEventListener("blur",this),window.removeEventListener("touchend",this),window.removeEventListener("touchcancel",this))}dispose(){}}const Mn={numeric:{tooltip:"keyboard.tooltip.numeric",layer:"math",label:"123",layers:["math"]},roman:{tooltip:"keyboard.tooltip.roman",layer:"lower-roman",label:"ABC",layers:["lower-roman","upper-roman"]},greek:{tooltip:"keyboard.tooltip.greek",layer:"lower-greek",label:"&alpha;&beta;&gamma;",classes:"tex-math",layers:["lower-greek","upper-greek"]},functions:{tooltip:"keyboard.tooltip.functions",layer:"functions",label:"<i>f</i>&thinsp;()",classes:"tex",layers:["functions"]},symbols:{tooltip:"keyboard.tooltip.symbols",layer:"symbols",label:"&infin;≠∈",classes:"tex",layers:["symbols"]},latex:{tooltip:"keyboard.tooltip.command",command:["switchMode","latex"],label:`<svg class="svg-glyph"><use xlink:href='#svg-command' /></svg>`,layers:["latex-lower","latex-upper","latex-symbols"]},style:{tooltip:"keyboard.tooltip.style",layer:"style",label:"<b>b</b><i>i</i>𝔹"}},eo={"\\varphi ":["&Phi;","\\Phi "],"\\varsigma ":["&Sigma;","\\Sigma "],"\\epsilon ":["&#x0190;",'\\char"0190'],"\\rho ":["&#x3A1",'\\char"3A1'],"\\tau ":["&#x3A4;",'\\char"3A4'],"\\upsilon ":["&Upsilon;","\\Upsilon "],"\\theta ":["&Theta;","\\Theta "],"\\iota ":["&Iota;",'\\char"399'],"\\omicron ":["&#x039F;",'\\char"39F'],"\\pi ":["&Pi;","\\Pi "],"\\alpha ":["&Alpha;",'\\char"391'],"\\sigma ":["&Sigma;","\\Sigma "],"\\delta ":["&Delta;","\\Delta "],"\\phi ":["&#x03a6;","\\Phi "],"\\gamma ":["&Gamma;","\\Gamma "],"\\eta ":["&Eta;",'\\char"397'],"\\xi ":["&Xi;","\\Xi "],"\\kappa ":["&Kappa;",'\\char"39A'],"\\lambda ":["&Lambda;","\\Lambda "],"\\zeta ":["&Zeta;",'\\char"396'],"\\chi ":["&Chi;",'\\char"3A7'],"\\psi ":["&Psi;","\\Psi "],"\\omega ":["&Omega;","\\Omega "],"\\beta ":["&Beta;",'\\char"392'],"\\nu ":["&Nu;",'\\char"39D'],"\\mu ":["&Mu;",'\\char"39C']},ba={0:["\\emptyset","\\varnothing","\\infty",{latex:"#?_0",insert:"#@_0"},"\\circ","\\bigcirc","\\bullet"],2:["\\frac{1}{2}",{latex:"#?^2",insert:"#@^2"}],3:["\\frac{1}{3}",{latex:"#?^3",insert:"#@^3"}],".":[".",",",";","\\colon",{latex:":",aside:"ratio"},{latex:"\\cdotp",aside:"center dot",class:"box"},{latex:"\\cdots",aside:"center ellipsis",class:"box"},{latex:"\\ldotp",aside:"low dot",class:"box"},{latex:"\\ldots",aside:"low ellipsis",class:"box"},{latex:"\\vdots",aside:"",class:"box"},{latex:"\\ddots",aside:"",class:"box"},"\\odot","\\oslash","\\circledcirc"],"*":["\\cdot","\\ast","\\star","\\bigstar","\\ltimes","\\rtimes","\\rightthreetimes","\\leftthreetimes","\\intercal","\\prod",{latex:"\\prod_{n\\mathop=0}^{\\infty}",class:"small"}],"+":["\\pm","\\mp","\\sum",{latex:"\\sum_{n\\mathop=0}^{\\infty}",class:"small"},"\\dotplus","\\oplus"],"-":["\\pm","\\mp","\\ominus","\\vert #0  \\vert"],"/":["\\divideontimes","/","\\div","\\%"],"(":["\\left( #0\\right)","\\left[ #0\\right]","\\left\\{ #0\\right\\}","\\left\\langle #0\\right\\rangle","\\lfloor","\\llcorner","(","\\lbrack","\\lvert","\\lVert","\\lgroup","\\langle","\\lceil","\\ulcorner","\\lmoustache","\\lbrace"],")":["\\rfloor","\\lrcorner",")","\\rbrack","\\rvert","\\rVert","\\rgroup","\\rangle","\\rceil","\\urcorner","\\rmoustache","\\rbrace"],"=":["\\cong","\\asymp","\\equiv","\\differencedelta","\\varpropto","\\thickapprox","\\approxeq","\\thicksim","\\backsim","\\eqsim","\\simeq","\\Bumpeq","\\bumpeq","\\doteq","\\Doteq","\\fallingdotseq","\\risingdotseq","\\coloneq","\\eqcirc","\\circeq","\\triangleq","\\between"],"!=":["\\neq","\\ncong","","\\nsim"],"<":["\\leq","\\leqq","\\lneqq","\\ll","\\lessgtr","\\nless","\\nleq","\\lesssim","\\precsim","\\prec","\\nprec","\\preccurlyeq","\\lessdot"],">":["\\geq","\\geqq","\\gneqq","\\gg","\\gtrless","\\ngtr","\\ngeq","\\gtrsim","\\succsim","\\succ","\\nsucc","\\succcurlyeq","\\gtrdot"],in:["\\owns"],"!in":["\\backepsilon"],subset:["\\subseteq","\\nsubset","\\nsubseteq"],superset:["\\supseteq","\\nsupset","\\nsupseteq"],infinity:["\\aleph_0","\\aleph_1","\\omega","\\mathfrak{m}"],"numeric-pi":["\\prod","\\theta","\\rho","\\sin","\\cos","\\tan"],ee:["\\times 10^{#?}","\\ln","\\ln_{10}","\\log"],"^":["_{#?}"],int:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\smallint",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},{latex:"\\dfrac{\\rd}{\\rd x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\capitalDifferentialD","\\rd","\\partial"],nabla:["\\nabla\\times","\\nabla\\cdot","\\nabla^{2}"],"!":["!!","\\Gamma","\\Pi"],accents:["\\bar{#@}","\\vec{#@}","\\hat{#@}","\\check{#@}","\\dot{#@}","\\ddot{#@}","\\mathring{#@}","\\breve{#@}","\\acute{#@}","\\tilde{#@}","\\grave{#@}"],underline:["\\underbrace{#@}","\\underlinesegment{#@}","\\underleftrightarrow{#@}","\\underrightarrow{#@}","\\underleftarrow{#@}","\\undergroup{#@}"],overline:["\\overbrace{#@}","\\overlinesegment{#@}","\\overleftrightarrow{#@}","\\overrightarrow{#@}","\\overleftarrow{#@}","\\overgroup{#@}"],xleftarrows:["\\xlongequal{#@}","\\xleftrightarrow{#@}","\\xLeftrightarrow{#@}","\\xleftrightharpoons{#@}","\\xLeftarrow{#@}","\\xleftharpoonup{#@}","\\xleftharpoondown{#@}","\\xtwoheadleftarrow{#@}","\\xhookleftarrow{#@}","\\xtofrom{#@}","\\xleftequilibrium{#@}","\\xrightleftarrows{#@}"],xrightarrows:["\\xrightarrow{#@}","\\xlongequal{#@}","\\xleftrightarrow{#@}","\\xLeftrightarrow{#@}","\\xleftrightharpoons{#@}","\\xRightarrow{#@}","\\xrightharpoonup{#@}","\\xrightharpoondown{#@}","\\xtwoheadrightarrow{#@}","\\xrightleftharpoons{#@}","\\xhookrightarrow{#@}","\\xmapsto{#@}","\\xrightequilibrium{#@}","\\xrightleftarrows{#@}"],A:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],a:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],b:[{latex:"\\beth",aside:"beth"}],B:[{latex:"\\beth",aside:"beth"}],c:[{latex:"\\C",aside:"set of complex numbers"}],d:[{latex:"\\daleth",aside:"daleth"}],D:[{latex:"\\daleth",aside:"daleth"}],e:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn’t"}],g:[{latex:"\\gimel",aside:"gimel"}],G:[{latex:"\\gimel",aside:"gimel"}],h:[{latex:"\\hbar",aside:"h bar"},{latex:"\\hslash",aside:"h slash"}],i:[{latex:"\\imaginaryI",aside:"imaginary i"}],j:[{latex:"\\imaginaryJ",aside:"imaginary j"}],l:[{latex:"\\ell",aside:"ell"}],n:[{latex:"\\mathbb{N}",aside:"set of natural numbers"}],p:[{latex:"\\mathbb{P}",aside:"set of primes"}],q:[{latex:"\\mathbb{Q}",aside:"set of rational numbers"}],r:[{latex:"\\mathbb{R}",aside:"set of real numbers"}],z:[{latex:"\\mathbb{Z}",aside:"set of integers"}],"x-var":["y","z","t","r",{latex:"f(#?)",class:"small"},{latex:"g(#?)",class:"small"},"x^2","x^n","x_n","x_{n+1}","x_i","x_{i+1}"],"n-var":["i","j","p","k","a","u"],ii:["\\Re","\\Im","\\imaginaryJ","\\Vert #0 \\Vert"],logic:[{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn’t"},{latex:"\\ni",aside:"such that"},{latex:"\\Colon",aside:"such that"},{latex:"\\implies",aside:"implies"},{latex:"\\impliedby",aside:"implied by"},{latex:"\\iff",aside:"if and only if"},{latex:"\\land",aside:"and"},{latex:"\\lor",aside:"or"},{latex:"\\oplus",aside:"xor"},{latex:"\\lnot",aside:"not"},{latex:"\\downarrow",aside:"nor"},{latex:"\\uparrow",aside:"nand"},{latex:"\\curlywedge",aside:"nor"},{latex:"\\bar\\curlywedge",aside:"nand"},{latex:"\\therefore",aside:"therefore"},{latex:"\\because",aside:"because"},{latex:"^\\biconditional",aside:"biconditional"},"\\leftrightarrow","\\Leftrightarrow","\\to","\\models","\\vdash","\\gets","\\dashv","\\roundimplies"],"set-operators":["\\cap","\\cup","\\setminus","\\smallsetminus","\\complement"],"set-relations":["\\in","\\notin","\\ni","\\owns","\\subset","\\supset","\\subseteq","\\supseteq","\\subsetneq","\\supsetneq","\\varsubsetneq","\\subsetneqq","\\nsubset","\\nsupset","\\nsubseteq","\\nsupseteq"],space:[{latex:'\\char"203A\\!\\char"2039',insert:"\\!",aside:"negative thin space<br>⁻³⧸₁₈ em"},{latex:'\\unicode{"203A}\\,\\unicode{"2039}',insert:"\\,",aside:"thin space<br>³⧸₁₈ em"},{latex:'\\unicode{"203A}\\:\\unicode{"2039}',insert:"\\:",aside:"medium space<br>⁴⧸₁₈ em"},{latex:'\\unicode{"203A}\\;\\unicode{"2039}',insert:"\\;",aside:"thick space<br>⁵⧸₁₈ em"},{latex:'\\unicode{"203A}\\ \\unicode{"2039}',insert:"\\ ",aside:"⅓ em"},{latex:'\\unicode{"203A}\\enspace\\unicode{"2039}',insert:"\\enspace",aside:"½ em"},{latex:'\\unicode{"203A}\\quad\\unicode{"2039}',insert:"\\quad",aside:"1 em"},{latex:'\\unicode{"203A}\\qquad\\unicode{"2039}',insert:"\\qquad",aside:"2 em"}],delete:[{label:'<span class="warning"><svg class="svg-glyph"><use xlink:href="#svg-trash" /></svg></span>',command:"deleteAll"}],"->|":[]};let Q={};const js={math:`
        <div class='rows'>
            <ul>
                <li class='keycap tex' data-alt-keys='x-var'><i>x</i></li>
                <li class='keycap tex' data-alt-keys='n-var'><i>n</i></li>
                <li class='separator w5'></li>
                <row name='numpad-1'/>
                <li class='separator w5'></li>
                <li class='keycap tex' data-latex='\\exponentialE' data-alt-keys='ee'>e</li>
                <li class='keycap tex' data-latex='\\imaginaryI' data-alt-keys='ii'>i</li>
                <li class='keycap tex' data-latex='\\pi' data-alt-keys='numeric-pi'></li>
            </ul>
            <ul>
                <li class='keycap tex' data-key='<' data-alt-keys='<'>&lt;</li>
                <li class='keycap tex' data-key='>' data-alt-keys='>'>&gt;</li>
                <li class='separator w5'></li>
                <row name='numpad-2'/>
                <li class='separator w5'></li>
                <li class='keycap tex' data-latex='#@^{2}' data-latex='x^2'></li>
                <li class='keycap tex' data-alt-keys='^' data-insert='#@^{#?}' data-latex='x^\\placeholder'></li>
                <li class='keycap tex small' data-insert='\\sqrt{#0}' data-latex='\\sqrt{#0}'></li>
            </ul>
            <ul>
                <li class='keycap tex' data-alt-keys='(' >(</li>
                <li class='keycap tex' data-alt-keys=')' >)</li>
                <li class='separator w5'></li>
                <row name='numpad-3'/>
                <li class='separator w5'></li>
                <li class='keycap small' data-alt-keys='int' data-latex='\\int_0^\\infty'></li>
                <li class='keycap' data-latex='\\forall' data-alt-keys='logic' ></li>
                <li class='action font-glyph bottom right' data-alt-keys='delete' data-command='["performWithFeedback","deleteBackward"]'><svg class="svg-glyph"><use xlink:href="#svg-delete-backward" /></svg></li></ul>
            </ul>
            <ul>
                <li class='keycap' data-alt-keys='foreground-color' data-command='["applyStyle",{"color":"red"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'></span></li>
                <li class='keycap' data-alt-keys='background-color' data-command='["applyStyle",{"backgroundColor":"yellow"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span></li>
                <li class='separator w5'></li>
                <row name='numpad-4'/>
                <li class='separator w5'></li>
                <arrows/>
            </ul>
        </div>
    `,"lower-roman":`
        <div class='rows'>
            <ul>
                <row name='numpad-1' class='if-wide'/>
                <row name='lower-1' shift-layer='upper-roman'/>
            </ul>
            <ul>
                <row name='numpad-2' class='if-wide'/>
                <row name='lower-2'  shift-layer='upper-roman''/>
            </ul>
            <ul>
                <row name='numpad-3' class='if-wide'/>
                <row name='lower-3'  shift-layer='upper-roman''/>
            </ul>
            <ul>
                <row name='numpad-4' class='if-wide'/>
                <li class='keycap' >;</li>
                <li class='keycap' >,</li>
                <li class='keycap w50' data-key=' ' data-alt-keys='space'>&nbsp;</li>
                <arrows/>
            </ul>
        </div>`,"upper-roman":`
        <div class='rows'>
            <ul>
                <row name='numpad-1' class='if-wide'/>
                <row name='upper-1'  shift-layer='lower-roman'/>
            </ul>
            <ul>
                <row name='numpad-2' class='if-wide'/>
                <row name='upper-2' shift-layer='lower-roman'/>
            </ul>
            <ul>
                <row name='numpad-3' class='if-wide'/>
                <row name='upper-3' shift-layer='lower-roman'/>
            </ul>
            <ul>
                <row name='numpad-4' class='if-wide'/>
                <li class='keycap' >;</li>
                <li class='keycap' data-alt-keys='.'>;</li>
                <li class='keycap w50' data-key=' '>&nbsp;</li>
                <arrows/>
            </ul>
        </div>`,symbols:`
        <div class='rows'>
            <ul>
                <row name='numpad-1' class='if-wide'/>
                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrace '>{</li>
                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrace '>}</li>
                <li class='separator w5'></li>
                <li class='keycap tex small' data-alt-keys='xleftarrows' data-latex='\\leftarrow' ></li>
                <li class='keycap tex small' data-alt-keys='xrightarrows' data-latex='\\rightarrow' ></li>
                <li class='keycap tex' data-alt-keys='overline' data-latex='\\overline{#@}' data-aside='overline'></li>
                <li class='keycap tex' data-alt-keys='underline' data-latex='\\underline{#@}' data-aside='underline'></li>
                <li class='keycap w15' data-insert='\\ulcorner#0\\urcorner '><span><sup>&#x250c;</sup><span><span style='color:#ddd'>o</span><sup>&#x2510;</sup></span><aside>ceil</aside></li>
                <li class='keycap tex' data-alt-keys='nabla' data-insert='\\nabla '>&#x2207;<aside>nabla</aside></li>
                <li class='keycap tex' data-alt-keys='infinity' data-insert='\\infty '>&#x221e;</li>

            </ul>
            <ul>
                <row name='numpad-2' class='if-wide'/>
                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrack '>[</li>
                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrack '>]</li>
                <li class='separator w5'></li>

                <li class='keycap tex' data-alt-keys='in' data-insert='\\in '>&#x2208;</li>
                <li class='keycap tex' data-alt-keys='!in' data-insert='\\notin '>&#x2209;</li>
                <li class='keycap tex' data-insert='\\Re '>&#x211c;<aside>Real</aside></li>
                <li class='keycap tex' data-insert='\\Im '>&#x2111;<aside>Imaginary</aside></li>
                <li class='keycap w15' data-insert='\\llcorner#0\\lrcorner '><span><sub>&#x2514;</sub><span style='color:#ddd'>o</span><sub>&#x2518;</sub></span><aside>floor</aside></li>

                <li class='keycap tex' data-insert='\\partial '>&#x2202;<aside>partial<br>derivative</aside></li>
                <li class='keycap tex' data-insert='\\emptyset '>&#x2205;<aside>empty set</aside></li>

            </ul>
            <ul>
                <row name='numpad-3' class='if-wide'/>
                <li class='keycap tex' data-alt-keys='(' data-insert='\\langle '>&#x27e8;</li>
                <li class='keycap tex' data-alt-keys=')' data-insert='\\rangle '>&#x27e9;</li>
                <li class='separator w5'></li>
                <li class='keycap tex' data-alt-keys='subset' data-insert='\\subset '>&#x2282;</li>
                <li class='keycap tex' data-alt-keys='superset' data-insert='\\supset '>&#x2283;</li>

                <li class='keycap tex' data-alt-keys='accents' data-insert='\\vec{#@}' data-latex='\\vec{#?}' data-aside='vector'></li>
                <li class='keycap tex' data-alt-keys='absnorm' data-insert='\\left| #0 \\right|' data-latex='\\left| #? \\right|' data-aside='abs'></li>

                <li class='keycap tex' data-key='!' data-alt-keys='!'>!<aside>factorial</aside></li>
                <li class='keycap' data-latex='^{\\prime} '><span><sup><span><span style='color:#ddd'>o</span>&#x2032</sup></span><aside>prime</aside></li>

                <li class='action font-glyph bottom right w15'
                    data-shifted='<span class="warning"><svg class="svg-glyph"><use xlink:href="#svg-trash" /></svg></span>'
                    data-shifted-command='"deleteAll"'
                    data-alt-keys='delete' data-command='["performWithFeedback","deleteBackward"]'
                ><svg class="svg-glyph"><use xlink:href="#svg-delete-backward" /></svg></li>
            </ul>
            <ul>
                <row name='numpad-4' class='if-wide'/>
                <li class='keycap tex' data-insert=','>,</li>
                <li class='keycap tex' data-insert='\\cdot '>&#x22c5;<aside>centered dot</aside></li>
                <li class='keycap tex' data-insert='\\colon '>:<aside>colon</aside></li>
                <li class='keycap tex' data-insert='\\circ '>&#x2218;<aside>circle</aside></li>
                <li class='keycap tex' data-insert='\\approx '>&#x2248;<aside>approx.</aside></li>
                <li class='keycap tex' data-insert='\\ne '>&#x2260;</li>
                <li class='keycap tex' data-insert='\\pm '>&#x00b1;</li>
                <arrows/>
            </ul>
        </div>`,"lower-greek":`
        <div class='rows'>
            <ul><li class='keycap tex' data-insert='\\varphi '><i>&#x03c6;</i><aside>phi var.</aside></li>
                <li class='keycap tex' data-insert='\\varsigma '><i>&#x03c2;</i><aside>sigma var.</aside></li>
                <li class='keycap tex' data-insert='\\epsilon '><i>&#x03f5;</i></li>
                <li class='keycap tex' data-insert='\\rho '><i>&rho;</i></li>
                <li class='keycap tex' data-insert='\\tau '><i>&tau;</i></li>
                <li class='keycap tex' data-insert='\\upsilon '><i>&upsilon;</i></li>
                <li class='keycap tex' data-insert='\\theta '><i>&theta;</i></li>
                <li class='keycap tex' data-insert='\\iota '><i>&iota;</i></li>
                <li class='keycap tex' data-insert='\\omicron '>&omicron;</i></li>
                <li class='keycap tex' data-insert='\\pi '><i>&pi;</i></li>
            </ul>
            <ul><li class='keycap tex' data-insert='\\alpha ' data-shifted='&Alpha;' data-shifted-command='["insert","\\\\char\\"391"]'><i>&alpha;</i></li>
                <li class='keycap tex' data-insert='\\sigma '><i>&sigma;</i></li>
                <li class='keycap tex' data-insert='\\delta '><i>&delta;</i></li>
                <li class='keycap tex' data-insert='\\phi '><i>&#x03d5;</i></i></li>
                <li class='keycap tex' data-insert='\\gamma '><i>&gamma;</i></li>
                <li class='keycap tex' data-insert='\\eta '><i>&eta;</i></li>
                <li class='keycap tex' data-insert='\\xi '><i>&xi;</i></li>
                <li class='keycap tex' data-insert='\\kappa '><i>&kappa;</i></li>
                <li class='keycap tex' data-insert='\\lambda '><i>&lambda;</i></li>
            </ul>
            <ul><li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='upper-greek'><svg class="svg-glyph"><use xlink:href="#svg-shift" /></svg></li>
                <li class='keycap tex' data-insert='\\zeta '><i>&zeta;</i></li>
                <li class='keycap tex' data-insert='\\chi '><i>&chi;</i></li>
                <li class='keycap tex' data-insert='\\psi '><i>&psi;</i></li>
                <li class='keycap tex' data-insert='\\omega '><i>&omega;</i></li>
                <li class='keycap tex' data-insert='\\beta '><i>&beta;</i></li>
                <li class='keycap tex' data-insert='\\nu '><i>&nu;</i></li>
                <li class='keycap tex' data-insert='\\mu '><i>&mu;</i></li>
                <li class='action font-glyph bottom right w15'
                    data-shifted='<span class="warning"><svg class="svg-glyph"><use xlink:href="#svg-trash" /></svg></span>'
                    data-shifted-command='"deleteAll"'
                    data-alt-keys='delete' data-command='["performWithFeedback","deleteBackward"]'
                ><svg class="svg-glyph"><use xlink:href="#svg-delete-backward" /></svg></li>
            </ul>
            <ul>
                <li class='keycap ' data-key=' '>&nbsp;</li>
                <li class='keycap'>,</li>
                <li class='keycap tex' data-insert='\\varepsilon '><i>&#x03b5;</i><aside>epsilon var.</aside></li>
                <li class='keycap tex' data-insert='\\vartheta '><i>&#x03d1;</i><aside>theta var.</aside></li>
                <li class='keycap tex' data-insert='\\varkappa '><i>&#x3f0;</i><aside>kappa var.</aside></li>
                <li class='keycap tex' data-insert='\\varpi '><i>&#x03d6;<aside>pi var.</aside></i></li>
                <li class='keycap tex' data-insert='\\varrho '><i>&#x03f1;</i><aside>rho var.</aside></li>
                <arrows/>
            </ul>
        </div>`,"upper-greek":`
        <div class='rows'>
            <ul><li class='keycap tex' data-insert='\\Phi '>&Phi;<aside>phi</aside></li>
                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>
                <li class='keycap tex' data-insert='\\char"0190'>&#x0190;<aside>epsilon</aside></li>
                <li class='keycap tex' data-insert='\\char"3A1'>&#x3A1;<aside>rho</aside></li>
                <li class='keycap tex' data-insert='\\char"3A4'>&#x3A4;<aside>tau</aside></li>
                <li class='keycap tex' data-insert='\\Upsilon '>&Upsilon;<aside>upsilon</aside></li>
                <li class='keycap tex' data-insert='\\Theta '>&Theta;<aside>theta</aside></li>
                <li class='keycap tex' data-insert='\\char"399'>&Iota;<aside>iota</aside></li>
                <li class='keycap tex' data-insert='\\char"39F'>&#x039F;<aside>omicron</aside></li>
                <li class='keycap tex' data-insert='\\Pi '>&Pi;<aside>pi</aside></li></ul>
            <ul><li class='keycap tex' data-insert='\\char"391'>&#x391;<aside>alpha</aside></li>
                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>
                <li class='keycap tex' data-insert='\\Delta '>&Delta;<aside>delta</aside></li>
                <li class='keycap tex' data-insert='\\Phi '>&#x03a6;<aside>phi</aside></li>
                <li class='keycap tex' data-insert='\\Gamma '>&Gamma;<aside>gamma</aside></li>
                <li class='keycap tex' data-insert='\\char"397'>&Eta;<aside>eta</aside></li>
                <li class='keycap tex' data-insert='\\Xi '>&Xi;<aside>xi</aside></li>
                <li class='keycap tex' data-insert='\\char"39A'>&Kappa;<aside>kappa</aside></li>
                <li class='keycap tex' data-insert='\\Lambda '>&Lambda;<aside>lambda</aside></li></ul>
            <ul><li class='shift modifier font-glyph bottom left selected w15 layer-switch' data-layer='lower-greek'><svg class="svg-glyph"><use xlink:href="#svg-shift" /></svg></li>
                <li class='keycap tex' data-insert='\\char"396'>&Zeta;<aside>zeta</aside></li>
                <li class='keycap tex' data-insert='\\char"3A7'>&Chi;<aside>chi</aside></li>
                <li class='keycap tex' data-insert='\\Psi '>&Psi;<aside>psi</aside></li>
                <li class='keycap tex' data-insert='\\Omega '>&Omega;<aside>omega</aside></li>
                <li class='keycap tex' data-insert='\\char"392'>&Beta;<aside>beta</aside></li>
                <li class='keycap tex' data-insert='\\char"39D'>&Nu;<aside>nu</aside></li>
                <li class='keycap tex' data-insert='\\char"39C'>&Mu;<aside>mu</aside></li>
                <li class='action font-glyph bottom right w15' data-command='["performWithFeedback","deleteBackward"]'><svg class="svg-glyph"><use xlink:href="#svg-delete-backward" /></svg></li></ul>
            <ul>
                <li class='separator w10'>&nbsp;</li>
                <li class='keycap'>.</li>
                <li class='keycap w50' data-key=' '>&nbsp;</li>
                <arrows/>
            </ul>
        </div>`,"latex-lower":`
        <div class='rows'>
            <ul><row name='lower-1' class='tt' shift-layer='latex-upper'/></ul>
            <ul><row name='lower-2' class='tt' shift-layer='latex-upper'/></ul>
            <ul><row name='lower-3' class='tt' shift-layer='latex-upper'/></ul>
            <ul>
                <li class='layer-switch font-glyph modifier bottom left' data-layer='latex-symbols'>01#</li>
                <li class='keycap tt' data-shifted='[' data-shifted-command='["insertAndUnshiftKeyboardLayer", "["]'>{</li>
                <li class='keycap tt' data-shifted=']' data-shifted-command='["insertAndUnshiftKeyboardLayer", "]"]'>}</li>
                <li class='keycap tt' data-shifted='(' data-shifted-command='["insertAndUnshiftKeyboardLayer", "("]'>^</li>
                <li class='keycap tt' data-shifted=')' data-shifted-command='["insertAndUnshiftKeyboardLayer", ")"]'>_</li>
                <li class='keycap w20' data-key=' '>&nbsp;</li>
                <arrows/>
            </ul>
        </div>`,"latex-upper":`
        <div class='rows'>
            <ul><row name='upper-1' class='tt' shift-layer='latex-lower'/></ul>
            <ul><row name='upper-2' class='tt' shift-layer='latex-lower'/></ul>
            <ul><row name='upper-3' class='tt' shift-layer='latex-lower'/></ul>
            <ul>
                <li class='layer-switch font-glyph modifier bottom left' data-layer='latex-symbols'01#</li>
                <li class='keycap tt'>[</li>
                <li class='keycap tt'>]</li>
                <li class='keycap tt'>(</li>
                <li class='keycap tt'>)</li>
                <li class='keycap w20' data-key=' '>&nbsp;</li>
                <arrows/>
            </ul>
        </div>`,"latex-symbols":`
        <div class='rows'>
            <ul><li class='keycap tt'>1</li><li class='keycap tt'>2</li><li class='keycap tt'>3</li><li class='keycap tt'>4</li><li class='keycap tt'>5</li><li class='keycap tt'>6</li><li class='keycap tt'>7</li><li class='keycap tt'>8</li><li class='keycap tt'>9</li><li class='keycap tt'>0</li></ul>
            <ul><li class='keycap tt'>!</li><li class='keycap tt'>@</li><li class='keycap tt'>#</li><li class='keycap tt'>$</li><li class='keycap tt'>%</li><li class='keycap tt'>^</li><li class='keycap tt'>&</li><li class='keycap tt'>*</li><li class='keycap tt'>+</li><li class='keycap tt'>=</li></ul>
            <ul>
                <li class='keycap tt'>\\</li>
                <li class='keycap tt'>|</li>
                <li class='keycap tt'>/</li>
                <li class='keycap tt'>\`</li>
                <li class='keycap tt'>;</li>
                <li class='keycap tt'>:</li>
                <li class='keycap tt'>?</li>
                <li class='keycap tt'>'</li>
                <li class='keycap tt'>"</li>
                <li class='action font-glyph bottom right'
                    data-shifted='<span class="warning"><svg class="svg-glyph"><use xlink:href="#svg-trash" /></svg></span>'
                    data-shifted-command='"deleteAll"'
                    data-alt-keys='delete' data-command='["performWithFeedback","deleteBackward"]'
                ><svg class="svg-glyph"><use xlink:href="#svg-delete-backward" /></svg></li>
            </ul>
            <ul>
                <li class='layer-switch font-glyph modifier bottom left' data-layer='latex-lower'>abc</li>
                <li class='keycap tt'>&lt;</li>
                <li class='keycap tt'>&gt;</li>
                <li class='keycap tt'>~</li>
                <li class='keycap tt'>,</li>
                <li class='keycap tt'>.</li>
                <li class='keycap' data-key=' '>&nbsp;</li>
                <arrows/>
            </ul>
        </div>`,functions:`
        <div class='rows'>
            <ul><li class='separator'></li>
                <li class='fnbutton' data-insert='\\sin'></li>
                <li class='fnbutton' data-insert='\\sin^{-1}'></li>
                <li class='fnbutton' data-insert='\\ln'></li>
                <li class='fnbutton' data-insert='\\exponentialE^{#?}'></li>
                <li class='bigfnbutton' data-insert='\\operatorname{lcm}(#?)' data-latex='\\operatorname{lcm}()'></li>
                <li class='bigfnbutton' data-insert='\\operatorname{ceil}(#?)' data-latex='\\operatorname{ceil}()'></li>
                <li class='bigfnbutton' data-insert='\\lim_{n\\to\\infty}'></li>
                <li class='bigfnbutton' data-insert='\\int'></li>
                <li class='bigfnbutton' data-insert='\\operatorname{abs}(#?)' data-latex='\\operatorname{abs}()'></li>
            </ul>
            <ul><li class='separator'></li>
                <li class='fnbutton' data-latex='\\cos'></li>
                <li class='fnbutton' data-latex='\\cos^{-1}'></li>
                <li class='fnbutton' data-latex='\\ln_{10}'></li>
                <li class='fnbutton' data-latex='10^{#?}'></li>
                <li class='bigfnbutton' data-latex='\\operatorname{gcd}(#?)' data-latex='\\operatorname{gcd}()'></li>
                <li class='bigfnbutton' data-latex='\\operatorname{floor}(#?)' data-latex='\\operatorname{floor}()'></li>
                <li class='bigfnbutton' data-latex='\\sum_{n\\mathop=0}^{\\infty}'></li>
                <li class='bigfnbutton' data-latex='\\int_{0}^{\\infty}'></li>
                <li class='bigfnbutton' data-latex='\\operatorname{sign}(#?)' data-latex='\\operatorname{sign}()'></li>
            </ul>
            <ul><li class='separator'></li>
                <li class='fnbutton' data-latex='\\tan'></li>
                <li class='fnbutton' data-latex='\\tan^{-1}'></li>
                <li class='fnbutton' data-latex='\\log_{#?}'></li>
                <li class='fnbutton' data-latex='\\sqrt[#?]{#0}'></li>
                <li class='bigfnbutton' data-insert='#0 \\mod' data-latex='\\mod'></li>
                <li class='bigfnbutton' data-insert='\\operatorname{round}(#?) ' data-latex='\\operatorname{round}()'></li>
                <li class='bigfnbutton' data-insert='\\prod_{n\\mathop=0}^{\\infty}' data-latex='{\\scriptstyle \\prod_{n=0}^{\\infty}}'></li>
                <li class='bigfnbutton' data-insert='\\frac{\\differentialD #0}{\\differentialD x}'></li>
                <li class='action font-glyph bottom right' data-command='["performWithFeedback","deleteBackward"]'><svg class="svg-glyph"><use xlink:href="#svg-delete-backward" /></svg></li></ul>
            <ul><li class='separator'></li>
                <li class='fnbutton'>(</li>
                <li class='fnbutton'>)</li>
                <li class='fnbutton' data-insert='^{#?}' data-latex='x^{#?}'></li>
                <li class='fnbutton' data-insert='_{#?}' data-latex='x_{#?}'></li>
                <li class='keycap w20 ' data-key=' '>&nbsp;</li>
                <arrows/>
            </ul>
        </div>`,style:`
        <div class='rows'>
            <ul>
                <li class='keycap' data-alt-keys='foreground-color' data-command='["applyStyle",{"color":"red"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428'></span></li>
                <li class='keycap' data-alt-keys='background-color' data-command='["applyStyle",{"backgroundColor":"yellow"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590'></span></li>
                <li class='separator w5'></li>
                <li class='keycap' data-command='["applyStyle",{"size":"3"}]' data-latex='\\scriptsize\\text{small}'></li>
                <li class='keycap' data-command='["applyStyle",{"size":"5"}]' data-latex='\\scriptsize\\text{normal}'></li>
                <li class='keycap' data-command='["applyStyle",{"size":"9"}]' data-latex='\\huge\\text{big}'></li>
                <li class='separator w5'></li>
                <li class='keycap' data-latex='\\langle' data-command='["insert", "\\\\langle", {"smartFence":true}]'></li>
            </ul>
            <ul>
                <li class='keycap' data-command='["applyStyle",{"series":"l"}]' data-latex='\\fontseries{l}\\text{Ab}'></li>
                <li class='keycap' data-command='["applyStyle",{"series":"m"}]' data-latex='\\fontseries{m}\\text{Ab}'></li>
                <li class='keycap' data-command='["applyStyle",{"series":"b"}]' data-latex='\\fontseries{b}\\text{Ab}'></li>
                <li class='keycap' data-command='["applyStyle",{"series":"bx"}]' data-latex='\\fontseries{bx}\\text{Ab}'></li>
                <li class='keycap' data-command='["applyStyle",{"series":"sb"}]' data-latex='\\fontseries{sb}\\text{Ab}'></li>
                <li class='keycap' data-command='["applyStyle",{"series":"c"}]' data-latex='\\fontseries{c}\\text{Ab}'></li>
            </ul>
            <ul>
                <li class='keycap' data-command='["applyStyle",{"shape":"up"}]' data-latex='\\textup{Ab}'></li>
                <li class='keycap' data-command='["applyStyle",{"shape":"it"}]' data-latex='\\textit{Ab}'></li>
                <li class='keycap' data-command='["applyStyle",{"shape":"sl"}]' data-latex='\\textsl{Ab}'></li>
                <li class='keycap' data-command='["applyStyle",{"shape":"sc"}]' data-latex='\\textsc{Ab}'></li>
                <li class='separator w5'></li>
                <li class='keycap' data-insert='\\emph{#@} ' data-latex='\\text{\\emph{emph}}'></li>
            </ul>
            <ul>
                <li class='keycap' data-command='["applyStyle",{"fontFamily":"cmr"}]' data-latex='\\textrm{Az}'></li>
                <li class='keycap' data-command='["applyStyle",{"fontFamily":"cmtt"}]' data-latex='\\texttt{Az}'></li>
                <li class='keycap' data-command='["applyStyle",{"fontFamily":"cmss"}]' data-latex='\\textsf{Az}'></li>

                <li class='keycap' data-command='["applyStyle",{"fontFamily":"bb"}]'  data-latex='\\mathbb{AZ}'></li>
                <li class='keycap' data-command='["applyStyle",{"fontFamily":"scr"}]'  data-latex='\\mathscr{AZ}'></li>
                <li class='keycap' data-command='["applyStyle",{"fontFamily":"cal"}]' data-latex='\\mathcal{A1}'></li>
                <li class='keycap' data-command='["applyStyle",{"fontFamily":"frak"}]' data-latex='\\mathfrak{Az}'></li>
            </ul>
        </div>`};function Ar(t,e){t=t.replace(/(^|[^\\])#@/g,"$1#?");const a=Qr(),i=new S("root",a);return i.body=st(t,a,{parseMode:"math",args:e}),jt(qo(Na(new z(i.render(new V({registers:a.registers},{fontSize:5},"displaystyle")),{classes:"ML__base"}))),{classes:"ML__mathlive"}).toMarkup()}function Hs(t,e,a){var i,o,r;let n="<div class='left'>";const s=e.replace(/\s+/g," ").split(" ");if(s.length>1){const c={...Mn,...(i=t.customVirtualKeyboards)!==null&&i!==void 0?i:{}};for(const d of s){if(!c[d])break;n+="<div class='",d===a?n+="selected ":c[d].command?n+="action ":n+="layer-switch ",n+=((o=c[d].classes)!==null&&o!==void 0?o:"")+"'",c[d].tooltip&&(n+="data-tooltip='"+((r=ga(c[d].tooltip))!==null&&r!==void 0?r:c[d].tooltip)+"' "),d!==a&&(typeof c[d].command=="string"?n+=`data-command='"${c[d].command}"'`:Array.isArray(c[d].command)&&(n+=`data-command='"${c[d].command.join("")}"'`),c[d].layer&&(n+="data-layer='"+c[d].layer+"'")),n+=">"+c[d].label+"</div>"}}n+="</div>";const l=t.virtualKeyboardToolbar==="default"?["copyToClipboard","undo","redo"]:[],u={copyToClipboard:`
            <div class='action'
                data-command='"copyToClipboard"'
                data-tooltip='${ga("tooltip.copy to clipboard")}'>
                <svg><use xlink:href='#svg-copy' /></svg>
            </div>
        `,undo:`
            <div class='action disabled'
                data-command='"undo"'
                data-tooltip='${ga("tooltip.undo")}'>
                <svg><use xlink:href='#svg-undo' /></svg>
            </div>
        `,redo:`
            <div class='action disabled'
                data-command='"redo"'
                data-tooltip='${ga("tooltip.redo")}'>
                <svg><use xlink:href='#svg-redo' /></svg>
            </div>
        `};return l.length>0&&(n+=`
            <div class='right'>
                ${l.map(c=>u[c]).join("")}
            </div>
        `),"<div class='keyboard-toolbar' role='toolbar'>"+n+"</div>"}function Ln(t,e,a){var i,o;for(const r of e){let n;r.getAttribute("data-latex")?n=Ar(r.getAttribute("data-latex").replace(/&quot;/g,'"'),()=>"\\placeholder{}"):r.getAttribute("data-insert")&&r.innerHTML===""?n=Ar(r.getAttribute("data-insert").replace(/&quot;/g,'"'),()=>"\\placeholder{}"):r.getAttribute("data-content")&&(n=r.getAttribute("data-content").replace(/&quot;/g,'"')),r.getAttribute("data-aside")&&(n=(n??"")+"<aside>"+r.getAttribute("data-aside").replace(/&quot;/g,'"')+"</aside>"),n!==void 0&&(r.innerHTML=t.options.createHTML(n)),r.getAttribute("data-classes")&&r.classList.add(r.getAttribute("data-classes"));const s=(i=r.getAttribute("data-insert"))===null||i===void 0?void 0:i.replace(/&quot;/g,'"');let l;s&&eo[s]&&(r.dataset.shifted=eo[s][0],r.dataset.shiftedCommand=JSON.stringify(["insertAndUnshiftKeyboardLayer",eo[s][1]]));const u=r.getAttribute("data-command");if(u)if(/^[a-zA-Z]+$/.test(u))l=u;else try{l=JSON.parse(u)}catch{}else l=r.getAttribute("data-insert")?["insert",r.getAttribute("data-insert"),{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex",resetStyle:!0}]:r.getAttribute("data-latex")?["insert",r.getAttribute("data-latex"),{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex",resetStyle:!0}]:["typedText",(o=r.getAttribute("data-key"))!==null&&o!==void 0?o:r.textContent,{focus:!0,feedback:!0,simulateKeystroke:!0}];if(l){a&&(l=[a,l]);let c=l;const d=r.getAttribute("data-alt-keys");d&&Q[d]&&(c={default:l,pressAndHoldStart:["showAlternateKeys",d],pressAndHoldEnd:"hideAlternateKeys"}),vi(p=>t.executeCommand(p),r,c)}}}function Ws(t,e){var a,i,o,r;const n={qwerty:{"lower-1":"qwertyuiop","lower-2":" asdfghjkl ","lower-3":"^zxcvbnm~","upper-1":"QWERTYUIOP","upper-2":" ASDFGHJKL ","upper-3":"^ZXCVBNM~","numpad-1":"789/","numpad-2":"456*","numpad-3":"123-","numpad-4":"0.=+"},azerty:{"lower-1":"azertyuiop","lower-2":"qsdfghjklm","lower-3":"^ wxcvbn ~","upper-1":"AZERTYUIOP","upper-2":"QSDFGHJKLM","upper-3":"^ WXCVBN ~"},qwertz:{"lower-1":"qwertzuiop","lower-2":" asdfghjkl ","lower-3":"^yxcvbnm~","upper-1":"QWERTZUIOP","upper-2":" ASDFGHJKL","upper-3":"^YXCVBNM~"},dvorak:{"lower-1":"^  pyfgcrl ","lower-2":"aoeuidhtns","lower-3":"qjkxbmwvz~","upper-1":"^  PYFGCRL ","upper-2":"AOEUIDHTNS","upper-3":"QJKXBMWVZ~"},colemak:{"lower-1":" qwfpgjluy ","lower-2":"arstdhneio","lower-3":"^zxcvbkm~","upper-1":" QWFPGNLUY ","upper-2":"ARSTDHNEIO","upper-3":"^ZXCVBKM~"}};let s=t.virtualKeyboardLayout;if(s==="auto"){const p=Ba();p&&(s=p.virtualLayout),s&&s!=="auto"||(s=(a={fr:"azerty",be:"azerty",al:"qwertz",ba:"qwertz",cz:"qwertz",de:"qwertz",hu:"qwertz",sk:"qwertz",ch:"qwertz"}[ae.locale.slice(0,2)])!==null&&a!==void 0?a:"qwerty")}const l=(i=n[s])!==null&&i!==void 0?i:n.qwerty;let u,c=e;c=c.replace(/<arrows\/>/g,`
        <li class='action' data-command='["performWithFeedback","moveToPreviousChar"]'
            data-shifted='<svg class="svg-glyph"><use xlink:href="#svg-angle-double-left" /></svg>'
            data-shifted-command='["performWithFeedback","extendToPreviousChar"]'>
            <svg class="svg-glyph"><use xlink:href='#svg-arrow-left' /></svg>
        </li>
        <li class='action' data-command='["performWithFeedback","moveToNextChar"]'
            data-shifted='<svg class="svg-glyph"><use xlink:href="#svg-angle-double-right" /></svg>'
            data-shifted-command='["performWithFeedback","extendToNextChar"]'>
            <svg class="svg-glyph"><use xlink:href='#svg-arrow-right' /></svg>
        </li>
        <li class='action' data-command='["performWithFeedback","commit"]'>
        <svg class="svg-glyph"><use xlink:href='#svg-commit' /></svg></li>`);let d=c.match(/(<row\s+)(.*)((?:<\/row|\/)>)/);for(;d;){u="";const p=d[2].match(/[a-zA-Z][a-zA-Z\d-]*=(['"])(.*?)\1/g),h={};if(p)for(const b of p){const y=b.match(/([a-zA-Z][a-zA-Z\d-]*)=(['"])(.*?)\2/);y&&(h[y[1]]=y[3])}let m=l[h.name];if(m||(m=n.qwerty[h.name]),m)for(const b of m){let y=(o=h.class)!==null&&o!==void 0?o:"";y&&(y=` ${y}`),b==="~"?(u+="<li class='action font-glyph bottom right ",u+=m.length-(m.match(/ /g)||[]).length/2==10?"w10":"w15",u+=`' data-shifted='<span class="warning"><svg class="svg-glyph"><use xlink:href="#svg-trash" /></svg></span>'
                        data-shifted-command='"deleteAll"'
                        data-alt-keys='delete' data-command='["performWithFeedback","deleteBackward"]'
                        ><svg class="svg-glyph"><use xlink:href="#svg-delete-backward" /></svg></li>`):b===" "?u+="<li class='separator w5'></li>":b==="^"?u+="<li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='"+h["shift-layer"]+`'><svg class="svg-glyph"><use xlink:href="#svg-shift" /></svg></li>`:b==="/"?u+="<li class='keycap"+y+"' data-alt-keys='/' data-insert='\\frac{#@}{#?}'>&divide;</li>":b==="*"?u+="<li class='keycap"+y+"' data-alt-keys='*' data-insert='\\times '>&times;</li>":b==="-"?u+="<li class='keycap"+y+"' data-alt-keys='-' data-key='-'>&#x2212;</li>":b==="."?u+="<li class='keycap"+y+`' data-alt-keys='.' data-command='"insertDecimalSeparator"'>`+((r=t.decimalSeparator)!==null&&r!==void 0?r:".")+"</li>":y.includes("tt")?u+=`<li class='keycap${y}' data-alt-keys='${b}' data-command='["typedText","${b}",{"mode":"command", "focus":true, "feedback":true}]'>${b}</li>`:u+="<li class='keycap"+y+"' data-alt-keys='"+b+"'>"+b+"</li>"}c=c.replace(new RegExp(d[1]+d[2]+d[3]),u),d=c.match(/(<row\s+)(.*)((?:<\/row|\/)>)/)}return c}function xi(t){$a();const e=t.element.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(e)for(const a of e){const i=a.getAttribute("data-unshifted-content");i&&(a.innerHTML=t.options.createHTML(i),a.dataset.unshiftedContent="");const o=a.getAttribute("data-unshifted-command");o&&(a.dataset.command=o,a.dataset.unshiftedCommand="")}return!1}function Js(t){return Object.keys(t).map(e=>`${e} {${function(a){return typeof a=="string"?a:Object.entries(a).map(([i,o])=>`${i}:${o} !important`).join(";")}(t[e])}}`).join("")}function Dr(t,e){e!=="lower-command"&&e!=="upper-command"&&e!=="symbols-command"&&t.executeCommand("complete"),xa(t),$a(),xi(t);const a=t==null?void 0:t.element.querySelectorAll(".keyboard-layer");let i=!1;for(const o of a)if(o.dataset.layer===e){i=!0;break}if(i)for(const o of a)o.dataset.layer===e?o.classList.add("is-visible"):o.classList.remove("is-visible");return t.focusMathfield(),!0}function xa(t,e=""){const a=t.options.virtualKeyboardContainer;if(!a)return!1;if(t.element?t.element.classList.add("is-visible"):t.buildAndAttachElement(e),!t.visible){const i=$e();i.visibleVirtualKeyboard&&Lo(i.visibleVirtualKeyboard),i.visibleVirtualKeyboard=t;const o=a.style.paddingBottom;t.originalContainerBottomPadding=o,a.style.paddingBottom=o?`calc(${o} + var(--keyboard-height, 276px) - 1px)`:"calc(var(--keyboard-height, 276px) - 1px)"}return setTimeout(()=>{var i;(i=t.element)===null||i===void 0||i.classList.add("is-visible"),t.focusMathfield()},1),t.visible=!0,t.stateChanged(),!1}function Lo(t){var e,a,i;const o=t.options.virtualKeyboardContainer;return!!o&&(t.element&&($e().visibleVirtualKeyboard=void 0,t.disable(),$a(),t.visible=!1,(e=t.coreStylesheet)===null||e===void 0||e.release(),t.coreStylesheet=null,(a=t.virtualKeyboardStylesheet)===null||a===void 0||a.release(),t.virtualKeyboardStylesheet=null,(i=t._element)===null||i===void 0||i.remove(),t._element=void 0,t.originalContainerBottomPadding!==null&&(o.style.paddingBottom=t.originalContainerBottomPadding)),t.visible=!1,t.stateChanged(),!1)}function Ga(t,e,a){typeof e=="function"&&(a=e,e=1/0),e===void 0&&(e=1/0);let i=t.position,o=!1,r="";for(;!o;){const n=t.at(i);o=e===0||n===void 0||n.mode!=="math"||!(/mord|textord|mpunct/.test(n.type)||n.type==="mop"&&/[a-zA-Z]+/.test(n.value))||!n.hasEmptyBranch("superscript")||!n.hasEmptyBranch("subscript")||typeof a=="function"&&!a(n),o||(n.mode="text",n.command=n.value,n.verbatimLatex=void 0,r+=n.value),i-=1,e-=1}me(t,{data:r,inputType:"insertText"})}function $t(t,e,a){typeof e=="function"&&(a=e,e=1/0),e===void 0&&(e=1/0);let i=t.position,o=!1;const r=[];for(;!o;){const n=t.at(i);o=e===0||!n||n.isFirstSibling||n.mode!=="text"||n.value===" "||a&&!a(n),o||(r.push(n.serialize({defaultMode:"math"})),n.mode="math"),i-=1,e-=1}Co(t),me(t,{data:he(r),inputType:"insertText"})}function Co(t){var e;let a=t.position-1;for(;a>=0&&((e=t.at(a))===null||e===void 0?void 0:e.mode)==="math";)a-=1;if(!(a<0)&&t.at(a).mode==="text"&&t.at(a).value===" "&&t.at(a-1).mode==="math"){t.at(a-1).parent.removeChild(t.at(a-1));const i=t.suppressChangeNotifications;t.suppressChangeNotifications=!0,t.position-=1,t.suppressChangeNotifications=i,me(t,{inputType:"deleteContent"})}}Ve({showAlternateKeys:function(t,e){var a;gt();const i=Q[e],o=document.createElement("div");o.setAttribute("aria-hidden","true"),o.className="ML__keyboard alternate-keys"+(t.element.classList.contains("material")?" material":""),o.id="mathlive-alternate-keys-panel",i.length>=14?o.style.width="236px":i.length>=7?o.style.width="286px":i.length===4||i.length===2?o.style.width="146px":i.length===1?o.style.width="86px":o.style.width="146px",o.style.height="auto";let r="";for(const l of i)r+="<li",typeof l=="string"?r+=' data-latex="'+l.replace(/"/g,"&quot;")+'"':(l.latex&&(r+=' data-latex="'+l.latex.replace(/"/g,"&quot;")+'"'),l.content&&(r+=' data-content="'+l.content.replace(/"/g,"&quot;")+'"'),l.insert&&(r+=' data-insert="'+l.insert.replace(/"/g,"&quot;")+'"'),l.command&&(typeof l.command=="string"?r+=` data-command="${l.command.replace(/"/g,"&quot;")}"`:r+=" data-command='"+JSON.stringify(l.command).replace(/"/g,"&quot;")+"'"),l.aside&&(r+=` data-aside="${l.aside.replace(/"/g,"&quot;")}"`),l.class&&(r+=` data-classes="${l.class}"`)),r+=">",r+=typeof l=="string"?l:(a=l.label)!==null&&a!==void 0?a:"",r+="</li>";r="<ul>"+r+"</ul>",o.innerHTML=t.options.createHTML(r),Ln(t,[...o.querySelectorAll("li")],"performAlternateKeys"),aa.scrim||(aa.scrim=new aa),aa.scrim.open({root:t.options.virtualKeyboardContainer,child:o});const n=t==null?void 0:t.element.querySelector('div.keyboard-layer.is-visible div.rows ul li[data-alt-keys="'+e+'"]'),s=n==null?void 0:n.getBoundingClientRect();if(s){s.top-o.clientHeight<0&&(o.style.width="auto",i.length<=6?o.style.height="56px":i.length<=12?o.style.height="108px":i.length<=18?o.style.height="205px":o.classList.add("compact"));const l=(s.top-o.clientHeight+5).toString()+"px",u=Math.max(0,Math.min(window.innerWidth-o.offsetWidth,(s.left+s.right-o.offsetWidth)/2))+"px";o.style.transform="translate("+u+","+l+")",o.classList.add("is-visible")}return!1}},{target:"virtual-keyboard"}),Ve({shiftKeyboardLayer:function(t){const e=t==null?void 0:t.element.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(e)for(const a of e){if(a.dataset.unshiftedContent)return!1;let i=a.getAttribute("data-shifted");if(i||/^[a-z]$/.test(a.innerHTML)){a.dataset.unshiftedContent=a.innerHTML,i||(i=a.innerHTML.toUpperCase()),a.innerHTML=t.options.createHTML(i);const o=a.getAttribute("data-command");if(o){a.dataset.unshiftedCommand=o;const r=a.getAttribute("data-shifted-command");if(r)a.dataset.command=r;else{const n=JSON.parse(o);Ce(n)&&(n[1]=n[1].toUpperCase()),a.dataset.command=JSON.stringify(n)}}}}return!1}},{target:"virtual-keyboard"}),Ve({hideAlternateKeys:()=>$a(),performAlternateKeys:function(t,e){return $a(),t.executeCommand(e)},switchKeyboardLayer:(t,e)=>Dr(t,e),unshiftKeyboardLayer:t=>xi(t),insertAndUnshiftKeyboardLayer:function(t,e){return t.executeCommand(["insert",e]),xi(t),!0}},{target:"virtual-keyboard"}),Ve({toggleVirtualKeyboardAlt:function(t){let e=!1;return t!=null&&t.element&&(e=t==null?void 0:t.element.classList.contains("material"),t.disable()),xa(t,e?"":"material"),!1},toggleVirtualKeyboardShift:function(t){var e,a;t.options.virtualKeyboardLayout={qwerty:"azerty",azerty:"qwertz",qwertz:"dvorak",dvorak:"colemak",colemak:"qwerty"}[t.options.virtualKeyboardLayout];const i=(a=(e=t==null?void 0:t.element.querySelector("div.keyboard-layer.is-visible"))===null||e===void 0?void 0:e.id)!==null&&a!==void 0?a:"";return t&&t.disable(),xa(t),i&&Dr(t,i),!1}},{target:"virtual-keyboard"}),Ve({toggleVirtualKeyboard:(t,e)=>function(a,i){return a.visible?Lo(a):xa(a,i),!1}(t,e),hideVirtualKeyboard:t=>Lo(t),showVirtualKeyboard:(t,e)=>xa(t,e),onUndoStateChanged:(t,e,a)=>function(i,o,r){var n;const s=(n=i.element)===null||n===void 0?void 0:n.querySelector(".keyboard-toolbar");if(!s)return!1;const l=s.querySelector(`[data-command='"undo"']`),u=s.querySelector(`[data-command='"redo"']`);return u&&(r?u.classList.remove("disabled"):u.classList.add("disabled")),l&&(o?l.classList.remove("disabled"):l.classList.add("disabled")),!1}(t,e,a)},{target:"virtual-keyboard"});var zr="#mathlive-keystroke-caption-panel{--keystroke:#fff;--on-keystroke:#555;--keystroke-border:#f7f7f7;background:var(--secondary,hsl(var(--hue,212),19%,26%));border-color:var(--secondary-border,#e8e8e8);border-radius:6px;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);display:flex;flex-direction:row-reverse;justify-content:center;padding:16px;position:absolute;text-align:center;visibility:hidden;z-index:1}@media (prefers-color-scheme:dark){body:not([theme=light]) #mathlive-keystroke-caption-panel{--keystroke:hsl(var(--hue,212),50%,30%);--on-keystroke:#fafafa;--keystroke-border:hsl(var(--hue,212),50%,25%)}}body[theme=dark] #mathlive-keystroke-caption-panel{--keystroke:hsl(var(--hue,212),50%,30%);--on-keystroke:#fafafa;--keystroke-border:hsl(var(--hue,212),50%,25%)}#mathlive-keystroke-caption-panel>span{fill:currentColor;background-color:var(--keystroke);border:2px solid var(--keystroke-border);border-radius:6px;color:var(--on-keystroke);font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:1em;margin:0 8px 0 0;min-width:14px;padding:4px}";let to,Ao=null,Do=null;function Cn(t){return t.keystrokeCaption||(t.keystrokeCaption=rn("mathlive-keystroke-caption-panel"),to===void 0&&(to=zt(zr).toString(36)),Ao=Tt(null,zr,to),Do=Tt(null,Bt,zt(Bt).toString(36))),t.keystrokeCaption}function Us(t){if(!t||t.length>1)return null;const e=t[0];return e instanceof ze&&e.leftDelim==="("&&e.rightDelim===")"?e.removeBranch("body"):null}function ki(t){if(t){for(let e=0;t[e];e++){const a=t[e];if(a instanceof ze&&a.leftDelim==="("){let i=0,o=0,r=0;for(let n=0;a.body[n];n++)a.body[n].type==="genfrac"&&(i++,o=n),r++;r===0&&i===1&&(t[e]=a.body[o])}}for(const e of t){for(const a of e.branches)if(!e.hasEmptyBranch(a)){ki(e.branch(a));const i=Us(e.branch(a));i&&e.setChildren(i,a)}if(e instanceof re)for(const a of e.cells)ki(a)}}}function An(t){if(!t)return[];const e=[];for(const a of t){for(const i of a.branches)if(!a.hasEmptyBranch(i)){const o=An(a.branch(i));e.push(...o)}a instanceof ce&&e.push(a)}return e}function Xs(t){return!!/^(mord|surd|msubsup|leftright|mop|mclose)$/.test(t.type)&&!t.isExtensibleSymbol&&!t.isFunction}function Po(t,e,a){const i=t.at(t.position),{parent:o}=i;let r=o instanceof ze?o.leftDelim+o.rightDelim:"";if(r==="\\lbrace\\rbrace"&&(r="{}"),r==="\\{\\}"&&(r="{}"),r==="\\lparen\\rparen"&&(r="()"),r==="{}"&&/\||\\vert|\\Vert|\\mvert|\\mid/.test(e))return ee.insert("math",t,"\\,\\middle"+e+"\\, ",{format:"latex",style:a}),!0;if(e!=="{"&&e!=="\\{"||(e="\\lbrace"),e!=="}"&&e!=="\\}"||(e="\\rbrace"),e==="["&&(e="\\lbrack"),e==="]"&&(e="\\rbrack"),ka[e]){const s=o;if(s.type==="leftright"&&s.firstChild===i&&(s.leftDelim==="?"||s.leftDelim==="."))return s.leftDelim=e,s.isDirty=!0,!0;if(!(o instanceof ze&&o.leftDelim==="|")){if(ee.insert("math",t,`\\left${e}\\right?`,{format:"latex",style:a}),i.lastSibling.type!=="first"){const l=t.offsetOf(i.lastSibling),u=t.extractAtoms([t.position,l]);t.at(t.position).body=u,t.position-=1}return!0}}let n="";if(Object.keys(ka).forEach(s=>{e===ka[s]&&(n=s)}),n){if(o instanceof ze&&i.isLastSibling)return o.isDirty=!0,o.rightDelim=e,t.position+=1,me(t,{data:e,inputType:"insertText"}),!0;const s=t.offsetOf(i.firstSibling);let l;for(l=t.position;l>=s;l--){const d=t.at(l);if(d instanceof ze&&d.rightDelim==="?")break}const u=t.at(l);if(l>=s&&u instanceof ze)return u.rightDelim=e,u.addChildren(t.extractAtoms([l,t.position]),i.treeBranch),t.position=l,me(t,{data:e,inputType:"insertText"}),!0;if(o instanceof ze&&o.rightDelim==="?")return o.isDirty=!0,o.rightDelim=e,o.parent.addChildren(t.extractAtoms([t.position,t.offsetOf(i.lastSibling)]),o.treeBranch),t.position=t.offsetOf(o),me(t,{data:e,inputType:"insertText"}),!0;const c=o.parent;return!!(c instanceof ze&&c.rightDelim==="?"&&t.at(t.position).isLastSibling)&&(t.position=t.offsetOf(c),Po(t,e,a))}return!1}function Dn(t,e,a){var i,o,r,n;const{model:s}=t;(function(m){var b,y;if(!m||m.key==="Unidentified"||m.key==="Dead")return;const x=m.shiftKey&&m.altKey?3:m.altKey?2:m.shiftKey?1:0;for(const k of mi)((b=k.mapping[m.code])===null||b===void 0?void 0:b[x])===m.key?k.score+=1:!((y=k.mapping[m.code])===null||y===void 0)&&y[x]&&(k.score=0);mi.sort((k,g)=>g.score-k.score)})(a);const l=Ba();if(t.keyboardLayout!==l.id&&(t.keyboardLayout=l.id,t._keybindings=void 0),clearTimeout(t.inlineShortcutBufferFlushTimer),t.inlineShortcutBufferFlushTimer=0,function(m,b){if(m.options.readOnly||!m.keystrokeCaptionVisible)return;const y=Cn(m),x=m.element.getBoundingClientRect();y.style.left=`${x.left}px`,y.style.top=x.top-64+"px",y.innerHTML=m.options.createHTML("<span>"+(pn(b)||b)+"</span>"+y.innerHTML),y.style.visibility="visible",setTimeout(()=>{y.childNodes.length>0&&y.childNodes[y.childNodes.length-1].remove(),y.childNodes.length===0&&(y.style.visibility="hidden")},3e3)}(t,e),a.defaultPrevented)return t.flushInlineShortcutBuffer(),!1;let u,c,d="";if(!t.options.readOnly){if(t.mode==="math"&&!a.ctrlKey&&!a.metaKey)if(e==="[Backspace]")t.inlineShortcutBuffer.pop(),t.flushInlineShortcutBuffer({defer:!0});else if(Mr(a)){const m=Xa(a),b=((o=(i=t.inlineShortcutBuffer[t.inlineShortcutBuffer.length-1])===null||i===void 0?void 0:i.keystrokes)!==null&&o!==void 0?o:"")+m;t.inlineShortcutBuffer.push({state:s.getState(),keystrokes:b,leftSiblings:Gs(t)});let y=0,x="";for(;!u&&y<b.length;){c=t.inlineShortcutBuffer.length-(b.length-y),x=b.slice(y);const k=t.inlineShortcutBuffer[c].leftSiblings;u=Oo(k,x,t.options.inlineShortcuts),!u&&/^[a-zA-Z][a-zA-Z0-9]+?([_\^][a-zA-Z0-9\*\+\-]+?)?$/.test(x)&&(u=t.options.onInlineShortcut(t,x)),y+=1}t.flushInlineShortcutBuffer({defer:!0})}else t.flushInlineShortcutBuffer(),t.snapshot();if(t.options.smartMode){const m=t.mode;u?t.mode="math":function(b,y,x){if(b.smartModeSuppressed)return!1;const{model:k}=b;if(!k.at(k.position).isLastSibling||!x||!Mr(x))return!1;const g=Xa(x);if(!k.selectionIsCollapsed)return!(b.mode!=="text"||!/[/_^]/.test(g));const f=function(_){let w="",T=_.position,C=!1;for(;!C;){const K=_.at(T);C=!(K&&(K.mode==="text"||K.mode==="math"&&/mord|textord|mpunct/.test(K.type))),C||(w=K.value+w),T-=1}return w}(k)+g;if(b.mode==="text"){if(y==="Esc"||/[/\\]/.test(g))return!0;if(/[\^_]/.test(g))return/(^|\s)[a-zA-Z][^_]$/.test(f)&&$t(k,1),!0;const _={")":"(","}":"{","]":"["}[g],{parent:w}=k.at(k.position);if(_&&w instanceof ze&&w.leftDelim===_)return!0;if(/(^|[^a-zA-Z])(a|I) $/.test(f))return!1;if(/[$\u20ac\xa3\u20a4\u20ba\xa5\xa4\u0e3f\xa2\u20a1\u20a7\u20a8\u20b9\u20a9\u20b1]/u.test(g))return!0;if(/(^|[^a-zA-Z'\u2019])[a-zA-Z] $/.test(f))return $t(k,1),!1;if(/\D\.[^\d\s]$/.test(f)){$t(k,1);const T=k.at(k.position);return T.value="⋅",T.style.variant="normal",T.command="\\cdot",T.verbatimLatex=void 0,me(k,{data:"\\cdot",inputType:"insertText"}),!0}if(/(^|\s)[a-zA-Z][^a-zA-Z]$/.test(f)||/\.\d$/.test(f)||/\([\d+\-.]$/.test(f))return $t(k,1),!0;if(/\([a-z][,;]$/.test(f))return $t(k,2),!0;if(/[\d+\-=><*|]$/.test(g))return Co(k),!0}else{if(y==="[Space]")return Ga(k,void 0,_=>/[a-z][:,;.]$/.test(_.value)),!0;if(/[a-zA-Z]{3,}$/.test(f)&&!/(dxd|abc|xyz|uvw)$/.test(f))return Ga(k,void 0,_=>/[a-zA-Z]/.test(_.value)),!0;if(/(^|\W)(if)$/i.test(f))return Ga(k,1),!0;if(/(\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5){3,}$/u.test(f)&&!/(\u03b1\u03b2\u03b3)$/.test(f))return Ga(k,void 0,_=>/(:|,|;|.|\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5)/u.test(_.value)),!0;if(g==="?"||g==="."&&!/[\d-+]\.$/.test(f))return!0}return!1}(t,e,a)&&(t.mode={math:"text",text:"math"}[t.mode],d=""),t.mode!==m&&(!((r=t.host)===null||r===void 0)&&r.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0}))||(t.mode=m))}}if(!u){if(d||(d=function(m,b,y){if(m.length===0)return"";const x=ai(cn(y));for(let k=m.length-1;k>=0;k--)if(m[k].key===x&&(!m[k].ifMode||m[k].ifMode===b))return m[k].command;return""}(t.keybindings,t.mode,e)),!d&&(e==="[Enter]"||e==="[Return]")){let m=!1;return se(s,{inputType:"insertLineBreak"})&&(t.host&&(m=!t.host.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),m||a.preventDefault&&(a.preventDefault(),a.stopPropagation()),me(s,{inputType:"insertLineBreak"})),m}if(t.mode==="math"){if(e==="[Space]"){if(t.flushInlineShortcutBuffer(),t.options.mathModeSpace)return t.snapshot(),ee.insert("math",s,t.options.mathModeSpace,{format:"latex"}),d="",t.dirty=!0,t.scrollIntoView(),a.preventDefault&&(a.preventDefault(),a.stopPropagation()),!1;const m=s.at(s.position+1),b=s.at(s.position-1);(m==null?void 0:m.mode)!=="text"&&(b==null?void 0:b.mode)!=="text"||(t.snapshot(),ee.insert("text",s," "),t.dirty=!0)}!((n=s.at(s.position))===null||n===void 0)&&n.isDigit()&&t.options.decimalSeparator===","&&Xa(a)===","&&(d="insertDecimalSeparator")}}if(!u&&!d)return!0;const p=s.at(Math.max(s.position,s.anchor)),{parent:h}=p;if(d==="moveAfterParent"&&(h==null?void 0:h.type)==="leftright"&&p.isLastSibling&&t.options.smartFence&&Po(s,".",t.style)&&(d="",ve(t)),d)t.executeCommand(d);else if(u){t.keyboardDelegate.cancelComposition();const m={...s.at(s.position).computedStyle,...t.style};if(!/^\\({|}|\[|]|@|#|\$|%|&|\^|_|backslash)$/.test(u)){const b=t.mode;ee.insert(t.mode,s,Xa(a),{suppressChangeNotifications:!0,style:m}),t.snapshot(),s.setState(t.inlineShortcutBuffer[c].state),t.mode=b}s.deferNotifications({content:!0,selection:!0,data:u??null,type:"insertText"},()=>(ee.insert(t.mode,s,u,{format:"latex",style:m}),Co(t.model),u.endsWith(" ")&&(t.mode="text",ee.insert("text",s," ",{style:m})),!0)),t.snapshot(),t.dirty=!0,s.announce("replacement")}return t.scrollIntoView(),a.preventDefault&&a.preventDefault(),!1}function zo(t,e,a){var i;const{model:o}=t;if(t.options.readOnly)return void o.announce("plonk");if((a=a??{}).focus&&t.focus(),a.feedback&&(t.options.keypressVibration&&Ko()&&navigator.vibrate(3),t.playSound("keypress")),typeof a.mode=="string"&&t.mode!==a.mode&&t.switchMode(a.mode),a.simulateKeystroke){const l=e.charAt(0),u=new KeyboardEvent("keypress",{key:l});if(!Dn(t,l,u))return}const r=o.at(o.position),n={...r.computedStyle,...t.style};o.selectionIsCollapsed||(o.deleteAtoms(at(o.selection)),t.snapshot());const s=Jr(e);if(t.mode==="latex")o.deferNotifications({content:!0,selection:!0,data:e,type:"insertText"},()=>{Fo(t);for(const l of s)ee.insert("latex",o,l);fi(t)});else if(t.mode==="text")for(const l of s)ee.insert("text",o,l,{style:n});else if(t.mode==="math")for(const l of s){let u={"^":"moveToSuperscript",_:"moveToSubscript"," ":"moveAfterParent"}[l];l===" "&&t.options.mathModeSpace&&(u=["insert",t.options.mathModeSpace]),u?t.executeCommand(u):/\d/.test(l)&&t.options.smartSuperscript&&r.treeBranch==="superscript"&&((i=r.parent)===null||i===void 0?void 0:i.type)!=="mop"&&r.hasNoSiblings?(ee.insert("math",o,l,{style:n}),_n(o)):(r.type==="mord"&&/[a-zA-Z]/.test(r.value)&&/[a-zA-Z]/.test(l)&&(r.style.variant&&(n.variant=r.style.variant),r.style.variantStyle&&(n.variantStyle=r.style.variantStyle)),ee.insert("math",o,l,{style:n}))}t.snapshotAndCoalesce(),t.dirty=!0,t.scrollIntoView()}function Gs(t){const e=t.model,a=[];let i=e.at(Math.min(e.position,e.anchor));for(;i.type!=="first";)a.push(i),i=i.leftSibling;return a}function zn(t,e){var a,i,o,r,n,s;const l={};typeof e.color=="string"&&(l.verbatimColor=e.color,l.color=(a=t.colorMap(e.color))!==null&&a!==void 0?a:"none"),typeof e.backgroundColor=="string"&&(l.verbatimBackgroundColor=e.backgroundColor,l.backgroundColor=(i=t.backgroundColorMap(e.backgroundColor))!==null&&i!==void 0?i:"none"),typeof e.fontFamily=="string"&&(l.fontFamily=e.fontFamily),typeof e.series=="string"&&(l.fontSeries=e.series),typeof e.fontSeries=="string"&&(l.fontSeries=e.fontSeries.toLowerCase()),l.fontSeries&&(l.fontSeries=(o={bold:"b",medium:"m",normal:"m"}[l.fontSeries])!==null&&o!==void 0?o:l.fontSeries),typeof e.shape=="string"&&(l.fontShape=e.shape),typeof e.fontShape=="string"&&(l.fontShape=e.fontShape.toLowerCase()),l.fontShape&&(l.fontShape=(r={italic:"it",up:"n",upright:"n",normal:"n"}[l.fontShape])!==null&&r!==void 0?r:l.fontShape);const u=(n=e.size)!==null&&n!==void 0?n:e.fontSize;return typeof u=="number"?l.fontSize=Math.max(1,Math.min(10,u)):typeof u=="string"&&(l.fontSize=(s={size1:1,size2:2,size3:3,size4:4,size5:5,size6:6,size7:7,size8:8,size9:9,size10:10}[u.toLowerCase()])!==null&&s!==void 0?s:{tiny:1,scriptsize:2,footnotesize:3,small:4,normal:5,normalsize:5,large:6,Large:7,LARGE:8,huge:9,Huge:10}[u]),l}new class extends ee{constructor(){super("math")}onPaste(t,e){if(!e.clipboardData||!se(t.model,{dataTransfer:e.clipboardData,inputType:"insertFromPaste"}))return!1;let a="",i="auto",o=e.clipboardData.getData("application/json+mathlive");if(o)try{const r=JSON.parse(o);if(r&&Array.isArray(r)){t.snapshot();const n=nt(r,t),{model:s}=t;s.selectionIsCollapsed||s.deleteAtoms(at(s.selection));const l=s.at(s.position);if(l.parent instanceof re){const u=[];let c=[];n[0].type==="first"&&n.shift(),n[n.length-1].type==="first"&&n.pop();for(const m of n)m.type==="first"&&c.length>0?(u.push(c),c=[m]):c.push(m);c.length>0&&u.push(c);let d=Number(l.treeBranch[0]),p=Number(l.treeBranch[1]);const h=l.parent.maxColumns;for(;l.parent.colCount-p<u.length&&l.parent.colCount<h;)l.parent.addColumn();l.parent.addChildrenAfter(u[0],l);for(let m=1;m<u.length;m++)p++,p>=h&&(p=0,l.parent.addRowAfter(d),d++),l.parent.setCell(d,p,u[m])}else l.parent.addChildrenAfter(n.filter(u=>u.type!=="first"),l);return s.position=s.offsetOf(n[n.length-1]),me(s,{inputType:"insertFromPaste"}),ve(t),e.preventDefault(),e.stopPropagation(),!0}}catch{}if(o=e.clipboardData.getData("application/json"),o&&t.computeEngine)try{const r=JSON.parse(o);if(typeof r=="object"&&"latex"in r&&r.latex&&(a=r.latex),!a){const n=t.computeEngine.box(r);n&&!n.has("Error")&&(a=n.latex)}a||(i="latex")}catch{}if(a||(a=e.clipboardData.getData("application/x-latex"),a&&(i="latex")),a||(a=e.clipboardData.getData("text/plain")),a){let r;return t.snapshot(),[r,a]=fo(a),i==="auto"&&r&&(i="latex"),this.insert(t.model,a,{format:i})&&ve(t),e.preventDefault(),e.stopPropagation(),!0}return!1}insert(t,e,a){var i,o;const r=typeof e=="string"?e:(o=(i=t.mathfield.computeEngine)===null||i===void 0?void 0:i.box(e).latex)!==null&&o!==void 0?o:"";if(!a.suppressChangeNotifications&&!se(t,{data:r,inputType:"insertText"}))return!1;if(a.insertionMode||(a.insertionMode="replaceSelection"),a.selectionMode||(a.selectionMode="placeholder"),a.format||(a.format="auto"),t.mathfield.smartFence){if(t.selectionIsCollapsed&&typeof e=="string"&&Po(t,e,a.style))return!0}else if(a.insertionMode!=="replaceAll"){const{parent:g}=t.at(t.position);if(g instanceof ze&&g.rightDelim==="?"&&t.at(t.position).isLastSibling&&typeof e=="string"&&/^[)}\]|]$/.test(e))return g.isDirty=!0,g.rightDelim=e,t.position+=1,hn(t),me(t,{data:r,inputType:"insertText"}),!0}const{suppressChangeNotifications:n}=t;a.suppressChangeNotifications&&(t.suppressChangeNotifications=!0);const s=t.suppressChangeNotifications;t.suppressChangeNotifications=!0;const l={};if(l[0]=a.insertionMode==="replaceAll"?"":t.getValue(t.selection,"latex-unstyled"),l["?"]="\\placeholder{}",l["@"]=l["?"],a.insertionMode!=="replaceSelection"||t.selectionIsCollapsed?a.insertionMode==="replaceAll"?(t.root.setChildren([],"body"),t.position=0):a.insertionMode==="insertBefore"?t.collapseSelection("backward"):a.insertionMode==="insertAfter"&&t.collapseSelection("forward"):t.deleteAtoms(at(t.selection)),t.at(t.position).isLastSibling||t.at(t.position+1).type!=="placeholder"?t.at(t.position).type==="placeholder"&&t.deleteAtoms([t.position-1,t.position]):t.deleteAtoms([t.position,t.position+1]),l[0])l["@"]=l[0];else if(typeof e=="string"&&/(^|[^\\])#@/.test(e)){const g=function(f){let _=f.at(f.position);if(_.mode==="text"){for(;!_.isFirstSibling&&_.mode==="text";)_=_.leftSibling;return f.offsetOf(_)}const w=_,T=[];for(;!_.isFirstSibling&&(Xs(_)||T.length>0);)_.type==="mclose"&&T.unshift(_.value),_.type==="mopen"&&T.length>0&&_.value===ss[T[0]]&&T.shift(),_=_.leftSibling;return w===_?-1:f.offsetOf(_)}(t);g>=0&&(l["@"]=t.getValue(g,t.position,"latex-unstyled"),t.deleteAtoms([g,t.position]))}l[0]||(l[0]=l["?"]);let u=!1;const[c,d]=function(g,f,_,w){var T;let C,K=[];if(typeof f!="string"||w.format==="math-json"){if(!g.mathfield.computeEngine)return["math-json",[]];[C,f]=["latex",g.mathfield.computeEngine.box(f).latex],K=st(f,g.mathfield,{parseMode:"math"})}else typeof f=="string"&&w.format==="ascii-math"?([C,f]=nr(f,{format:"ascii-math",inlineShortcuts:g.mathfield.options.inlineShortcuts}),K=st(f,g.mathfield,{parseMode:"math"}),C!=="latex"&&g.options.removeExtraneousParentheses&&ki(K)):(w.format==="auto"||!((T=w.format)===null||T===void 0)&&T.startsWith("latex"))&&(w.format==="auto"&&([C,f]=nr(f,{format:"auto",inlineShortcuts:g.mathfield.options.inlineShortcuts})),w.format==="latex"&&([,f]=fo(f)),K=st(f,g.mathfield,{parseMode:"math",args:_}),w.format!=="latex"&&g.options.removeExtraneousParentheses&&ki(K));return wt(K,w.style),[C??"latex",K]}(t,e,g=>(u=!0,l[g]),a);if(!d)return!1;const p=An(d),h=p.filter(g=>g.placeholderId&&!t.mathfield.placeholders.has(g.placeholderId)),m=p.map(g=>g.placeholderId);[...t.mathfield.placeholders.keys()].filter(g=>!m.includes(g)).forEach(g=>{var f;t.mathfield.placeholders.has(g)&&((f=t.mathfield.placeholders.get(g))===null||f===void 0||f.field.remove(),t.mathfield.placeholders.delete(g))}),h.forEach(g=>{var f,_;let w=t.mathfield.options.virtualKeyboardMode;w==="manual"&&(w="onfocus");const T=new Xe({...t.mathfield.options,virtualKeyboardMode:w,readOnly:!1}),C=g.defaultValue?S.serialize(g.defaultValue,{defaultMode:"math"}):"";T.value=C,T.addEventListener("input",()=>{(function(K,$){!K.suppressChangeNotifications&&K.mathfield.host&&(K.suppressChangeNotifications=!0,K.mathfield.host.dispatchEvent(new CustomEvent("placeholder-change",{detail:{placeholderId:$},bubbles:!0,composed:!0})),K.suppressChangeNotifications=!1)})(t,g.placeholderId),setTimeout(()=>ve(t.mathfield))}),(_=(f=t.mathfield.element)===null||f===void 0?void 0:f.querySelector(".ML__placeholdercontainer"))===null||_===void 0||_.appendChild(T),t.mathfield.placeholders.set(g.placeholderId,{atom:g,field:T})});const{parent:b}=t.at(t.position);if(c!=="latex"&&t.options.removeExtraneousParentheses&&b instanceof ze&&b.leftDelim==="("&&b.hasEmptyBranch("body")&&d.length===1&&d[0].type==="genfrac"){const g=b.parent,f=b.treeBranch;g.removeChild(b),g.setChildren(d,f)}const y=b.hasEmptyBranch("body"),x=t.at(t.position);x.parent.addChildrenAfter(d,x),c==="latex"&&typeof e=="string"&&b.type==="root"&&y&&!u&&(b.verbatimLatex=e),t.suppressChangeNotifications=s;const k=d[d.length-1];if(a.selectionMode==="placeholder"){const g=d.reduce((f,_)=>[...f,..._.children.filter(w=>w.type==="placeholder")],[]);if(g.length>0){const f=t.offsetOf(g[0]);t.setSelection(f-1,f),t.announce("move")}else k&&(t.position=t.offsetOf(k))}else a.selectionMode==="before"||(a.selectionMode==="after"?k&&(t.position=t.offsetOf(k)):a.selectionMode==="item"&&t.setSelection(t.anchor,t.offsetOf(k)));return me(t,{data:r,inputType:"insertText"}),t.suppressChangeNotifications=n,!0}},Ve({undo:t=>(Vt(t,"accept"),t.undo(),!0),redo:t=>(Vt(t,"accept"),t.redo(),!0),scrollIntoView:t=>(t.scrollIntoView(),!0),scrollToStart:t=>(t.field.scroll(0,0),!0),scrollToEnd:t=>{const e=t.field.getBoundingClientRect();return t.field.scroll(e.left-window.scrollX,0),!0},enterLatexMode:t=>(t.switchMode("latex"),!0),toggleKeystrokeCaption:function(t){return t.keystrokeCaptionVisible=!t.keystrokeCaptionVisible,t.keystrokeCaptionVisible?(t.keystrokeCaption=Cn(t),t.keystrokeCaption.innerHTML=""):t.keystrokeCaption&&(t.keystrokeCaption.style.visibility="hidden"),!1},plonk:t=>(t.model.announce("plonk"),!0),switchMode:(t,e,a,i)=>(t.switchMode(e,a,i),!0),insert:(t,e,a)=>t.insert(e,a),typedText:(t,e,a)=>(zo(t,e,a),!0),insertDecimalSeparator:t=>{if(t.mode==="math"&&t.options.decimalSeparator===","){const e=t.model;if(e.at(Math.max(e.position,e.anchor)).isDigit())return t.snapshot(),t.insert("{,}",{format:"latex"}),!0}return t.insert("."),!0},commit:t=>(se(t.model,{inputType:"insertLineBreak"})&&(t.host&&t.host.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),me(t.model,{inputType:"insertLineBreak"})),!0)}),Ve({copyToClipboard:t=>(t.focus(),t.model.selectionIsCollapsed&&t.select(),document.execCommand("copy"),!1),cutToClipboard:t=>(t.focus(),document.execCommand("cut"),!0),pasteFromClipboard:t=>(t.focus(),document.execCommand("paste"),!0)},{target:"mathfield",category:"clipboard"}),Ve({applyStyle:function(t,e){t.flushInlineShortcutBuffer();const a=zn(t,e),{model:i}=t;return i.selectionIsCollapsed?(t.style.fontSeries&&a.fontSeries===t.style.fontSeries&&(a.fontSeries="auto"),a.fontShape&&a.fontShape===t.style.fontShape&&(a.fontShape="auto"),a.color&&a.color===t.style.color&&(a.color="none"),a.backgroundColor&&a.backgroundColor===t.style.backgroundColor&&(a.backgroundColor="none"),a.fontSize&&a.fontSize===t.style.fontSize&&(a.fontSize="auto"),t.style={...t.style,...a}):t.model.deferNotifications({content:!0,type:"insertText"},()=>{i.selection.ranges.forEach(o=>So(i,o,a,{operation:"toggle"})),t.snapshot()}),!0}},{target:"mathfield"});let qt=null,ya=0;function ea(t){return ie()&&"TouchEvent"in globalThis&&t instanceof TouchEvent}function Tr(t){return ie()&&"PointerEvent"in globalThis&&t instanceof PointerEvent}function Zs(t,e,a){if(t>=a.left&&t<=a.right&&e>=a.top&&e<=a.bottom)return 0;const i=t-(a.left+a.right)/2,o=e-(a.top+a.bottom)/2;return i*i+o*o}function Tn(t,e,a,i,o){if(!a.id)return[1/0,null];if(e.has(a.id))return e.get(a.id);const r=Pa(t,a);if(!r)return[1/0,null];let n=[1/0,null];if(a.hasChildren&&!a.captureSelection&&i>=r.left&&i<=r.right)for(const s of a.children){const l=Tn(t,e,s,i,o);l[0]<=n[0]&&(n=l)}return n[1]||(n=[Zs(i,o,r),a]),e.set(a.id,n),n}function Ys(t,e,a){const[,i]=Tn(t,new Map,t.model.root,e,a);return i}function ta(t,e,a,i){var o;const r=t.fieldContent.getBoundingClientRect();if(e>r.right||a>r.bottom+8)return t.model.lastOffset;if(e<r.left||a<r.top-8)return 0;(i=i??{}).bias=(o=i.bias)!==null&&o!==void 0?o:0;let n=Ys(t,e,a);const s=[];let l=n;for(;l;)s.unshift(l),l=l.parent;for(const c of s)if(c.captureSelection){n=c;break}let u=t.model.offsetOf(n);if(u<0)return-1;if(n.leftSibling)if(i.bias===0&&n.type!=="placeholder"){const c=Pa(t,n);c&&e<(c.left+c.right)/2&&(u=t.model.offsetOf(n.leftSibling))}else i.bias<0&&(u=t.model.offsetOf(n.leftSibling));return u}new class extends ee{constructor(){super("text")}onPaste(t,e){if(!e.clipboardData)return!1;const a=e.clipboardData.getData("text/plain");return!(!a||!se(t.model,{inputType:"insertFromPaste",data:a})||(t.snapshot(),this.insert(t.model,a)&&(me(t.model,{inputType:"insertFromPaste"}),ve(t)),e.preventDefault(),e.stopPropagation(),0))}insert(t,e,a={}){if(!se(t,{data:e,inputType:"insertText"}))return!1;a.insertionMode||(a.insertionMode="replaceSelection"),a.selectionMode||(a.selectionMode="placeholder"),a.format||(a.format="auto");const{suppressChangeNotifications:i}=t;a.suppressChangeNotifications&&(t.suppressChangeNotifications=!0);const o=t.suppressChangeNotifications;t.suppressChangeNotifications=!0,a.insertionMode!=="replaceSelection"||t.selectionIsCollapsed?a.insertionMode==="replaceAll"?(t.root.setChildren([],"body"),t.position=0):a.insertionMode==="insertBefore"?t.collapseSelection("backward"):a.insertionMode==="insertAfter"&&t.collapseSelection("forward"):t.deleteAtoms(at(t.selection));const r=(n=e,s=t.mathfield,st(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/\\/g,"\\textbackslash ")).replace(/#/g,"\\#")).replace(/\$/g,"\\$")).replace(/%/g,"\\%")).replace(/&/g,"\\&")).replace(/_/g,"\\_")).replace(/{/g,"\\textbraceleft ")).replace(/}/g,"\\textbraceright ")).replace(/\^/g,"\\textasciicircum ")).replace(/~/g,"\\textasciitilde ")).replace(/\xa3/g,"\\textsterling "),s,{parseMode:"text"}));var n,s;if(wt(r,a.style),!r)return!1;const l=t.at(t.position),u=l.parent.addChildrenAfter(r,l);return t.suppressChangeNotifications=o,a.selectionMode==="before"||(a.selectionMode==="item"?t.setSelection(t.anchor,t.offsetOf(u)):u&&(t.position=t.offsetOf(u))),me(t,{data:e,inputType:"insertText"}),t.suppressChangeNotifications=i,!0}};const Br="mathlive#remote-virtual-keyboard-message";class Qs{constructor(e){var a,i,o;this.targetOrigin=(i=(a=e.targetOrigin)!==null&&a!==void 0?a:globalThis.origin)!==null&&i!==void 0?i:"*",this.originValidator=(o=e.originValidator)!==null&&o!==void 0?o:"same-origin",this._mathfield=e.mathfield}get visible(){var e,a;return(a=(e=$e().sharedVirtualKeyboard)===null||e===void 0?void 0:e.visible)!==null&&a!==void 0&&a}set visible(e){$e().sharedVirtualKeyboard&&($e().sharedVirtualKeyboard.visible=e)}setOptions(e){this.sendMessage("setOptions",{options:JSON.stringify(Kr(e))})}create(){}dispose(){this.disable()}enable(){this.enabled||(this.enabled=!0,globalThis.addEventListener("message",this))}disable(){this.enabled&&(globalThis.removeEventListener("message",this),this.enabled=!1)}executeCommand(e){var a,i,o;return xo(e)==="virtual-keyboard"?(this._mathfield&&(this.setOptions(Kr(this._mathfield.getOptions())),(e==="showVirtualKeyboard"||e==="toggleVirtualKeyboard"&&this.visible===!1)&&((i=(a=this._mathfield).focus)===null||i===void 0||i.call(a))),this.sendMessage("executeCommand",{command:e}),!1):(o=this._mathfield)===null||o===void 0?void 0:o.executeCommand(e)}focusMathfield(){}blurMathfield(){}stateChanged(){}handleEvent(e){var a,i,o,r;if(e.type==="message"&&e.data&&e.data.type===Br){if(!Ls(e.origin,this.originValidator))throw new Error(`Message from unknown origin (${e.origin}) cannot be handled`);const{action:n}=e.data;if(n==="executeCommand"){if(xo(e.data.command)==="virtual-keyboard"&&window===globalThis.parent)return;this.executeCommand(e.data.command)}else n==="updateState"?(this.visible=e.data.state.visible,this.height=e.data.state.height):n==="focus"?(i=(a=this._mathfield)===null||a===void 0?void 0:a.focus)===null||i===void 0||i.call(a):n==="blur"&&((r=(o=this._mathfield)===null||o===void 0?void 0:o.blur)===null||r===void 0||r.call(o))}}sendMessage(e,a={}){return!!globalThis.parent&&(globalThis.parent.postMessage({type:Br,action:e,...a},this.targetOrigin),!0)}}function Kr(t){if(typeof t!="object")return{};const e={};return t.fontsDirectory&&(e.fontsDirectory=t.fontsDirectory),t.soundsDirectory&&(e.soundsDirectory=t.soundsDirectory),t.virtualKeyboards&&(e.virtualKeyboards=t.virtualKeyboards),t.virtualKeyboardLayout&&(e.virtualKeyboardLayout=t.virtualKeyboardLayout),t.customVirtualKeyboardLayers&&(e.customVirtualKeyboardLayers=t.customVirtualKeyboardLayers),t.customVirtualKeyboards&&(e.customVirtualKeyboards=t.customVirtualKeyboards),t.virtualKeyboardTheme&&(e.virtualKeyboardTheme=t.virtualKeyboardTheme),t.keypressVibration&&(e.keypressVibration=t.keypressVibration),t.keypressSound&&(e.keypressSound=t.keypressSound),t.plonkSound&&(e.plonkSound=t.plonkSound),t.virtualKeyboardToolbar&&(e.virtualKeyboardToolbar=t.virtualKeyboardToolbar),t.targetOrigin&&(e.targetOrigin=t.targetOrigin),t.originValidator&&(e.originValidator=t.originValidator),e}let ao,io;class el{constructor(e,a){var i,o,r;this.focusBlurInProgress=!1,this.stylesheets=[],this.audioBuffers={},this.options=wo({..._o(),registers:Yr(this)},a.readOnly?{...a,virtualKeyboardMode:"off"}:{plonkSound:"plonk.wav",keypressSound:{spacebar:"keypress-spacebar.wav",return:"keypress-return.wav",delete:"keypress-delete.wav",default:"keypress-standard.wav"},...a}),this.options.virtualKeyboardMode==="auto"&&(this.options.virtualKeyboardMode=no()?"onfocus":"off"),this.options.computeEngine!==void 0&&(this._computeEngine=a.computeEngine),a.eventSink&&(this.host=a.eventSink),this.placeholders=new Map,this.element=e,e.mathfield=this;let n=(i=a.value)!==null&&i!==void 0?i:this.element.textContent;n&&(n=n.trim()),this.options.fontsDirectory!==null&&vn(this.options.fontsDirectory),ao||(ao=zt(Bt).toString(36)),this.stylesheets.push(Tt(e,Bt,ao)),io||(io=zt(yr).toString(36)),this.stylesheets.push(Tt(e,yr,io));let s="<span class=ML__textarea>";if(no()?s+="<span class=ML__textarea__textarea tabindex=-1 role=textbox></span>":s+=`<textarea class=ML__textarea__textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false inputmode=none aria-hidden="true" tabindex="${(o=e.tabIndex)!==null&&o!==void 0?o:0}"></textarea>`,s+="</span>",s+='<span part="container" class="ML__container"><span part="content" class="ML__content"></span>',s+=`<div part='virtual-keyboard-toggle' class="ML__virtual-keyboard-toggle" role="button" data-ML__tooltip="${ga("tooltip.toggle virtual keyboard")}">`,s+=(r=this.options.virtualKeyboardToggleGlyph)!==null&&r!==void 0?r:yn,s+="</div>",s+="<div class='ML__placeholdercontainer'></div>",s+="</span>",s+='<div class="ML__sr-only"><span aria-role="status" aria-live="assertive" aria-atomic="true"></span><span></span></div>',this.element.innerHTML=this.options.createHTML(s),!this.element.children)return;let l=0;const u=this.element.children[l++].firstElementChild;this.field=this.element.children[l].children[0],l++,this.virtualKeyboardToggle=this.element.querySelector(".ML__virtual-keyboard-toggle"),this.ariaLiveText=this.element.children[l].children[0],this.accessibleNode=this.element.children[l++].children[1],this.keystrokeCaptionVisible=!1,this.popoverVisible=!1,this.suggestionIndex=0,this.inlineShortcutBuffer=[],this.inlineShortcutBufferFlushTimer=0,this.mode=Ji(this.options),this.smartModeSuppressed=!1,this.style={},this.options.readOnly||this.options.virtualKeyboardMode!=="manual"?this.virtualKeyboardToggle.classList.remove("is-visible"):this.virtualKeyboardToggle.classList.add("is-visible"),this.options.readOnly?this.element.classList.add("ML__isReadOnly"):this.element.classList.remove("ML__isReadOnly"),this.options.defaultMode==="inline-math"?this.element.classList.add("ML__isInline"):this.element.classList.remove("ML__isInline"),this.element.querySelector(".ML__content").addEventListener("click",c=>c.stopImmediatePropagation(),{capture:!1}),this.field.addEventListener("wheel",this,{passive:!1}),vi(c=>this.executeCommand(c),this.virtualKeyboardToggle,{default:"toggleVirtualKeyboard",alt:"toggleVirtualKeyboardAlt",shift:"toggleVirtualKeyboardShift"}),this.blurred=!0,De(this.element,"focus",this),De(this.element,"blur",this),this.keyboardDelegate=function(c,d,p){let h,m=null,b=null,y=!1,x=!1,k=!1;function g(w){clearTimeout(h),h=setTimeout(()=>{clearTimeout(h),w()})}function f(){if(c.selectionStart!==c.selectionEnd)return;const w=c.value;c.value="",w.length>0&&p.typedText(w)}const _=c;return _.addEventListener("keydown",w=>{y||w.key==="Process"||w.code==="CapsLock"||/(Control|Meta|Alt|Shift)(Left|Right)/.test(w.code)?m=null:(m=w,b=null,p.keystroke(Lr(w),w)?c.tagName.toLowerCase()!=="textarea"&&(w.key.length===1&&p.typedText(w.key),w.preventDefault()):(m=null,c.value=""))},!0),_.addEventListener("keypress",w=>{y||(m&&b&&p.keystroke(Lr(m),m),b=w,g(f))},!0),_.addEventListener("keyup",()=>{y||m&&!b&&f()},!0),_.addEventListener("paste",w=>{c.focus(),c.value="",p.paste(w)||w.preventDefault(),w.stopImmediatePropagation()},!0),_.addEventListener("cut",w=>p.cut(w),!0),_.addEventListener("copy",w=>p.copy(w),!0),_.addEventListener("blur",w=>{var T,C,K;if(((C=(T=w.relatedTarget)===null||T===void 0?void 0:T._mathfield)===null||C===void 0?void 0:C.element)===d)return c.focus(),w.preventDefault(),void w.stopPropagation();const $=(K=aa.scrim)===null||K===void 0?void 0:K.state;return $==="open"||$==="opening"||w.relatedTarget===w.target.getRootNode().host?(w.preventDefault(),void w.stopPropagation()):void(k||x||(k=!0,m=null,b=null,p.blur&&p.blur(),k=!1,w.stopPropagation()))},!0),_.addEventListener("focus",w=>{k||x||(x=!0,p.focus&&p.focus(),Yi()===c&&typeof c.select=="function"&&c.select(),x=!1,w.stopPropagation())},!0),_.addEventListener("compositionstart",w=>{y=!0,c.value="",p.compositionStart&&p.compositionStart(w.data)},!0),_.addEventListener("compositionupdate",w=>{y&&p.compositionUpdate&&p.compositionUpdate(w.data)},!0),_.addEventListener("compositionend",w=>{c.value="",y&&(y=!1,p.compositionEnd&&p.compositionEnd(w.data))},!0),_.addEventListener("beforeinput",w=>{w.stopImmediatePropagation()}),_.addEventListener("input",w=>{if(!y&&w.inputType!=="insertCompositionText"){if(w.inputType==="insertFromPaste")return w.preventDefault(),void w.stopPropagation();g(f),w.preventDefault(),w.stopPropagation()}}),{cancelComposition:()=>{const w=p.blur,T=p.focus;p.blur=null,p.focus=null,c.blur(),c.focus(),p.blur=w,p.focus=T},blur:()=>{typeof c.blur=="function"&&c.blur()},focus:()=>{typeof c.focus=="function"&&c.focus()},hasFocus:()=>Yi()===c,setValue:w=>{w?(c.value=w,Yi()===c&&typeof c.select=="function"&&c.select()):(c.value="",c.setAttribute("aria-label",""))},setAriaLabel:w=>{c.setAttribute("aria-label","after: "+w)},moveTo:(w,T)=>{c.style.top=`${T}px`,c.style.left=`${w}px`}}}(u,this.element,{typedText:c=>zo(this,c),cut:c=>{this.options.readOnly?this.model.announce("plonk"):se(this.model,{inputType:"deleteByCut"})&&(this.snapshot(),ee.onCopy(this,c),setTimeout(()=>{ct(this.model,at(this.model.selection),"deleteByCut"),ve(this)},0))},copy:c=>ee.onCopy(this,c),paste:c=>{let d=!0;return this.options.readOnly&&(d=!1),d&&(d=ee.onPaste(this.model.at(this.model.position).mode,this,c)),d||this.model.announce("plonk"),d},keystroke:(c,d)=>Dn(this,c,d),focus:()=>this.onFocus(),blur:()=>this.onBlur(),compositionStart:c=>this.onCompositionStart(c),compositionUpdate:c=>this.onCompositionUpdate(c),compositionEnd:c=>this.onCompositionEnd(c)}),ie()&&"PointerEvent"in window?De(this.field,"pointerdown",this):De(this.field,"touchstart:active mousedown",this),De(window,"resize",this),window.addEventListener("blur",()=>{Nt(this)&&this.hasFocus()&&window.addEventListener("focus",c=>{c.target===window&&Nt(this)&&this.focus()},{once:!0})},{capture:!0}),this.model=new Ps({mode:Ji(this.options),macros:this.options.macros,removeExtraneousParentheses:this.options.removeExtraneousParentheses},{onSelectionDidChange:c=>this._onSelectionDidChange()},this),this.undoManager=new Is(this.model),n&&ee.insert("math",this.model,n,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",suppressChangeNotifications:!0}),this.undoManager.startRecording(),this.undoManager.snapshot(),this.model.setListeners({onSelectionDidChange:c=>this._onSelectionDidChange()}),ve(this),ie()&&document.fonts.ready.then(()=>Rt(this))}get audioContext(){return this._audioContext||(this._audioContext=new AudioContext),this._audioContext}get colorMap(){return e=>{var a;let i;return typeof((a=this.options)===null||a===void 0?void 0:a.colorMap)=="function"&&(i=this.options.colorMap(e)),i||(i=Li(e)),i}}get backgroundColorMap(){return e=>{var a;let i;return typeof((a=this.options)===null||a===void 0?void 0:a.backgroundColorMap)=="function"&&(i=this.options.backgroundColorMap(e)),i||typeof this.options.colorMap!="function"||(i=this.options.colorMap(e)),i||(i=$o(e)),i}}get fractionNavigationOrder(){var e,a;return(a=(e=this.options)===null||e===void 0?void 0:e.fractionNavigationOrder)!==null&&a!==void 0?a:"numerator-denominator"}get placeholderSymbol(){var e,a;return(a=(e=this.options)===null||e===void 0?void 0:e.placeholderSymbol)!==null&&a!==void 0?a:"▢"}get smartFence(){var e,a;return(a=(e=this.options)===null||e===void 0?void 0:e.smartFence)!==null&&a!==void 0&&a}get letterShapeStyle(){var e,a;return(a=(e=this.options)===null||e===void 0?void 0:e.letterShapeStyle)!==null&&a!==void 0?a:"tex"}get registers(){var e,a;return(a=(e=this.options)===null||e===void 0?void 0:e.registers)!==null&&a!==void 0?a:{}}getDefinition(e,a="math"){return Eo(e,a)}getMacro(e){return en(e,this.options.macros)}get virtualKeyboard(){if(!this.options.readOnly)return this._virtualKeyboard||(this.options.useSharedVirtualKeyboard||$e().sharedVirtualKeyboard?this._virtualKeyboard=new Qs({targetOrigin:this.options.sharedVirtualKeyboardTargetOrigin,originValidator:this.options.originValidator,mathfield:this}):this._virtualKeyboard=new Vs(this.options,this)),this._virtualKeyboard}get computeEngine(){var e,a;if(this._computeEngine===void 0){const i=(e=globalThis[Symbol.for("io.cortexjs.compute-engine")])===null||e===void 0?void 0:e.ComputeEngine;i&&(this._computeEngine=new i),this._computeEngine&&this.options.decimalSeparator===","&&(this._computeEngine.latexOptions.decimalMarker="{,}")}return(a=this._computeEngine)!==null&&a!==void 0?a:null}get virtualKeyboardState(){var e;return!((e=this.virtualKeyboard)===null||e===void 0)&&e.visible?"visible":"hidden"}set virtualKeyboardState(e){this.virtualKeyboard&&(e==="hidden"?this.virtualKeyboard.executeCommand("hideVirtualKeyboard"):e==="visible"&&this.virtualKeyboard.executeCommand("showVirtualKeyboard"))}get keybindings(){var e,a;if(this._keybindings)return this._keybindings;const[i,o]=function(r,n){const s=[],l=[];for(const u of r)try{const c=$s(u,n);if(c){const d=s.filter(p=>p.key===c.key&&p.ifMode===c.ifMode);if(d.length>0)throw new Error(`Ambiguous key binding ${u.key} (${yo(u.command)}) matches ${d[0].key} (${yo(d[0].command)}) with the ${n.displayName} keyboard layout`);s.push(c)}}catch(c){c instanceof Error&&l.push(c.message)}return[s,l]}(this.options.keybindings,(e=Ba())!==null&&e!==void 0?e:dn);return((a=Ba())===null||a===void 0?void 0:a.score)>0&&(this._keybindings=i,o.length),i}setOptions(e){var a,i;if(this.options=wo(this.options,e),"computeEngine"in e&&(this._computeEngine=this.options.computeEngine),this._computeEngine&&"decimalSeparator"in e&&(this._computeEngine.latexOptions.decimalMarker=this.options.decimalSeparator===","?"{,}":"."),this.model.setListeners({onSelectionDidChange:r=>this._onSelectionDidChange()}),this.model.options.macros=this.options.macros,this._keybindings=void 0,("soundsDirectory"in e||"plonkSound"in e||"keypressSound"in e||"spacebarKeypressSound"in e||"returnKeypressSound"in e||"deleteKeypressSound"in e)&&(this.audioBuffers={}),this.options.defaultMode==="inline-math"?this.element.classList.add("ML__isInline"):this.element.classList.remove("ML__isInline"),this.options.readOnly?(this.hasFocus()&&this.virtualKeyboardState==="visible"&&this.executeCommand("hideVirtualKeyboard"),this.onBlur(),this.element.classList.add("ML__isReadOnly")):this.element.classList.remove("ML__isReadOnly"),(a=this.virtualKeyboard)===null||a===void 0||a.setOptions(this.options),this.options.readOnly||this.options.virtualKeyboardMode!=="manual"?this.virtualKeyboardToggle.classList.remove("is-visible"):this.virtualKeyboardToggle.classList.add("is-visible"),"virtualKeyboardToggleGlyph"in e){const r=(i=this.element)===null||i===void 0?void 0:i.querySelector(".ML__virtual-keyboard-toggle");r&&(r.innerHTML=this.options.createHTML(this.options.virtualKeyboardToggleGlyph))}const o=S.serialize(this.model.root,{expandMacro:!1,defaultMode:this.options.defaultMode});("macros"in e||this.model.getValue()!==o)&&ee.insert("math",this.model,o,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",suppressChangeNotifications:!0}),ve(this)}getOptions(e){return oa(this.options,e)}getOption(e){return oa(this.options,e)}handleEvent(e){if(Nt(this))switch(e.type){case"focus":this.onFocus();break;case"blur":this.onBlur();break;case"touchstart":case"mousedown":case"pointerdown":(function(a,i){var o;a.atomBoundsCache=new Map;const r=a;let n,s=!1,l="none";if(Tr(i)&&i.buttons>1)return;let u=!1,c=!1;const d=ea(i)?i.touches[0].clientX:i.clientX,p=ea(i)?i.touches[0].clientY:i.clientY,h=Date.now(),m=r.field,b=setInterval(()=>{u?m.scroll({top:0,left:m.scrollLeft-16}):c&&m.scroll({top:0,left:m.scrollLeft+16})},32);function y(g){ie()&&("PointerEvent"in window?(ot(m,"pointermove",x),ot(m,"pointerup pointercancel",y),g instanceof PointerEvent&&m.releasePointerCapture(g.pointerId)):(ot(m,"touchmove",x),ot(m,"touchcancel touchend",y),ot(window,"mousemove",x),ot(window,"mouseup blur",y)),s=!1,clearInterval(b),a.element.classList.remove("tracking"),g&&g.preventDefault())}function x(g){if(!r.hasFocus())return void y(null);const f=ea(g)?g.touches[0].clientX:g.clientX,_=ea(g)?g.touches[0].clientY:g.clientY,w=ea(g)||g.pointerType==="touch"?20:5;if(Date.now()<h+500&&Math.abs(d-f)<w&&Math.abs(p-_)<w)return g.preventDefault(),void g.stopPropagation();const T=m.getBoundingClientRect();c=f>T.right,u=f<T.left;let C=n;Tr(g)?g.isPrimary||(C=ta(r,g.clientX,g.clientY,{bias:0})):g.touches&&g.touches.length===2&&(C=ta(r,g.touches[1].clientX,g.touches[1].clientY,{bias:0}));const K=ta(r,f,_,{bias:f<=d?f===d?0:-1:1});C>=0&&K>=0&&(r.model.extendSelectionTo(C,K),ve(a)),g.preventDefault(),g.stopPropagation()}qt&&Math.abs(qt.x-d)<5&&Math.abs(qt.y-p)<5&&Date.now()<qt.time+500?(ya+=1,qt.time=h):(qt={x:d,y:p,time:h},ya=1);const k=m.getBoundingClientRect();if(d>=k.left&&d<=k.right&&p>=k.top&&p<=k.bottom){if(a.hasFocus()||(l="all",a.focus({scrollIntoView:!1})),a.flushInlineShortcutBuffer(),a.smartModeSuppressed=!1,n=ta(a,d,p,{bias:0}),n>=0){if(a.element.classList.add("tracking"),i.shiftKey){const g=a.model.selectionIsCollapsed;a.model.extendSelectionTo(a.model.anchor,n),l=fr(a.model)||g?"all":"selection"}else a.model.at(n).type==="placeholder"?(a.model.setSelection(n-1,n),l="selection"):((o=a.model.at(n).rightSibling)===null||o===void 0?void 0:o.type)==="placeholder"?(a.model.setSelection(n,n+1),l="selection"):(a.model.position=n,l=fr(a.model)?"all":"selection");a.style={},i.detail===3||ya>2?(y(i),i.detail!==3&&ya!==3||(a.model.selection={ranges:[[0,a.model.lastOffset]]},l="all")):s||(s=!0,ie()&&"PointerEvent"in window?(De(m,"pointermove",x),De(m,"pointerup pointercancel",y),i instanceof PointerEvent&&m.setPointerCapture(i.pointerId)):(De(window,"blur",y),ea(i)&&i.touches?(De(i.target,"touchmove",x),De(i.target,"touchcancel touchend",y)):(De(window,"mousemove",x),De(window,"mouseup",y))),i.detail!==2&&ya!==2||(Sn(a.model),l="all"))}}else qt=null;l!=="none"&&(a.model.selectionIsCollapsed&&(l="all"),ve(a)),i.preventDefault()})(this,e);break;case"resize":this.resizeTimer&&cancelAnimationFrame(this.resizeTimer),this.resizeTimer=requestAnimationFrame(()=>Nt(this)&&this.onResize());break;case"wheel":this.onWheel(e)}}dispose(){if(!Nt(this))return;const e=this.element;delete this.element,delete e.mathfield,e.innerHTML=this.model.getValue(),ot(e,"pointerdown",this),ot(e,"touchstart:active mousedown",this),ot(e,"focus",this),ot(e,"blur",this),ot(window,"resize",this),window.removeEventListener("blur",this,{capture:!0}),delete this.accessibleNode,delete this.ariaLiveText,delete this.field,delete this.fieldContent,this.virtualKeyboardToggle.remove(),delete this.virtualKeyboardToggle,this._virtualKeyboard&&(this._virtualKeyboard.dispose(),delete this._virtualKeyboard),ur(this.popover),go&&go.release(),vo&&vo.release(),delete this.popover,ur(this.keystrokeCaption),Ao&&Ao.release(),Do&&Do.release(),delete this.keystrokeCaption,this.stylesheets.forEach(a=>a==null?void 0:a.release())}flushInlineShortcutBuffer(e){if(e!=null||(e={defer:!1}),!e.defer)return this.inlineShortcutBuffer=[],clearTimeout(this.inlineShortcutBufferFlushTimer),void(this.inlineShortcutBufferFlushTimer=0);this.options.inlineShortcutTimeout>0&&(clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=setTimeout(()=>this.flushInlineShortcutBuffer(),this.options.inlineShortcutTimeout))}executeCommand(e){var a,i;return xo(e)==="virtual-keyboard"?(i=(a=this.virtualKeyboard)===null||a===void 0?void 0:a.executeCommand(e))!==null&&i!==void 0&&i:function(o,r){var n,s,l;if(!r)return!1;let u,c=[],d=!1,p=!1;Ce(r)?(u=r[0],c=r.slice(1)):u=r,u=u.replace(/-\w/g,m=>m[1].toUpperCase());const h=(n=At[u])===null||n===void 0?void 0:n.target;if(h==="model"){if(o.options.readOnly&&/^(paste|cut|insert|delete|transpose|add)/.test(u))return o.model.announce("plonk"),!1;/^(delete|transpose|add)/.test(u)&&u!=="deleteBackward"&&o.flushInlineShortcutBuffer(),/^(delete|transpose|add)/.test(u)&&o.mode!=="latex"&&(o.popUndoStack(),o.snapshot()),o.mode!=="latex"||/^(complete)/.test(u)||Fo(o),At[u].fn(o.model,...c),o.mode!=="latex"&&/^(delete|transpose|add)/.test(u)&&o.snapshot(),o.mode==="latex"&&fi(o),p=!0,d=!0}else if(h==="virtual-keyboard")p=(l=(s=o.virtualKeyboard)===null||s===void 0?void 0:s.executeCommand(r))!==null&&l!==void 0&&l,d=!0;else{if(!At[u])throw new Error(`Unknown command "${u}"`);/^(undo|redo)/.test(u)&&o.flushInlineShortcutBuffer(),p=At[u].fn(o,...c),d=!0}return h!=="virtual-keyboard"&&(o.model.selectionIsCollapsed&&!/^(transpose|paste|complete|((moveToNextChar|moveToPreviousChar|extend).*))_$/.test(u)||(o.flushInlineShortcutBuffer(),o.style={})),p&&ve(o),d}(this,e)}get errors(){return hs(this.model.getValue(),this)}getValue(e,a,i){return this.model.getValue(e,a,i)}setValue(e,a){var i;(a=a??{mode:"math"}).insertionMode===void 0&&(a.insertionMode="replaceAll"),a.format!==void 0&&a.format!=="auto"||(a.format="latex");let o="math";a.mode!==void 0&&a.mode!=="auto"||(o=(i=wn(this.model,this.model.position))!==null&&i!==void 0?i:"math"),ee.insert(o,this.model,e,a)&&(this.undoManager.snapshot(),ve(this))}get expression(){const e=this.computeEngine;return e?e.box(e.parse(this.model.getValue())):null}loadSound(e){var a,i,o,r,n,s,l;delete this.audioBuffers[e];let u="";switch(e){case"keypress":u=typeof this.options.keypressSound=="string"?this.options.keypressSound:(a=this.options.keypressSound)===null||a===void 0?void 0:a.default;break;case"spacebar":u=typeof this.options.keypressSound=="string"?this.options.keypressSound:(o=(i=this.options.keypressSound)===null||i===void 0?void 0:i.spacebar)!==null&&o!==void 0?o:(r=this.options.keypressSound)===null||r===void 0?void 0:r.default;break;case"delete":u=typeof this.options.keypressSound=="string"?this.options.keypressSound:(s=(n=this.options.keypressSound)===null||n===void 0?void 0:n.delete)!==null&&s!==void 0?s:(l=this.options.keypressSound)===null||l===void 0?void 0:l.default;break;case"plonk":u=this.options.plonkSound}if(typeof u!="string")return;u=u.trim();const c=this.options.soundsDirectory;c!=null&&c!=="null"&&u!=="none"&&u!=="null"&&fetch(gn(c+"/"+u)).then(d=>d.arrayBuffer()).then(d=>this.audioContext.decodeAudioData(d)).then(d=>{this.audioBuffers[e]=d})}playSound(e){if(this.audioBuffers[e]||this.loadSound(e),!this.audioBuffers[e])return;const a=this.audioContext.createBufferSource();a.buffer=this.audioBuffers[e];const i=this.audioContext.createGain();i.gain.value=.5,a.connect(i).connect(this.audioContext.destination),a.start()}scrollIntoView(){var e;if(!this.element)return;(e=this.host)===null||e===void 0||e.scrollIntoView({block:"nearest",inline:"nearest"}),this.dirty&&Rt(this,{interactive:!0});const a=this.field.getBoundingClientRect();let i=null;if(this.model.selectionIsCollapsed)i=Sa(this.field);else{const o=ln(this);if(o.length>0){let r=-1/0,n=-1/0;for(const s of o)s.right>r&&(r=s.right),s.top<n&&(n=s.top);i={x:r+a.left-this.field.scrollLeft,y:n+a.top-this.field.scrollTop,height:0}}}if(this.host&&i){const o=this.host.getBoundingClientRect(),r=i.y;let n=this.host.scrollTop;r<o.top?n=r-o.top+this.host.scrollTop:r>o.bottom&&(n=r-o.bottom+this.host.scrollTop+i.height),this.host.scroll({top:n,left:0})}if(i){const o=i.x-window.scrollX;let r=this.field.scrollLeft;o<a.left?r=o-a.left+this.field.scrollLeft-20:o>a.right&&(r=o-a.right+this.field.scrollLeft+20),this.field.scroll({top:this.field.scrollTop,left:r})}}insert(e,a){if(typeof e=="string"&&e.length>0){if(this.flushInlineShortcutBuffer(),(a=a??{mode:"math"}).focus&&this.focus(),a.feedback&&(this.options.keypressVibration&&Ko()&&navigator.vibrate(3),this.playSound("keypress")),a.scrollIntoView&&this.scrollIntoView(),e==="\\\\")xn(this.model);else if(e==="&")kn(this.model);else{const i=this.style;ee.insert(this.mode,this.model,e,{style:this.model.at(this.model.position).computedStyle,...a}),a.resetStyle&&(this.style=i)}return this.undoManager.snapshot(),ve(this),!0}return!1}switchMode(e,a="",i=""){var o;if(this.mode===e||this.options.readOnly||!(!((o=this.host)===null||o===void 0)&&o.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0}))))return;const r=this.mode,{model:n}=this;n.deferNotifications({content:Boolean(i)||Boolean(a),selection:!0,type:"insertText"},()=>{var s;let l=!1;if(this.flushInlineShortcutBuffer(),this.smartModeSuppressed=/text|math/.test(this.mode)&&/text|math/.test(e),a&&e!=="latex"){const u=st(a,this,{parseMode:e});n.collapseSelection("forward");const c=n.at(n.position);n.position=n.offsetOf(c.parent.addChildrenAfter(u,c)),l=!0}if(this.mode=e,e==="latex"){let u,c=n.selectionIsCollapsed;Vt(this,"accept"),!((s=this.virtualKeyboard)===null||s===void 0)&&s.visible&&this.executeCommand(["switchKeyboardLayer","latex-lower"]);let d=n.at(n.position);if(c)u="\\";else{const h=at(n.selection);u=this.model.getValue(h,"latex");const m=this.model.extractAtoms(h);m.length===1&&m[0]instanceof ce&&(u=a,c=!0),d=n.at(h[0])}const p=new yt(u,this);d.parent.addChildAfter(p,d),c?n.position=n.offsetOf(p.lastChild):n.setSelection(n.offsetOf(p.firstChild),n.offsetOf(p.lastChild))}else Ka(n).forEach(u=>{u.isError=!1});if(i){const u=st(i,this,{parseMode:r});n.collapseSelection("forward");const c=n.at(n.position);n.position=n.offsetOf(c.parent.addChildrenAfter(u,c)),l=!0}return ve(this),l}),this.mode=e}hasFocus(){return ie()&&this.keyboardDelegate.hasFocus()}focus(e){var a;this.keyboardDelegate.focus(),this.model.announce("line"),((a=e==null?void 0:e.scrollIntoView)===null||a===void 0||a)&&this.scrollIntoView()}blur(){this.keyboardDelegate.blur()}select(){this.model.selection={ranges:[[0,this.model.lastOffset]]}}applyStyle(e,a={}){var i,o;const r={operation:"set",suppressChangeNotifications:!1};yi(a)?r.range=a:(r.range=a.range,r.suppressChangeNotifications=(i=a.suppressChangeNotifications)!==null&&i!==void 0&&i);const n=zn(this,e),s=(o=r.operation)!==null&&o!==void 0?o:"set";this.model.deferNotifications({content:!r.suppressChangeNotifications,type:"insertText"},()=>{r.range===void 0?this.model.selection.ranges.forEach(l=>So(this.model,l,n,{operation:s})):So(this.model,r.range,n,{operation:s})}),ve(this)}getCaretPoint(){const e=Sa(this.field);return e?{x:e.x,y:e.y}:null}setCaretPoint(e,a){const i=ta(this,e,a,{bias:0});if(i<0)return!1;const o=this.model.position;return this.model.position=i,this.model.announce("move",o),ve(this),!0}getPlaceholderField(e){var a;return(a=this.placeholders.get(e))===null||a===void 0?void 0:a.field}attachNestedMathfield(){let e=!1;const a=this.field.getBoundingClientRect();this.placeholders.forEach((i,o)=>{var r,n;const s=this.field.querySelector(`[data-placeholder-id=${o}]`);if(!s)return;const l=s.getBoundingClientRect(),u=l.left-a.left+((r=this.element.offsetLeft)!==null&&r!==void 0?r:0);(!i.field.style.left||Math.abs(u-parseFloat(i.field.style.left))>=1)&&(e=!0,i.field.style.left=`${u}px`);const c=l.top-a.top+((n=this.element.offsetTop)!==null&&n!==void 0?n:0);(!i.field.style.top||Math.abs(c-parseFloat(i.field.style.top))>=1)&&(e=!0,i.field.style.top=`${c}px`)}),e&&ve(this)}canUndo(){return this.undoManager.canUndo()}canRedo(){return this.undoManager.canRedo()}popUndoStack(){this.undoManager.pop()}snapshot(){var e,a;this.undoManager.snapshot()&&((e=this.virtualKeyboard)===null||e===void 0||e.executeCommand(["onUndoStateChanged",this.canUndo(),this.canRedo()]),(a=this.host)===null||a===void 0||a.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"snapshot"}})))}snapshotAndCoalesce(){var e,a;this.undoManager.snapshotAndCoalesce()&&((e=this.virtualKeyboard)===null||e===void 0||e.executeCommand(["onUndoStateChanged",this.canUndo(),this.canRedo()]),(a=this.host)===null||a===void 0||a.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"snapshot"}})))}undo(){var e,a;this.undoManager.undo()&&((e=this.virtualKeyboard)===null||e===void 0||e.executeCommand(["onUndoStateChanged",this.canUndo(),this.canRedo()]),(a=this.host)===null||a===void 0||a.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}redo(){var e,a;this.undoManager.redo()&&((e=this.virtualKeyboard)===null||e===void 0||e.executeCommand(["onUndoStateChanged",this.canUndo(),this.canRedo()]),(a=this.host)===null||a===void 0||a.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}resetUndo(){var e;(e=this.undoManager)===null||e===void 0||e.reset()}_onSelectionDidChange(){var e,a,i;this.keyboardDelegate.setValue(this.model.getValue(this.model.selection,"latex-expanded"));const o=this.model.getAtoms(this.model.selection);if(o.length===1&&o[0].type==="placeholder"){const r=o[0];this.model.mathfield.placeholders.has(r.placeholderId)&&((e=this.model.mathfield.placeholders.get(r.placeholderId))===null||e===void 0||e.field.focus())}{const r=this.model.at(this.model.position),n=(a=r.mode)!==null&&a!==void 0?a:Ji(this.options);this.mode!==n&&(this.mode==="latex"?(Vt(this,"accept",{mode:n}),this.model.position=this.model.offsetOf(r)):this.switchMode(n))}(i=this.host)===null||i===void 0||i.dispatchEvent(new Event("selection-change",{bubbles:!0,composed:!0}))}onFocus(){var e,a,i;!this.focusBlurInProgress&&this.blurred&&(this.focusBlurInProgress=!0,this.blurred=!1,this.keyboardDelegate.focus(),(e=this.virtualKeyboard)===null||e===void 0||e.setOptions(this.options),(a=this.virtualKeyboard)===null||a===void 0||a.enable(),this.options.virtualKeyboardMode==="onfocus"&&this.executeCommand("showVirtualKeyboard"),bi(this),Rt(this,{interactive:!0}),(i=this.host)===null||i===void 0||i.dispatchEvent(new Event("focus",{bubbles:!1,composed:!0})),this.valueOnFocus=this.model.getValue(),this.focusBlurInProgress=!1)}onBlur(){var e,a;this.focusBlurInProgress||this.blurred||(this.focusBlurInProgress=!0,this.blurred=!0,this.ariaLiveText.textContent="",Vt(this,"accept"),this.model.getValue()!==this.valueOnFocus&&this.executeCommand("commit"),/onfocus|manual/.test(this.options.virtualKeyboardMode)&&!$e().sharedVirtualKeyboard&&this.executeCommand("hideVirtualKeyboard"),(e=this.virtualKeyboard)===null||e===void 0||e.disable(),(a=this.host)===null||a===void 0||a.dispatchEvent(new Event("blur",{bubbles:!1,composed:!0})),ve(this),this.focusBlurInProgress=!1)}onCompositionStart(e){this.model.deleteAtoms(at(this.model.selection)),requestAnimationFrame(()=>{Rt(this);const a=Sa(this.field);a&&this.keyboardDelegate.moveTo(a.x,a.y)})}onCompositionUpdate(e){(function(a,i){const o=a.at(a.position);if(o.type==="composition")o.value=i;else{const{caret:r}=o;o.caret="";const n=new Ti(i,a.mathfield,{mode:o.mode});n.caret=r,o.parent.addChildAfter(n,o),a.position+=1}})(this.model,e),ve(this)}onCompositionEnd(e){(function(a){const i=a.at(a.position);i.type==="composition"&&(i.parent.removeChild(i),a.position-=1)})(this.model),zo(this,e,{simulateKeystroke:!0})}onResize(){bi(this)}onWheel(e){const a=5*e.deltaX;if(!Number.isFinite(a)||a===0)return;const i=this.field;a<0&&i.scrollLeft===0||a>0&&i.offsetWidth+i.scrollLeft>=i.scrollWidth||(i.scrollBy({top:0,left:a}),e.preventDefault(),e.stopPropagation())}getHTMLElement(e){let a=e;for(;!a.id&&a.hasChildren;)a=e.children[0];if(a.id)return this.element.querySelector(`[data-atom-id="${a.id}"]`);throw new TypeError("Could not get an ID from atom")}}var oo,$r,ro,qr;const To=ie()?document.createElement("template"):null;To&&(To.innerHTML=`<style>
:host { display: block; position: relative; overflow: hidden auto;}
:host([hidden]) { display: none; }
:host([disabled]) { opacity:  .5; }
:host(:focus), :host(:focus-within) {
  outline: Highlight auto 1px;    /* For Firefox */
  outline: -webkit-focus-ring-color auto 1px;
}
:host([readonly]), :host([read-only]) { outline: none; }
</style>
<div></div><slot style="display:none"></slot>`);const X=new WeakMap;class Xe extends HTMLElement{static get optionsAttributes(){return{"default-mode":"string","fonts-directory":"string","sounds-directory":"string","horizontal-spacing-scale":"string","math-mode-space":"string","inline-shortcut-timeout":"string","keypress-vibration":"on/off","keypress-sound":"string","plonk-sound":"string","letter-shape-style":"string",locale:"string","read-only":"boolean","remove-extraneous-parentheses":"on/off","smart-fence":"on/off","smart-mode":"on/off","smart-superscript":"on/off","speech-engine":"string","speech-engine-rate":"string","speech-engine-voice":"string","text-to-speech-markup":"string","text-to-speech-rules":"string","virtual-keyboard-layout":"string","virtual-keyboard-mode":"string","virtual-keyboard-theme":"string","virtual-keyboards":"string","use-shared-virtual-keyboard":"boolean","shared-virtual-keyboard-target-origin":"string"}}static get observedAttributes(){return[...Object.keys(Xe.optionsAttributes),"disabled","readonly","read-only"]}constructor(e){gt(),super(),this.attachShadow({mode:"open"}),this.shadowRoot.append(To.content.cloneNode(!0));const a=this.shadowRoot.querySelector("slot:not([name])");this._slotValue=a.assignedNodes().map(i=>i.nodeType===3?i.textContent:"").join("").trim(),e&&this.setOptions(e),this.shadowRoot.host.addEventListener("pointerdown",i=>this.onPointerDown(),!0),this.shadowRoot.host.addEventListener("focus",()=>{var i;return(i=this._mathfield)===null||i===void 0?void 0:i.focus()},!0),this.shadowRoot.host.addEventListener("blur",()=>{var i;return(i=this._mathfield)===null||i===void 0?void 0:i.blur()},!0)}onPointerDown(){window.addEventListener("pointerup",e=>{e.target===this&&this.dispatchEvent(new MouseEvent("click",{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,movementX:e.movementX,movementY:e.movementY,relatedTarget:e.relatedTarget,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey}))},{once:!0})}getPlaceholderField(e){var a;return(a=this._mathfield)===null||a===void 0?void 0:a.getPlaceholderField(e)}addEventListener(e,a,i){return super.addEventListener(e,a,i)}removeEventListener(e,a,i){super.removeEventListener(e,a,i)}get mode(){var e,a;return(a=(e=this._mathfield)===null||e===void 0?void 0:e.mode)!==null&&a!==void 0?a:"math"}set mode(e){this._mathfield&&(this._mathfield.mode=e)}get computeEngine(){if(this._mathfield)return this._mathfield.computeEngine}set computeEngine(e){this._mathfield&&this._mathfield.setOptions({computeEngine:e})}get expression(){if(this._mathfield)return this._mathfield.expression}set expression(e){var a,i;if(!this._mathfield)return;const o=(i=(a=this.computeEngine)===null||a===void 0?void 0:a.box(e).latex)!==null&&i!==void 0?i:null;o!==null&&this._mathfield.setValue(o)}get errors(){var e,a;return(a=(e=this._mathfield)===null||e===void 0?void 0:e.errors)!==null&&a!==void 0?a:[]}get placeholders(){if(!this._mathfield)return{};const e={};for(const[a,i]of this._mathfield.placeholders)e[a]=i.field;return e}getOptions(e){return this._mathfield?oa(this._mathfield.options,e):X.has(this)?oa(wo(_o(),X.get(this).options),e):null}getOption(e){return this.getOptions([e])[e]}setOptions(e){if(this._mathfield)this._mathfield.setOptions(e),this._mathfield.placeholders.forEach(a=>{a.field.setOptions({...e,readOnly:!1})});else if(X.has(this)){const a={...X.get(this).options,...e};X.set(this,{...X.get(this),selection:{ranges:a.readOnly?[[0,0]]:[[0,-1]]},options:a})}else X.set(this,{value:void 0,selection:{ranges:[[0,0]]},options:e});(function(a){const i=_o(),o=a.getOptions();Object.keys(Xe.optionsAttributes).forEach(r=>{const n=Mt(r);Xe.optionsAttributes[r]==="on/off"?i[n]!==o[n]?a.setAttribute(r,o[n]?"on":"off"):a.removeAttribute(r):i[n]!==o[n]&&(Xe.optionsAttributes[r]==="boolean"?o[n]?a.setAttribute(r,""):a.removeAttribute(r):typeof o[n]!="string"&&typeof o[n]!="number"||a.setAttribute(r,o[n].toString()))})})(this)}executeCommand(e){var a,i;return(i=(a=this._mathfield)===null||a===void 0?void 0:a.executeCommand(e))!==null&&i!==void 0&&i}getValue(e,a,i){var o,r;if(this._mathfield)return this._mathfield.model.getValue(e,a,i);if(X.has(this)){let n,s,l;if(ii(e)?([n,s]=e.ranges[0],l=a):yi(e)?([n,s]=e,l=a):kt(e)&&kt(a)?(n=e,s=a,l=i):(n=0,s=-1,l=e),(l===void 0||l==="latex")&&n===0&&s===-1)return(r=(o=X.get(this).value)!==null&&o!==void 0?o:this.textContent)!==null&&r!==void 0?r:""}return""}setValue(e,a){if(this._mathfield&&e!==void 0)return a||(a={suppressChangeNotifications:!0}),void this._mathfield.setValue(e,a);if(X.has(this)){const o=X.get(this).options;return void X.set(this,{value:e,selection:{ranges:o.readOnly?[[0,0]]:[[0,-1]],direction:"forward"},options:o})}const i=Za(this);X.set(this,{value:e,selection:{ranges:i.readOnly?[[0,0]]:[[0,-1]],direction:"forward"},options:i})}hasFocus(){var e,a;return(a=(e=this._mathfield)===null||e===void 0?void 0:e.hasFocus())!==null&&a!==void 0&&a}get virtualKeyboardState(){var e,a;return(a=(e=this._mathfield)===null||e===void 0?void 0:e.virtualKeyboardState)!==null&&a!==void 0?a:"hidden"}set virtualKeyboardState(e){this._mathfield&&(this._mathfield.virtualKeyboardState=e)}focus(){super.focus()}blur(){var e;(e=this._mathfield)===null||e===void 0||e.blur(),super.blur()}select(){var e;(e=this._mathfield)===null||e===void 0||e.select()}insert(e,a){var i,o;return(o=(i=this._mathfield)===null||i===void 0?void 0:i.insert(e,a))!==null&&o!==void 0&&o}applyStyle(e,a){var i;return(i=this._mathfield)===null||i===void 0?void 0:i.applyStyle(e,a)}get caretPoint(){var e,a;return(a=(e=this._mathfield)===null||e===void 0?void 0:e.getCaretPoint())!==null&&a!==void 0?a:null}set caretPoint(e){var a;e&&((a=this._mathfield)===null||a===void 0||a.setCaretPoint(e.x,e.y))}setCaretPoint(e,a){var i,o;return(o=(i=this._mathfield)===null||i===void 0?void 0:i.setCaretPoint(e,a))!==null&&o!==void 0&&o}offsetFromPoint(e,a,i){return this._mathfield?ta(this._mathfield,e,a,i):-1}hitboxFromOffset(e){if(!this._mathfield)return null;const a=this._mathfield.model.at(e);if(!a)return null;const i=Pa(this._mathfield,a);return i?new DOMRect(i.left,i.top,i.right-i.left,i.bottom-i.top):null}resetUndo(){var e;(e=this._mathfield)===null||e===void 0||e.resetUndo()}canUndo(){return!!this._mathfield&&this._mathfield.canUndo()}canRedo(){return!!this._mathfield&&this._mathfield.canRedo()}connectedCallback(){var e,a,i;this.hasAttribute("role")||this.setAttribute("role","textbox"),this.setAttribute("dir","ltr"),this.hasAttribute("aria-label")||this.setAttribute("aria-label","math input field"),this.setAttribute("contenteditable","true"),this.setAttribute("aria-multiline","false"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0");const o=this.shadowRoot.querySelector("slot:not([name])");try{this._style=o.assignedElements().filter(n=>n.tagName.toLowerCase()==="style").map(n=>n.textContent).join("")}catch{}if(this._style){const n=document.createElement("style");n.textContent=this._style,this.shadowRoot.appendChild(n)}try{const n=o.assignedElements().filter(s=>s.tagName.toLowerCase()==="script"&&s.type==="application/json").map(s=>s.textContent).join("");n&&this.setOptions(JSON.parse(n))}catch{}let r="";if(r=this.hasAttribute("value")?(e=this.getAttribute("value"))!==null&&e!==void 0?e:"":(a=o==null?void 0:o.assignedNodes().map(n=>n.nodeType===3?n.textContent:"").join("").trim())!==null&&a!==void 0?a:"",this._mathfield=new el(this.shadowRoot.querySelector(":host > div"),{...X.has(this)?X.get(this).options:Za(this),eventSink:this,value:r}),!X.has(this)){this.upgradeProperty("disabled"),this.upgradeProperty("readonly");for(const n of Object.keys(Xe.optionsAttributes))this.upgradeProperty(Mt(n))}!((i=this._mathfield)===null||i===void 0)&&i.model?(X.has(this)&&this._mathfield.model.deferNotifications({content:!1,selection:!1},()=>{const n=X.get(this).value;n!==void 0&&this._mathfield.setValue(n),this._mathfield.model.selection=X.get(this).selection,X.delete(this)}),o.addEventListener("slotchange",n=>{if(n.target!==o)return;const s=o.assignedNodes().map(l=>l.nodeType===3?l.textContent:"").join("").trim();s!==this._slotValue&&(this._mathfield?this._mathfield.setValue(s):this.value=s)}),this.dispatchEvent(new Event("mount",{cancelable:!1,bubbles:!0,composed:!0}))):this._mathfield=null}disconnectedCallback(){if(this.dispatchEvent(new Event("unmount",{cancelable:!1,bubbles:!0,composed:!0})),!this._mathfield)return;const e=oa(this._mathfield.options,Object.keys(Xe.optionsAttributes).map(a=>Mt(a)));X.set(this,{value:this._mathfield.getValue(),selection:this._mathfield.model.selection,options:e}),this._mathfield.dispose(),this._mathfield=null}upgradeProperty(e){if(this.hasOwnProperty(e)){const a=this[e];delete this[e],e!=="readonly"&&e!=="read-only"||(e="readOnly"),this[e]=a}}attributeChangedCallback(e,a,i){if(a===i)return;const o=i!==null;switch(e){case"disabled":this.disabled=o;break;case"read-only":case"readonly":this.readOnly=o}}get readonly(){return this.hasAttribute("readonly")||this.hasAttribute("read-only")}set readonly(e){const a=Boolean(e);a?(this.setAttribute("readonly",""),this.setAttribute("disabled",""),this.setAttribute("aria-readonly","true")):(this.removeAttribute("readonly"),this.removeAttribute("read-only"),this.removeAttribute("disabled"),this.removeAttribute("aria-readonly")),this.setOptions({readOnly:a})}get disabled(){return this.hasAttribute("disabled")}set disabled(e){const a=Boolean(e);a?this.setAttribute("disabled",""):this.removeAttribute("disabled"),this.setAttribute("aria-disabled",a?"true":"false"),this.setOptions({readOnly:a})}get value(){return this.getValue()}set value(e){this.setValue(e)}get defaultMode(){return this.getOption("defaultMode")}set defaultMode(e){this.setOptions({defaultMode:e})}get fontsDirectory(){return this.getOption("fontsDirectory")}set fontsDirectory(e){this.setOptions({fontsDirectory:e})}get mathModeSpace(){return this.getOption("mathModeSpace")}set mathModeSpace(e){this.setOptions({mathModeSpace:e})}get inlineShortcutTimeout(){return this.getOption("inlineShortcutTimeout")}set inlineShortcutTimeout(e){this.setOptions({inlineShortcutTimeout:e})}get keypressVibration(){return this.getOption("keypressVibration")}set keypressVibration(e){this.setOptions({keypressVibration:e})}get keypressSound(){return this.getOption("keypressSound")}set keypressSound(e){this.setOptions({keypressSound:e})}get plonkSound(){var e;return(e=this.getOption("plonkSound"))!==null&&e!==void 0?e:null}set plonkSound(e){this.setOptions({plonkSound:e})}get letterShapeStyle(){return this.getOption("letterShapeStyle")}set letterShapeStyle(e){this.setOptions({letterShapeStyle:e})}get locale(){return this.getOption("locale")}set locale(e){this.setOptions({locale:e})}get readOnly(){return this.getOption("readOnly")}set readOnly(e){this.setOptions({readOnly:e})}get removeExtraneousParentheses(){return this.getOption("removeExtraneousParentheses")}set removeExtraneousParentheses(e){this.setOptions({removeExtraneousParentheses:e})}get smartFence(){return this.getOption("smartFence")}set smartFence(e){this.setOptions({smartFence:e})}get smartMode(){return this.getOption("smartMode")}set smartMode(e){this.setOptions({smartMode:e})}get smartSuperscript(){return this.getOption("smartSuperscript")}set smartSuperscript(e){this.setOptions({smartSuperscript:e})}get speechEngine(){return this.getOption("speechEngine")}set speechEngine(e){this.setOptions({speechEngine:e})}get speechEngineRate(){return this.getOption("speechEngineRate")}set speechEngineRate(e){this.setOptions({speechEngineRate:e})}get speechEngineVoice(){return this.getOption("speechEngineVoice")}set speechEngineVoice(e){this.setOptions({speechEngineVoice:e})}get textToSpeechMarkup(){return this.getOption("textToSpeechMarkup")}set textToSpeechMarkup(e){this.setOptions({textToSpeechMarkup:e})}get textToSpeechRules(){return this.getOption("textToSpeechRules")}set textToSpeechRule(e){this.setOptions({textToSpeechRules:e})}get virtualKeyboardLayout(){return this.getOption("virtualKeyboardLayout")}set virtualKeyboardLayout(e){this.setOptions({virtualKeyboardLayout:e})}get virtualKeyboardMode(){return this.getOption("virtualKeyboardMode")}set virtualKeyboardMode(e){this.setOptions({virtualKeyboardMode:e})}get virtualKeyboardTheme(){return this.getOption("virtualKeyboardTheme")}set virtualKeyboardTheme(e){this.setOptions({virtualKeyboardTheme:e})}get virtualKeyboards(){return this.getOption("virtualKeyboards")}set virtualKeyboards(e){this.setOptions({virtualKeyboards:e})}get useSharedVirtualKeyboard(){return this.getOption("useSharedVirtualKeyboard")}set useSharedVirtualKeyboard(e){this.setOptions({useSharedVirtualKeyboard:e})}get sharedVirtualKeyboardTargetOrigin(){return this.getOption("sharedVirtualKeyboardTargetOrigin")}set sharedVirtualKeyboardTargetOrigin(e){this.setOptions({sharedVirtualKeyboardTargetOrigin:e})}get selection(){return this._mathfield?this._mathfield.model.selection:X.has(this)?X.get(this).selection:{ranges:[[0,0]],direction:"forward"}}set selection(e){typeof e=="number"&&(e={ranges:[[e,e]]}),this._mathfield?this._mathfield.model.selection=e:X.has(this)?X.set(this,{...X.get(this),selection:e}):X.set(this,{value:void 0,selection:e,options:Za(this)})}get selectionIsCollapsed(){const e=this.selection;return e.ranges.length===1&&e.ranges[0][0]===e.ranges[0][1]}get position(){return this._mathfield?this._mathfield.model.position:X.has(this)?X.get(this).selection.ranges[0][0]:0}set position(e){this._mathfield&&(this._mathfield.model.position=e),X.has(this)?X.set(this,{...X.get(this),selection:{ranges:[[e,e]]}}):X.set(this,{value:void 0,selection:{ranges:[[e,e]]},options:Za(this)})}getOffsetDepth(e){var a,i;return this._mathfield&&(i=((a=this._mathfield.model.at(e))===null||a===void 0?void 0:a.treeDepth)-2)!==null&&i!==void 0?i:0}get lastOffset(){var e,a;return(a=(e=this._mathfield)===null||e===void 0?void 0:e.model.lastOffset)!==null&&a!==void 0?a:-1}}function Mt(t){return t.toLowerCase().replace(/[^a-zA-Z\d]+(.)/g,(e,a)=>a.toUpperCase())}function Za(t){const e={},a=Xe.optionsAttributes;return Object.keys(a).forEach(i=>{if(t.hasAttribute(i)){const o=t.getAttribute(i);a[i]==="boolean"?e[Mt(i)]=!0:a[i]==="on/off"?e[Mt(i)]=o==="on"||o!=="off"&&void 0:a[i]==="number"?e[Mt(i)]=Number.parseFloat(o??"0"):e[Mt(i)]=o}else a[i]==="boolean"&&(e[Mt(i)]=!1)}),e}ie()&&!(!((oo=window.customElements)===null||oo===void 0)&&oo.get("math-field"))&&(($r=globalThis[qr=Symbol.for("io.cortexjs.mathlive")])!==null&&$r!==void 0||(globalThis[qr]={}),globalThis[Symbol.for("io.cortexjs.mathlive")].version="0.86.0",window.MathfieldElement=Xe,(ro=window.customElements)===null||ro===void 0||ro.define("math-field",Xe));function A(t,e,a=3e3,i="$0"){for(const o of e)ft[o]&&(ft[o].frequency=a,ft[o].category=t,ft[o].template=i.replace(/\$0/g,o)),bt[o]&&(bt[o]={...bt[o],frequency:a,category:t,template:i.replace(/\$0/g,o)})}function $e(){var t,e;return(t=globalThis[e=Symbol.for("io.cortexjs.mathlive")])!==null&&t!==void 0||(globalThis[e]={}),globalThis[Symbol.for("io.cortexjs.mathlive")]}A("Trigonometry",["\\cos","\\sin","\\tan"],4e3),A("Trigonometry",["\\arccos","\\arcsin","\\arctan","\\arctg","\\arcctg","\\arcsec","\\arccsc","\\arsinh","\\arcosh","\\artanh","\\arcsech","\\arccsch","\\arg","\\ch","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\lg","\\lb","\\sec","\\sinh","\\sh","\\tanh","\\tg","\\th"],2e3),A("Functions",["\\ln","\\log","\\exp","\\lim"],4e3),A("Functions",["\\dim","\\ker","\\deg","\\det","\\mod","\\min","\\max"],3e3),A("Functions",["\\hom"],1200),A("Decoration",["\\rule"],200,"$0{2em}{1em}"),A("Decoration",["\\color","\\textcolor"],200,"{$0{m0}A}{$0{m1}B}{$0{m2}C }{$0{m3}a}{$0{m4}b}{$0{m5}c}{$0{m6}8}"),A("Decoration",["\\overline","\\underline"],3e3,"$0{\\placeholder{}}"),A("Decoration",["\\enclose"],1200,'\\enclose{updiagonalstrike,roundedbox}[1px solid red, mathbackground="#fbc0bd"]{x=0}'),A("Decoration",["\\fcolorbox"],1200,'\\fcolorbox{#cd0030}{#ffd400}{\\unicode{"2B1A}}'),A("Decoration",["\\colorbox"],1200,'\\colorbox{#fbc0bd}{\\unicode{"2B1A}}'),A("Decoration",["\\boxed","\\cancel","\\bcancel","\\xcancel"],1200,"$0{\\placeholder{}}"),A("Decoration",["\\bbox"],1200,'\\bbox[#ffd400, solid 2px #ffd400]{\\unicode{"2B1A}}'),A("Styling",["\\mathbb"],4e3,"$0{Don Knuth}"),A("Styling",["\\textbf","\\textup","\\textit","\\textrm","\\textsf","\\texttt","\\textnormal","\\textmd","\\textsl","\\textsc","\\mathsf","\\mathtt","\\mathrm","\\mathfrak","\\mathcal","\\mathscr","\\mathbf","\\mathmd","\\mathit","\\text","\\mbox","\\Bbb","\\bold","\\bm","\\boldsymbol"],3e3,"$0{Don Knuth}"),A("Styling",["\\frak","\\tt","\\bf","\\it","\\rmfamily","\\sffamily","\\ttfamily","\\class","\\cssId","\\htmlData","\\htmlStyle"],1200,"{$0 Don Knuth}"),A("Styling",["\\bfseries","\\mdseries","\\upshape","\\slshape","\\scshape"],1200,"\\text{$0 Don Knuth}"),A("Styling",["\\class","\\cssId"],1200,"$0{testIdentifier}{Don Knuth}"),A("Styling",["\\fontseries"],1200,"\\text{$0{b}Don Knuth}"),A("Styling",["\\fontfamily"],1200,"\\text{$0{cmtt}Don Knuth}"),A("Styling",["\\fontshape"],1200,"\\text{$0{sc}Don Knuth}"),A("Styling",["\\selectfont"],1200,"\\text{$0}"),A("Styling",["\\emph"],1200,"Don$0{Knuth}"),A("Styling",["\\em"],1200,"Don{$0 Knuth}"),A("Layout",["\\mathop","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathord","\\mathinner","\\operatorname","\\operatorname*"],1200,"x=$0{arg}=0"),A("Layout",["\\middle"],1200,"\\left\\{x$0|x>0\\right\\}"),A("Layout",["\\overset","\\underset","\\stackrel","\\stackbin"],1200,"$0{arg}{x=0}"),A("Layout",["\\rlap","\\mathrlap"],1200,"$0{/}0"),A("Layout",["\\llap","\\mathllap"],1200,"o$0{/}"),A("Fractions",["\\frac"],4e3,"$0{\\placeholder{}}{\\placeholder{}}"),A("Fractions",["\\binom","\\dfrac","\\tfrac","\\dbinom","\\tbinom","\\pdiff","\\cfrac"],1200,"$0{\\placeholder{}}{\\placeholder{}}"),A("Fractions",["\\over","\\atop","\\choose"],1200,'\\unicode{"2B1A} $0 \\unicode{"2B1A}'),A("Fractions",["\\overwithdelims","\\atopwithdelims"],1200,'{\\unicode{"2B1A} $0{\\lbrace}{\\rbrace} \\unicode{"2B1A}}'),A("Extensible Operators",["\\sum","\\prod","\\bigcap","\\bigcup","\\int"],4e3),A("Extensible Operators",["\\bigoplus","\\smallint","\\iint","\\oint"],3e3),A("Extensible Operators",["\\bigwedge","\\bigvee","\\coprod","\\bigsqcup","\\bigotimes","\\bigodot","\\biguplus","\\intop","\\sqcup","\\sqcap","\\uplus","\\wr","\\Cap","\\Cup","\\doublecap","\\doublecup","\\amalg","\\iiint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\ointctrclockwise","\\intctrclockwise"],1200),A("Accents",["\\vec"],4e3),A("Accents",["\\bar","\\ddot","\\acute","\\tilde","\\check"],3e3,"$0{\\placeholder{}}"),A("Accents",["\\^","\\`","\\'"],1200,"$0{e}"),A("Accents",["\\c"],1200,"$0{c}"),A("Accents",["\\~"],1200,"$0{n}"),A("Accents",["\\mathring","\\hat","\\dot","\\breve","\\grave"],1200,"$0{\\placeholder{}}"),A("Extensible Symbols",["\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftharpoon","\\overrightharpoon","\\overleftrightarrow","\\overbrace","\\overlinesegment","\\overgroup","\\widehat","\\widecheck","\\widetilde"],3e3,"$0{ABC}"),A("Extensible Symbols",["\\underrightarrow","\\underleftarrow","\\underleftrightarrow","\\underbrace","\\underlinesegment","\\undergroup","\\utilde"],3e3,"$0{ABC}"),A("Sizing",["\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],1200,"$0{x=0}"),A("Sizing",["\\big","\\Big","\\bigg","\\Bigg"],1200,"$0($0)"),A("Sizing",["\\bigl","\\Bigl","\\biggl","\\Biggl"],1200,"$0("),A("Sizing",["\\bigr","\\Bigr","\\biggr","\\Biggr"],1200,"$0)"),A("Sizing",["\\bigm","\\Bigm","\\biggm","\\Biggm"],1200,"$0|"),A("Letterlike Symbols",["\\nabla","\\partial","\\N","\\R","\\Q","\\C","\\Z","\\exponentialE","\\forall","\\exists","\\nexists"],4e3),A("Letterlike Symbols",["\\doubleStruckCapitalP","\\P","\\ell","\\hbar","\\hslash","\\imath","\\jmath","\\imaginaryI","\\imaginaryJ","\\differentialD","\\rd","\\capitalDifferentialD","\\doubleStruckCapitalN","\\doubleStruckCapitalR","\\doubleStruckCapitalQ","\\doubleStruckCapitalC","\\doubleStruckCapitalZ","\\rD","\\differencedelta","\\mid","@","\\Re","\\Im","\\$","\\%","\\And","\\degree"],3e3),A("Letterlike Symbols",["\\top","\\bot","\\scriptCapitalE","\\scriptCapitalH","\\scriptCapitalL","\\gothicCapitalC","\\gothicCapitalH","\\gothicCapitalI","\\gothicCapitalR","\\Bbbk","\\Finv","\\Game","\\wp","\\eth","\\mho","\\pounds","\\yen","\\euro"],1200),A("Crosses",["\\dagger","\\dag"],4e3),A("Crosses",["\\ddag","\\ddagger","\\maltese","\\textdagger","\\textdaggerdbl"],1200),A("Various",["\\checkmark","\\diagup","\\diagdown","\\angle","\\measuredangle","\\sphericalangle","\\prime","\\doubleprime","\\backprime","\\backdoubleprime","\\sharp","\\flat","\\natural","\\&","\\#","\\clubsuit","\\spadesuit","\\diamondsuit","\\heartsuit","\\backslash","\\infty","/","\\_","\\/","|","'"],1200),A("Various",["\\unicode"],1200,'$0{"2B1A}'),A("Arrows",["\\longrightarrow","\\rightarrow","\\Longrightarrow","\\Rightarrow"],4e3),A("Arrows",["\\longmapsto","\\mapsto","\\Longleftrightarrow","\\rightleftarrows","\\leftarrow","\\curvearrowleft","\\uparrow","\\downarrow","\\hookrightarrow","\\rightharpoonup","\\rightleftharpoons"],3e3),A("Arrows",["\\Leftarrow","\\longleftrightarrow","\\longleftarrow","\\Longleftarrow","\\searrow","\\nearrow","\\swarrow","\\nwarrow","\\Uparrow","\\Downarrow","\\updownarrow","\\Updownarrow","\\hookleftarrow","\\leftharpoonup","\\leftharpoondown","\\rightharpoondown","\\leftrightarrows","\\dashrightarrow","\\dashleftarrow","\\leftleftarrows","\\Lleftarrow","\\twoheadleftarrow","\\leftarrowtail","\\looparrowleft","\\leftrightharpoons","\\circlearrowleft","\\Lsh","\\upuparrows","\\downharpoonleft","\\multimap","\\leftrightsquigarrow","\\twoheadrightarrow","\\rightarrowtail","\\looparrowright","\\curvearrowright","\\circlearrowright","\\Rsh","\\downdownarrows","\\upharpoonright","\\downharpoonright","\\rightsquigarrow","\\leadsto","\\Rrightarrow","\\restriction"],1200),A("Arrows",["\\upharpoonleft","\\rightrightarrows"],0),A("Negated Arrows",["\\nrightarrow","\\nRightarrow","\\nleftrightarrow","\\nLeftrightarrow","\\nleftarrow","\\nLeftarrow"],1200),A("Extensible Symbols",["\\xrightarrow","\\xleftarrow","\\xRightarrow","\\xLeftarrow","\\xleftharpoonup","\\xleftharpoondown","\\xrightharpoonup","\\xrightharpoondown","\\xlongequal","\\xtwoheadleftarrow","\\xtwoheadrightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xrightleftharpoons","\\xleftrightharpoons","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium"],1200,"$0[below]{above}=0"),A("Negated Relations",["\\nless","\\nleqslant","\\lneq","\\lneqq","\\nleqq","\\unlhd","\\unrhd","\\lvertneqq","\\lnsim","\\lnapprox","\\nprec","\\npreceq","\\precnsim","\\precnapprox","\\nsim","\\nshortmid","\\nmid","\\nvdash","\\nvDash","\\ngtr","\\ngeqslant","\\ngeqq","\\gneq","\\gneqq","\\gvertneqq","\\gnsim","\\nsucc","\\succnsim","\\ncong","\\nshortparallel","\\nparallel","\\nVDash","\\nVdash","\\precneqq","\\succneqq","\\gnapprox","\\succnapprox","\\nsucceq"],1200),A("Hebrew",["\\aleph","\\beth","\\daleth","\\gimel"],1200),A("Fences",["\\lbrace","\\rbrace","\\vert","\\Vert","\\{","\\}","(",")","[","]"],4e3),A("Fences",["\\langle","\\rangle","\\lfloor","\\rfloor","\\lceil","\\rceil","\\mvert","\\|","\\mVert"],3e3),A("Fences",["\\lvert","\\rvert","\\lVert","\\rVert","\\lbrack","\\rbrack","\\ulcorner","\\urcorner","\\llcorner","\\lrcorner","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache"],1200),A("Relations",["=","\\ne","\\neq","<",">","\\leqslant","\\geqslant","\\approx"],4e3),A("Relations",["\\lt","\\gt","\\le","\\ge","\\leq","\\geq","\\gg","\\cong","\\equiv","\\prec","\\preceq","\\succ","\\perp","\\parallel","\\propto","\\smile","\\frown","\\sim","\\gtrsim"],3e3),A("Relations",["\\coloneq","\\succeq","\\approxeq","\\thickapprox","\\lessapprox","\\gtrapprox","\\precapprox","\\succapprox","\\thicksim","\\succsim","\\precsim","\\backsim","\\eqsim","\\backsimeq","\\simeq","\\lesssim","\\nleq","\\ngeq","\\smallsmile","\\smallfrown","\\bowtie","\\asymp","\\leqq","\\eqslantless","\\ll","\\lll","\\lessgtr","\\lesseqgtr","\\lesseqqgtr","\\risingdotseq","\\fallingdotseq","\\preccurlyeq","\\curlyeqprec","\\vDash","\\Vvdash","\\bumpeq","\\Bumpeq","\\geqq","\\eqslantgtr","\\ggg","\\gtrless","\\gtreqless","\\gtreqqless","\\succcurlyeq","\\curlyeqsucc","\\Vdash","\\shortmid","\\shortparallel","\\between","\\pitchfork","\\varpropto","\\backepsilon","\\llless","\\gggtr","\\lhd","\\rhd","\\Join","\\doteq","\\doteqdot","\\Doteq","\\eqcirc","\\circeq","\\lessdot","\\gtrdot","\\measeq","\\eqdef","\\questeq"],1200),A("Logic",["\\leftrightarrow","\\Leftrightarrow","\\to"],4e3),A("Logic",["\\models","\\vdash"],3e3),A("Logic",["\\therefore","\\because","\\implies","\\gets","\\dashv","\\impliedby","\\biconditional","\\roundimplies"],1200),A("Operators",["+","-","*","\\cdot"],4e3),A("Operators",["\\sqrt"],4e3,"$0{\\placeholder{}}"),A("Operators",["\\pm","\\mp","\\times","\\div","\\surd"],3e3),A("Operators",["\\ltimes","\\rtimes","\\leftthreetimes","\\rightthreetimes","\\intercal","\\dotplus","\\centerdot","\\doublebarwedge","\\divideontimes","\\divides"],1200),A("Logic",["\\wedge","\\vee","\\neg"],4e3),A("Logic",["\\lnot"],3e3),A("Logic",["\\land","\\lor","\\barwedge","\\veebar","\\nor","\\curlywedge","\\curlyvee"],1200),A("Greek",["\\alpha","\\beta","\\gamma","\\delta","\\epsilon","\\varepsilon","\\zeta","\\eta","\\theta","\\vartheta","\\iota","\\kappa","\\varkappa","\\lambda","\\mu","\\nu","\\xi","\\pi","\\varpi","\\rho","\\varrho","\\sigma","\\varsigma","\\tau","\\phi","\\varphi","\\upsilon","\\chi","\\psi","\\omega","\\Gamma","\\Delta","\\Theta","\\Lambda","\\Xi","\\Pi","\\Sigma","\\Upsilon","\\Phi","\\Psi","\\Omega","\\digamma","\\omicron"],3e3),A("Sets",["\\emptyset","\\varnothing","\\cap","\\cup","\\in","\\notin","\\subset","\\supset","\\subseteq","\\supseteq","\\sqsubseteq"],4e3),A("Sets",["\\setminus","\\not","\\ni","\\sqsupseteq","\\nsupseteqq","\\supsetneq","\\varsupsetneq","\\supsetneqq","\\varsupsetneqq"],3e3),A("Sets",["\\smallsetminus","\\complement","\\owns","\\subsetneq","\\varsubsetneq","\\subsetneqq","\\varsubsetneqq","\\nsubset","\\nsupset","\\nsubseteq","\\nsupseteq","\\nsubseteqq","\\subseteqq","\\Subset","\\sqsubset","\\supseteqq","\\Supset","\\sqsupset"],1200),A("Spacing",["\\space","\\quad","\\qquad"],3e3,'\\unicode{"203A}$0\\unicode{"2039}'),A("Spacing",["\\!","\\,","\\:","\\;","\\enskip","\\enspace"],1200,'\\unicode{"203A}$0\\unicode{"2039}'),A("Spacing",["\\hspace","\\hspace*"],1200,'\\unicode{"203A}$0{1em}\\unicode{"2039}'),A("Punctuation",["\\colon","\\cdotp","\\ldots","\\cdots","\\ddots","\\vdots","?","!",":",'"',",",".",";"],3e3),A("Punctuation",["\\mathellipsis","\\ldotp","\\Colon"],1200),A("Boxes",["\\square","\\Box"],3e3),A("Boxes",["\\blacksquare","\\boxminus","\\boxplus","\\boxtimes","\\boxdot"],1200),A("Circles",["\\circ","\\bullet","\\circleddash","\\oplus","\\otimes"],3e3),A("Circles",["\\bigcirc","\\circledast","\\ominus","\\circledcirc","\\oslash","\\circledS","\\circledR","\\odot"],1200),A("Triangles",["\\triangle","\\triangleq"],3e3),A("Triangles",["\\bigtriangleup","\\vartriangle","\\triangledown","\\bigtriangledown","\\triangleleft","\\vartriangleleft","\\trianglelefteq","\\ntriangleleft","\\ntrianglelefteq","\\triangleright","\\vartriangleright","\\trianglerighteq","\\ntriangleright","\\ntrianglerighteq","\\blacktriangle","\\blacktriangledown","\\blacktriangleleft","\\blacktriangleright"],1200),A("Shapes",["\\ast","\\star"],3e3),A("Shapes",["\\diamond","\\Diamond","\\lozenge","\\blacklozenge","\\bigstar"],1200);function tl(t){let e,a,i;return{c(){e=Me("math-field"),this.h()},l(o){e=Le(o,"MATH-FIELD",{class:!0}),Be(e).forEach(pe),this.h()},h(){Nr(e,"class","svelte-1ias2r2")},m(o,r){Wt(o,e,r),t[2](e),a||(i=La(e,"keydown",t[1]),a=!0)},p:qe,i:qe,o:qe,d(o){o&&pe(e),t[2](null),a=!1,i()}}}const al=13;function il(t,e,a){let i;const o=Fr();function r(s){s.keyCode===al&&s.shiftKey&&(s.preventDefault(),o("message",{cell:s.target.value}))}function n(s){Bo[s?"unshift":"push"](()=>{i=s,a(0,i)})}return[i,r,n]}class ol extends qa{constructor(e){super(),Ea(this,e,il,tl,Oa,{})}}function rl(t){let e;return{c(){e=Me("math-field"),this.h()},l(a){e=Le(a,"MATH-FIELD",{readonly:!0}),Be(e).forEach(pe),this.h()},h(){Nr(e,"readonly","")},m(a,i){Wt(a,e,i),t[2](e)},p:qe,i:qe,o:qe,d(a){a&&pe(e),t[2](null)}}}function nl(t,e,a){let{value:i}=e,o;Fn(()=>{o!==void 0&&o.setValue(i)});function r(n){Bo[n?"unshift":"push"](()=>{o=n,a(0,o)})}return t.$$set=n=>{"value"in n&&a(1,i=n.value)},[o,i,r]}class sl extends qa{constructor(e){super(),Ea(this,e,nl,rl,Oa,{value:1})}}function ll(t){let e,a,i,o;return{c(){e=Me("div"),a=Me("textarea"),this.h()},l(r){e=Le(r,"DIV",{class:!0,"data-replicated-cell":!0});var n=Be(e);a=Le(n,"TEXTAREA",{placeholder:!0,"data-gramm":!0,rows:!0,class:!0}),Be(a).forEach(pe),n.forEach(pe),this.h()},h(){de(a,"placeholder","Enter what you want to calculate"),de(a,"data-gramm","false"),de(a,"rows","1"),de(a,"class","svelte-1tr3wzu"),de(e,"class","grow-wrap svelte-1tr3wzu"),de(e,"data-replicated-cell",t[0])},m(r,n){Wt(r,e,n),ue(e,a),Io(a,t[0]),i||(o=[La(a,"input",t[2]),La(a,"keydown",t[1])],i=!0)},p(r,[n]){n&1&&Io(a,r[0]),n&1&&de(e,"data-replicated-cell",r[0])},i:qe,o:qe,d(r){r&&pe(e),i=!1,Pr(o)}}}const ul=13;function cl(t,e,a){let i="";const o=Fr();function r(s){s.keyCode===ul&&s.shiftKey&&(s.preventDefault(),o("message",{cell:i}))}function n(){i=this.value,a(0,i)}return[i,r,n]}class dl extends qa{constructor(e){super(),Ea(this,e,cl,ll,Oa,{})}}function Er(t){let e,a;return e=new dl({}),e.$on("message",t[2]),{c(){wi(e.$$.fragment)},l(i){_i(e.$$.fragment,i)},m(i,o){Si(e,i,o),a=!0},p:qe,i(i){a||(rt(e.$$.fragment,i),a=!0)},o(i){mt(e.$$.fragment,i),a=!1},d(i){Mi(e,i)}}}function Or(t){let e,a;return e=new ol({}),e.$on("message",t[2]),{c(){wi(e.$$.fragment)},l(i){_i(e.$$.fragment,i)},m(i,o){Si(e,i,o),a=!0},p:qe,i(i){a||(rt(e.$$.fragment,i),a=!0)},o(i){mt(e.$$.fragment,i),a=!1},d(i){Mi(e,i)}}}function pl(t){let e,a,i,o,r,n,s,l,u,c,d,p,h,m,b,y,x,k,g,f,_,w,T,C=t[0]==="natural_language"&&Er(t),K=t[0]==="latex"&&Or(t);function $(q){t[6](q)}let j={};return t[1]!==void 0&&(j.value=t[1]),g=new sl({props:j}),Bo.push(()=>Pn(g,"value",$,t[1])),{c(){e=Me("div"),C&&C.c(),a=Et(),K&&K.c(),i=Et(),o=Me("ul"),r=Me("li"),n=Me("div"),s=Me("input"),l=Et(),u=Me("label"),c=Ca("Natural Language"),d=Et(),p=Me("li"),h=Me("div"),m=Me("input"),b=Et(),y=Me("label"),x=Ca("Latex"),k=Et(),wi(g.$$.fragment),this.h()},l(q){e=Le(q,"DIV",{class:!0});var Y=Be(e);C&&C.l(Y),a=Ot(Y),K&&K.l(Y),i=Ot(Y),o=Le(Y,"UL",{class:!0});var ke=Be(o);r=Le(ke,"LI",{});var be=Be(r);n=Le(be,"DIV",{class:!0});var H=Be(n);s=Le(H,"INPUT",{id:!0,type:!0,name:!0}),l=Ot(H),u=Le(H,"LABEL",{for:!0,class:!0});var J=Be(u);c=Aa(J,"Natural Language"),J.forEach(pe),H.forEach(pe),be.forEach(pe),d=Ot(ke),p=Le(ke,"LI",{});var I=Be(p);h=Le(I,"DIV",{class:!0});var G=Be(h);m=Le(G,"INPUT",{id:!0,type:!0,name:!0}),b=Ot(G),y=Le(G,"LABEL",{for:!0,class:!0});var D=Be(y);x=Aa(D,"Latex"),D.forEach(pe),G.forEach(pe),I.forEach(pe),ke.forEach(pe),k=Ot(Y),_i(g.$$.fragment,Y),Y.forEach(pe),this.h()},h(){s.checked=!0,de(s,"id","natural-language"),de(s,"type","radio"),de(s,"name","list-radio"),de(u,"for","natural-language"),de(u,"class","w-full py-3 ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"),de(n,"class","flex items-center"),de(m,"id","latex"),de(m,"type","radio"),de(m,"name","list-radio"),de(y,"for","latex"),de(y,"class","w-full py-3 ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"),de(h,"class","flex items-center pl-3"),de(o,"class","items-center text-sm font-medium text-gray-900 bg-white sm:flex mt-0.5"),de(e,"class","w-full")},m(q,Y){Wt(q,e,Y),C&&C.m(e,null),ue(e,a),K&&K.m(e,null),ue(e,i),ue(e,o),ue(o,r),ue(r,n),ue(n,s),ue(n,l),ue(n,u),ue(u,c),ue(o,d),ue(o,p),ue(p,h),ue(h,m),ue(h,b),ue(h,y),ue(y,x),ue(e,k),Si(g,e,null),_=!0,w||(T=[La(s,"change",t[4]),La(m,"change",t[5])],w=!0)},p(q,[Y]){q[0]==="natural_language"?C?(C.p(q,Y),Y&1&&rt(C,1)):(C=Er(q),C.c(),rt(C,1),C.m(e,a)):C&&(Vo(),mt(C,1,1,()=>{C=null}),jo()),q[0]==="latex"?K?(K.p(q,Y),Y&1&&rt(K,1)):(K=Or(q),K.c(),rt(K,1),K.m(e,i)):K&&(Vo(),mt(K,1,1,()=>{K=null}),jo());const ke={};!f&&Y&2&&(f=!0,ke.value=q[1],Rn(()=>f=!1)),g.$set(ke)},i(q){_||(rt(C),rt(K),rt(g.$$.fragment,q),_=!0)},o(q){mt(C),mt(K),mt(g.$$.fragment,q),_=!1},d(q){q&&pe(e),C&&C.d(),K&&K.d(),Mi(g),w=!1,Pr(T)}}}function hl(t,e,a){let{alpha:i}=e,o="natural_language",r="";function n(c){const d=c.detail.cell.trim();if(d===""){a(1,r="");return}a(1,r=i.interpret(d+`
`))}const s=()=>a(0,o="natural_language"),l=()=>a(0,o="latex");function u(c){r=c,a(1,r)}return t.$$set=c=>{"alpha"in c&&a(3,i=c.alpha)},[o,r,n,i,s,l,u]}class ml extends qa{constructor(e){super(),Ea(this,e,hl,pl,Oa,{alpha:3})}}async function fl(){const t=new Module.Engine(10,"hello");return new Promise(e=>e(t))}function bl(){return fl()}function yl(t){let e,a=t[2].message+"",i;return{c(){e=Me("p"),i=Ca(a),this.h()},l(o){e=Le(o,"P",{style:!0});var r=Be(e);i=Aa(r,a),r.forEach(pe),this.h()},h(){jn(e,"color","red")},m(o,r){Wt(o,e,r),ue(e,i)},p:qe,i:qe,o:qe,d(o){o&&pe(e)}}}function gl(t){let e,a;return e=new ml({props:{alpha:t[1]}}),{c(){wi(e.$$.fragment)},l(i){_i(e.$$.fragment,i)},m(i,o){Si(e,i,o),a=!0},p:qe,i(i){a||(rt(e.$$.fragment,i),a=!0)},o(i){mt(e.$$.fragment,i),a=!1},d(i){Mi(e,i)}}}function vl(t){let e,a;return{c(){e=Me("p"),a=Ca("waiting...")},l(i){e=Le(i,"P",{});var o=Be(e);a=Aa(o,"waiting..."),o.forEach(pe)},m(i,o){Wt(i,e,o),ue(e,a)},p:qe,i:qe,o:qe,d(i){i&&pe(e)}}}function xl(t){let e,a,i,o,r,n,s={ctx:t,current:null,token:null,hasCatch:!0,pending:vl,then:gl,catch:yl,value:1,error:2,blocks:[,,,]};return In(t[0],s),{c(){e=Me("div"),a=Me("div"),i=Me("h1"),o=Ca("Alpha"),r=Et(),s.block.c(),this.h()},l(l){e=Le(l,"DIV",{class:!0});var u=Be(e);a=Le(u,"DIV",{class:!0});var c=Be(a);i=Le(c,"H1",{class:!0});var d=Be(i);o=Aa(d,"Alpha"),d.forEach(pe),r=Ot(c),s.block.l(c),c.forEach(pe),u.forEach(pe),this.h()},h(){de(i,"class","text-3xl text-center"),de(a,"class","flex flex-col w-3/6"),de(e,"class","flex flex-row justify-center mt-6")},m(l,u){Wt(l,e,u),ue(e,a),ue(a,i),ue(i,o),ue(a,r),s.block.m(a,s.anchor=null),s.mount=()=>a,s.anchor=null,n=!0},p(l,[u]){t=l,Vn(s,t,u)},i(l){n||(rt(s.block),n=!0)},o(l){for(let u=0;u<3;u+=1){const c=s.blocks[u];mt(c)}n=!1},d(l){l&&pe(e),s.block.d(),s.token=null,s=null}}}function kl(t){return[bl()]}class _l extends qa{constructor(e){super(),Ea(this,e,kl,xl,Oa,{})}}export{_l as default};
